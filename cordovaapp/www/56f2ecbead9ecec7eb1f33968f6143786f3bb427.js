!function(){var e,t;(function(){t={}}).call(this),function(){(function(){var e=this,n=e._,r={},o=Array.prototype,a=Object.prototype,i=Function.prototype,s=o.push,c=o.slice,l=o.concat,u=a.toString,d=a.hasOwnProperty,h=o.forEach,p=o.map,f=o.reduce,m=o.reduceRight,g=o.filter,y=o.every,v=o.some,b=o.indexOf,w=o.lastIndexOf,_=Array.isArray,k=Object.keys,T=i.bind,x=function(e){return e instanceof x?e:this instanceof x?(this._wrapped=e,void 0):new x(e)};"undefined"!=typeof t?("undefined"!=typeof module&&module.exports&&(t=module.exports=x),t._=x):e._=x,x.VERSION="1.5.2";var S=function(e){return"[object Arguments]"===u.call(e)};S(arguments)||(S=function(e){return!(!e||!d.call(e,"callee")||"function"!=typeof e.callee)});var C=function(e){return e.length===+e.length&&(S(e)||e.constructor!==Object)},M=x.each=x.forEach=function(e,t,n){if(null!=e)if(h&&e.forEach===h)e.forEach(t,n);else if(C(e)){for(var o=0,a=e.length;a>o;o++)if(t.call(n,e[o],o,e)===r)return}else for(var i=x.keys(e),o=0,a=i.length;a>o;o++)if(t.call(n,e[i[o]],i[o],e)===r)return};x.map=x.collect=function(e,t,n){var r=[];return null==e?r:p&&e.map===p?e.map(t,n):(M(e,function(e,o,a){r.push(t.call(n,e,o,a))}),r)};var E="Reduce of empty array with no initial value";x.reduce=x.foldl=x.inject=function(e,t,n,r){var o=arguments.length>2;if(null==e&&(e=[]),f&&e.reduce===f)return r&&(t=x.bind(t,r)),o?e.reduce(t,n):e.reduce(t);if(M(e,function(e,a,i){o?n=t.call(r,n,e,a,i):(n=e,o=!0)}),!o)throw new TypeError(E);return n},x.reduceRight=x.foldr=function(e,t,n,r){var o=arguments.length>2;if(null==e&&(e=[]),m&&e.reduceRight===m)return r&&(t=x.bind(t,r)),o?e.reduceRight(t,n):e.reduceRight(t);var a=e.length;if(!C(e)){var i=x.keys(e);a=i.length}if(M(e,function(s,c,l){c=i?i[--a]:--a,o?n=t.call(r,n,e[c],c,l):(n=e[c],o=!0)}),!o)throw new TypeError(E);return n},x.find=x.detect=function(e,t,n){var r;return I(e,function(e,o,a){return t.call(n,e,o,a)?(r=e,!0):void 0}),r},x.filter=x.select=function(e,t,n){var r=[];return null==e?r:g&&e.filter===g?e.filter(t,n):(M(e,function(e,o,a){t.call(n,e,o,a)&&r.push(e)}),r)},x.reject=function(e,t,n){return x.filter(e,function(e,r,o){return!t.call(n,e,r,o)},n)},x.every=x.all=function(e,t,n){t||(t=x.identity);var o=!0;return null==e?o:y&&e.every===y?e.every(t,n):(M(e,function(e,a,i){return(o=o&&t.call(n,e,a,i))?void 0:r}),!!o)};var I=x.some=x.any=function(e,t,n){t||(t=x.identity);var o=!1;return null==e?o:v&&e.some===v?e.some(t,n):(M(e,function(e,a,i){return o||(o=t.call(n,e,a,i))?r:void 0}),!!o)};x.contains=x.include=function(e,t){return null==e?!1:b&&e.indexOf===b?-1!=e.indexOf(t):I(e,function(e){return e===t})},x.invoke=function(e,t){var n=c.call(arguments,2),r=x.isFunction(t);return x.map(e,function(e){return(r?t:e[t]).apply(e,n)})},x.pluck=function(e,t){return x.map(e,function(e){return e[t]})},x.where=function(e,t,n){return x.isEmpty(t)?n?void 0:[]:x[n?"find":"filter"](e,function(e){for(var n in t)if(t[n]!==e[n])return!1;return!0})},x.findWhere=function(e,t){return x.where(e,t,!0)},x.max=function(e,t,n){if(!t&&x.isArray(e)&&e[0]===+e[0]&&e.length<65535)return Math.max.apply(Math,e);if(!t&&x.isEmpty(e))return-1/0;var r={computed:-1/0,value:-1/0};return M(e,function(e,o,a){var i=t?t.call(n,e,o,a):e;i>r.computed&&(r={value:e,computed:i})}),r.value},x.min=function(e,t,n){if(!t&&x.isArray(e)&&e[0]===+e[0]&&e.length<65535)return Math.min.apply(Math,e);if(!t&&x.isEmpty(e))return 1/0;var r={computed:1/0,value:1/0};return M(e,function(e,o,a){var i=t?t.call(n,e,o,a):e;i<r.computed&&(r={value:e,computed:i})}),r.value},x.shuffle=function(e){var t,n=0,r=[];return M(e,function(e){t=x.random(n++),r[n-1]=r[t],r[t]=e}),r},x.sample=function(e,t,n){return arguments.length<2||n?e[x.random(e.length-1)]:x.shuffle(e).slice(0,Math.max(0,t))};var A=function(e){return x.isFunction(e)?e:function(t){return t[e]}};x.sortBy=function(e,t,n){var r=A(t);return x.pluck(x.map(e,function(e,t,o){return{value:e,index:t,criteria:r.call(n,e,t,o)}}).sort(function(e,t){var n=e.criteria,r=t.criteria;if(n!==r){if(n>r||void 0===n)return 1;if(r>n||void 0===r)return-1}return e.index-t.index}),"value")};var O=function(e){return function(t,n,r){var o={},a=null==n?x.identity:A(n);return M(t,function(n,i){var s=a.call(r,n,i,t);e(o,s,n)}),o}};x.groupBy=O(function(e,t,n){(x.has(e,t)?e[t]:e[t]=[]).push(n)}),x.indexBy=O(function(e,t,n){e[t]=n}),x.countBy=O(function(e,t){x.has(e,t)?e[t]++:e[t]=1}),x.sortedIndex=function(e,t,n,r){n=null==n?x.identity:A(n);for(var o=n.call(r,t),a=0,i=e.length;i>a;){var s=a+i>>>1;n.call(r,e[s])<o?a=s+1:i=s}return a},x.toArray=function(e){return e?x.isArray(e)?c.call(e):C(e)?x.map(e,x.identity):x.values(e):[]},x.size=function(e){return null==e?0:C(e)?e.length:x.keys(e).length},x.first=x.head=x.take=function(e,t,n){return null==e?void 0:null==t||n?e[0]:c.call(e,0,t)},x.initial=function(e,t,n){return c.call(e,0,e.length-(null==t||n?1:t))},x.last=function(e,t,n){return null==e?void 0:null==t||n?e[e.length-1]:c.call(e,Math.max(e.length-t,0))},x.rest=x.tail=x.drop=function(e,t,n){return c.call(e,null==t||n?1:t)},x.compact=function(e){return x.filter(e,x.identity)};var j=function(e,t,n){return t&&x.every(e,x.isArray)?l.apply(n,e):(M(e,function(e){x.isArray(e)||x.isArguments(e)?t?s.apply(n,e):j(e,t,n):n.push(e)}),n)};x.flatten=function(e,t){return j(e,t,[])},x.without=function(e){return x.difference(e,c.call(arguments,1))},x.uniq=x.unique=function(e,t,n,r){x.isFunction(t)&&(r=n,n=t,t=!1);var o=n?x.map(e,n,r):e,a=[],i=[];return M(o,function(n,r){(t?r&&i[i.length-1]===n:x.contains(i,n))||(i.push(n),a.push(e[r]))}),a},x.union=function(){return x.uniq(x.flatten(arguments,!0))},x.intersection=function(e){var t=c.call(arguments,1);return x.filter(x.uniq(e),function(e){return x.every(t,function(t){return x.indexOf(t,e)>=0})})},x.difference=function(e){var t=l.apply(o,c.call(arguments,1));return x.filter(e,function(e){return!x.contains(t,e)})},x.zip=function(){for(var e=x.max(x.pluck(arguments,"length").concat(0)),t=new Array(e),n=0;e>n;n++)t[n]=x.pluck(arguments,""+n);return t},x.object=function(e,t){if(null==e)return{};for(var n={},r=0,o=e.length;o>r;r++)t?n[e[r]]=t[r]:n[e[r][0]]=e[r][1];return n},x.indexOf=function(e,t,n){if(null==e)return-1;var r=0,o=e.length;if(n){if("number"!=typeof n)return r=x.sortedIndex(e,t),e[r]===t?r:-1;r=0>n?Math.max(0,o+n):n}if(b&&e.indexOf===b)return e.indexOf(t,n);for(;o>r;r++)if(e[r]===t)return r;return-1},x.lastIndexOf=function(e,t,n){if(null==e)return-1;var r=null!=n;if(w&&e.lastIndexOf===w)return r?e.lastIndexOf(t,n):e.lastIndexOf(t);for(var o=r?n:e.length;o--;)if(e[o]===t)return o;return-1},x.range=function(e,t,n){arguments.length<=1&&(t=e||0,e=0),n=arguments[2]||1;for(var r=Math.max(Math.ceil((t-e)/n),0),o=0,a=new Array(r);r>o;)a[o++]=e,e+=n;return a};var P=function(){};x.bind=function(e,t){var n,r;if(T&&e.bind===T)return T.apply(e,c.call(arguments,1));if(!x.isFunction(e))throw new TypeError;return n=c.call(arguments,2),r=function(){if(!(this instanceof r))return e.apply(t,n.concat(c.call(arguments)));P.prototype=e.prototype;var o=new P;P.prototype=null;var a=e.apply(o,n.concat(c.call(arguments)));return Object(a)===a?a:o}},x.partial=function(e){var t=c.call(arguments,1);return function(){return e.apply(this,t.concat(c.call(arguments)))}},x.bindAll=function(e){var t=c.call(arguments,1);if(0===t.length)throw new Error("bindAll must be passed function names");return M(t,function(t){e[t]=x.bind(e[t],e)}),e},x.memoize=function(e,t){var n={};return t||(t=x.identity),function(){var r=t.apply(this,arguments);return x.has(n,r)?n[r]:n[r]=e.apply(this,arguments)}},x.delay=function(e,t){var n=c.call(arguments,2);return setTimeout(function(){return e.apply(null,n)},t)},x.defer=function(e){return x.delay.apply(x,[e,1].concat(c.call(arguments,1)))},x.throttle=function(e,t,n){var r,o,a,i=null,s=0;n||(n={});var c=function(){s=n.leading===!1?0:new Date,i=null,a=e.apply(r,o)};return function(){var l=new Date;s||n.leading!==!1||(s=l);var u=t-(l-s);return r=this,o=arguments,0>=u?(clearTimeout(i),i=null,s=l,a=e.apply(r,o)):i||n.trailing===!1||(i=setTimeout(c,u)),a}},x.debounce=function(e,t,n){var r,o,a,i,s;return function(){a=this,o=arguments,i=new Date;var c=function(){var l=new Date-i;t>l?r=setTimeout(c,t-l):(r=null,n||(s=e.apply(a,o)))},l=n&&!r;return r||(r=setTimeout(c,t)),l&&(s=e.apply(a,o)),s}},x.once=function(e){var t,n=!1;return function(){return n?t:(n=!0,t=e.apply(this,arguments),e=null,t)}},x.wrap=function(e,t){return function(){var n=[e];return s.apply(n,arguments),t.apply(this,n)}},x.compose=function(){var e=arguments;return function(){for(var t=arguments,n=e.length-1;n>=0;n--)t=[e[n].apply(this,t)];return t[0]}},x.after=function(e,t){return function(){return--e<1?t.apply(this,arguments):void 0}},x.keys=k||function(e){if(e!==Object(e))throw new TypeError("Invalid object");var t=[];for(var n in e)x.has(e,n)&&t.push(n);return t},x.values=function(e){for(var t=x.keys(e),n=t.length,r=new Array(n),o=0;n>o;o++)r[o]=e[t[o]];return r},x.pairs=function(e){for(var t=x.keys(e),n=t.length,r=new Array(n),o=0;n>o;o++)r[o]=[t[o],e[t[o]]];return r},x.invert=function(e){for(var t={},n=x.keys(e),r=0,o=n.length;o>r;r++)t[e[n[r]]]=n[r];return t},x.functions=x.methods=function(e){var t=[];for(var n in e)x.isFunction(e[n])&&t.push(n);return t.sort()},x.extend=function(e){return M(c.call(arguments,1),function(t){if(t)for(var n in t)e[n]=t[n]}),e},x.pick=function(e){var t={},n=l.apply(o,c.call(arguments,1));return M(n,function(n){n in e&&(t[n]=e[n])}),t},x.omit=function(e){var t={},n=l.apply(o,c.call(arguments,1));for(var r in e)x.contains(n,r)||(t[r]=e[r]);return t},x.defaults=function(e){return M(c.call(arguments,1),function(t){if(t)for(var n in t)void 0===e[n]&&(e[n]=t[n])}),e},x.clone=function(e){return x.isObject(e)?x.isArray(e)?e.slice():x.extend({},e):e},x.tap=function(e,t){return t(e),e};var N=function(e,t,n,r){if(e===t)return 0!==e||1/e==1/t;if(null==e||null==t)return e===t;e instanceof x&&(e=e._wrapped),t instanceof x&&(t=t._wrapped);var o=u.call(e);if(o!=u.call(t))return!1;switch(o){case"[object String]":return e==String(t);case"[object Number]":return e!=+e?t!=+t:0==e?1/e==1/t:e==+t;case"[object Date]":case"[object Boolean]":return+e==+t;case"[object RegExp]":return e.source==t.source&&e.global==t.global&&e.multiline==t.multiline&&e.ignoreCase==t.ignoreCase}if("object"!=typeof e||"object"!=typeof t)return!1;for(var a=n.length;a--;)if(n[a]==e)return r[a]==t;var i=e.constructor,s=t.constructor;if(i!==s&&!(x.isFunction(i)&&i instanceof i&&x.isFunction(s)&&s instanceof s))return!1;n.push(e),r.push(t);var c=0,l=!0;if("[object Array]"==o){if(c=e.length,l=c==t.length)for(;c--&&(l=N(e[c],t[c],n,r)););}else{for(var d in e)if(x.has(e,d)&&(c++,!(l=x.has(t,d)&&N(e[d],t[d],n,r))))break;if(l){for(d in t)if(x.has(t,d)&&!c--)break;l=!c}}return n.pop(),r.pop(),l};x.isEqual=function(e,t){return N(e,t,[],[])},x.isEmpty=function(e){if(null==e)return!0;if(x.isArray(e)||x.isString(e))return 0===e.length;for(var t in e)if(x.has(e,t))return!1;return!0},x.isElement=function(e){return!(!e||1!==e.nodeType)},x.isArray=_||function(e){return"[object Array]"==u.call(e)},x.isObject=function(e){return e===Object(e)},M(["Arguments","Function","String","Number","Date","RegExp"],function(e){x["is"+e]=function(t){return u.call(t)=="[object "+e+"]"}}),x.isArguments(arguments)||(x.isArguments=function(e){return!(!e||!x.has(e,"callee"))}),"function"!=typeof/./&&(x.isFunction=function(e){return"function"==typeof e}),x.isFinite=function(e){return isFinite(e)&&!isNaN(parseFloat(e))},x.isNaN=function(e){return x.isNumber(e)&&e!=+e},x.isBoolean=function(e){return e===!0||e===!1||"[object Boolean]"==u.call(e)},x.isNull=function(e){return null===e},x.isUndefined=function(e){return void 0===e},x.has=function(e,t){return d.call(e,t)},x.noConflict=function(){return e._=n,this},x.identity=function(e){return e},x.times=function(e,t,n){for(var r=Array(Math.max(0,e)),o=0;e>o;o++)r[o]=t.call(n,o);return r},x.random=function(e,t){return null==t&&(t=e,e=0),e+Math.floor(Math.random()*(t-e+1))};var D={escape:{"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;"}};D.unescape=x.invert(D.escape);var R={escape:new RegExp("["+x.keys(D.escape).join("")+"]","g"),unescape:new RegExp("("+x.keys(D.unescape).join("|")+")","g")};x.each(["escape","unescape"],function(e){x[e]=function(t){return null==t?"":(""+t).replace(R[e],function(t){return D[e][t]})}}),x.result=function(e,t){if(null==e)return void 0;var n=e[t];return x.isFunction(n)?n.call(e):n},x.mixin=function(e){M(x.functions(e),function(t){var n=x[t]=e[t];x.prototype[t]=function(){var e=[this._wrapped];return s.apply(e,arguments),H.call(this,n.apply(x,e))}})};var L=0;x.uniqueId=function(e){var t=++L+"";return e?e+t:t},x.templateSettings={evaluate:/<%([\s\S]+?)%>/g,interpolate:/<%=([\s\S]+?)%>/g,escape:/<%-([\s\S]+?)%>/g};var q=/(.)^/,F={"'":"'","\\":"\\","\r":"r","\n":"n","	":"t","\u2028":"u2028","\u2029":"u2029"},B=/\\|'|\r|\n|\t|\u2028|\u2029/g;x.template=function(e,t,n){var r;n=x.defaults({},n,x.templateSettings);var o=new RegExp([(n.escape||q).source,(n.interpolate||q).source,(n.evaluate||q).source].join("|")+"|$","g"),a=0,i="__p+='";e.replace(o,function(t,n,r,o,s){return i+=e.slice(a,s).replace(B,function(e){return"\\"+F[e]}),n&&(i+="'+\n((__t=("+n+"))==null?'':_.escape(__t))+\n'"),r&&(i+="'+\n((__t=("+r+"))==null?'':__t)+\n'"),o&&(i+="';\n"+o+"\n__p+='"),a=s+t.length,t}),i+="';\n",n.variable||(i="with(obj||{}){\n"+i+"}\n"),i="var __t,__p='',__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,'');};\n"+i+"return __p;\n";try{r=new Function(n.variable||"obj","_",i)}catch(s){throw s.source=i,s}if(t)return r(t,x);var c=function(e){return r.call(this,e,x)};return c.source="function("+(n.variable||"obj")+"){\n"+i+"}",c},x.chain=function(e){return x(e).chain()};var H=function(e){return this._chain?x(e).chain():e};x.mixin(x),M(["pop","push","reverse","shift","sort","splice","unshift"],function(e){var t=o[e];x.prototype[e]=function(){var n=this._wrapped;return t.apply(n,arguments),"shift"!=e&&"splice"!=e||0!==n.length||delete n[0],H.call(this,n)}}),M(["concat","join","slice"],function(e){var t=o[e];x.prototype[e]=function(){return H.call(this,t.apply(this._wrapped,arguments))}}),x.extend(x.prototype,{chain:function(){return this._chain=!0,this},value:function(){return this._wrapped}})}).call(this)}.call(this),function(){e=t._}.call(this),"undefined"==typeof Package&&(Package={}),Package.underscore={_:e}}(),function(){var e,t=Package.underscore._;(function(){e={isClient:!0,isServer:!1},"object"==typeof __meteor_runtime_config__&&__meteor_runtime_config__.PUBLIC_SETTINGS&&(e.settings={"public":__meteor_runtime_config__.PUBLIC_SETTINGS})}).call(this),function(){if(e.isServer)var n=Npm.require("fibers/future");"object"==typeof __meteor_runtime_config__&&__meteor_runtime_config__.meteorRelease&&(e.release=__meteor_runtime_config__.meteorRelease),t.extend(e,{_get:function(e){for(var t=1;t<arguments.length;t++){if(!(arguments[t]in e))return void 0;e=e[arguments[t]]}return e},_ensure:function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];n in e||(e[n]={}),e=e[n]}return e},_delete:function(e){for(var t=[e],n=!0,r=1;r<arguments.length-1;r++){var o=arguments[r];if(!(o in e)){n=!1;break}if(e=e[o],"object"!=typeof e)break;t.push(e)}for(var r=t.length-1;r>=0;r--){var o=arguments[r+1];if(n)n=!1;else for(var a in t[r][o])return;delete t[r][o]}},_wrapAsync:function(r){return function(){for(var o,a,i=this,s=t.toArray(arguments),c=function(t){return t?e._debug("Exception in callback of async function",t.stack?t.stack:t):void 0};s.length>0&&"undefined"==typeof s[s.length-1];)s.pop();s.length>0&&s[s.length-1]instanceof Function?o=s.pop():e.isClient?o=c:(a=new n,o=a.resolver()),s.push(e.bindEnvironment(o));var l=r.apply(i,s);return a?a.wait():l}}})}.call(this),function(){"use strict";function t(){if(o.setImmediate){var e=function(e){o.setImmediate(e)};return e.implementation="setImmediate",e}return null}function n(){function e(e,t){return"string"==typeof e&&e.substring(0,t.length)===t}function t(t){if(t.source===o&&e(t.data,s)){var n=t.data.substring(s.length);try{i[n]&&i[n]()}finally{delete i[n]}}}if(!o.postMessage||o.importScripts)return null;var n=!0,r=o.onmessage;if(o.onmessage=function(){n=!1},o.postMessage("","*"),o.onmessage=r,!n)return null;var a=0,i={},s="Meteor._setImmediate."+Math.random()+".";o.addEventListener?o.addEventListener("message",t,!1):o.attachEvent("onmessage",t);var c=function(e){++a,i[a]=e,o.postMessage(s+a,"*")};return c.implementation="postMessage",c}function r(){var e=function(e){o.setTimeout(e,0)};return e.implementation="setTimeout",e}var o=this;e._setImmediate=t()||n()||r()}.call(this),function(){var n=function(e){if(Package.livedata){var t=Package.livedata.DDP._CurrentInvocation;if(t.get()&&t.get().isSimulation)throw new Error("Can't set timers inside simulations");return function(){t.withValue(null,e)}}return e},r=function(t,r){return e.bindEnvironment(n(r),t)};t.extend(e,{setTimeout:function(e,t){return setTimeout(r("setTimeout callback",e),t)},setInterval:function(e,t){return setInterval(r("setInterval callback",e),t)},clearInterval:function(e){return clearInterval(e)},clearTimeout:function(e){return clearTimeout(e)},defer:function(t){e._setImmediate(r("defer callback",t))}})}.call(this),function(){var t=function(e,t){var n=function(){};n.prototype=t.prototype,e.prototype=new n,e.prototype.constructor=e};e.makeErrorType=function(e,n){var r=function(){var t=this;if(Error.captureStackTrace)Error.captureStackTrace(t,r);else{var o=new Error;o.__proto__=r.prototype,o instanceof r&&(t=o)}return n.apply(t,arguments),t.errorType=e,t};return t(r,Error),r},e.Error=e.makeErrorType("Meteor.Error",function(e,t,n){var r=this;r.error=e,r.reason=t,r.details=n,r.message=r.reason?r.reason+" ["+r.error+"]":"["+r.error+"]"}),e.Error.prototype.clone=function(){var t=this;return new e.Error(t.error,t.reason,t.details)}}.call(this),function(){e._noYieldsAllowed=function(e){return e()},e._SynchronousQueue=function(){var e=this;e._tasks=[],e._running=!1},t.extend(e._SynchronousQueue.prototype,{runTask:function(n){var r=this;if(!r.safeToRunTask())throw new Error("Could not synchronously run a task from a running task");r._tasks.push(n);var o=r._tasks;r._tasks=[],r._running=!0;try{for(;!t.isEmpty(o);){var a=o.shift();try{a()}catch(i){if(t.isEmpty(o))throw i;e._debug("Exception in queued task: "+i.stack)}}}finally{r._running=!1}},queueTask:function(e){var n=this,r=t.isEmpty(n._tasks);n._tasks.push(e),r&&setTimeout(t.bind(n.flush,n),0)},flush:function(){var e=this;e.runTask(function(){})},drain:function(){var e=this;if(e.safeToRunTask())for(;!t.isEmpty(e._tasks);)e.flush()},safeToRunTask:function(){var e=this;return!e._running}})}.call(this),function(){var t=[],n="loaded"===document.readyState||"complete"==document.readyState,r=function(){for(n=!0;t.length;)t.shift()()};document.addEventListener?(document.addEventListener("DOMContentLoaded",r,!1),window.addEventListener("load",r,!1)):(document.attachEvent("onreadystatechange",function(){"complete"===document.readyState&&r()}),window.attachEvent("load",r)),e.startup=function(r){var o=!document.addEventListener&&document.documentElement.doScroll;if(o&&window===top){try{o("left")}catch(a){return setTimeout(function(){e.startup(r)},50),void 0}r()}else n?r():t.push(r)}}.call(this),function(){var t=0;e._debug=function(){if(t)return t--,void 0;if("undefined"!=typeof console&&"undefined"!=typeof console.log)if(0==arguments.length)console.log("");else if("function"==typeof console.log.apply){for(var e=!0,n=0;n<arguments.length;n++)"string"!=typeof arguments[n]&&(e=!1);e?console.log.apply(console,[Array.prototype.join.call(arguments," ")]):console.log.apply(console,arguments)}else if("function"==typeof Function.prototype.bind){var r=Function.prototype.bind.call(console.log,console);r.apply(console,arguments)}else Function.prototype.call.call(console.log,console,Array.prototype.slice.call(arguments))},e._suppress_log=function(e){t+=e}}.call(this),function(){var n=0,r=[];e.EnvironmentVariable=function(){this.slot=n++},t.extend(e.EnvironmentVariable.prototype,{get:function(){return r[this.slot]},withValue:function(e,t){var n=r[this.slot];try{r[this.slot]=e;var o=t()}finally{r[this.slot]=n}return o}}),e.bindEnvironment=function(n,o,a){var i=t.clone(r);if(!o||"string"==typeof o){var s=o||"callback of async function";o=function(t){e._debug("Exception in "+s+":",t&&t.stack||t)}}return function(){var e=r;try{r=i;var s=n.apply(a,t.toArray(arguments))}catch(c){o(c)}finally{r=e}return s}}}.call(this),function(){e.absoluteUrl=function(n,r){r||"object"!=typeof n||(r=n,n=void 0),r=t.extend({},e.absoluteUrl.defaultOptions,r||{});var o=r.rootUrl;if(!o)throw new Error("Must pass options.rootUrl or set ROOT_URL in the server environment");return/^http[s]?:\/\//i.test(o)||(o="http://"+o),/\/$/.test(o)||(o+="/"),n&&(o+=n),r.secure&&/^http:/.test(o)&&!/http:\/\/localhost[:\/]/.test(o)&&!/http:\/\/127\.0\.0\.1[:\/]/.test(o)&&(o=o.replace(/^http:/,"https:")),r.replaceLocalhost&&(o=o.replace(/^http:\/\/localhost([:\/].*)/,"http://127.0.0.1$1")),o},e.absoluteUrl.defaultOptions={},"object"==typeof __meteor_runtime_config__&&__meteor_runtime_config__.ROOT_URL&&(e.absoluteUrl.defaultOptions.rootUrl=__meteor_runtime_config__.ROOT_URL),e._relativeToSiteRootUrl=function(e){return"object"==typeof __meteor_runtime_config__&&"/"===e.substr(0,1)&&(e=(__meteor_runtime_config__.ROOT_URL_PATH_PREFIX||"")+e),e}}.call(this),"undefined"==typeof Package&&(Package={}),Package.meteor={Meteor:e}}(),function(){var Meteor=Package.meteor.Meteor,JSON;(function(){window.JSON&&(JSON=window.JSON)}).call(this),function(){"object"!=typeof JSON&&(JSON={}),function(){"use strict";function f(e){return 10>e?"0"+e:e}function quote(e){return escapable.lastIndex=0,escapable.test(e)?'"'+e.replace(escapable,function(e){var t=meta[e];return"string"==typeof t?t:"\\u"+("0000"+e.charCodeAt(0).toString(16)).slice(-4)})+'"':'"'+e+'"'}function str(e,t){var n,r,o,a,i,s=gap,c=t[e];switch(c&&"object"==typeof c&&"function"==typeof c.toJSON&&(c=c.toJSON(e)),"function"==typeof rep&&(c=rep.call(t,e,c)),typeof c){case"string":return quote(c);case"number":return isFinite(c)?String(c):"null";case"boolean":case"null":return String(c);case"object":if(!c)return"null";if(gap+=indent,i=[],"[object Array]"===Object.prototype.toString.apply(c)){for(a=c.length,n=0;a>n;n+=1)i[n]=str(n,c)||"null";return o=0===i.length?"[]":gap?"[\n"+gap+i.join(",\n"+gap)+"\n"+s+"]":"["+i.join(",")+"]",gap=s,o}if(rep&&"object"==typeof rep)for(a=rep.length,n=0;a>n;n+=1)"string"==typeof rep[n]&&(r=rep[n],o=str(r,c),o&&i.push(quote(r)+(gap?": ":":")+o));else for(r in c)Object.prototype.hasOwnProperty.call(c,r)&&(o=str(r,c),o&&i.push(quote(r)+(gap?": ":":")+o));return o=0===i.length?"{}":gap?"{\n"+gap+i.join(",\n"+gap)+"\n"+s+"}":"{"+i.join(",")+"}",gap=s,o}}"function"!=typeof Date.prototype.toJSON&&(Date.prototype.toJSON=function(){return isFinite(this.valueOf())?this.getUTCFullYear()+"-"+f(this.getUTCMonth()+1)+"-"+f(this.getUTCDate())+"T"+f(this.getUTCHours())+":"+f(this.getUTCMinutes())+":"+f(this.getUTCSeconds())+"Z":null},String.prototype.toJSON=Number.prototype.toJSON=Boolean.prototype.toJSON=function(){return this.valueOf()});var cx=/[\u0000\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,escapable=/[\\\"\x00-\x1f\x7f-\x9f\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,gap,indent,meta={"\b":"\\b","	":"\\t","\n":"\\n","\f":"\\f","\r":"\\r",'"':'\\"',"\\":"\\\\"},rep;"function"!=typeof JSON.stringify&&(JSON.stringify=function(e,t,n){var r;if(gap="",indent="","number"==typeof n)for(r=0;n>r;r+=1)indent+=" ";else"string"==typeof n&&(indent=n);if(rep=t,t&&"function"!=typeof t&&("object"!=typeof t||"number"!=typeof t.length))throw new Error("JSON.stringify");return str("",{"":e})}),"function"!=typeof JSON.parse&&(JSON.parse=function(text,reviver){function walk(e,t){var n,r,o=e[t];if(o&&"object"==typeof o)for(n in o)Object.prototype.hasOwnProperty.call(o,n)&&(r=walk(o,n),void 0!==r?o[n]=r:delete o[n]);return reviver.call(e,t,o)}var j;if(text=String(text),cx.lastIndex=0,cx.test(text)&&(text=text.replace(cx,function(e){return"\\u"+("0000"+e.charCodeAt(0).toString(16)).slice(-4)})),/^[\],:{}\s]*$/.test(text.replace(/\\(?:["\\\/bfnrt]|u[0-9a-fA-F]{4})/g,"@").replace(/"[^"\\\n\r]*"|true|false|null|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,"]").replace(/(?:^|:|,)(?:\s*\[)+/g,"")))return j=eval("("+text+")"),"function"==typeof reviver?walk({"":j},""):j;throw new SyntaxError("JSON.parse")})}()}.call(this),"undefined"==typeof Package&&(Package={}),Package.json={JSON:JSON}}(),function(){var e,t,n,r,o=(Package.meteor.Meteor,Package.json.JSON),a=Package.underscore._;(function(){e={},t={};var i={};e.addType=function(e,t){if(a.has(i,e))throw new Error("Type "+e+" already present");i[e]=t};var s=function(e){return a.isNaN(e)||1/0===e||e===-1/0},c=[{matchJSONValue:function(e){return a.has(e,"$date")&&1===a.size(e)},matchObject:function(e){return e instanceof Date},toJSONValue:function(e){return{$date:e.getTime()}},fromJSONValue:function(e){return new Date(e.$date)}},{matchJSONValue:function(e){return a.has(e,"$InfNaN")&&1===a.size(e)},matchObject:s,toJSONValue:function(e){var t;return t=a.isNaN(e)?0:1/0===e?1:-1,{$InfNaN:t}},fromJSONValue:function(e){return e.$InfNaN/0}},{matchJSONValue:function(e){return a.has(e,"$binary")&&1===a.size(e)},matchObject:function(e){return"undefined"!=typeof Uint8Array&&e instanceof Uint8Array||e&&a.has(e,"$Uint8ArrayPolyfill")},toJSONValue:function(e){return{$binary:n(e)}},fromJSONValue:function(e){return r(e.$binary)}},{matchJSONValue:function(e){return a.has(e,"$escape")&&1===a.size(e)},matchObject:function(e){return a.isEmpty(e)||a.size(e)>2?!1:a.any(c,function(t){return t.matchJSONValue(e)})},toJSONValue:function(t){var n={};return a.each(t,function(t,r){n[r]=e.toJSONValue(t)}),{$escape:n}},fromJSONValue:function(t){var n={};return a.each(t.$escape,function(t,r){n[r]=e.fromJSONValue(t)}),n}},{matchJSONValue:function(e){return a.has(e,"$type")&&a.has(e,"$value")&&2===a.size(e)},matchObject:function(t){return e._isCustomType(t)},toJSONValue:function(e){return{$type:e.typeName(),$value:e.toJSONValue()}},fromJSONValue:function(e){var t=e.$type,n=i[t];return n(e.$value)}}];e._isCustomType=function(e){return e&&"function"==typeof e.toJSONValue&&"function"==typeof e.typeName&&a.has(i,e.typeName())};var l=e._adjustTypesToJSONValue=function(e){if(null===e)return null;var t=u(e);return void 0!==t?t:"object"!=typeof e?e:(a.each(e,function(t,n){if("object"==typeof t||void 0===t||s(t)){var r=u(t);return r?(e[n]=r,void 0):(l(t),void 0)}}),e)},u=function(e){for(var t=0;t<c.length;t++){var n=c[t];if(n.matchObject(e))return n.toJSONValue(e)}return void 0};e.toJSONValue=function(t){var n=u(t);return void 0!==n?n:("object"==typeof t&&(t=e.clone(t),l(t)),t)};var d=e._adjustTypesFromJSONValue=function(e){if(null===e)return null;var t=h(e);return t!==e?t:"object"!=typeof e?e:(a.each(e,function(t,n){if("object"==typeof t){var r=h(t);if(t!==r)return e[n]=r,void 0;d(t)}}),e)},h=function(e){if("object"==typeof e&&null!==e&&a.size(e)<=2&&a.all(e,function(e,t){return"string"==typeof t&&"$"===t.substr(0,1)}))for(var t=0;t<c.length;t++){var n=c[t];if(n.matchJSONValue(e))return n.fromJSONValue(e)}return e};e.fromJSONValue=function(t){var n=h(t);return n===t&&"object"==typeof t?(t=e.clone(t),d(t),t):n},e.stringify=function(t,n){var r=e.toJSONValue(t);return n&&(n.canonical||n.indent)?e._canonicalStringify(r,n):o.stringify(r)},e.parse=function(t){if("string"!=typeof t)throw new Error("EJSON.parse argument should be a string");return e.fromJSONValue(o.parse(t))},e.isBinary=function(e){return!!("undefined"!=typeof Uint8Array&&e instanceof Uint8Array||e&&e.$Uint8ArrayPolyfill)},e.equals=function(t,n,r){var o,i=!(!r||!r.keyOrderSensitive);if(t===n)return!0;if(a.isNaN(t)&&a.isNaN(n))return!0;if(!t||!n)return!1;if("object"!=typeof t||"object"!=typeof n)return!1;if(t instanceof Date&&n instanceof Date)return t.valueOf()===n.valueOf();if(e.isBinary(t)&&e.isBinary(n)){if(t.length!==n.length)return!1;for(o=0;o<t.length;o++)if(t[o]!==n[o])return!1;return!0}if("function"==typeof t.equals)return t.equals(n,r);if("function"==typeof n.equals)return n.equals(t,r);if(t instanceof Array){if(!(n instanceof Array))return!1;if(t.length!==n.length)return!1;for(o=0;o<t.length;o++)if(!e.equals(t[o],n[o],r))return!1;return!0}switch(e._isCustomType(t)+e._isCustomType(n)){case 1:return!1;case 2:return e.equals(e.toJSONValue(t),e.toJSONValue(n))}var s;if(i){var c=[];return a.each(n,function(e,t){c.push(t)}),o=0,s=a.all(t,function(t,a){return o>=c.length?!1:a!==c[o]?!1:e.equals(t,n[c[o]],r)?(o++,!0):!1}),s&&o===c.length}return o=0,s=a.all(t,function(t,i){return a.has(n,i)?e.equals(t,n[i],r)?(o++,!0):!1:!1}),s&&a.size(n)===o},e.clone=function(t){var n;if("object"!=typeof t)return t;if(null===t)return null;if(t instanceof Date)return new Date(t.getTime());if(e.isBinary(t)){n=e.newBinary(t.length);for(var r=0;r<t.length;r++)n[r]=t[r];return n}if(a.isArray(t)||a.isArguments(t)){for(n=[],r=0;r<t.length;r++)n[r]=e.clone(t[r]);return n}return"function"==typeof t.clone?t.clone():e._isCustomType(t)?e.fromJSONValue(e.clone(e.toJSONValue(t)),!0):(n={},a.each(t,function(t,r){n[r]=e.clone(t)}),n)}}).call(this),function(){function t(e){return o.stringify(e)}var n=function(e,r,o,i,s){var c,l,u,d,h=i,p=r[e];switch(typeof p){case"string":return t(p);case"number":return isFinite(p)?String(p):"null";case"boolean":return String(p);case"object":if(!p)return"null";if(h=i+o,d=[],a.isArray(p)||a.isArguments(p)){for(u=p.length,c=0;u>c;c+=1)d[c]=n(c,p,o,h,s)||"null";return l=0===d.length?"[]":h?"[\n"+h+d.join(",\n"+h)+"\n"+i+"]":"["+d.join(",")+"]"}var f=a.keys(p);return s&&(f=f.sort()),a.each(f,function(e){l=n(e,p,o,h,s),l&&d.push(t(e)+(h?": ":":")+l)}),l=0===d.length?"{}":h?"{\n"+h+d.join(",\n"+h)+"\n"+i+"}":"{"+d.join(",")+"}"}};e._canonicalStringify=function(e,t){if(t=a.extend({indent:"",canonical:!1},t),t.indent===!0)t.indent="  ";else if("number"==typeof t.indent){for(var r="",o=0;o<t.indent;o++)r+=" ";t.indent=r}return n("",{"":e},t.indent,"",t.canonical)}}.call(this),function(){for(var o="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",a={},i=0;i<o.length;i++)a[o.charAt(i)]=i;n=function(e){for(var t=[],n=null,r=null,o=null,a=null,i=0;i<e.length;i++)switch(i%3){case 0:n=e[i]>>2&63,r=(3&e[i])<<4;break;case 1:r|=e[i]>>4&15,o=(15&e[i])<<2;break;case 2:o|=e[i]>>6&3,a=63&e[i],t.push(s(n)),t.push(s(r)),t.push(s(o)),t.push(s(a)),n=null,r=null,o=null,a=null}return null!=n&&(t.push(s(n)),t.push(s(r)),null==o?t.push("="):t.push(s(o)),null==a&&t.push("=")),t.join("")};var s=function(e){return o.charAt(e)},c=function(e){return"="===e?-1:a[e]};e.newBinary=function(e){if("undefined"==typeof Uint8Array||"undefined"==typeof ArrayBuffer){for(var t=[],n=0;e>n;n++)t.push(0);return t.$Uint8ArrayPolyfill=!0,t}return new Uint8Array(new ArrayBuffer(e))},r=function(t){var n=Math.floor(3*t.length/4);"="==t.charAt(t.length-1)&&(n--,"="==t.charAt(t.length-2)&&n--);for(var r=e.newBinary(n),o=null,a=null,i=null,s=0,l=0;l<t.length;l++){var u=t.charAt(l),d=c(u);switch(l%4){case 0:if(0>d)throw new Error("invalid base64 string");o=d<<2;break;case 1:if(0>d)throw new Error("invalid base64 string");o|=d>>4,r[s++]=o,a=(15&d)<<4;break;case 2:d>=0&&(a|=d>>2,r[s++]=a,i=(3&d)<<6);break;case 3:d>=0&&(r[s++]=i|d)}}return r},t.base64Encode=n,t.base64Decode=r}.call(this),"undefined"==typeof Package&&(Package={}),Package.ejson={EJSON:e,EJSONTest:t}}(),function(){var e,t=Package.meteor.Meteor,n=Package.underscore._,r=Package.ejson.EJSON;(function(){e=function(){return e.info.apply(this,arguments)};var o=0,a=[],i=0;e._intercept=function(e){o+=e},e._suppress=function(e){i+=e},e._intercepted=function(){var e=a;return a=[],o=0,e},e.outputFormat="json";var s={debug:"green",warn:"magenta",error:"red"},c="blue",l=["time","timeInexact","level","file","line","program","originApp","satellite","stderr"],u=l.concat(["app","message"]),d=function(n){var r=e.format(n),o=n.level;
"undefined"!=typeof console&&console[o]?console[o](r):t._debug(r)};e._getCallerDetails=function(){var e=function(){var e=new Error,t=e.stack;return t},t=e();if(!t)return{};for(var n,r=t.split("\n"),o=1;o<r.length;++o){if(n=r[o],n.match(/^\s*at eval \(eval/))return{file:"eval"};if(!n.match(/packages\/logging(?:\/|(?::tests)?\.js)/))break}var a={},i=/(?:[@(]| at )([^(]+?):([0-9:]+)(?:\)|$)/.exec(n);return i?(a.line=i[2].split(":")[0],a.file=i[1].split("/").slice(-1)[0].split("?")[0],a):a},n.each(["debug","info","warn","error"],function(s){e[s]=function(c){if(i)return i--,void 0;var u=!1;o&&(o--,u=!0);var h=!n.isObject(c)||n.isRegExp(c)||n.isDate(c)?{message:new String(c).toString()}:c;if(n.each(l,function(e){if(h[e])throw new Error("Can't set '"+e+"' in log message")}),n.has(h,"message")&&!n.isString(h.message))throw new Error("The 'message' field in log objects must be a string");if(h.omitCallerDetails||(h=n.extend(e._getCallerDetails(),h)),h.time=new Date,h.level=s,"debug"!==s)if(u)a.push(r.stringify(h));else if(t.isServer)if("colored-text"===e.outputFormat)console.log(e.format(h,{color:!0}));else{if("json"!==e.outputFormat)throw new Error("Unknown logging output format: "+e.outputFormat);console.log(r.stringify(h))}else d(h)}}),e.parse=function(e){var t=null;if(e&&"{"===e.charAt(0))try{t=r.parse(e)}catch(n){}return t&&t.time&&t.time instanceof Date?t:null},e.format=function(e,o){e=r.clone(e),o=o||{};var a=e.time;if(!(a instanceof Date))throw new Error("'time' must be a Date object");var i=e.timeInexact,l=e.level||"info",d=e.file,h=e.line,p=e.app||"",f=e.originApp,m=e.message||"",g=e.program||"",y=e.satellite,v=e.stderr||"";n.each(u,function(t){delete e[t]}),n.isEmpty(e)||(m&&(m+=" "),m+=r.stringify(e));var b=function(e){return 10>e?"0"+e:e.toString()},w=function(e){return 100>e?"0"+b(e):e.toString()},_=a.getFullYear().toString()+b(a.getMonth()+1)+b(a.getDate()),k=b(a.getHours())+":"+b(a.getMinutes())+":"+b(a.getSeconds())+"."+w(a.getMilliseconds()),T="("+-((new Date).getTimezoneOffset()/60)+")",x="";p&&(x+=p),f&&f!==p&&(x+=" via "+f),x&&(x="["+x+"] ");var S=d&&h?["(",g?g+":":"",d,":",h,") "].join(""):"";y&&(S+=["[",y,"]"].join(""));var C=v?"(STDERR) ":"",M=[l.charAt(0).toUpperCase(),_,"-",k,T,i?"? ":" ",x,S,C].join(""),E=function(e,n){return o.color&&t.isServer&&n?Npm.require("cli-color")[n](e):e};return E(M,c)+E(m,s[l])},e.objFromText=function(e,t){var r={message:e,level:"info",time:new Date,timeInexact:!0};return n.extend(r,t)}}).call(this),"undefined"==typeof Package&&(Package={}),Package.logging={Log:e}}(),function(){var e,t=Package.meteor.Meteor,n=Package.underscore._,r=(Package.logging.Log,Package.json.JSON);(function(){var o,a="Meteor_Reload",i=3e4,s={};"undefined"!=typeof sessionStorage&&sessionStorage&&(o=sessionStorage.getItem(a),sessionStorage.removeItem(a)),o||(o="{}");var c={};try{c=r.parse(o),"object"!=typeof c&&(t._debug("Got bad data on reload. Ignoring."),c={})}catch(l){t._debug("Got invalid JSON on reload. Ignoring.")}c.reload&&"object"==typeof c.data&&c.time+i>(new Date).getTime()&&(s=c.data);var u=[];e={},e._onMigrate=function(e,t){t||(t=e,e=void 0),u.push({name:e,callback:t})},e._migrationData=function(e){return s[e]};var d=!1;e._reload=function(){if(!d){d=!0;var e=function(){n.defer(function(){for(var o={},i=n.clone(u);i.length;){var s=i.shift(),c=s.callback(e);if(!c[0])return;c.length>1&&s.name&&(o[s.name]=c[1])}try{var l=r.stringify({time:(new Date).getTime(),data:o,reload:!0})}catch(d){throw t._debug("Couldn't serialize data for migration",o),d}"undefined"!=typeof sessionStorage&&sessionStorage?sessionStorage.setItem(a,l):t._debug("Browser does not support sessionStorage. Not saving migration state."),window.location.reload()})};e()}}}).call(this),function(){t._reload={onMigrate:e._onMigrate,migrationData:e._migrationData,reload:e._reload}}.call(this),"undefined"==typeof Package&&(Package={}),Package.reload={Reload:e}}(),function(){var e,t=Package.meteor.Meteor,n=Package.underscore._;(function(){e={},e.active=!1,e.currentComputation=null;var r=function(t){e.currentComputation=t,e.active=!!t},o=function(){return"undefined"!=typeof t?t._debug:"undefined"!=typeof console&&console.log?console.log:function(){}},a=1,i=[],s=!1,c=!1,l=!1,u=[],d=function(){s||(setTimeout(e.flush,0),s=!0)},h=!1;e.Computation=function(e,t){if(!h)throw new Error("Deps.Computation constructor is private; use Deps.autorun");h=!1;var n=this;n.stopped=!1,n.invalidated=!1,n.firstRun=!0,n._id=a++,n._onInvalidateCallbacks=[],n._parent=t,n._func=e,n._recomputing=!1;var r=!0;try{n._compute(),r=!1}finally{n.firstRun=!1,r&&n.stop()}},n.extend(e.Computation.prototype,{onInvalidate:function(n){var r=this;if("function"!=typeof n)throw new Error("onInvalidate requires a function");var o=function(){e.nonreactive(function(){return t._noYieldsAllowed(function(){n(r)})})};r.invalidated?o():r._onInvalidateCallbacks.push(o)},invalidate:function(){var e=this;if(!e.invalidated){e._recomputing||e.stopped||(d(),i.push(this)),e.invalidated=!0;for(var t,n=0;t=e._onInvalidateCallbacks[n];n++)t();e._onInvalidateCallbacks=[]}},stop:function(){this.stopped||(this.stopped=!0,this.invalidate())},_compute:function(){var t=this;t.invalidated=!1;var n=e.currentComputation;r(t);l=!0;try{t._func(t)}finally{r(n),l=!1}},_recompute:function(){var e=this;for(e._recomputing=!0;e.invalidated&&!e.stopped;)try{e._compute()}catch(t){o()("Exception from Deps recompute:",t.stack||t.message)}e._recomputing=!1}}),e.Dependency=function(){this._dependentsById={}},n.extend(e.Dependency.prototype,{depend:function(t){if(!t){if(!e.active)return!1;t=e.currentComputation}var n=this,r=t._id;return r in n._dependentsById?!1:(n._dependentsById[r]=t,t.onInvalidate(function(){delete n._dependentsById[r]}),!0)},changed:function(){var e=this;for(var t in e._dependentsById)e._dependentsById[t].invalidate()},hasDependents:function(){var e=this;for(var t in e._dependentsById)return!0;return!1}}),n.extend(e,{flush:function(){if(c)throw new Error("Can't call Deps.flush while flushing");if(l)throw new Error("Can't flush inside Deps.autorun");for(c=!0,s=!0;i.length||u.length;){var e=i;i=[];for(var t,n=0;t=e[n];n++)t._recompute();if(u.length){var r=u.shift();try{r()}catch(a){o()("Exception from Deps afterFlush function:",a.stack||a.message)}}}c=!1,s=!1},autorun:function(r){if("function"!=typeof r)throw new Error("Deps.autorun requires a function argument");h=!0;var o=new e.Computation(function(e){t._noYieldsAllowed(n.bind(r,this,e))},e.currentComputation);return e.active&&e.onInvalidate(function(){o.stop()}),o},nonreactive:function(t){var n=e.currentComputation;r(null);try{return t()}finally{r(n)}},_makeNonreactive:function(t){if(t.$isNonreactive)return t;var r=function(){var r,o=this,a=n.toArray(arguments);return e.nonreactive(function(){r=t.apply(o,a)}),r};return r.$isNonreactive=!0,r},onInvalidate:function(t){if(!e.active)throw new Error("Deps.onInvalidate requires a currentComputation");e.currentComputation.onInvalidate(t)},afterFlush:function(e){u.push(e),d()}})}).call(this),function(){t.flush=e.flush,t.autorun=e.autorun,t.autosubscribe=e.autorun,e.depend=function(e){return e.depend()}}.call(this),"undefined"==typeof Package&&(Package={}),Package.deps={Deps:e}}(),function(){{var e,t=Package.meteor.Meteor;Package.underscore._}(function(){if(t.isServer)var n=Npm.require("crypto");var r=function(){function e(){var e=4022871197,t=function(t){t=t.toString();for(var n=0;n<t.length;n++){e+=t.charCodeAt(n);var r=.02519603282416938*e;e=r>>>0,r-=e,r*=e,e=r>>>0,r-=e,e+=4294967296*r}return 2.3283064365386963e-10*(e>>>0)};return t.version="Mash 0.9",t}return function(t){var n=0,r=0,o=0,a=1;0==t.length&&(t=[+new Date]);var i=e();n=i(" "),r=i(" "),o=i(" ");for(var s=0;s<t.length;s++)n-=i(t[s]),0>n&&(n+=1),r-=i(t[s]),0>r&&(r+=1),o-=i(t[s]),0>o&&(o+=1);i=null;var c=function(){var e=2091639*n+2.3283064365386963e-10*a;return n=r,r=o,o=e-(a=0|e)};return c.uint32=function(){return 4294967296*c()},c.fract53=function(){return c()+1.1102230246251565e-16*(2097152*c()|0)},c.version="Alea 0.9",c.args=t,c}(Array.prototype.slice.call(arguments))},o="23456789ABCDEFGHJKLMNPQRSTWXYZabcdefghijkmnopqrstuvwxyz",a=function(e){var t=this;void 0!==e&&(t.alea=r.apply(null,e))};a.prototype.fraction=function(){var e=this;if(e.alea)return e.alea();if(n){var t=parseInt(e.hexString(8),16);return 2.3283064365386963e-10*t}if("undefined"!=typeof window&&window.crypto&&window.crypto.getRandomValues){var r=new Uint32Array(1);return window.crypto.getRandomValues(r),2.3283064365386963e-10*r[0]}},a.prototype.hexString=function(e){var t=this;if(n&&!t.alea){var r,o=Math.ceil(e/2);try{r=n.randomBytes(o)}catch(a){r=n.pseudoRandomBytes(o)}var i=r.toString("hex");return i.substring(0,e)}for(var s=[],c=0;e>c;++c)s.push(t.choice("0123456789abcdef"));return s.join("")},a.prototype.id=function(){for(var e=[],t=this,n=0;17>n;n++)e[n]=t.choice(o);return e.join("")},a.prototype.choice=function(e){var t=Math.floor(this.fraction()*e.length);return"string"==typeof e?e.substr(t,1):e[t]};var i="undefined"!=typeof window&&window.innerHeight||"undefined"!=typeof document&&document.documentElement&&document.documentElement.clientHeight||"undefined"!=typeof document&&document.body&&document.body.clientHeight||1,s="undefined"!=typeof window&&window.innerWidth||"undefined"!=typeof document&&document.documentElement&&document.documentElement.clientWidth||"undefined"!=typeof document&&document.body&&document.body.clientWidth||1,c="undefined"!=typeof navigator&&navigator.userAgent||"";e=n||"undefined"!=typeof window&&window.crypto&&window.crypto.getRandomValues?new a:new a([new Date,i,s,c,Math.random()]),e.create=function(){return new a(arguments)}}).call(this),function(){t.uuid=function(){for(var t="0123456789abcdef",n=[],r=0;36>r;r++)n[r]=e.choice(t);n[14]="4",n[19]=t.substr(3&parseInt(n[19],16)|8,1),n[8]=n[13]=n[18]=n[23]="-";var o=n.join("");return o}}.call(this),"undefined"==typeof Package&&(Package={}),Package.random={Random:e}}(),function(){var e,t=(Package.meteor.Meteor,Package.underscore._),n=Package.random.Random;(function(){e=function(e){var n=this;t.extend(n,t.defaults(t.clone(e||{}),{baseTimeout:1e3,exponent:2.2,maxTimeout:3e5,minTimeout:10,minCount:2,fuzz:.5})),n.retryTimer=null},t.extend(e.prototype,{clear:function(){var e=this;e.retryTimer&&clearTimeout(e.retryTimer),e.retryTimer=null},_timeout:function(e){var t=this;if(e<t.minCount)return t.minTimeout;var r=Math.min(t.maxTimeout,t.baseTimeout*Math.pow(t.exponent,e));return r*=n.fraction()*t.fuzz+(1-t.fuzz/2)},retryLater:function(e,t){var n=this,r=n._timeout(e);return n.retryTimer&&clearTimeout(n.retryTimer),n.retryTimer=setTimeout(t,r),r}})}).call(this),"undefined"==typeof Package&&(Package={}),Package.retry={Retry:e}}(),function(){var e,t,n=Package.meteor.Meteor,r=Package.underscore._,o=Package.ejson.EJSON;(function(){var a=new n.EnvironmentVariable;e=function(e,n){var r=a.get();r&&r.checking(e);try{d(e,n)}catch(o){throw o instanceof t.Error&&o.path&&(o.message+=" in field "+o.path),o}},t={Optional:function(e){return new i(e)},OneOf:function(){return new s(r.toArray(arguments))},Any:["__any__"],Where:function(e){return new c(e)},ObjectIncluding:function(e){return new l(e)},Integer:["__integer__"],Error:n.makeErrorType("Match.Error",function(e){this.message="Match error: "+e,this.path="",this.sanitizedError=new n.Error(400,"Match failed")}),test:function(e,n){try{return d(e,n),!0}catch(r){if(r instanceof t.Error)return!1;throw r}},_failIfArgumentsAreNotAllChecked:function(e,t,n,r){var o=new h(n,r),i=a.withValue(o,function(){return e.apply(t,n)});return o.throwUnlessAllArgumentsHaveBeenChecked(),i}};var i=function(e){this.pattern=e},s=function(e){if(r.isEmpty(e))throw new Error("Must provide at least one choice to Match.OneOf");this.choices=e},c=function(e){this.condition=e},l=function(e){this.pattern=e},u=[[String,"string"],[Number,"number"],[Boolean,"boolean"],[void 0,"undefined"]],d=function(e,n){if(n!==t.Any){for(var a=0;a<u.length;++a)if(n===u[a][0]){if(typeof e===u[a][1])return;throw new t.Error("Expected "+u[a][1]+", got "+typeof e)}if(null===n){if(null===e)return;throw new t.Error("Expected null, got "+o.stringify(e))}if(n===t.Integer){if("number"==typeof e&&(0|e)===e)return;throw new t.Error("Expected Integer, got "+(e instanceof Object?o.stringify(e):e))}if(n===Object&&(n=t.ObjectIncluding({})),n instanceof Array){if(1!==n.length)throw Error("Bad pattern: arrays must have one type element"+o.stringify(n));if(!r.isArray(e)&&!r.isArguments(e))throw new t.Error("Expected array, got "+o.stringify(e));return r.each(e,function(e,r){try{d(e,n[0])}catch(o){throw o instanceof t.Error&&(o.path=f(r,o.path)),o}}),void 0}if(n instanceof c){if(n.condition(e))return;throw new t.Error("Failed Match.Where validation")}if(n instanceof i&&(n=t.OneOf(void 0,n.pattern)),n instanceof s){for(var a=0;a<n.choices.length;++a)try{return d(e,n.choices[a]),void 0}catch(h){if(!(h instanceof t.Error))throw h}throw new t.Error("Failed Match.OneOf or Match.Optional validation")}if(n instanceof Function){if(e instanceof n)return;throw new t.Error("Expected "+n.name)}var p=!1;if(n instanceof l&&(p=!0,n=n.pattern),"object"!=typeof n)throw Error("Bad pattern: unknown pattern type");if("object"!=typeof e)throw new t.Error("Expected object, got "+typeof e);if(null===e)throw new t.Error("Expected object, got null");if(e.constructor!==Object)throw new t.Error("Expected plain object");var m={},g={};r.each(n,function(e,t){e instanceof i?g[t]=e.pattern:m[t]=e}),r.each(e,function(e,n){try{if(r.has(m,n))d(e,m[n]),delete m[n];else if(r.has(g,n))d(e,g[n]);else if(!p)throw new t.Error("Unknown key")}catch(o){throw o instanceof t.Error&&(o.path=f(n,o.path)),o}}),r.each(m,function(e,n){throw new t.Error("Missing key '"+n+"'")})}},h=function(e,t){var n=this;n.args=r.clone(e),n.args.reverse(),n.description=t};r.extend(h.prototype,{checking:function(e){var t=this;t._checkingOneValue(e)||(r.isArray(e)||r.isArguments(e))&&r.each(e,r.bind(t._checkingOneValue,t))},_checkingOneValue:function(e){for(var t=this,n=0;n<t.args.length;++n)if(e===t.args[n])return t.args.splice(n,1),!0;return!1},throwUnlessAllArgumentsHaveBeenChecked:function(){var e=this;if(!r.isEmpty(e.args))throw new Error("Did not check() all arguments during "+e.description)}});var p=["do","if","in","for","let","new","try","var","case","else","enum","eval","false","null","this","true","void","with","break","catch","class","const","super","throw","while","yield","delete","export","import","public","return","static","switch","typeof","default","extends","finally","package","private","continue","debugger","function","arguments","interface","protected","implements","instanceof"],f=function(e,t){return"number"==typeof e||e.match(/^[0-9]+$/)?e="["+e+"]":(!e.match(/^[a-z_$][0-9a-z_$]*$/i)||r.contains(p,e))&&(e=JSON.stringify([e])),t&&"["!==t[0]?e+"."+t:e+t}}).call(this),"undefined"==typeof Package&&(Package={}),Package.check={check:e,Match:t}}(),function(){var e,t=(Package.meteor.Meteor,Package.underscore._);(function(){var n=function(e,t,n,r){return{key:e,value:t,next:n,prev:r}};e=function(){var e=this;e._dict={},e._first=null,e._last=null,e._size=0;var n=t.toArray(arguments);e._stringify=function(e){return e},"function"==typeof n[0]&&(e._stringify=n.shift()),t.each(n,function(t){e.putBefore(t[0],t[1],null)})},t.extend(e.prototype,{_k:function(e){return" "+this._stringify(e)},empty:function(){var e=this;return!e._first},size:function(){var e=this;return e._size},_linkEltIn:function(e){var t=this;e.next?(e.prev=e.next.prev,e.next.prev=e,e.prev&&(e.prev.next=e)):(e.prev=t._last,t._last&&(t._last.next=e),t._last=e),(null===t._first||t._first===e.next)&&(t._first=e)},_linkEltOut:function(e){var t=this;e.next&&(e.next.prev=e.prev),e.prev&&(e.prev.next=e.next),e===t._last&&(t._last=e.prev),e===t._first&&(t._first=e.next)},putBefore:function(e,t,r){var o=this;if(o._dict[o._k(e)])throw new Error("Item "+e+" already present in OrderedDict");var a=r?n(e,t,o._dict[o._k(r)]):n(e,t,null);if(void 0===a.next)throw new Error("could not find item to put this one before");o._linkEltIn(a),o._dict[o._k(e)]=a,o._size++},append:function(e,t){var n=this;n.putBefore(e,t,null)},remove:function(e){var t=this,n=t._dict[t._k(e)];if(void 0===n)throw new Error("Item "+e+" not present in OrderedDict");return t._linkEltOut(n),t._size--,delete t._dict[t._k(e)],n.value},get:function(e){var t=this;return t.has(e)?t._dict[t._k(e)].value:void 0},has:function(e){var n=this;return t.has(n._dict,n._k(e))},forEach:function(t){for(var n=this,r=0,o=n._first;null!==o;){var a=t(o.value,o.key,r);if(a===e.BREAK)return;o=o.next,r++}},first:function(){var e=this;return e.empty()?void 0:e._first.key},firstValue:function(){var e=this;return e.empty()?void 0:e._first.value},last:function(){var e=this;return e.empty()?void 0:e._last.key},lastValue:function(){var e=this;return e.empty()?void 0:e._last.value},prev:function(e){var t=this;if(t.has(e)){var n=t._dict[t._k(e)];if(n.prev)return n.prev.key}return null},next:function(e){var t=this;if(t.has(e)){var n=t._dict[t._k(e)];if(n.next)return n.next.key}return null},moveBefore:function(e,t){var n=this,r=n._dict[n._k(e)],o=t?n._dict[n._k(t)]:null;if(void 0===r)throw new Error("Item to move is not present");if(void 0===o)throw new Error("Could not find element to move this one before");o!==r.next&&(n._linkEltOut(r),r.next=o,n._linkEltIn(r))},indexOf:function(t){var n=this,r=null;return n.forEach(function(o,a,i){return n._k(a)===n._k(t)?(r=i,e.BREAK):void 0}),r},_checkRep:function(){var e=this;t.each(e._dict,function(e,t){if(t.next===t)throw new Error("Next is a loop");if(t.prev===t)throw new Error("Prev is a loop")})}}),e.BREAK={"break":!0}}).call(this),"undefined"==typeof Package&&(Package={}),Package["ordered-dict"]={OrderedDict:e}}(),function(){{var e,t;Package.meteor.Meteor}(function(){t={exports:{}}}).call(this),function(){!function(){function e(e){for(var t=[],n=[],r=0;r<e[0].length;r++)t.push(e[0][r][1]),n.push(e[0][r][0]);return t=t.sort(function(e,t){return e-t}),n=n.sort(function(e,t){return e-t}),[[t[0],n[0]],[t[t.length-1],n[n.length-1]]]}function n(e,t,n){for(var r=[[0,0]],o=0;o<n.length;o++){for(var a=0;a<n[o].length;a++)r.push(n[o][a]);r.push([0,0])}for(var i=!1,o=0,a=r.length-1;o<r.length;a=o++)r[o][0]>t!=r[a][0]>t&&e<(r[a][1]-r[o][1])*(t-r[o][0])/(r[a][0]-r[o][0])+r[o][1]&&(i=!i);return i}var r={};"undefined"!=typeof t&&t.exports&&(t.exports=r),r.lineStringsIntersect=function(e,t){for(var n=[],r=0;r<=e.coordinates.length-2;++r)for(var o=0;o<=t.coordinates.length-2;++o){var a={x:e.coordinates[r][1],y:e.coordinates[r][0]},i={x:e.coordinates[r+1][1],y:e.coordinates[r+1][0]},s={x:t.coordinates[o][1],y:t.coordinates[o][0]},c={x:t.coordinates[o+1][1],y:t.coordinates[o+1][0]},l=(c.x-s.x)*(a.y-s.y)-(c.y-s.y)*(a.x-s.x),u=(i.x-a.x)*(a.y-s.y)-(i.y-a.y)*(a.x-s.x),d=(c.y-s.y)*(i.x-a.x)-(c.x-s.x)*(i.y-a.y);if(0!=d){var h=l/d,p=u/d;h>=0&&1>=h&&p>=0&&1>=p&&n.push({type:"Point",coordinates:[a.x+h*(i.x-a.x),a.y+h*(i.y-a.y)]})}}return 0==n.length&&(n=!1),n},r.pointInBoundingBox=function(e,t){return!(e.coordinates[1]<t[0][0]||e.coordinates[1]>t[1][0]||e.coordinates[0]<t[0][1]||e.coordinates[0]>t[1][1])},r.pointInPolygon=function(t,o){for(var a="Polygon"==o.type?[o.coordinates]:o.coordinates,i=!1,s=0;s<a.length;s++)r.pointInBoundingBox(t,e(a[s]))&&(i=!0);if(!i)return!1;for(var c=!1,s=0;s<a.length;s++)n(t.coordinates[1],t.coordinates[0],a[s])&&(c=!0);return c},r.numberToRadius=function(e){return e*Math.PI/180},r.numberToDegree=function(e){return 180*e/Math.PI},r.drawCircle=function(e,t,n){for(var o=[t.coordinates[1],t.coordinates[0]],a=e/1e3/6371,i=[r.numberToRadius(o[0]),r.numberToRadius(o[1])],n=n||15,s=[[o[0],o[1]]],c=0;n>c;c++){var l=2*Math.PI*c/n,u=Math.asin(Math.sin(i[0])*Math.cos(a)+Math.cos(i[0])*Math.sin(a)*Math.cos(l)),d=i[1]+Math.atan2(Math.sin(l)*Math.sin(a)*Math.cos(i[0]),Math.cos(a)-Math.sin(i[0])*Math.sin(u));s[c]=[],s[c][1]=r.numberToDegree(u),s[c][0]=r.numberToDegree(d)}return{type:"Polygon",coordinates:[s]}},r.rectangleCentroid=function(e){var t=e.coordinates[0],n=t[0][0],r=t[0][1],o=t[2][0],a=t[2][1],i=o-n,s=a-r;return{type:"Point",coordinates:[n+i/2,r+s/2]}},r.pointDistance=function(e,t){var n=e.coordinates[0],o=e.coordinates[1],a=t.coordinates[0],i=t.coordinates[1],s=r.numberToRadius(i-o),c=r.numberToRadius(a-n),l=Math.pow(Math.sin(s/2),2)+Math.cos(r.numberToRadius(o))*Math.cos(r.numberToRadius(i))*Math.pow(Math.sin(c/2),2),u=2*Math.atan2(Math.sqrt(l),Math.sqrt(1-l));return 6371*u*1e3},r.geometryWithinRadius=function(e,t,n){if("Point"==e.type)return r.pointDistance(e,t)<=n;if("LineString"==e.type||"Polygon"==e.type){var o,a={};o="Polygon"==e.type?e.coordinates[0]:e.coordinates;for(var i in o)if(a.coordinates=o[i],r.pointDistance(a,t)>n)return!1}return!0},r.area=function(e){for(var t,n,r=0,o=e.coordinates[0],a=o.length-1,i=0;i<o.length;a=i++){var t={x:o[i][1],y:o[i][0]},n={x:o[a][1],y:o[a][0]};r+=t.x*n.y,r-=t.y*n.x}return r/=2},r.centroid=function(e){for(var t,n,o,a=0,i=0,s=e.coordinates[0],c=s.length-1,l=0;l<s.length;c=l++){var n={x:s[l][1],y:s[l][0]},o={x:s[c][1],y:s[c][0]};t=n.x*o.y-o.x*n.y,a+=(n.x+o.x)*t,i+=(n.y+o.y)*t}return t=6*r.area(e),{type:"Point",coordinates:[i/t,a/t]}},r.simplify=function(e,t){t=t||20,e=e.map(function(e){return{lng:e.coordinates[0],lat:e.coordinates[1]}});var n,r,o,a,i,s,c,l,u,d,h,p,f,m,g,y,v,b,w,_=Math.PI/180*.5,k=new Array,T=new Array,x=new Array;if(e.length<3)return e;for(n=e.length,d=360*t/(2*Math.PI*6378137),d*=d,o=0,T[0]=0,x[0]=n-1,r=1;r>0;)if(a=T[r-1],i=x[r-1],r--,i-a>1){for(h=e[i].lng()-e[a].lng(),p=e[i].lat()-e[a].lat(),Math.abs(h)>180&&(h=360-Math.abs(h)),h*=Math.cos(_*(e[i].lat()+e[a].lat())),f=h*h+p*p,s=a+1,c=a,u=-1;i>s;s++)m=e[s].lng()-e[a].lng(),g=e[s].lat()-e[a].lat(),Math.abs(m)>180&&(m=360-Math.abs(m)),m*=Math.cos(_*(e[s].lat()+e[a].lat())),y=m*m+g*g,v=e[s].lng()-e[i].lng(),b=e[s].lat()-e[i].lat(),Math.abs(v)>180&&(v=360-Math.abs(v)),v*=Math.cos(_*(e[s].lat()+e[i].lat())),w=v*v+b*b,l=y>=f+w?w:w>=f+y?y:(m*p-g*h)*(m*p-g*h)/f,l>u&&(c=s,u=l);d>u?(k[o]=a,o++):(r++,T[r-1]=c,x[r-1]=i,r++,T[r-1]=a,x[r-1]=c)}else k[o]=a,o++;k[o]=n-1,o++;for(var S=new Array,s=0;o>s;s++)S.push(e[k[s]]);return S.map(function(e){return{type:"Point",coordinates:[e.lng,e.lat]}})},r.destinationPoint=function(e,t,n){n/=6371,t=r.numberToRadius(t);var o=r.numberToRadius(e.coordinates[0]),a=r.numberToRadius(e.coordinates[1]),i=Math.asin(Math.sin(o)*Math.cos(n)+Math.cos(o)*Math.sin(n)*Math.cos(t)),s=a+Math.atan2(Math.sin(t)*Math.sin(n)*Math.cos(o),Math.cos(n)-Math.sin(o)*Math.sin(i));return s=(s+3*Math.PI)%(2*Math.PI)-Math.PI,{type:"Point",coordinates:[r.numberToDegree(i),r.numberToDegree(s)]}}}()}.call(this),function(){e=t.exports}.call(this),"undefined"==typeof Package&&(Package={}),Package["geojson-utils"]={GeoJSON:e}}(),function(){var e,t,n,r,o,a,i,s,c,l,u,d,h,p,f=Package.meteor.Meteor,m=Package.underscore._,g=Package.json.JSON,y=Package.ejson.EJSON,v=Package["ordered-dict"].OrderedDict,b=Package.deps.Deps,w=Package.random.Random,_=Package["geojson-utils"].GeoJSON;(function(){e=function(t){var n=this;n.name=t,n._docs=new e._IdMap,n._observeQueue=new f._SynchronousQueue,n.next_qid=1,n.queries={},n._savedOriginals=null,n.paused=!1},t={},n={},e._applyChanges=function(e,t){m.each(t,function(t,n){void 0===t?delete e[n]:e[n]=t})},r=function(e){var t=new Error(e);return t.name="MinimongoError",t},e.prototype.find=function(t,n){return 0===arguments.length&&(t={}),new e.Cursor(this,t,n)},e.Cursor=function(n,r,o){var a=this;o||(o={}),this.collection=n,e._selectorIsId(r)?(a._selectorId=r,a.matcher=new t.Matcher(r,a),a.sorter=void 0):(a._selectorId=void 0,a.matcher=new t.Matcher(r,a),a.sorter=a.matcher.hasGeoQuery()||o.sort?new d(o.sort||[]):null),a.skip=o.skip,a.limit=o.limit,a.fields=o.fields,a.fields&&(a.projectionFn=e._compileProjection(a.fields)),a._transform=e.wrapTransform(o.transform),a.db_objects=null,a.cursor_pos=0,"undefined"!=typeof b&&(a.reactive=void 0===o.reactive?!0:o.reactive)},e.Cursor.prototype.rewind=function(){var e=this;e.db_objects=null,e.cursor_pos=0},e.prototype.findOne=function(e,t){return 0===arguments.length&&(e={}),t=t||{},t.limit=1,this.find(e,t).fetch()[0]},e.Cursor.prototype.forEach=function(e,t){var n=this;for(null===n.db_objects&&(n.db_objects=n._getRawObjects({ordered:!0})),n.reactive&&n._depend({addedBefore:!0,removed:!0,changed:!0,movedBefore:!0});n.cursor_pos<n.db_objects.length;){var r=y.clone(n.db_objects[n.cursor_pos]);n.projectionFn&&(r=n.projectionFn(r)),n._transform&&(r=n._transform(r)),e.call(t,r,n.cursor_pos,n),++n.cursor_pos}},e.Cursor.prototype.getTransform=function(){return this._transform},e.Cursor.prototype.map=function(e,t){var n=this,r=[];return n.forEach(function(o,a){r.push(e.call(t,o,a,n))}),r},e.Cursor.prototype.fetch=function(){var e=this,t=[];return e.forEach(function(e){t.push(e)}),t},e.Cursor.prototype.count=function(){var e=this;return e.reactive&&e._depend({added:!0,removed:!0},!0),null===e.db_objects&&(e.db_objects=e._getRawObjects({ordered:!0})),e.db_objects.length},e.Cursor.prototype._publishCursor=function(e){var t=this;if(!t.collection.name)throw new Error("Can't publish a cursor from a collection without a name.");var n=t.collection.name;return f.Collection._publishCursor(t,e,n)},e.Cursor.prototype._getCollectionName=function(){var e=this;return e.collection.name},e._observeChangesCallbacksAreOrdered=function(e){if(e.added&&e.addedBefore)throw new Error("Please specify only one of added() and addedBefore()");return!(!e.addedBefore&&!e.movedBefore)},e._observeCallbacksAreOrdered=function(e){if(e.addedAt&&e.added)throw new Error("Please specify only one of added() and addedAt()");if(e.changedAt&&e.changed)throw new Error("Please specify only one of changed() and changedAt()");if(e.removed&&e.removedAt)throw new Error("Please specify only one of removed() and removedAt()");return!!(e.addedAt||e.movedTo||e.changedAt||e.removedAt)},e.ObserveHandle=function(){},m.extend(e.Cursor.prototype,{observe:function(t){var n=this;return e._observeFromObserveChanges(n,t)},observeChanges:function(t){var n=this,r=e._observeChangesCallbacksAreOrdered(t);if(!t._allow_unordered&&!r&&(n.skip||n.limit))throw new Error("must use ordered observe with skip or limit");if(n.fields&&(0===n.fields._id||n.fields._id===!1))throw Error("You may not observe a cursor with {fields: {_id: 0}}");var o,a={matcher:n.matcher,sorter:r&&n.sorter,distances:n.matcher.hasGeoQuery()&&r&&new e._IdMap,resultsSnapshot:null,ordered:r,cursor:n,projectionFn:n.projectionFn};n.reactive&&(o=n.collection.next_qid++,n.collection.queries[o]=a),a.results=n._getRawObjects({ordered:r,distances:a.distances}),n.collection.paused&&(a.resultsSnapshot=r?[]:new e._IdMap);var i=function(e,t,r){return e?function(){var o=this,a=arguments;n.collection.paused||void 0!==t&&n.projectionFn&&(a[t]=n.projectionFn(a[t]),r&&m.isEmpty(a[t]))||n.collection._observeQueue.queueTask(function(){e.apply(o,a)})}:function(){}};if(a.added=i(t.added,1),a.changed=i(t.changed,1,!0),a.removed=i(t.removed),r&&(a.addedBefore=i(t.addedBefore,1),a.movedBefore=i(t.movedBefore)),!t._suppress_initial&&!n.collection.paused){var s=r?m.bind(m.each,null,a.results):m.bind(a.results.forEach,a.results);s(function(e){var t=y.clone(e);delete t._id,r&&a.addedBefore(e._id,t,null),a.added(e._id,t)})}var c=new e.ObserveHandle;return m.extend(c,{collection:n.collection,stop:function(){n.reactive&&delete n.collection.queries[o]}}),n.reactive&&b.active&&b.onInvalidate(function(){c.stop()}),n.collection._observeQueue.drain(),c}}),e.Cursor.prototype._getRawObjects=function(t){var n=this;t=t||{};var r=t.ordered?[]:new e._IdMap;if(void 0!==n._selectorId){if(n.skip)return r;var o=n.collection._docs.get(n._selectorId);return o&&(t.ordered?r.push(o):r.set(n._selectorId,o)),r}var a;if(n.matcher.hasGeoQuery()&&t.ordered&&(t.distances?(a=t.distances,a.clear()):a=new e._IdMap),n.collection._docs.forEach(function(e,o){var i=n.matcher.documentMatches(e);return i.result&&(t.ordered?(r.push(e),a&&void 0!==i.distance&&a.set(o,i.distance)):r.set(o,e)),!n.limit||n.skip||n.sorter||r.length!==n.limit?!0:!1}),!t.ordered)return r;if(n.sorter){var i=n.sorter.getComparator({distances:a});r.sort(i)}var s=n.skip||0,c=n.limit?n.limit+s:r.length;return r.slice(s,c)},e.Cursor.prototype._depend=function(e,t){var n=this;if(b.active){var r=new b.Dependency;r.depend();var o=m.bind(r.changed,r),a={_suppress_initial:!0,_allow_unordered:t};m.each(["added","changed","removed","addedBefore","movedBefore"],function(t){e[t]&&(a[t]=o)}),n.observeChanges(a)}},e.prototype.insert=function(t,n){var o=this;t=y.clone(t),m.has(t,"_id")||(t._id=e._useOID?new e._ObjectID:w.id());var a=t._id;if(o._docs.has(a))throw r("Duplicate _id '"+a+"'");o._saveOriginal(a,void 0),o._docs.set(a,t);var i=[];for(var s in o.queries){var c=o.queries[s],l=c.matcher.documentMatches(t);l.result&&(c.distances&&void 0!==l.distance&&c.distances.set(a,l.distance),c.cursor.skip||c.cursor.limit?i.push(s):e._insertInResults(c,t))}return m.each(i,function(t){o.queries[t]&&e._recomputeResults(o.queries[t])}),o._observeQueue.drain(),n&&f.defer(function(){n(null,a)}),a},e.prototype._eachPossiblyMatchingDoc=function(t,n){var r=this,o=e._idsMatchedBySelector(t);if(o)for(var a=0;a<o.length;++a){var i=o[a],s=r._docs.get(i);if(s){var c=n(s,i);if(c===!1)break}}else r._docs.forEach(n)},e.prototype.remove=function(n,r){var o=this;if(o.paused&&!o._savedOriginals&&y.equals(n,{})){var a=o._docs.size();return o._docs.clear(),m.each(o.queries,function(e){e.ordered?e.results=[]:e.results.clear()}),r&&f.defer(function(){r(null,a)}),a}var i=new t.Matcher(n,o),s=[];o._eachPossiblyMatchingDoc(n,function(e,t){i.documentMatches(e).result&&s.push(t)});for(var c=[],l=[],u=0;u<s.length;u++){var d=s[u],h=o._docs.get(d);m.each(o.queries,function(e,t){e.matcher.documentMatches(h).result&&(e.cursor.skip||e.cursor.limit?c.push(t):l.push({qid:t,doc:h}))}),o._saveOriginal(d,h),o._docs.remove(d)}return m.each(l,function(t){var n=o.queries[t.qid];n&&(n.distances&&n.distances.remove(t.doc._id),e._removeFromResults(n,t.doc))}),m.each(c,function(t){var n=o.queries[t];n&&e._recomputeResults(n)}),o._observeQueue.drain(),a=s.length,r&&f.defer(function(){r(null,a)}),a},e.prototype.update=function(n,r,o,a){var i=this;!a&&o instanceof Function&&(a=o,o=null),o||(o={});var s=new t.Matcher(n,i),c={};m.each(i.queries,function(e,t){!e.cursor.skip&&!e.cursor.limit||e.paused||(c[t]=y.clone(e.results))});var l={},u=0;i._eachPossiblyMatchingDoc(n,function(e,t){var n=s.documentMatches(e);return n.result&&(i._saveOriginal(t,e),i._modifyAndNotify(e,r,l,n.arrayIndex),++u,!o.multi)?!1:!0}),m.each(l,function(t,n){var r=i.queries[n];r&&e._recomputeResults(r,c[n])}),i._observeQueue.drain();var d;if(0===u&&o.upsert){var h=e._removeDollarOperators(n);e._modify(h,r,{isInsert:!0}),!h._id&&o.insertedId&&(h._id=o.insertedId),d=i.insert(h),u=1}var p;return o._returnObject?(p={numberAffected:u},void 0!==d&&(p.insertedId=d)):p=u,a&&f.defer(function(){a(null,p)}),p},e.prototype.upsert=function(e,t,n,r){var o=this;return r||"function"!=typeof n||(r=n,n={}),o.update(e,t,m.extend({},n,{upsert:!0,_returnObject:!0}),r)},e.prototype._modifyAndNotify=function(t,n,r,o){var a=this,i={};for(var s in a.queries){var c=a.queries[s];i[s]=c.ordered?c.matcher.documentMatches(t).result:c.results.has(t._id)}var l=y.clone(t);e._modify(t,n,{arrayIndex:o});for(s in a.queries){c=a.queries[s];var u=i[s],d=c.matcher.documentMatches(t),h=d.result;h&&c.distances&&void 0!==d.distance&&c.distances.set(t._id,d.distance),c.cursor.skip||c.cursor.limit?(u||h)&&(r[s]=!0):u&&!h?e._removeFromResults(c,t):!u&&h?e._insertInResults(c,t):u&&h&&e._updateInResults(c,t,l)}},e._insertInResults=function(t,n){var r=y.clone(n);if(delete r._id,t.ordered){if(t.sorter){var o=e._insertInSortedList(t.sorter.getComparator({distances:t.distances}),t.results,n),a=t.results[o+1];a=a?a._id:null,t.addedBefore(n._id,r,a)}else t.addedBefore(n._id,r,null),t.results.push(n);t.added(n._id,r)}else t.added(n._id,r),t.results.set(n._id,n)
},e._removeFromResults=function(t,n){if(t.ordered){var r=e._findInOrderedResults(t,n);t.removed(n._id),t.results.splice(r,1)}else{var o=n._id;t.removed(n._id),t.results.remove(o)}},e._updateInResults=function(t,n,r){if(!y.equals(n._id,r._id))throw new Error("Can't change a doc's _id while updating");var o=e._makeChangedFields(n,r);if(!t.ordered)return m.isEmpty(o)||(t.changed(n._id,o),t.results.set(n._id,n)),void 0;var a=e._findInOrderedResults(t,n);if(m.isEmpty(o)||t.changed(n._id,o),t.sorter){t.results.splice(a,1);var i=e._insertInSortedList(t.sorter.getComparator({distances:t.distances}),t.results,n);if(a!==i){var s=t.results[i+1];s=s?s._id:null,t.movedBefore&&t.movedBefore(n._id,s)}}},e._recomputeResults=function(t,n){n||(n=t.results),t.distances&&t.distances.clear(),t.results=t.cursor._getRawObjects({ordered:t.ordered,distances:t.distances}),t.paused||e._diffQueryChanges(t.ordered,n,t.results,t)},e._findInOrderedResults=function(e,t){if(!e.ordered)throw new Error("Can't call _findInOrderedResults on unordered query");for(var n=0;n<e.results.length;n++)if(e.results[n]===t)return n;throw Error("object missing from query")},e._binarySearch=function(e,t,n){for(var r=0,o=t.length;o>0;){var a=Math.floor(o/2);e(n,t[r+a])>=0?(r+=a+1,o-=a+1):o=a}return r},e._insertInSortedList=function(t,n,r){if(0===n.length)return n.push(r),0;var o=e._binarySearch(t,n,r);return n.splice(o,0,r),o},e.prototype.saveOriginals=function(){var t=this;if(t._savedOriginals)throw new Error("Called saveOriginals twice without retrieveOriginals");t._savedOriginals=new e._IdMap},e.prototype.retrieveOriginals=function(){var e=this;if(!e._savedOriginals)throw new Error("Called retrieveOriginals without saveOriginals");var t=e._savedOriginals;return e._savedOriginals=null,t},e.prototype._saveOriginal=function(e,t){var n=this;n._savedOriginals&&(n._savedOriginals.has(e)||n._savedOriginals.set(e,y.clone(t)))},e.prototype.pauseObservers=function(){if(!this.paused){this.paused=!0;for(var e in this.queries){var t=this.queries[e];t.resultsSnapshot=y.clone(t.results)}}},e.prototype.resumeObservers=function(){var t=this;if(this.paused){this.paused=!1;for(var n in this.queries){var r=t.queries[n];e._diffQueryChanges(r.ordered,r.resultsSnapshot,r.results,r),r.resultsSnapshot=null}t._observeQueue.drain()}},e._idStringify=function(t){if(t instanceof e._ObjectID)return t.valueOf();if("string"==typeof t)return""===t?t:"-"===t.substr(0,1)||"~"===t.substr(0,1)||e._looksLikeObjectID(t)||"{"===t.substr(0,1)?"-"+t:t;if(void 0===t)return"-";if("object"==typeof t&&null!==t)throw new Error("Meteor does not currently support objects other than ObjectID as ids");return"~"+g.stringify(t)},e._idParse=function(t){return""===t?t:"-"===t?void 0:"-"===t.substr(0,1)?t.substr(1):"~"===t.substr(0,1)?g.parse(t.substr(1)):e._looksLikeObjectID(t)?new e._ObjectID(t):t},e._makeChangedFields=function(t,n){var r={};return e._diffObjects(n,t,{leftOnly:function(e){r[e]=void 0},rightOnly:function(e,t){r[e]=t},both:function(e,t,n){y.equals(t,n)||(r[e]=n)}}),r}}).call(this),function(){e.wrapTransform=function(e){return e?function(t){if(!m.has(t,"_id"))throw new Error("can only transform documents with _id");var n=t._id,r=b.nonreactive(function(){return e(t)});if(!a(r))throw new Error("transform must return object");if(m.has(r,"_id")){if(!y.equals(r._id,n))throw new Error("transformed document can't have different _id")}else r._id=n;return r}:null}}.call(this),function(){o=function(e){return m.isArray(e)&&!y.isBinary(e)},a=function(t){return t&&3===e._f._type(t)},i=function(e){return o(e)||a(e)},s=function(e){if(!a(e))return!1;var t=void 0;return m.each(e,function(n,r){var o="$"===r.substr(0,1);if(void 0===t)t=o;else if(t!==o)throw new Error("Inconsistent operator: "+e)}),!!t},c=function(e){return/^[0-9]+$/.test(e)}}.call(this),function(){t.Matcher=function(e){var t=this;t._paths={},t._hasGeoQuery=!1,t._hasWhere=!1,t._isSimple=!0,t._matchingDocument=void 0,t._selector=null,t._docMatcher=t._compileSelector(e)},m.extend(t.Matcher.prototype,{documentMatches:function(e){return this._docMatcher(e)},hasGeoQuery:function(){return this._hasGeoQuery},hasWhere:function(){return this._hasWhere},isSimple:function(){return this._isSimple},_compileSelector:function(t){var n=this;if(t instanceof Function)return n._isSimple=!1,n._selector=t,n._recordPathUsed(""),function(e){return{result:!!t.call(e)}};if(e._selectorIsId(t))return n._selector={_id:t},n._recordPathUsed("_id"),function(e){return{result:y.equals(e._id,t)}};if(!t||"_id"in t&&!t._id)return n._isSimple=!1,M;if("boolean"==typeof t||o(t)||y.isBinary(t))throw new Error("Invalid selector: "+t);return n._selector=y.clone(t),r(t,n,{isRoot:!0})},_recordPathUsed:function(e){this._paths[e]=!0},_getPaths:function(){return m.keys(this._paths)}});var r=function(e,t,n){n=n||{};var r=[];return m.each(e,function(e,o){if("$"===o.substr(0,1)){if(!m.has(b,o))throw new Error("Unrecognized logical operator: "+o);t._isSimple=!1,r.push(b[o](e,t,n.inElemMatch))}else{n.inElemMatch||t._recordPathUsed(o);var a=l(o),i=d(e,t,n.isRoot);r.push(function(e){var t=a(e);return i(t)})}}),A(r)},d=function(e,t,n){return e instanceof RegExp?(t._isSimple=!1,h(p(e))):s(e)?g(e,t,n):h(f(e))},h=function(e,t){return t=t||{},function(n){var r=n;t.dontExpandLeafArrays||(r=u(n,t.dontIncludeLeafArrays));var o={};return o.result=m.any(r,function(t){var n=e(t.value);return"number"==typeof n&&(void 0===t.arrayIndex&&(t.arrayIndex=n),n=!0),n&&void 0!==t.arrayIndex&&(o.arrayIndex=t.arrayIndex),n}),o}},p=function(e){return function(t){return t instanceof RegExp?m.isEqual(t,e):"string"!=typeof t?!1:e.test(t)}},f=function(t){if(s(t))throw Error("Can't create equalityValueSelector for operator object");return null==t?function(e){return null==e}:function(n){return e._f._equal(t,n)}},g=function(e,t,n){var r=[];return m.each(e,function(o,a){var i=m.contains(["$lt","$lte","$gt","$gte"],a)&&m.isNumber(o),s="$ne"===a&&!m.isObject(o),c=m.contains(["$in","$nin"],a)&&m.isArray(o)&&!m.any(o,m.isObject);if("$eq"===a||i||c||s||(t._isSimple=!1),m.has(k,a))r.push(k[a](o,e,t,n));else{if(!m.has(C,a))throw new Error("Unrecognized operator: "+a);var l=C[a];"function"==typeof l&&(l={compileElementSelector:l}),r.push(h(l.compileElementSelector(o,e,t),l))}}),O(r)},v=function(e,t,n){if(!o(e)||m.isEmpty(e))throw Error("$and/$or/$nor must be nonempty array");return m.map(e,function(e){if(!a(e))throw Error("$or/$and/$nor entries need to be full objects");return r(e,t,{inElemMatch:n})})},b={$and:function(e,t,n){var r=v(e,t,n);return A(r)},$or:function(e,t,n){var r=v(e,t,n);return 1===r.length?r[0]:function(e){var t=m.any(r,function(t){return t(e).result});return{result:t}}},$nor:function(e,t,n){var r=v(e,t,n);return function(e){var t=m.all(r,function(t){return!t(e).result});return{result:t}}},$where:function(e,t){return t._recordPathUsed(""),t._hasWhere=!0,e instanceof Function||(e=Function("obj","return "+e)),function(t){return{result:e.call(t,t)}}},$comment:function(){return function(){return{result:!0}}}},w=function(e){return function(t){var n=e(t);return{result:!n.result}}},k={$not:function(e,t,n){return w(d(e,n))},$ne:function(e){return w(h(f(e)))},$nin:function(e){return w(h(C.$in(e)))},$exists:function(e){var t=h(function(e){return void 0!==e});return e?t:w(t)},$options:function(e,t){if(!t.$regex)throw Error("$options needs a $regex");return E},$maxDistance:function(e,t){if(!t.$near)throw Error("$maxDistance needs a $near");return E},$all:function(e,t,n){if(!o(e))throw Error("$all requires array");if(m.isEmpty(e))return M;var r=[];return m.each(e,function(e){if(s(e))throw Error("no $ expressions in $all");r.push(d(e,n))}),O(r)},$near:function(e,t,n,r){if(!r)throw Error("$near can't be inside another $ operator");n._hasGeoQuery=!0;var i,s,c;if(a(e)&&m.has(e,"$geometry"))i=e.$maxDistance,s=e.$geometry,c=function(e){return e&&e.type?"Point"===e.type?_.pointDistance(s,e):_.geometryWithinRadius(e,s,i)?0:i+1:null};else{if(i=t.$maxDistance,!o(e)&&!a(e))throw Error("$near argument must be coordinate pair or GeoJSON");s=x(e),c=function(e){return o(e)||a(e)?T(s,e):null}}return function(e){e=u(e);var t={result:!1};return m.each(e,function(e){var n=c(e.value);null===n||n>i||void 0!==t.distance&&t.distance<=n||(t.result=!0,t.distance=n,void 0===e.arrayIndex?delete t.arrayIndex:t.arrayIndex=e.arrayIndex)}),t}}},T=function(e,t){e=x(e),t=x(t);var n=e[0]-t[0],r=e[1]-t[1];return m.isNaN(n)||m.isNaN(r)?null:Math.sqrt(n*n+r*r)},x=function(e){return m.map(e,m.identity)},S=function(t){return function(n){if(o(n))return function(){return!1};void 0===n&&(n=null);var r=e._f._type(n);return function(o){return void 0===o&&(o=null),e._f._type(o)!==r?!1:t(e._f._cmp(o,n))}}},C={$lt:S(function(e){return 0>e}),$gt:S(function(e){return e>0}),$lte:S(function(e){return 0>=e}),$gte:S(function(e){return e>=0}),$mod:function(e){if(!o(e)||2!==e.length||"number"!=typeof e[0]||"number"!=typeof e[1])throw Error("argument to $mod must be an array of two numbers");var t=e[0],n=e[1];return function(e){return"number"==typeof e&&e%t===n}},$in:function(e){if(!o(e))throw Error("$in needs an array");var t=[];return m.each(e,function(e){if(e instanceof RegExp)t.push(p(e));else{if(s(e))throw Error("cannot nest $ under $in");t.push(f(e))}}),function(e){return void 0===e&&(e=null),m.any(t,function(t){return t(e)})}},$size:{dontExpandLeafArrays:!0,compileElementSelector:function(e){if("string"==typeof e)e=0;else if("number"!=typeof e)throw Error("$size needs a number");return function(t){return o(t)&&t.length===e}}},$type:{dontIncludeLeafArrays:!0,compileElementSelector:function(t){if("number"!=typeof t)throw Error("$type needs a number");return function(n){return void 0!==n&&e._f._type(n)===t}}},$regex:function(e,t){if(!("string"==typeof e||e instanceof RegExp))throw Error("$regex has to be a string or RegExp");var n;if(void 0!==t.$options){if(/[^gim]/.test(t.$options))throw new Error("Only the i, m, and g regexp options are supported");var r=e instanceof RegExp?e.source:e;n=new RegExp(r,t.$options)}else n=e instanceof RegExp?e:new RegExp(e);return p(n)},$elemMatch:{dontExpandLeafArrays:!0,compileElementSelector:function(e,t,n){if(!a(e))throw Error("$elemMatch need an object");var i,c;return s(e)?(i=d(e,n),c=!1):(i=r(e,n,{inElemMatch:!0}),c=!0),function(e){if(!o(e))return!1;for(var t=0;t<e.length;++t){var n,r=e[t];if(c){if(!a(r)&&!o(r))return!1;n=r}else n=[{value:r,dontIterate:!0}];if(i(n).result)return t}return!1}}}};l=function(e){var t,n=e.split("."),r=n.length?n[0]:"",s=c(r);n.length>1&&(t=l(n.slice(1).join(".")));var u=function(e){return e.dontIterate||delete e.dontIterate,void 0===e.arrayIndex&&delete e.arrayIndex,e};return function(e,n){if(o(e)){if(!(s&&r<e.length))return[];void 0===n&&(n=+r)}var c=e[r];if(!t)return[u({value:c,dontIterate:o(e)&&o(c),arrayIndex:n})];if(!i(c))return o(e)?[]:[u({value:void 0,arrayIndex:n})];var l=[],d=function(e){Array.prototype.push.apply(l,e)};return d(t(c,n)),o(c)&&m.each(c,function(e,r){a(e)&&d(t(e,void 0===n?r:n))}),l}},n.makeLookupFunction=l,u=function(e,t){var n=[];return m.each(e,function(e){var r=o(e.value);t&&r&&!e.dontIterate||n.push({value:e.value,arrayIndex:e.arrayIndex}),r&&!e.dontIterate&&m.each(e.value,function(t,r){n.push({value:t,arrayIndex:void 0===e.arrayIndex?r:e.arrayIndex})})}),n};var M=function(){return{result:!1}},E=function(){return{result:!0}},I=function(e){return 0===e.length?E:1===e.length?e[0]:function(t){var n={};return n.result=m.all(e,function(e){var r=e(t);return r.result&&void 0!==r.distance&&void 0===n.distance&&(n.distance=r.distance),r.result&&void 0!==r.arrayIndex&&(n.arrayIndex=r.arrayIndex),r.result}),n.result||(delete n.distance,delete n.arrayIndex),n}},A=I,O=I;e._f={_type:function(t){return"number"==typeof t?1:"string"==typeof t?2:"boolean"==typeof t?8:o(t)?4:null===t?10:t instanceof RegExp?11:"function"==typeof t?13:t instanceof Date?9:y.isBinary(t)?5:t instanceof e._ObjectID?7:3},_equal:function(e,t){return y.equals(e,t,{keyOrderSensitive:!0})},_typeorder:function(e){return[-1,1,2,3,4,5,-1,6,7,8,0,9,-1,100,2,100,1,8,1][e]},_cmp:function(t,n){if(void 0===t)return void 0===n?0:-1;if(void 0===n)return 1;var r=e._f._type(t),o=e._f._type(n),a=e._f._typeorder(r),i=e._f._typeorder(o);if(a!==i)return i>a?-1:1;if(r!==o)throw Error("Missing type coercion logic in _cmp");if(7===r&&(r=o=2,t=t.toHexString(),n=n.toHexString()),9===r&&(r=o=1,t=t.getTime(),n=n.getTime()),1===r)return t-n;if(2===o)return n>t?-1:t===n?0:1;if(3===r){var s=function(e){var t=[];for(var n in e)t.push(n),t.push(e[n]);return t};return e._f._cmp(s(t),s(n))}if(4===r)for(var c=0;;c++){if(c===t.length)return c===n.length?0:-1;if(c===n.length)return 1;var l=e._f._cmp(t[c],n[c]);if(0!==l)return l}if(5===r){if(t.length!==n.length)return t.length-n.length;for(c=0;c<t.length;c++){if(t[c]<n[c])return-1;if(t[c]>n[c])return 1}return 0}if(8===r)return t?n?0:1:n?-1:0;if(10===r)return 0;if(11===r)throw Error("Sorting not supported on regular expression");if(13===r)throw Error("Sorting not supported on Javascript code");throw Error("Unknown type to sort")}},e._removeDollarOperators=function(e){var t={};for(var n in e)"$"!==n.substr(0,1)&&(t[n]=e[n]);return t}}.call(this),function(){d=function(n){var r=this,o=[];if(n instanceof Array)for(var a=0;a<n.length;a++)"string"==typeof n[a]?o.push({lookup:l(n[a]),ascending:!0}):o.push({lookup:l(n[a][0]),ascending:"desc"!==n[a][1]});else{if("object"!=typeof n)throw Error("Bad sort specification: ",g.stringify(n));for(var i in n)o.push({lookup:l(i),ascending:n[i]>=0})}var s=function(t,n){t=u(t,!0);var r=void 0,o=!0;return m.each(t,function(t){if(o)r=t.value,o=!1;else{var a=e._f._cmp(r,t.value);(n&&a>0||!n&&0>a)&&(r=t.value)}}),r},c=m.map(o,function(t){return function(n,r){var o=s(t.lookup(n),t.ascending),a=s(t.lookup(r),t.ascending),i=e._f._cmp(o,a);return t.ascending?i:-i}});r._baseComparator=t(c)},d.prototype.getComparator=function(e){var n=this;if(!e||!e.distances)return n._baseComparator;var r=e.distances;return t([n._baseComparator,function(e,t){if(!r.has(e._id))throw Error("Missing distance for "+e._id);if(!r.has(t._id))throw Error("Missing distance for "+t._id);return r.get(e._id)-r.get(t._id)}])},n.Sorter=d;var t=function(e){return function(t,n){for(var r=0;r<e.length;++r){var o=e[r](t,n);if(0!==o)return o}return 0}}}.call(this),function(){e._compileProjection=function(t){e._checkSupportedProjection(t);var n=m.isUndefined(t._id)?!0:t._id,r=h(t),o=function(e,t){if(m.isArray(e))return m.map(e,function(e){return o(e,t)});var n=r.including?{}:y.clone(e);return m.each(t,function(t,a){m.has(e,a)&&(m.isObject(t)?m.isObject(e[a])&&(n[a]=o(e[a],t)):r.including?n[a]=y.clone(e[a]):delete n[a])}),n};return function(e){var t=o(e,r.tree);return n&&m.has(e,"_id")&&(t._id=e._id),!n&&m.has(t,"_id")&&delete t._id,t}},h=function(e){var t=m.keys(e).sort();t.length>0&&(1!==t.length||"_id"!==t[0])&&(t=m.reject(t,function(e){return"_id"===e}));var n=null;m.each(t,function(t){var o=!!e[t];if(null===n&&(n=o),n!==o)throw r("You cannot currently mix including and excluding fields.")});var o=p(t,function(){return n},function(e,t,n){var o=n,a=t;throw r("both "+o+" and "+a+" found in fields option, using both of them may trigger unexpected behavior. Did you mean to use only one of them?")});return{tree:o,including:n}},p=function(e,t,n,r){return r=r||{},m.each(e,function(e){var o=r,a=e.split("."),i=m.all(a.slice(0,-1),function(t,r){if(m.has(o,t)){if(!m.isObject(o[t])&&(o[t]=n(o[t],a.slice(0,r+1).join("."),e),!m.isObject(o[t])))return!1}else o[t]={};return o=o[t],!0});if(i){var s=m.last(a);o[s]=m.has(o,s)?n(o[s],e,e):t(e)}}),r},e._checkSupportedProjection=function(e){if(!m.isObject(e)||m.isArray(e))throw r("fields option must be an object");m.each(e,function(e,t){if(m.contains(t.split("."),"$"))throw r("Minimongo doesn't support $ operator in projections yet.");if(-1===m.indexOf([1,0,!0,!1],e))throw r("Projection values should be one of 1, 0, true, or false")})}}.call(this),function(){e._modify=function(e,t,i){if(i=i||{},!a(t))throw r("Modifier must be an object");var c,u=s(t);if(u)c=y.clone(e),m.each(t,function(e,t){var a=l[t];if(i.isInsert&&"$setOnInsert"===t&&(a=l.$set),!a)throw r("Invalid modifier specified "+t);m.each(e,function(e,s){if(s.length&&"."===s[s.length-1])throw r("Invalid mod field name, may not end in a period");if("_id"===s)throw r("Mod on _id not allowed");var l=s.split("."),u=(m.has(o,t),n(c,l,{noCreate:o[t],forbidArray:"$rename"===t,arrayIndex:i.arrayIndex})),d=l.pop();a(u,d,e,s,c)})});else{if(t._id&&!y.equals(e._id,t._id))throw r("Cannot change the _id of a document");for(var d in t)if(/\./.test(d))throw r("When replacing document, field name may not contain '.'");c=t}m.each(m.keys(e),function(t){("_id"!==t||i.isInsert)&&delete e[t]}),m.each(c,function(t,n){e[n]=t})};var n=function(e,t,n){n=n||{};for(var o=!1,a=0;a<t.length;a++){var s=a===t.length-1,l=t[a],u=i(e);if(!u){if(n.noCreate)return void 0;var d=r("cannot use the part '"+l+"' to traverse "+e);throw d.setPropertyError=!0,d}if(e instanceof Array){if(n.forbidArray)return null;if("$"===l){if(o)throw r("Too many positional (i.e. '$') elements");if(void 0===n.arrayIndex)throw r("The positional operator did not find the match needed from the query");l=n.arrayIndex,o=!0}else{if(!c(l)){if(n.noCreate)return void 0;throw r("can't append to array using string field name ["+l+"]")}l=parseInt(l)}if(s&&(t[a]=l),n.noCreate&&l>=e.length)return void 0;for(;e.length<l;)e.push(null);if(!s)if(e.length===l)e.push({});else if("object"!=typeof e[l])throw r("can't modify field '"+t[a+1]+"' of list value "+g.stringify(e[l]))}else{if(l.length&&"$"===l.substr(0,1))throw r("can't set field named "+l);if(!(l in e)){if(n.noCreate)return void 0;s||(e[l]={})}}if(s)return e;e=e[l]}},o={$unset:!0,$pop:!0,$rename:!0,$pull:!0,$pullAll:!0},l={$inc:function(e,t,n){if("number"!=typeof n)throw r("Modifier $inc allowed for numbers only");if(t in e){if("number"!=typeof e[t])throw r("Cannot apply $inc modifier to non-number");e[t]+=n}else e[t]=n},$set:function(e,t,n){if(!m.isObject(e)){var o=r("Cannot set property on non-object field");throw o.setPropertyError=!0,o}if(null===e){var o=r("Cannot set property on null");throw o.setPropertyError=!0,o}e[t]=y.clone(n)},$setOnInsert:function(){},$unset:function(e,t){void 0!==e&&(e instanceof Array?t in e&&(e[t]=null):delete e[t])},$push:function(t,n,o){if(void 0===t[n]&&(t[n]=[]),!(t[n]instanceof Array))throw r("Cannot apply $push modifier to non-array");if(!o||!o.$each)return t[n].push(y.clone(o)),void 0;var a=o.$each;if(!(a instanceof Array))throw r("$each must be an array");var i=void 0;if("$slice"in o){if("number"!=typeof o.$slice)throw r("$slice must be a numeric value");if(o.$slice>0)throw r("$slice in $push must be zero or negative");i=o.$slice}var s=void 0;if(o.$sort){if(void 0===i)throw r("$sort requires $slice to be present");s=new d(o.$sort).getComparator();for(var c=0;c<a.length;c++)if(3!==e._f._type(a[c]))throw r("$push like modifiers using $sort require all elements to be objects")}for(var l=0;l<a.length;l++)t[n].push(y.clone(a[l]));s&&t[n].sort(s),void 0!==i&&(t[n]=0===i?[]:t[n].slice(i))},$pushAll:function(e,t,n){if(!("object"==typeof n&&n instanceof Array))throw r("Modifier $pushAll/pullAll allowed for arrays only");var o=e[t];if(void 0===o)e[t]=n;else{if(!(o instanceof Array))throw r("Cannot apply $pushAll modifier to non-array");for(var a=0;a<n.length;a++)o.push(n[a])}},$addToSet:function(t,n,o){var a=t[n];if(void 0===a)t[n]=[o];else{if(!(a instanceof Array))throw r("Cannot apply $addToSet modifier to non-array");var i=!1;if("object"==typeof o)for(var s in o){"$each"===s&&(i=!0);break}var c=i?o.$each:[o];m.each(c,function(t){for(var n=0;n<a.length;n++)if(e._f._equal(t,a[n]))return;a.push(y.clone(t))})}},$pop:function(e,t,n){if(void 0!==e){var o=e[t];if(void 0!==o){if(!(o instanceof Array))throw r("Cannot apply $pop modifier to non-array");"number"==typeof n&&0>n?o.splice(0,1):o.pop()}}},$pull:function(n,o,a){if(void 0!==n){var i=n[o];if(void 0!==i){if(!(i instanceof Array))throw r("Cannot apply $pull/pullAll modifier to non-array");var s=[];if("object"!=typeof a||a instanceof Array)for(var c=0;c<i.length;c++)e._f._equal(i[c],a)||s.push(i[c]);else for(var l=new t.Matcher(a),c=0;c<i.length;c++)l.documentMatches(i[c]).result||s.push(i[c]);n[o]=s}}},$pullAll:function(t,n,o){if(!("object"==typeof o&&o instanceof Array))throw r("Modifier $pushAll/pullAll allowed for arrays only");if(void 0!==t){var a=t[n];if(void 0!==a){if(!(a instanceof Array))throw r("Cannot apply $pull/pullAll modifier to non-array");for(var i=[],s=0;s<a.length;s++){for(var c=!1,l=0;l<o.length;l++)if(e._f._equal(a[s],o[l])){c=!0;break}c||i.push(a[s])}t[n]=i}}},$rename:function(e,t,o,a,i){if(a===o)throw r("$rename source must differ from target");if(null===e)throw r("$rename source field invalid");if("string"!=typeof o)throw r("$rename target must be a string");if(void 0!==e){var s=e[t];delete e[t];var c=o.split("."),l=n(i,c,{forbidArray:!0});if(null===l)throw r("$rename target field invalid");var u=c.pop();l[u]=s}},$bit:function(){throw r("$bit is not supported")}}}.call(this),function(){e._diffQueryChanges=function(t,n,r,o){t?e._diffQueryOrderedChanges(n,r,o):e._diffQueryUnorderedChanges(n,r,o)},e._diffQueryUnorderedChanges=function(t,n,r){if(r.movedBefore)throw new Error("_diffQueryUnordered called with a movedBefore observer!");n.forEach(function(n,o){var a=t.get(o);if(a)r.changed&&!y.equals(a,n)&&r.changed(o,e._makeChangedFields(n,a));else if(r.added){var i=y.clone(n);delete i._id,r.added(n._id,i)}}),r.removed&&t.forEach(function(e,t){n.has(t)||r.removed(t)})},e._diffQueryOrderedChanges=function(t,n,r){var o={};m.each(n,function(e){o[e._id]&&f._debug("Duplicate _id in new_results"),o[e._id]=!0});var a={};m.each(t,function(e,t){e._id in a&&f._debug("Duplicate _id in old_results"),a[e._id]=t});for(var i=[],s=0,c=n.length,l=new Array(c),u=new Array(c),d=function(e){return a[n[e]._id]},h=0;c>h;h++)if(void 0!==a[n[h]._id]){for(var p=s;p>0&&!(d(l[p-1])<d(h));)p--;u[h]=0===p?-1:l[p-1],l[p]=h,p+1>s&&(s=p+1)}for(var g=0===s?-1:l[s-1];g>=0;)i.push(g),g=u[g];i.reverse(),i.push(n.length),m.each(t,function(e){o[e._id]||r.removed&&r.removed(e._id)});var v=0;m.each(i,function(o){for(var i,s,c,l=n[o]?n[o]._id:null,u=v;o>u;u++)s=n[u],m.has(a,s._id)?(i=t[a[s._id]],c=e._makeChangedFields(s,i),m.isEmpty(c)||r.changed&&r.changed(s._id,c),r.movedBefore&&r.movedBefore(s._id,l)):(c=y.clone(s),delete c._id,r.addedBefore&&r.addedBefore(s._id,c,l),r.added&&r.added(s._id,c));l&&(s=n[o],i=t[a[s._id]],c=e._makeChangedFields(s,i),m.isEmpty(c)||r.changed&&r.changed(s._id,c)),v=o+1})},e._diffObjects=function(e,t,n){m.each(e,function(e,r){m.has(t,r)?n.both&&n.both(r,e,t[r]):n.leftOnly&&n.leftOnly(r,e)}),n.rightOnly&&m.each(t,function(t,r){m.has(e,r)||n.rightOnly(r,t)})}}.call(this),function(){e._IdMap=function(){var e=this;e._map={}},m.extend(e._IdMap.prototype,{get:function(t){var n=this,r=e._idStringify(t);return n._map[r]},set:function(t,n){var r=this,o=e._idStringify(t);r._map[o]=n},remove:function(t){var n=this,r=e._idStringify(t);delete n._map[r]},has:function(t){var n=this,r=e._idStringify(t);return m.has(n._map,r)},empty:function(){var e=this;return m.isEmpty(e._map)},clear:function(){var e=this;e._map={}},forEach:function(t){for(var n=this,r=m.keys(n._map),o=0;o<r.length;o++){var a=t.call(null,n._map[r[o]],e._idParse(r[o]));if(a===!1)return}},size:function(){var e=this;return m.size(e._map)},setDefault:function(t,n){var r=this,o=e._idStringify(t);return m.has(r._map,o)?r._map[o]:(r._map[o]=n,n)},clone:function(){var t=this,n=new e._IdMap;return t.forEach(function(e,t){n.set(t,y.clone(e))}),n}})}.call(this),function(){e._CachingChangeObserver=function(t){var n=this;t=t||{};var r=t.callbacks&&e._observeChangesCallbacksAreOrdered(t.callbacks);if(m.has(t,"ordered")){if(n.ordered=t.ordered,t.callbacks&&t.ordered!==r)throw Error("ordered option doesn't match callbacks")}else{if(!t.callbacks)throw Error("must provide ordered or callbacks");n.ordered=r}var o=t.callbacks||{};n.ordered?(n.docs=new v(e._idStringify),n.applyChange={addedBefore:function(e,t,r){var a=y.clone(t);a._id=e,o.addedBefore&&o.addedBefore.call(n,e,t,r),o.added&&o.added.call(n,e,t),n.docs.putBefore(e,a,r||null)},movedBefore:function(e,t){n.docs.get(e);o.movedBefore&&o.movedBefore.call(n,e,t),n.docs.moveBefore(e,t||null)}}):(n.docs=new e._IdMap,n.applyChange={added:function(e,t){var r=y.clone(t);o.added&&o.added.call(n,e,t),r._id=e,n.docs.set(e,r)}}),n.applyChange.changed=function(t,r){var a=n.docs.get(t);if(!a)throw new Error("Unknown id for changed: "+t);o.changed&&o.changed.call(n,t,y.clone(r)),e._applyChanges(a,r)},n.applyChange.removed=function(e){o.removed&&o.removed.call(n,e),n.docs.remove(e)}},e._observeFromObserveChanges=function(t,n){var r,o=t.getTransform()||function(e){return e},a=!!n._suppress_initial;if(e._observeCallbacksAreOrdered(n)){var i=!n._no_indices;r={addedBefore:function(e,t,r){var s=this;if(!a&&(n.addedAt||n.added)){var c=o(m.extend(t,{_id:e}));if(n.addedAt){var l=i?r?s.docs.indexOf(r):s.docs.size():-1;n.addedAt(c,l,r)}else n.added(c)}},changed:function(t,r){var a=this;if(n.changedAt||n.changed){var s=y.clone(a.docs.get(t));if(!s)throw new Error("Unknown id for changed: "+t);var c=o(y.clone(s));if(e._applyChanges(s,r),s=o(s),n.changedAt){var l=i?a.docs.indexOf(t):-1;n.changedAt(s,c,l)}else n.changed(s,c)}},movedBefore:function(e,t){var r=this;if(n.movedTo){var a=i?r.docs.indexOf(e):-1,s=i?t?r.docs.indexOf(t):r.docs.size():-1;s>a&&--s,n.movedTo(o(y.clone(r.docs.get(e))),a,s,t||null)}},removed:function(e){var t=this;if(n.removedAt||n.removed){var r=o(t.docs.get(e));if(n.removedAt){var a=i?t.docs.indexOf(e):-1;n.removedAt(r,a)}else n.removed(r)}}}}else r={added:function(e,t){if(!a&&n.added){var r=m.extend(t,{_id:e});n.added(o(r))}},changed:function(t,r){var a=this;if(n.changed){var i=a.docs.get(t),s=y.clone(i);e._applyChanges(s,r),n.changed(o(s),o(i))}},removed:function(e){var t=this;n.removed&&n.removed(o(t.docs.get(e)))}};var s=new e._CachingChangeObserver({callbacks:r}),c=t.observeChanges(s.applyChange);return a=!1,s.ordered&&(c._fetch=function(){var e=[];return s.docs.forEach(function(t){e.push(o(y.clone(t)))}),e}),c}}.call(this),function(){e._looksLikeObjectID=function(e){return 24===e.length&&e.match(/^[0-9a-f]*$/)},e._ObjectID=function(t){var n=this;if(t){if(t=t.toLowerCase(),!e._looksLikeObjectID(t))throw new Error("Invalid hexadecimal string for creating an ObjectID");n._str=t}else n._str=w.hexString(24)},e._ObjectID.prototype.toString=function(){var e=this;return'ObjectID("'+e._str+'")'},e._ObjectID.prototype.equals=function(t){var n=this;return t instanceof e._ObjectID&&n.valueOf()===t.valueOf()},e._ObjectID.prototype.clone=function(){var t=this;return new e._ObjectID(t._str)},e._ObjectID.prototype.typeName=function(){return"oid"},e._ObjectID.prototype.getTimestamp=function(){var e=this;return parseInt(e._str.substr(0,8),16)},e._ObjectID.prototype.valueOf=e._ObjectID.prototype.toJSONValue=e._ObjectID.prototype.toHexString=function(){return this._str},e._selectorIsId=function(t){return"string"==typeof t||"number"==typeof t||t instanceof e._ObjectID},e._selectorIsIdPerhapsAsObject=function(t){return e._selectorIsId(t)||t&&"object"==typeof t&&t._id&&e._selectorIsId(t._id)&&1===m.size(t)},e._idsMatchedBySelector=function(t){if(e._selectorIsId(t))return[t];if(!t)return null;if(m.has(t,"_id"))return e._selectorIsId(t._id)?[t._id]:t._id&&t._id.$in&&m.isArray(t._id.$in)&&!m.isEmpty(t._id.$in)&&m.all(t._id.$in,e._selectorIsId)?t._id.$in:null;if(t.$and&&m.isArray(t.$and))for(var n=0;n<t.$and.length;++n){var r=e._idsMatchedBySelector(t.$and[n]);if(r)return r}return null},y.addType("oid",function(t){return new e._ObjectID(t)})}.call(this),"undefined"==typeof Package&&(Package={}),Package.minimongo={LocalCollection:e,Minimongo:t,MinimongoTest:n}}(),function(){{var e,t,n,r,o,a,i,s,c,l,u=Package.meteor.Meteor,d=(Package.check.check,Package.check.Match,Package.random.Random),h=Package.ejson.EJSON,p=Package.json.JSON,f=Package.underscore._,m=Package.deps.Deps,g=(Package.logging.Log,Package.retry.Retry),y=Package.minimongo.LocalCollection;Package.minimongo.Minimongo}(function(){t={}}).call(this),function(){n=function(){var e=document,t=window,n={},r=function(){};r.prototype.addEventListener=function(e,t){this._listeners||(this._listeners={}),e in this._listeners||(this._listeners[e]=[]);var r=this._listeners[e];-1===n.arrIndexOf(r,t)&&r.push(t)},r.prototype.removeEventListener=function(e,t){if(this._listeners&&e in this._listeners){var r=this._listeners[e],o=n.arrIndexOf(r,t);return-1!==o?(r.length>1?this._listeners[e]=r.slice(0,o).concat(r.slice(o+1)):delete this._listeners[e],void 0):void 0}},r.prototype.dispatchEvent=function(e){var t=e.type,n=Array.prototype.slice.call(arguments,0);if(this["on"+t]&&this["on"+t].apply(this,n),this._listeners&&t in this._listeners)for(var r=0;r<this._listeners[t].length;r++)this._listeners[t][r].apply(this,n)};var o=function(e,t){if(this.type=e,"undefined"!=typeof t)for(var n in t)t.hasOwnProperty(n)&&(this[n]=t[n])};o.prototype.toString=function(){var e=[];for(var t in this)if(this.hasOwnProperty(t)){var n=this[t];"function"==typeof n&&(n="[function]"),e.push(t+"="+n)}return"SimpleEvent("+e.join(", ")+")"};var a=function(e){var t=this;t._events=e||[],t._listeners={}};a.prototype.emit=function(e){var t=this;if(t._verifyType(e),!t._nuked){var n=Array.prototype.slice.call(arguments,1);if(t["on"+e]&&t["on"+e].apply(t,n),e in t._listeners)for(var r=0;r<t._listeners[e].length;r++)t._listeners[e][r].apply(t,n)}},a.prototype.on=function(e,t){var n=this;n._verifyType(e),n._nuked||(e in n._listeners||(n._listeners[e]=[]),n._listeners[e].push(t))},a.prototype._verifyType=function(e){var t=this;-1===n.arrIndexOf(t._events,e)&&n.log("Event "+p.stringify(e)+" not listed "+p.stringify(t._events)+" in "+t)},a.prototype.nuke=function(){var e=this;e._nuked=!0;for(var t=0;t<e._events.length;t++)delete e[e._events[t]];e._listeners={}};var i="abcdefghijklmnopqrstuvwxyz0123456789_";n.random_string=function(e,t){t=t||i.length;var n,r=[];for(n=0;e>n;n++)r.push(i.substr(Math.floor(Math.random()*t),1));return r.join("")},n.random_number=function(e){return Math.floor(Math.random()*e)},n.random_number_string=function(e){var t=(""+(e-1)).length,r=Array(t+1).join("0");return(r+n.random_number(e)).slice(-t)},n.getOrigin=function(e){e+="/";var t=e.split("/").slice(0,3);return t.join("/")},n.isSameOriginUrl=function(e,n){return n||(n=t.location.href),e.split("/").slice(0,3).join("/")===n.split("/").slice(0,3).join("/")},n.isSameOriginScheme=function(e,n){return n||(n=t.location.href),e.split(":")[0]===n.split(":")[0]},n.getParentDomain=function(e){if(/^[0-9.]*$/.test(e))return e;if(/^\[/.test(e))return e;if(!/[.]/.test(e))return e;var t=e.split(".").slice(1);return t.join(".")},n.objectExtend=function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);return e};var s="_jp";n.polluteGlobalNamespace=function(){s in t||(t[s]={})},n.closeFrame=function(e,t){return"c"+p.stringify([e,t])},n.userSetCode=function(e){return 1e3===e||e>=3e3&&4999>=e},n.countRTO=function(e){var t;return t=e>100?3*e:e+200},n.log=function(){t.console&&console.log&&console.log.apply&&console.log.apply(console,arguments)},n.bind=function(e,t){return e.bind?e.bind(t):function(){return e.apply(t,arguments)}},n.flatUrl=function(e){return-1===e.indexOf("?")&&-1===e.indexOf("#")},n.amendUrl=function(t,r){var o;if(void 0===r)o=e.location;else{var a=/^([a-z0-9.+-]+:)/i.exec(r);if(a){var i=a[0].toLowerCase(),s=r.substring(i.length),c=/[a-z0-9\.-]+(:[0-9]+)?/.exec(s);if(c)var l=c[0]}if(!i||!l)throw new Error("relativeTo must be an absolute url");o={protocol:i,host:l}}if(!t)throw new Error("Wrong url for SockJS");if(!n.flatUrl(t))throw new Error("Only basic urls are supported in SockJS");0===t.indexOf("//")&&(t=o.protocol+t),0===t.indexOf("/")&&(t=o.protocol+"//"+o.host+t),t=t.replace(/[/]+$/,"");var u=t.split("/");return("http:"===u[0]&&/:80$/.test(u[2])||"https:"===u[0]&&/:443$/.test(u[2]))&&(u[2]=u[2].replace(/:(80|443)$/,"")),t=u.join("/")
},n.arrIndexOf=function(e,t){for(var n=0;n<e.length;n++)if(e[n]===t)return n;return-1},n.arrSkip=function(e,t){var r=n.arrIndexOf(e,t);if(-1===r)return e.slice();var o=e.slice(0,r);return o.concat(e.slice(r+1))},n.isArray=Array.isArray||function(e){return{}.toString.call(e).indexOf("Array")>=0},n.delay=function(e,t){return"function"==typeof e&&(t=e,e=0),setTimeout(t,e)};var c,l=/[\\\"\x00-\x1f\x7f-\x9f\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,u={"\x00":"\\u0000","":"\\u0001","":"\\u0002","":"\\u0003","":"\\u0004","":"\\u0005","":"\\u0006","":"\\u0007","\b":"\\b","	":"\\t","\n":"\\n","":"\\u000b","\f":"\\f","\r":"\\r","":"\\u000e","":"\\u000f","":"\\u0010","":"\\u0011","":"\\u0012","":"\\u0013","":"\\u0014","":"\\u0015","":"\\u0016","":"\\u0017","":"\\u0018","":"\\u0019","":"\\u001a","":"\\u001b","":"\\u001c","":"\\u001d","":"\\u001e","":"\\u001f",'"':'\\"',"\\":"\\\\","":"\\u007f","":"\\u0080","":"\\u0081","":"\\u0082","":"\\u0083","":"\\u0084","":"\\u0085","":"\\u0086","":"\\u0087","":"\\u0088","":"\\u0089","":"\\u008a","":"\\u008b","":"\\u008c","":"\\u008d","":"\\u008e","":"\\u008f","":"\\u0090","":"\\u0091","":"\\u0092","":"\\u0093","":"\\u0094","":"\\u0095","":"\\u0096","":"\\u0097","":"\\u0098","":"\\u0099","":"\\u009a","":"\\u009b","":"\\u009c","":"\\u009d","":"\\u009e","":"\\u009f","­":"\\u00ad","؀":"\\u0600","؁":"\\u0601","؂":"\\u0602","؃":"\\u0603","؄":"\\u0604","܏":"\\u070f","឴":"\\u17b4","឵":"\\u17b5","‌":"\\u200c","‍":"\\u200d","‎":"\\u200e","‏":"\\u200f","\u2028":"\\u2028","\u2029":"\\u2029","‪":"\\u202a","‫":"\\u202b","‬":"\\u202c","‭":"\\u202d","‮":"\\u202e"," ":"\\u202f","⁠":"\\u2060","⁡":"\\u2061","⁢":"\\u2062","⁣":"\\u2063","⁤":"\\u2064","⁥":"\\u2065","⁦":"\\u2066","⁧":"\\u2067","⁨":"\\u2068","⁩":"\\u2069","⁪":"\\u206a","⁫":"\\u206b","⁬":"\\u206c","⁭":"\\u206d","⁮":"\\u206e","⁯":"\\u206f","﻿":"\\ufeff","￰":"\\ufff0","￱":"\\ufff1","￲":"\\ufff2","￳":"\\ufff3","￴":"\\ufff4","￵":"\\ufff5","￶":"\\ufff6","￷":"\\ufff7","￸":"\\ufff8","￹":"\\ufff9","￺":"\\ufffa","￻":"\\ufffb","￼":"\\ufffc","�":"\\ufffd","￾":"\\ufffe","￿":"\\uffff"},d=/[\x00-\x1f\ud800-\udfff\ufffe\uffff\u0300-\u0333\u033d-\u0346\u034a-\u034c\u0350-\u0352\u0357-\u0358\u035c-\u0362\u0374\u037e\u0387\u0591-\u05af\u05c4\u0610-\u0617\u0653-\u0654\u0657-\u065b\u065d-\u065e\u06df-\u06e2\u06eb-\u06ec\u0730\u0732-\u0733\u0735-\u0736\u073a\u073d\u073f-\u0741\u0743\u0745\u0747\u07eb-\u07f1\u0951\u0958-\u095f\u09dc-\u09dd\u09df\u0a33\u0a36\u0a59-\u0a5b\u0a5e\u0b5c-\u0b5d\u0e38-\u0e39\u0f43\u0f4d\u0f52\u0f57\u0f5c\u0f69\u0f72-\u0f76\u0f78\u0f80-\u0f83\u0f93\u0f9d\u0fa2\u0fa7\u0fac\u0fb9\u1939-\u193a\u1a17\u1b6b\u1cda-\u1cdb\u1dc0-\u1dcf\u1dfc\u1dfe\u1f71\u1f73\u1f75\u1f77\u1f79\u1f7b\u1f7d\u1fbb\u1fbe\u1fc9\u1fcb\u1fd3\u1fdb\u1fe3\u1feb\u1fee-\u1fef\u1ff9\u1ffb\u1ffd\u2000-\u2001\u20d0-\u20d1\u20d4-\u20d7\u20e7-\u20e9\u2126\u212a-\u212b\u2329-\u232a\u2adc\u302b-\u302c\uaab2-\uaab3\uf900-\ufa0d\ufa10\ufa12\ufa15-\ufa1e\ufa20\ufa22\ufa25-\ufa26\ufa2a-\ufa2d\ufa30-\ufa6d\ufa70-\ufad9\ufb1d\ufb1f\ufb2a-\ufb36\ufb38-\ufb3c\ufb3e\ufb40-\ufb41\ufb43-\ufb44\ufb46-\ufb4e\ufff0-\uffff]/g,h=p&&p.stringify||function(e){return l.lastIndex=0,l.test(e)&&(e=e.replace(l,function(e){return u[e]})),'"'+e+'"'},f=function(e){var t,n={},r=[];for(t=0;65536>t;t++)r.push(String.fromCharCode(t));return e.lastIndex=0,r.join("").replace(e,function(e){return n[e]="\\u"+("0000"+e.charCodeAt(0).toString(16)).slice(-4),""}),e.lastIndex=0,n};n.quote=function(e){var t=h(e);return d.lastIndex=0,d.test(t)?(c||(c=f(d)),t.replace(d,function(e){return c[e]})):t};var m=["websocket","xdr-streaming","xhr-streaming","iframe-eventsource","iframe-htmlfile","xdr-polling","xhr-polling","iframe-xhr-polling","jsonp-polling"];n.probeProtocols=function(){for(var e={},t=0;t<m.length;t++){var n=m[t];e[n]=S[n]&&S[n].enabled()}return e},n.detectProtocols=function(e,t,n){var r={},o=[];t||(t=m);for(var a=0;a<t.length;a++){var i=t[a];r[i]=e[i]}var s=function(e){var t=e.shift();r[t]?o.push(t):e.length>0&&s(e)};return n.websocket!==!1&&s(["websocket"]),r["xhr-streaming"]&&!n.null_origin?o.push("xhr-streaming"):!r["xdr-streaming"]||n.cookie_needed||n.null_origin?s(["iframe-eventsource","iframe-htmlfile"]):o.push("xdr-streaming"),r["xhr-polling"]&&!n.null_origin?o.push("xhr-polling"):!r["xdr-polling"]||n.cookie_needed||n.null_origin?s(["iframe-xhr-polling","jsonp-polling"]):o.push("xdr-polling"),o};var g="_sockjs_global";n.createHook=function(){var e="a"+n.random_string(8);if(!(g in t)){var r={};t[g]=function(e){return e in r||(r[e]={id:e,del:function(){delete r[e]}}),r[e]}}return t[g](e)},n.attachMessage=function(e){n.attachEvent("message",e)},n.attachEvent=function(n,r){"undefined"!=typeof t.addEventListener?t.addEventListener(n,r,!1):(e.attachEvent("on"+n,r),t.attachEvent("on"+n,r))},n.detachMessage=function(e){n.detachEvent("message",e)},n.detachEvent=function(n,r){"undefined"!=typeof t.addEventListener?t.removeEventListener(n,r,!1):(e.detachEvent("on"+n,r),t.detachEvent("on"+n,r))};var y={},v=!1,b=function(){for(var e in y)y[e](),delete y[e]},w=function(){v||(v=!0,b())};n.attachEvent("unload",w),n.unload_add=function(e){var t=n.random_string(8);return y[t]=e,v&&n.delay(b),t},n.unload_del=function(e){e in y&&delete y[e]},n.createIframe=function(t,r){var o,a,i=e.createElement("iframe"),s=function(){clearTimeout(o);try{i.onload=null}catch(e){}i.onerror=null},c=function(){i&&(s(),setTimeout(function(){i&&i.parentNode.removeChild(i),i=null},0),n.unload_del(a))},l=function(e){i&&(c(),r(e))},u=function(e,t){try{i&&i.contentWindow&&i.contentWindow.postMessage(e,t)}catch(n){}};return i.src=t,i.style.display="none",i.style.position="absolute",i.onerror=function(){l("onerror")},i.onload=function(){clearTimeout(o),o=setTimeout(function(){l("onload timeout")},2e3)},e.body.appendChild(i),o=setTimeout(function(){l("timeout")},15e3),a=n.unload_add(c),{post:u,cleanup:c,loaded:s}},n.createHtmlfile=function(e,r){var o,a,i,c=new ActiveXObject("htmlfile"),l=function(){clearTimeout(o)},u=function(){c&&(l(),n.unload_del(a),i.parentNode.removeChild(i),i=c=null,CollectGarbage())},d=function(e){c&&(u(),r(e))},h=function(e,t){try{i&&i.contentWindow&&i.contentWindow.postMessage(e,t)}catch(n){}};c.open(),c.write('<html><script>document.domain="'+document.domain+'";</script></html>'),c.close(),c.parentWindow[s]=t[s];var p=c.createElement("div");return c.body.appendChild(p),i=c.createElement("iframe"),p.appendChild(i),i.src=e,o=setTimeout(function(){d("timeout")},15e3),a=n.unload_add(u),{post:h,cleanup:u,loaded:l}};var _=function(){};_.prototype=new a(["chunk","finish"]),_.prototype._start=function(e,r,o,a){var i=this;try{i.xhr=new XMLHttpRequest}catch(s){}if(!i.xhr)try{i.xhr=new t.ActiveXObject("Microsoft.XMLHTTP")}catch(s){}(t.ActiveXObject||t.XDomainRequest)&&(r+=(-1===r.indexOf("?")?"?":"&")+"t="+ +new Date),i.unload_ref=n.unload_add(function(){i._cleanup(!0)});try{i.xhr.open(e,r,!0)}catch(c){return i.emit("finish",0,""),i._cleanup(),void 0}if(a&&a.no_credentials||(i.xhr.withCredentials="true"),a&&a.headers)for(var l in a.headers)i.xhr.setRequestHeader(l,a.headers[l]);i.xhr.onreadystatechange=function(){if(i.xhr){var e=i.xhr;switch(e.readyState){case 3:try{var t=e.status,n=e.responseText}catch(e){}1223===t&&(t=204),n&&n.length>0&&i.emit("chunk",t,n);break;case 4:var t=e.status;1223===t&&(t=204),i.emit("finish",t,e.responseText),i._cleanup(!1)}}},i.xhr.send(o)},_.prototype._cleanup=function(e){var t=this;if(t.xhr){if(n.unload_del(t.unload_ref),t.xhr.onreadystatechange=function(){},e)try{t.xhr.abort()}catch(r){}t.unload_ref=t.xhr=null}},_.prototype.close=function(){var e=this;e.nuke(),e._cleanup(!0)};var k=n.XHRCorsObject=function(){var e=this,t=arguments;n.delay(function(){e._start.apply(e,t)})};k.prototype=new _;var T=n.XHRLocalObject=function(e,t,r){var o=this;n.delay(function(){o._start(e,t,r,{no_credentials:!0})})};T.prototype=new _;var x=n.XDRObject=function(e,t,r){var o=this;n.delay(function(){o._start(e,t,r)})};x.prototype=new a(["chunk","finish"]),x.prototype._start=function(e,t,r){var o=this,a=new XDomainRequest;t+=(-1===t.indexOf("?")?"?":"&")+"t="+ +new Date;var i=a.ontimeout=a.onerror=function(){o.emit("finish",0,""),o._cleanup(!1)};a.onprogress=function(){o.emit("chunk",200,a.responseText)},a.onload=function(){o.emit("finish",200,a.responseText),o._cleanup(!1)},o.xdr=a,o.unload_ref=n.unload_add(function(){o._cleanup(!0)});try{o.xdr.open(e,t),o.xdr.send(r)}catch(s){i()}},x.prototype._cleanup=function(e){var t=this;if(t.xdr){if(n.unload_del(t.unload_ref),t.xdr.ontimeout=t.xdr.onerror=t.xdr.onprogress=t.xdr.onload=null,e)try{t.xdr.abort()}catch(r){}t.unload_ref=t.xdr=null}},x.prototype.close=function(){var e=this;e.nuke(),e._cleanup(!0)},n.isXHRCorsCapable=function(){return t.XMLHttpRequest&&"withCredentials"in new XMLHttpRequest?1:t.XDomainRequest&&e.domain?2:q.enabled()?3:4};var S=function(e,t,r){if(!(this instanceof S))return new S(e,t,r);var o,a=this;a._options={devel:!1,debug:!1,protocols_whitelist:[],info:void 0,rtt:void 0},r&&n.objectExtend(a._options,r),a._base_url=n.amendUrl(e),a._server=a._options.server||n.random_number_string(1e3),a._options.protocols_whitelist&&a._options.protocols_whitelist.length?o=a._options.protocols_whitelist:(o="string"==typeof t&&t.length>0?[t]:n.isArray(t)?t:null,o&&a._debug('Deprecated API: Use "protocols_whitelist" option instead of supplying protocol list as a second parameter to SockJS constructor.')),a._protocols=[],a.protocol=null,a.readyState=S.CONNECTING,a._ir=W(a._base_url),a._ir.onfinish=function(e,t){a._ir=null,e?(a._options.info&&(e=n.objectExtend(e,a._options.info)),a._options.rtt&&(t=a._options.rtt),a._applyInfo(e,t,o),a._didClose()):a._didClose(1002,"Can't connect to server",!0)}};S.prototype=new r,S.version="0.3.4",S.CONNECTING=0,S.OPEN=1,S.CLOSING=2,S.CLOSED=3,S.prototype._debug=function(){this._options.debug&&n.log.apply(n,arguments)},S.prototype._dispatchOpen=function(){var e=this;e.readyState===S.CONNECTING?(e._transport_tref&&(clearTimeout(e._transport_tref),e._transport_tref=null),e.readyState=S.OPEN,e.dispatchEvent(new o("open"))):e._didClose(1006,"Server lost session")},S.prototype._dispatchMessage=function(e){var t=this;t.readyState===S.OPEN&&t.dispatchEvent(new o("message",{data:e}))},S.prototype._dispatchHeartbeat=function(){var e=this;e.readyState===S.OPEN&&e.dispatchEvent(new o("heartbeat",{}))},S.prototype._didClose=function(e,t,r){var a=this;if(a.readyState!==S.CONNECTING&&a.readyState!==S.OPEN&&a.readyState!==S.CLOSING)throw new Error("INVALID_STATE_ERR");a._ir&&(a._ir.nuke(),a._ir=null),a._transport&&(a._transport.doCleanup(),a._transport=null);var i=new o("close",{code:e,reason:t,wasClean:n.userSetCode(e)});if(!n.userSetCode(e)&&a.readyState===S.CONNECTING&&!r){if(a._try_next_protocol(i))return;i=new o("close",{code:2e3,reason:"All transports failed",wasClean:!1,last_event:i})}a.readyState=S.CLOSED,n.delay(function(){a.dispatchEvent(i)})},S.prototype._didMessage=function(e){var t=this,n=e.slice(0,1);switch(n){case"o":t._dispatchOpen();break;case"a":for(var r=p.parse(e.slice(1)||"[]"),o=0;o<r.length;o++)t._dispatchMessage(r[o]);break;case"m":var r=p.parse(e.slice(1)||"null");t._dispatchMessage(r);break;case"c":var r=p.parse(e.slice(1)||"[]");t._didClose(r[0],r[1]);break;case"h":t._dispatchHeartbeat()}},S.prototype._try_next_protocol=function(t){var r=this;for(r.protocol&&(r._debug("Closed transport:",r.protocol,""+t),r.protocol=null),r._transport_tref&&(clearTimeout(r._transport_tref),r._transport_tref=null);;){var o=r.protocol=r._protocols.shift();if(!o)return!1;if(S[o]&&S[o].need_body===!0&&(!e.body||"undefined"!=typeof e.readyState&&"complete"!==e.readyState))return r._protocols.unshift(o),r.protocol="waiting-for-load",n.attachEvent("load",function(){r._try_next_protocol()}),!0;if(S[o]&&S[o].enabled(r._options)){var a=S[o].roundTrips||1,i=(r._options.rto||0)*a||5e3;r._transport_tref=n.delay(i,function(){r.readyState===S.CONNECTING&&r._didClose(2007,"Transport timeouted")});var s=n.random_string(8),c=r._base_url+"/"+r._server+"/"+s;return r._debug("Opening transport:",o," url:"+c," RTO:"+r._options.rto),r._transport=new S[o](r,c,r._base_url),!0}r._debug("Skipping transport:",o)}},S.prototype.close=function(e,t){var r=this;if(e&&!n.userSetCode(e))throw new Error("INVALID_ACCESS_ERR");return r.readyState!==S.CONNECTING&&r.readyState!==S.OPEN?!1:(r.readyState=S.CLOSING,r._didClose(e||1e3,t||"Normal closure"),!0)},S.prototype.send=function(e){var t=this;if(t.readyState===S.CONNECTING)throw new Error("INVALID_STATE_ERR");return t.readyState===S.OPEN&&t._transport.doSend(n.quote(""+e)),!0},S.prototype._applyInfo=function(t,r,o){var a=this;a._options.info=t,a._options.rtt=r,a._options.rto=n.countRTO(r),a._options.info.null_origin=!e.domain,t.base_url&&(a._base_url=n.amendUrl(t.base_url,a._base_url));var i=n.probeProtocols();a._protocols=n.detectProtocols(i,o,t),n.isSameOriginScheme(a._base_url)||2!==n.isXHRCorsCapable()||(a._protocols=["jsonp-polling"])};var C=S.websocket=function(e,r){var o=this,a=r+"/websocket";a="https"===a.slice(0,5)?"wss"+a.slice(5):"ws"+a.slice(4),o.ri=e,o.url=a;var i=t.WebSocket||t.MozWebSocket;o.ws=new i(o.url),o.ws.onmessage=function(e){o.ri._didMessage(e.data)},o.unload_ref=n.unload_add(function(){o.ws.close()}),o.ws.onclose=function(){o.ri._didMessage(n.closeFrame(1006,"WebSocket connection broken"))}};C.prototype.doSend=function(e){this.ws.send("["+e+"]")},C.prototype.doCleanup=function(){var e=this,t=e.ws;t&&(t.onmessage=t.onclose=null,t.close(),n.unload_del(e.unload_ref),e.unload_ref=e.ri=e.ws=null)},C.enabled=function(){return!(!t.WebSocket&&!t.MozWebSocket)},C.roundTrips=2;var M=function(){};M.prototype.send_constructor=function(e){var t=this;t.send_buffer=[],t.sender=e},M.prototype.doSend=function(e){var t=this;t.send_buffer.push(e),t.send_stop||t.send_schedule()},M.prototype.send_schedule_wait=function(){var e,t=this;t.send_stop=function(){t.send_stop=null,clearTimeout(e)},e=n.delay(25,function(){t.send_stop=null,t.send_schedule()})},M.prototype.send_schedule=function(){var e=this;if(e.send_buffer.length>0){var t="["+e.send_buffer.join(",")+"]";e.send_stop=e.sender(e.trans_url,t,function(t,n){e.send_stop=null,t===!1?e.ri._didClose(1006,"Sending error "+n):e.send_schedule_wait()}),e.send_buffer=[]}},M.prototype.send_destructor=function(){var e=this;e._send_stop&&e._send_stop(),e._send_stop=null};var E=function(t,r,o){var a=this;if(!("_send_form"in a)){var i=a._send_form=e.createElement("form"),s=a._send_area=e.createElement("textarea");s.name="d",i.style.display="none",i.style.position="absolute",i.method="POST",i.enctype="application/x-www-form-urlencoded",i.acceptCharset="UTF-8",i.appendChild(s),e.body.appendChild(i)}var i=a._send_form,s=a._send_area,c="a"+n.random_string(8);i.target=c,i.action=t+"/jsonp_send?i="+c;var l;try{l=e.createElement('<iframe name="'+c+'">')}catch(u){l=e.createElement("iframe"),l.name=c}l.id=c,i.appendChild(l),l.style.display="none";try{s.value=r}catch(d){n.log("Your browser is seriously broken. Go home! "+d.message)}i.submit();var h=function(){l.onerror&&(l.onreadystatechange=l.onerror=l.onload=null,n.delay(500,function(){l.parentNode.removeChild(l),l=null}),s.value="",o(!0))};return l.onerror=l.onload=h,l.onreadystatechange=function(){"complete"==l.readyState&&h()},h},I=function(e){return function(t,n,r){var o=new e("POST",t+"/xhr_send",n);return o.onfinish=function(e){r(200===e||204===e,"http status "+e)},function(e){r(!1,e)}}},A=function(t,r){var o,a,i=e.createElement("script"),s=function(e){a&&(a.parentNode.removeChild(a),a=null),i&&(clearTimeout(o),i.parentNode.removeChild(i),i.onreadystatechange=i.onerror=i.onload=i.onclick=null,i=null,r(e),r=null)},c=!1,l=null;if(i.id="a"+n.random_string(8),i.src=t,i.type="text/javascript",i.charset="UTF-8",i.onerror=function(){l||(l=setTimeout(function(){c||s(n.closeFrame(1006,"JSONP script loaded abnormally (onerror)"))},1e3))},i.onload=function(){s(n.closeFrame(1006,"JSONP script loaded abnormally (onload)"))},i.onreadystatechange=function(){if(/loaded|closed/.test(i.readyState)){if(i&&i.htmlFor&&i.onclick){c=!0;try{i.onclick()}catch(e){}}i&&s(n.closeFrame(1006,"JSONP script loaded abnormally (onreadystatechange)"))}},"undefined"==typeof i.async&&e.attachEvent)if(/opera/i.test(navigator.userAgent))a=e.createElement("script"),a.text="try{var a = document.getElementById('"+i.id+"'); if(a)a.onerror();}catch(x){};",i.async=a.async=!1;else{try{i.htmlFor=i.id,i.event="onclick"}catch(u){}i.async=!0}"undefined"!=typeof i.async&&(i.async=!0),o=setTimeout(function(){s(n.closeFrame(1006,"JSONP script loaded abnormally (timeout)"))},35e3);var d=e.getElementsByTagName("head")[0];return d.insertBefore(i,d.firstChild),a&&d.insertBefore(a,d.firstChild),s},O=S["jsonp-polling"]=function(e,t){n.polluteGlobalNamespace();var r=this;r.ri=e,r.trans_url=t,r.send_constructor(E),r._schedule_recv()};O.prototype=new M,O.prototype._schedule_recv=function(){var e=this,t=function(t){e._recv_stop=null,t&&(e._is_closing||e.ri._didMessage(t)),e._is_closing||e._schedule_recv()};e._recv_stop=j(e.trans_url+"/jsonp",A,t)},O.enabled=function(){return!0},O.need_body=!0,O.prototype.doCleanup=function(){var e=this;e._is_closing=!0,e._recv_stop&&e._recv_stop(),e.ri=e._recv_stop=null,e.send_destructor()};var j=function(e,r,o){var a="a"+n.random_string(6),i=e+"?c="+escape(s+"."+a),c=0,l=function(e){switch(c){case 0:delete t[s][a],o(e);break;case 1:o(e),c=2;break;case 2:delete t[s][a]}},u=r(i,l);t[s][a]=u;var d=function(){t[s][a]&&(c=1,t[s][a](n.closeFrame(1e3,"JSONP user aborted read")))};return d},P=function(){};P.prototype=new M,P.prototype.run=function(e,t,n,r,o){var a=this;a.ri=e,a.trans_url=t,a.send_constructor(I(o)),a.poll=new Z(e,r,t+n,o)},P.prototype.doCleanup=function(){var e=this;e.poll&&(e.poll.abort(),e.poll=null)};var N=S["xhr-streaming"]=function(e,t){this.run(e,t,"/xhr_streaming",ot,n.XHRCorsObject)};N.prototype=new P,N.enabled=function(){return t.XMLHttpRequest&&"withCredentials"in new XMLHttpRequest&&!/opera/i.test(navigator.userAgent)},N.roundTrips=2,N.need_body=!0;var D=S["xdr-streaming"]=function(e,t){this.run(e,t,"/xhr_streaming",ot,n.XDRObject)};D.prototype=new P,D.enabled=function(){return!!t.XDomainRequest},D.roundTrips=2;var R=S["xhr-polling"]=function(e,t){this.run(e,t,"/xhr",ot,n.XHRCorsObject)};R.prototype=new P,R.enabled=N.enabled,R.roundTrips=2;var L=S["xdr-polling"]=function(e,t){this.run(e,t,"/xhr",ot,n.XDRObject)};L.prototype=new P,L.enabled=D.enabled,L.roundTrips=2;var q=function(){};q.prototype.i_constructor=function(e,t,r){var o=this;o.ri=e,o.origin=n.getOrigin(r),o.base_url=r,o.trans_url=t;var a=r+"/iframe.html";o.ri._options.devel&&(a+="?t="+ +new Date),o.window_id=n.random_string(8),a+="#"+o.window_id,o.iframeObj=n.createIframe(a,function(e){o.ri._didClose(1006,"Unable to load an iframe ("+e+")")}),o.onmessage_cb=n.bind(o.onmessage,o),n.attachMessage(o.onmessage_cb)},q.prototype.doCleanup=function(){var e=this;if(e.iframeObj){n.detachMessage(e.onmessage_cb);try{e.iframeObj.iframe.contentWindow&&e.postMessage("c")}catch(t){}e.iframeObj.cleanup(),e.iframeObj=null,e.onmessage_cb=e.iframeObj=null}},q.prototype.onmessage=function(e){var t=this;if(e.origin===t.origin){var n=e.data.slice(0,8),r=e.data.slice(8,9),o=e.data.slice(9);if(n===t.window_id)switch(r){case"s":t.iframeObj.loaded(),t.postMessage("s",p.stringify([S.version,t.protocol,t.trans_url,t.base_url]));break;case"t":t.ri._didMessage(o)}}},q.prototype.postMessage=function(e,t){var n=this;n.iframeObj.post(n.window_id+e+(t||""),n.origin)},q.prototype.doSend=function(e){this.postMessage("m",e)},q.enabled=function(){var e=navigator&&navigator.userAgent&&-1!==navigator.userAgent.indexOf("Konqueror");return("function"==typeof t.postMessage||"object"==typeof t.postMessage)&&!e};var F,B=function(e,r){parent!==t?parent.postMessage(F+e+(r||""),"*"):n.log("Can't postMessage, no parent window.",e,r)},H=function(){};H.prototype._didClose=function(e,t){B("t",n.closeFrame(e,t))},H.prototype._didMessage=function(e){B("t",e)},H.prototype._doSend=function(e){this._transport.doSend(e)},H.prototype._doCleanup=function(){this._transport.doCleanup()},n.parent_origin=void 0,S.bootstrap_iframe=function(){var r;F=e.location.hash.slice(1);var o=function(e){if(e.source===parent&&("undefined"==typeof n.parent_origin&&(n.parent_origin=e.origin),e.origin===n.parent_origin)){var o=e.data.slice(0,8),a=e.data.slice(8,9),i=e.data.slice(9);if(o===F)switch(a){case"s":var s=p.parse(i),c=s[0],l=s[1],u=s[2],d=s[3];if(c!==S.version&&n.log('Incompatibile SockJS! Main site uses: "'+c+'", the iframe: "'+S.version+'".'),!n.flatUrl(u)||!n.flatUrl(d))return n.log("Only basic urls are supported in SockJS"),void 0;if(!n.isSameOriginUrl(u)||!n.isSameOriginUrl(d))return n.log("Can't connect to different domain from within an iframe. ("+p.stringify([t.location.href,u,d])+")"),void 0;r=new H,r._transport=new H[l](r,u,d);break;case"m":r._doSend(i);break;case"c":r&&r._doCleanup(),r=null}}};n.attachMessage(o),B("s")};var $=function(e,t){var r=this;n.delay(function(){r.doXhr(e,t)})};$.prototype=new a(["finish"]),$.prototype.doXhr=function(e,t){var r=this,o=(new Date).getTime(),a=new t("GET",e+"/info?cb="+n.random_string(10)),i=n.delay(8e3,function(){a.ontimeout()});a.onfinish=function(e,t){if(clearTimeout(i),i=null,200===e){var n=(new Date).getTime()-o,a=p.parse(t);"object"!=typeof a&&(a={}),r.emit("finish",a,n)}else r.emit("finish")},a.ontimeout=function(){a.close(),r.emit("finish")}};var U=function(t){var r=this,o=function(){var e=new q;e.protocol="w-iframe-info-receiver";var n=function(t){if("string"==typeof t&&"m"===t.substr(0,1)){var n=p.parse(t.substr(1)),o=n[0],a=n[1];r.emit("finish",o,a)}else r.emit("finish");e.doCleanup(),e=null},o={_options:{},_didClose:n,_didMessage:n};e.i_constructor(o,t,t)};e.body?o():n.attachEvent("load",o)};U.prototype=new a(["finish"]);var J=function(){var e=this;n.delay(function(){e.emit("finish",{},2e3)})};J.prototype=new a(["finish"]);var W=function(e){if(n.isSameOriginUrl(e))return new $(e,n.XHRLocalObject);switch(n.isXHRCorsCapable()){case 1:return new $(e,n.XHRLocalObject);case 2:return n.isSameOriginScheme(e)?new $(e,n.XDRObject):new J;case 3:return new U(e);default:return new J}},z=H["w-iframe-info-receiver"]=function(e,t,r){var o=new $(r,n.XHRLocalObject);o.onfinish=function(t,n){e._didMessage("m"+p.stringify([t,n])),e._didClose()}};z.prototype.doCleanup=function(){};var V=S["iframe-eventsource"]=function(){var e=this;e.protocol="w-iframe-eventsource",e.i_constructor.apply(e,arguments)};V.prototype=new q,V.enabled=function(){return"EventSource"in t&&q.enabled()},V.need_body=!0,V.roundTrips=3;var G=H["w-iframe-eventsource"]=function(e,t){this.run(e,t,"/eventsource",et,n.XHRLocalObject)};G.prototype=new P;var X=S["iframe-xhr-polling"]=function(){var e=this;e.protocol="w-iframe-xhr-polling",e.i_constructor.apply(e,arguments)};X.prototype=new q,X.enabled=function(){return t.XMLHttpRequest&&q.enabled()},X.need_body=!0,X.roundTrips=3;var Y=H["w-iframe-xhr-polling"]=function(e,t){this.run(e,t,"/xhr",ot,n.XHRLocalObject)};Y.prototype=new P;var Q=S["iframe-htmlfile"]=function(){var e=this;e.protocol="w-iframe-htmlfile",e.i_constructor.apply(e,arguments)};Q.prototype=new q,Q.enabled=function(){return q.enabled()},Q.need_body=!0,Q.roundTrips=3;var K=H["w-iframe-htmlfile"]=function(e,t){this.run(e,t,"/htmlfile",rt,n.XHRLocalObject)};K.prototype=new P;var Z=function(e,t,n,r){var o=this;o.ri=e,o.Receiver=t,o.recv_url=n,o.AjaxObject=r,o._scheduleRecv()};Z.prototype._scheduleRecv=function(){var e=this,t=e.poll=new e.Receiver(e.recv_url,e.AjaxObject),n=0;t.onmessage=function(t){n+=1,e.ri._didMessage(t.data)},t.onclose=function(n){e.poll=t=t.onmessage=t.onclose=null,e.poll_is_closing||("permanent"===n.reason?e.ri._didClose(1006,"Polling error ("+n.reason+")"):e._scheduleRecv())}},Z.prototype.abort=function(){var e=this;e.poll_is_closing=!0,e.poll&&e.poll.abort()};var et=function(e){var t=this,r=new EventSource(e);r.onmessage=function(e){t.dispatchEvent(new o("message",{data:unescape(e.data)}))},t.es_close=r.onerror=function(e,a){var i=a?"user":2!==r.readyState?"network":"permanent";t.es_close=r.onmessage=r.onerror=null,r.close(),r=null,n.delay(200,function(){t.dispatchEvent(new o("close",{reason:i}))})}};et.prototype=new r,et.prototype.abort=function(){var e=this;e.es_close&&e.es_close({},!0)};var tt,nt=function(){if(void 0===tt)if("ActiveXObject"in t)try{tt=!!new ActiveXObject("htmlfile")}catch(e){}else tt=!1;return tt},rt=function(e){var r=this;n.polluteGlobalNamespace(),r.id="a"+n.random_string(6,26),e+=(-1===e.indexOf("?")?"?":"&")+"c="+escape(s+"."+r.id);var a,i=nt()?n.createHtmlfile:n.createIframe;t[s][r.id]={start:function(){a.loaded()},message:function(e){r.dispatchEvent(new o("message",{data:e}))},stop:function(){r.iframe_close({},"network")}},r.iframe_close=function(e,n){a.cleanup(),r.iframe_close=a=null,delete t[s][r.id],r.dispatchEvent(new o("close",{reason:n}))},a=i(e,function(){r.iframe_close({},"permanent")})};rt.prototype=new r,rt.prototype.abort=function(){var e=this;e.iframe_close&&e.iframe_close({},"user")};var ot=function(e,t){var n=this,r=0;n.xo=new t("POST",e,null),n.xo.onchunk=function(e,t){if(200===e)for(;;){var a=t.slice(r),i=a.indexOf("\n");if(-1===i)break;r+=i+1;var s=a.slice(0,i);n.dispatchEvent(new o("message",{data:s}))}},n.xo.onfinish=function(e,t){n.xo.onchunk(e,t),n.xo=null;var r=200===e?"network":"permanent";n.dispatchEvent(new o("close",{reason:r}))}};return ot.prototype=new r,ot.prototype.abort=function(){var e=this;e.xo&&(e.xo.close(),e.dispatchEvent(new o("close",{reason:"user"})),e.xo=null)},S.getUtils=function(){return n},S.getIframeTransport=function(){return q},S}(),"_sockjs_onload"in window&&setTimeout(_sockjs_onload,1),"function"==typeof define&&define.amd&&define("sockjs",[],function(){return n})}.call(this),function(){t.ClientStream=function(e,t){var n=this;n.options=f.extend({retry:!0},t),n._initCommon(),n.HEARTBEAT_TIMEOUT=6e4,n.rawUrl=e,n.socket=null,n.heartbeatTimer=null,"undefined"!=typeof window&&window.addEventListener&&window.addEventListener("online",f.bind(n._online,n),!1),n._launchConnection()},f.extend(t.ClientStream.prototype,{send:function(e){var t=this;t.currentStatus.connected&&t.socket.send(e)},_changeUrl:function(e){var t=this;t.rawUrl=e},_connected:function(){var e=this;e.connectionTimer&&(clearTimeout(e.connectionTimer),e.connectionTimer=null),e.currentStatus.connected||(e.currentStatus.status="connected",e.currentStatus.connected=!0,e.currentStatus.retryCount=0,e.statusChanged(),f.each(e.eventCallbacks.reset,function(e){e()}))},_cleanup:function(){var e=this;e._clearConnectionAndHeartbeatTimers(),e.socket&&(e.socket.onmessage=e.socket.onclose=e.socket.onerror=e.socket.onheartbeat=function(){},e.socket.close(),e.socket=null)},_clearConnectionAndHeartbeatTimers:function(){var e=this;e.connectionTimer&&(clearTimeout(e.connectionTimer),e.connectionTimer=null),e.heartbeatTimer&&(clearTimeout(e.heartbeatTimer),e.heartbeatTimer=null)},_heartbeat_timeout:function(){var e=this;u._debug("Connection timeout. No heartbeat received."),e._lostConnection()},_heartbeat_received:function(){var e=this;e._forcedToDisconnect||(e.heartbeatTimer&&clearTimeout(e.heartbeatTimer),e.heartbeatTimer=setTimeout(f.bind(e._heartbeat_timeout,e),e.HEARTBEAT_TIMEOUT))},_sockjsProtocolsWhitelist:function(){var e=["xdr-polling","xhr-polling","iframe-xhr-polling","jsonp-polling"],t=navigator&&/iPhone|iPad|iPod/.test(navigator.userAgent)&&/OS 4_|OS 5_/.test(navigator.userAgent);return t||(e=["websocket"].concat(e)),e},_launchConnection:function(){var e=this;e._cleanup();var t=f.extend({protocols_whitelist:e._sockjsProtocolsWhitelist()},e.options._sockjsOptions);e.socket=new n(r(e.rawUrl),void 0,t),e.socket.onopen=function(){e._connected()},e.socket.onmessage=function(t){e._heartbeat_received(),e.currentStatus.connected&&f.each(e.eventCallbacks.message,function(e){e(t.data)})},e.socket.onclose=function(){e._lostConnection()},e.socket.onerror=function(){u._debug("stream error",f.toArray(arguments),(new Date).toDateString())},e.socket.onheartbeat=function(){e._heartbeat_received()},e.connectionTimer&&clearTimeout(e.connectionTimer),e.connectionTimer=setTimeout(f.bind(e._lostConnection,e),e.CONNECT_TIMEOUT)}})}.call(this),function(){var e=function(e,t){return e.length>=t.length&&e.substring(0,t.length)===t},n=function(e,t){return e.length>=t.length&&e.substring(e.length-t.length)===t},a=function(t,r,o){r||(r="http");var a,i=t.match(/^ddp(i?)\+sockjs:\/\//),s=t.match(/^http(s?):\/\//);if(i){var c=t.substr(i[0].length);a="i"===i[1]?r:r+"s";var l=c.indexOf("/"),h=-1===l?c:c.substr(0,l),p=-1===l?"":c.substr(l);return h=h.replace(/\*/g,function(){return Math.floor(10*d.fraction())}),a+"://"+h+p}if(s){a=s[1]?r+"s":r;var f=t.substr(s[0].length);t=a+"://"+f}return-1!==t.indexOf("://")||e(t,"/")||(t=r+"://"+t),t=u._relativeToSiteRootUrl(t),n(t,"/")?t+o:t+"/"+o};r=function(e){return a(e,"http","sockjs")},o=function(e){var t=a(e,"ws","websocket");return t},t.toSockjsUrl=r,f.extend(t.ClientStream.prototype,{on:function(e,t){var n=this;if("message"!==e&&"reset"!==e)throw new Error("unknown event type: "+e);n.eventCallbacks[e]||(n.eventCallbacks[e]=[]),n.eventCallbacks[e].push(t)},_initCommon:function(){var e=this;e.CONNECT_TIMEOUT=1e4,e.eventCallbacks={},e._forcedToDisconnect=!1,e.currentStatus={status:"connecting",connected:!1,retryCount:0},e.statusListeners="undefined"!=typeof m&&new m.Dependency,e.statusChanged=function(){e.statusListeners&&e.statusListeners.changed()},e._retry=new g,e.connectionTimer=null},reconnect:function(e){var t=this;return e=e||{},e.url&&t._changeUrl(e.url),e._sockjsOptions&&(t.options._sockjsOptions=e._sockjsOptions),t.currentStatus.connected?((e._force||e.url)&&t._lostConnection(),void 0):("connecting"===t.currentStatus.status&&t._lostConnection(),t._retry.clear(),t.currentStatus.retryCount-=1,t._retryNow(),void 0)},disconnect:function(e){var t=this;e=e||{},t._forcedToDisconnect||(e._permanent&&(t._forcedToDisconnect=!0),t._cleanup(),t._retry.clear(),t.currentStatus={status:e._permanent?"failed":"offline",connected:!1,retryCount:0},e._permanent&&e._error&&(t.currentStatus.reason=e._error),t.statusChanged())},_lostConnection:function(){var e=this;e._cleanup(),e._retryLater()},_online:function(){"offline"!=this.currentStatus.status&&this.reconnect()},_retryLater:function(){var e=this,t=0;e.options.retry&&(t=e._retry.retryLater(e.currentStatus.retryCount,f.bind(e._retryNow,e))),e.currentStatus.status="waiting",e.currentStatus.connected=!1,e.currentStatus.retryTime=(new Date).getTime()+t,e.statusChanged()},_retryNow:function(){var e=this;e._forcedToDisconnect||(e.currentStatus.retryCount+=1,e.currentStatus.status="connecting",e.currentStatus.connected=!1,delete e.currentStatus.retryTime,e.statusChanged(),e._launchConnection())},status:function(){var e=this;return e.statusListeners&&e.statusListeners.depend(),e.currentStatus}})}.call(this),function(){e={},a=["pre1"],t.SUPPORTED_DDP_VERSIONS=a,i=function(e){this.isSimulation=e.isSimulation,this._unblock=e.unblock||function(){},this._calledUnblock=!1,this.userId=e.userId,this._setUserId=e.setUserId||function(){},this.connection=e.connection},f.extend(i.prototype,{unblock:function(){var e=this;e._calledUnblock=!0,e._unblock()},setUserId:function(e){var t=this;if(t._calledUnblock)throw new Error("Can't call setUserId in a method after calling unblock");t.userId=e,t._setUserId(e)}}),s=function(e){try{var t=p.parse(e)}catch(n){return u._debug("Discarding message with invalid JSON",e),null}return null===t||"object"!=typeof t?(u._debug("Discarding non-object DDP message",e),null):(f.has(t,"cleared")&&(f.has(t,"fields")||(t.fields={}),f.each(t.cleared,function(e){t.fields[e]=void 0}),delete t.cleared),f.each(["fields","params","result"],function(e){f.has(t,e)&&(t[e]=h._adjustTypesFromJSONValue(t[e]))}),t)},c=function(e){var t=h.clone(e);
if(f.has(e,"fields")){var n=[];f.each(e.fields,function(e,r){void 0===e&&(n.push(r),delete t.fields[r])}),f.isEmpty(n)||(t.cleared=n),f.isEmpty(t.fields)&&delete t.fields}if(f.each(["fields","params","result"],function(e){f.has(t,e)&&(t[e]=h._adjustTypesToJSONValue(t[e]))}),e.id&&"string"!=typeof e.id)throw new Error("Message id is not a string");return p.stringify(t)},e._CurrentInvocation=new u.EnvironmentVariable}.call(this),function(){if(u.isServer)var n=Npm.require("path"),r=(Npm.require("fibers"),Npm.require(n.join("fibers","future")));var o=function(e,n){var r=this;n=f.extend({onConnected:function(){},onDDPVersionNegotiationFailure:function(e){u._debug(e)},reloadWithOutstanding:!1,supportedDDPVersions:a,retry:!0},n),r.onReconnect=null,r._stream="object"==typeof e?e:new t.ClientStream(e,{retry:n.retry,headers:n.headers,_sockjsOptions:n._sockjsOptions}),r._lastSessionId=null,r._versionSuggestion=null,r._version=null,r._stores={},r._methodHandlers={},r._nextMethodId=1,r._supportedDDPVersions=n.supportedDDPVersions,r._methodInvokers={},r._outstandingMethodBlocks=[],r._documentsWrittenByStub={},r._serverDocuments={},r._afterUpdateCallbacks=[],r._messagesBufferedUntilQuiescence=[],r._methodsBlockingQuiescence={},r._subsBeingRevived={},r._resetStores=!1,r._updatesForUnknownStores={},r._retryMigrate=null,r._subscriptions={},r._userId=null,r._userIdDeps="undefined"!=typeof m&&new m.Dependency,u.isClient&&Package.reload&&!n.reloadWithOutstanding&&Package.reload.Reload._onMigrate(function(e){if(r._readyToMigrate())return[!0];if(r._retryMigrate)throw new Error("Two migrations in progress?");return r._retryMigrate=e,!1});var o=function(e){try{var t=s(e)}catch(o){return u._debug("Exception while parsing DDP",o),void 0}if(null===t||!t.msg)return t&&t.server_id||u._debug("discarding invalid livedata message",t),void 0;if("connected"===t.msg)r._version=r._versionSuggestion,n.onConnected(),r._livedata_connected(t);else if("failed"==t.msg)if(f.contains(r._supportedDDPVersions,t.version))r._versionSuggestion=t.version,r._stream.reconnect({_force:!0});else{var a="DDP version negotiation failed; server requested version "+t.version;r._stream.disconnect({_permanent:!0,_error:a}),n.onDDPVersionNegotiationFailure(a)}else f.include(["added","changed","removed","ready","updated"],t.msg)?r._livedata_data(t):"nosub"===t.msg?r._livedata_nosub(t):"result"===t.msg?r._livedata_result(t):"error"===t.msg?r._livedata_error(t):u._debug("discarding unknown livedata message type",t)},i=function(){var e={msg:"connect"};r._lastSessionId&&(e.session=r._lastSessionId),e.version=r._versionSuggestion||r._supportedDDPVersions[0],r._versionSuggestion=e.version,e.support=r._supportedDDPVersions,r._send(e),!f.isEmpty(r._outstandingMethodBlocks)&&f.isEmpty(r._outstandingMethodBlocks[0].methods)&&r._outstandingMethodBlocks.shift(),f.each(r._methodInvokers,function(e){e.sentMessage=!1}),r.onReconnect?r._callOnReconnectAndSendAppropriateOutstandingMethods():r._sendOutstandingMethods(),f.each(r._subscriptions,function(e,t){r._send({msg:"sub",id:t,name:e.name,params:e.params})})};u.isServer?(r._stream.on("message",u.bindEnvironment(o,u._debug)),r._stream.on("reset",u.bindEnvironment(i,u._debug))):(r._stream.on("message",o),r._stream.on("reset",i))},g=function(e){var t=this;t.methodId=e.methodId,t.sentMessage=!1,t._callback=e.callback,t._connection=e.connection,t._message=e.message,t._onResultReceived=e.onResultReceived||function(){},t._wait=e.wait,t._methodResult=null,t._dataVisible=!1,t._connection._methodInvokers[t.methodId]=t};f.extend(g.prototype,{sendMessage:function(){var e=this;if(e.gotResult())throw new Error("sendingMethod is called on method with result");e._dataVisible=!1,e.sentMessage=!0,e._wait&&(e._connection._methodsBlockingQuiescence[e.methodId]=!0),e._connection._send(e._message)},_maybeInvokeCallback:function(){var e=this;e._methodResult&&e._dataVisible&&(e._callback(e._methodResult[0],e._methodResult[1]),delete e._connection._methodInvokers[e.methodId],e._connection._outstandingMethodFinished())},receiveResult:function(e,t){var n=this;if(n.gotResult())throw new Error("Methods should only receive results once");n._methodResult=[e,t],n._onResultReceived(e,t),n._maybeInvokeCallback()},dataVisible:function(){var e=this;e._dataVisible=!0,e._maybeInvokeCallback()},gotResult:function(){var e=this;return!!e._methodResult}}),f.extend(o.prototype,{registerStore:function(e,t){var n=this;if(e in n._stores)return!1;var r={};f.each(["update","beginUpdate","endUpdate","saveOriginals","retrieveOriginals"],function(e){r[e]=function(){return t[e]?t[e].apply(t,arguments):void 0}}),n._stores[e]=r;var o=n._updatesForUnknownStores[e];return o&&(r.beginUpdate(o.length,!1),f.each(o,function(e){r.update(e)}),r.endUpdate(),delete n._updatesForUnknownStores[e]),!0},subscribe:function(e){var t=this,n=Array.prototype.slice.call(arguments,1),r={};if(n.length){var o=n[n.length-1];"function"==typeof o?r.onReady=n.pop():!o||"function"!=typeof o.onReady&&"function"!=typeof o.onError||(r=n.pop())}var a,i=f.find(t._subscriptions,function(t){return t.inactive&&t.name===e&&h.equals(t.params,n)});i?(a=i.id,i.inactive=!1,r.onReady&&(i.ready||(i.readyCallback=r.onReady)),r.onError&&(i.errorCallback=r.onError)):(a=d.id(),t._subscriptions[a]={id:a,name:e,params:n,inactive:!1,ready:!1,readyDeps:"undefined"!=typeof m&&new m.Dependency,readyCallback:r.onReady,errorCallback:r.onError},t._send({msg:"sub",id:a,name:e,params:n}));var s={stop:function(){f.has(t._subscriptions,a)&&(t._send({msg:"unsub",id:a}),delete t._subscriptions[a])},ready:function(){if(!f.has(t._subscriptions,a))return!1;var e=t._subscriptions[a];return e.readyDeps&&e.readyDeps.depend(),e.ready}};return m.active&&m.onInvalidate(function(){f.has(t._subscriptions,a)&&(t._subscriptions[a].inactive=!0),m.afterFlush(function(){f.has(t._subscriptions,a)&&t._subscriptions[a].inactive&&s.stop()})}),s},_subscribeAndWait:function(e,t,n){var o,a=this,i=new r,s=!1;return t=t||[],t.push({onReady:function(){s=!0,i["return"]()},onError:function(e){s?n&&n.onLateError&&n.onLateError(e):i["throw"](e)}}),o=a.subscribe.apply(a,[e].concat(t)),i.wait(),o},methods:function(e){var t=this;f.each(e,function(e,n){if(t._methodHandlers[n])throw new Error("A method named '"+n+"' is already defined");t._methodHandlers[n]=e})},call:function(e){var t=Array.prototype.slice.call(arguments,1);if(t.length&&"function"==typeof t[t.length-1])var n=t.pop();return this.apply(e,t,n)},apply:function(t,n,o,a){var s=this;a||"function"!=typeof o||(a=o,o={}),o=o||{},a&&(a=u.bindEnvironment(a,"delivering result of invoking '"+t+"'"));var c=function(){var e;return function(){return void 0===e&&(e=""+s._nextMethodId++),e}}(),l=e._CurrentInvocation.get(),d=l&&l.isSimulation,p=s._methodHandlers[t];if(p){var m=function(e){s.setUserId(e)},y=new i({isSimulation:!0,userId:s.userId(),setUserId:m});d||s._saveOriginals();try{var v=e._CurrentInvocation.withValue(y,function(){return u.isServer?u._noYieldsAllowed(function(){return p.apply(y,h.clone(n))}):p.apply(y,h.clone(n))})}catch(b){var w=b}d||s._retrieveAndStoreOriginals(c())}if(d){if(a)return a(w,v),void 0;if(w)throw w;return v}if(w&&!w.expected&&u._debug("Exception while simulating the effect of invoking '"+t+"'",w,w.stack),!a)if(u.isClient)a=function(){};else{var _=new r;a=_.resolver()}var k=new g({methodId:c(),callback:a,connection:s,onResultReceived:o.onResultReceived,wait:!!o.wait,message:{msg:"method",method:t,params:n,id:c()}});return o.wait?s._outstandingMethodBlocks.push({wait:!0,methods:[k]}):((f.isEmpty(s._outstandingMethodBlocks)||f.last(s._outstandingMethodBlocks).wait)&&s._outstandingMethodBlocks.push({wait:!1,methods:[]}),f.last(s._outstandingMethodBlocks).methods.push(k)),1===s._outstandingMethodBlocks.length&&k.sendMessage(),_?_.wait():void 0},_saveOriginals:function(){var e=this;f.each(e._stores,function(e){e.saveOriginals()})},_retrieveAndStoreOriginals:function(e){var t=this;if(t._documentsWrittenByStub[e])throw new Error("Duplicate methodId in _retrieveAndStoreOriginals");var n=[];f.each(t._stores,function(r,o){var a=r.retrieveOriginals();a&&a.forEach(function(r,a){n.push({collection:o,id:a}),f.has(t._serverDocuments,o)||(t._serverDocuments[o]=new y._IdMap);var i=t._serverDocuments[o].setDefault(a,{});i.writtenByStubs?i.writtenByStubs[e]=!0:(i.document=r,i.flushCallbacks=[],i.writtenByStubs={},i.writtenByStubs[e]=!0)})}),f.isEmpty(n)||(t._documentsWrittenByStub[e]=n)},_unsubscribeAll:function(){var e=this;f.each(f.clone(e._subscriptions),function(t,n){"meteor_autoupdate_clientVersions"!==t.name&&(e._send({msg:"unsub",id:n}),delete e._subscriptions[n])})},_send:function(e){var t=this;t._stream.send(c(e))},status:function(){var e=this;return e._stream.status.apply(e._stream,arguments)},reconnect:function(){var e=this;return e._stream.reconnect.apply(e._stream,arguments)},disconnect:function(){var e=this;return e._stream.disconnect.apply(e._stream,arguments)},close:function(){var e=this;return e._stream.disconnect({_permanent:!0})},userId:function(){var e=this;return e._userIdDeps&&e._userIdDeps.depend(),e._userId},setUserId:function(e){var t=this;t._userId!==e&&(t._userId=e,t._userIdDeps&&t._userIdDeps.changed())},_waitingForQuiescence:function(){var e=this;return!f.isEmpty(e._subsBeingRevived)||!f.isEmpty(e._methodsBlockingQuiescence)},_anyMethodsAreOutstanding:function(){var e=this;return f.any(f.pluck(e._methodInvokers,"sentMessage"))},_livedata_connected:function(e){var t=this;if(t._lastSessionId&&(t._resetStores=!0),"string"==typeof e.session){var n=t._lastSessionId===e.session;t._lastSessionId=e.session}n||(t._updatesForUnknownStores={},t._resetStores&&(t._documentsWrittenByStub={},t._serverDocuments={}),t._afterUpdateCallbacks=[],t._subsBeingRevived={},f.each(t._subscriptions,function(e,n){e.ready&&(t._subsBeingRevived[n]=!0)}),t._methodsBlockingQuiescence={},t._resetStores&&f.each(t._methodInvokers,function(e){e.gotResult()?t._afterUpdateCallbacks.push(f.bind(e.dataVisible,e)):e.sentMessage&&(t._methodsBlockingQuiescence[e.methodId]=!0)}),t._messagesBufferedUntilQuiescence=[],t._waitingForQuiescence()||(t._resetStores&&(f.each(t._stores,function(e){e.beginUpdate(0,!0),e.endUpdate()}),t._resetStores=!1),t._runAfterUpdateCallbacks()))},_processOneDataMessage:function(e,t){var n=this;n["_process_"+e.msg](e,t)},_livedata_data:function(e){var t=this,n={};if(t._waitingForQuiescence()){if(t._messagesBufferedUntilQuiescence.push(e),"nosub"===e.msg&&delete t._subsBeingRevived[e.id],f.each(e.subs||[],function(e){delete t._subsBeingRevived[e]}),f.each(e.methods||[],function(e){delete t._methodsBlockingQuiescence[e]}),t._waitingForQuiescence())return;f.each(t._messagesBufferedUntilQuiescence,function(e){t._processOneDataMessage(e,n)}),t._messagesBufferedUntilQuiescence=[]}else t._processOneDataMessage(e,n);(t._resetStores||!f.isEmpty(n))&&(f.each(t._stores,function(e,r){e.beginUpdate(f.has(n,r)?n[r].length:0,t._resetStores)}),t._resetStores=!1,f.each(n,function(e,n){var r=t._stores[n];r?f.each(e,function(e){r.update(e)}):(f.has(t._updatesForUnknownStores,n)||(t._updatesForUnknownStores[n]=[]),Array.prototype.push.apply(t._updatesForUnknownStores[n],e))}),f.each(t._stores,function(e){e.endUpdate()})),t._runAfterUpdateCallbacks()},_runAfterUpdateCallbacks:function(){var e=this,t=e._afterUpdateCallbacks;e._afterUpdateCallbacks=[],f.each(t,function(e){e()})},_pushUpdate:function(e,t,n){f.has(e,t)||(e[t]=[]),e[t].push(n)},_getServerDoc:function(e,t){var n=this;if(!f.has(n._serverDocuments,e))return null;var r=n._serverDocuments[e];return r.get(t)||null},_process_added:function(e,t){var n=this,r=y._idParse(e.id),o=n._getServerDoc(e.collection,r);if(o){if(void 0!==o.document)throw new Error("Server sent add for existing id: "+e.id);o.document=e.fields||{},o.document._id=r}else n._pushUpdate(t,e.collection,e)},_process_changed:function(e,t){var n=this,r=n._getServerDoc(e.collection,y._idParse(e.id));if(r){if(void 0===r.document)throw new Error("Server sent changed for nonexisting id: "+e.id);y._applyChanges(r.document,e.fields)}else n._pushUpdate(t,e.collection,e)},_process_removed:function(e,t){var n=this,r=n._getServerDoc(e.collection,y._idParse(e.id));if(r){if(void 0===r.document)throw new Error("Server sent removed for nonexisting id:"+e.id);r.document=void 0}else n._pushUpdate(t,e.collection,{msg:"removed",collection:e.collection,id:e.id})},_process_updated:function(e,t){var n=this;f.each(e.methods,function(e){f.each(n._documentsWrittenByStub[e],function(r){var o=n._getServerDoc(r.collection,r.id);if(!o)throw new Error("Lost serverDoc for "+p.stringify(r));if(!o.writtenByStubs[e])throw new Error("Doc "+p.stringify(r)+" not written by  method "+e);delete o.writtenByStubs[e],f.isEmpty(o.writtenByStubs)&&(n._pushUpdate(t,r.collection,{msg:"replace",id:y._idStringify(r.id),replace:o.document}),f.each(o.flushCallbacks,function(e){e()}),n._serverDocuments[r.collection].remove(r.id))}),delete n._documentsWrittenByStub[e];var r=n._methodInvokers[e];if(!r)throw new Error("No callback invoker for method "+e);n._runWhenAllServerDocsAreFlushed(f.bind(r.dataVisible,r))})},_process_ready:function(e){var t=this;f.each(e.subs,function(e){t._runWhenAllServerDocsAreFlushed(function(){var n=t._subscriptions[e];n&&(n.ready||(n.readyCallback&&n.readyCallback(),n.ready=!0,n.readyDeps&&n.readyDeps.changed()))})})},_runWhenAllServerDocsAreFlushed:function(e){var t=this,n=function(){t._afterUpdateCallbacks.push(e)},r=0,o=function(){--r,0===r&&n()};f.each(t._serverDocuments,function(e){e.forEach(function(e){var n=f.any(e.writtenByStubs,function(e,n){var r=t._methodInvokers[n];return r&&r.sentMessage});n&&(++r,e.flushCallbacks.push(o))})}),0===r&&n()},_livedata_nosub:function(e){var t=this;if(t._livedata_data(e),f.has(t._subscriptions,e.id)){var n=t._subscriptions[e.id].errorCallback;delete t._subscriptions[e.id],n&&e.error&&n(new u.Error(e.error.error,e.error.reason,e.error.details))}},_process_nosub:function(){},_livedata_result:function(e){var t=this;if(f.isEmpty(t._outstandingMethodBlocks))return u._debug("Received method result but no methods outstanding"),void 0;for(var n,r=t._outstandingMethodBlocks[0].methods,o=0;o<r.length&&(n=r[o],n.methodId!==e.id);o++);return n?(r.splice(o,1),f.has(e,"error")?n.receiveResult(new u.Error(e.error.error,e.error.reason,e.error.details)):n.receiveResult(void 0,e.result),void 0):(u._debug("Can't match method response to original method call",e),void 0)},_outstandingMethodFinished:function(){var e=this;if(!e._anyMethodsAreOutstanding()){if(!f.isEmpty(e._outstandingMethodBlocks)){var t=e._outstandingMethodBlocks.shift();if(!f.isEmpty(t.methods))throw new Error("No methods outstanding but nonempty block: "+p.stringify(t));f.isEmpty(e._outstandingMethodBlocks)||e._sendOutstandingMethods()}e._maybeMigrate()}},_sendOutstandingMethods:function(){var e=this;f.isEmpty(e._outstandingMethodBlocks)||f.each(e._outstandingMethodBlocks[0].methods,function(e){e.sendMessage()})},_livedata_error:function(e){u._debug("Received error from server: ",e.reason),e.offendingMessage&&u._debug("For: ",e.offendingMessage)},_callOnReconnectAndSendAppropriateOutstandingMethods:function(){var e=this,t=e._outstandingMethodBlocks;if(e._outstandingMethodBlocks=[],e.onReconnect(),!f.isEmpty(t)){if(f.isEmpty(e._outstandingMethodBlocks))return e._outstandingMethodBlocks=t,e._sendOutstandingMethods(),void 0;f.last(e._outstandingMethodBlocks).wait||t[0].wait||(f.each(t[0].methods,function(t){f.last(e._outstandingMethodBlocks).methods.push(t),1===e._outstandingMethodBlocks.length&&t.sendMessage()}),t.shift()),f.each(t,function(t){e._outstandingMethodBlocks.push(t)})}},_readyToMigrate:function(){var e=this;return f.isEmpty(e._methodInvokers)},_maybeMigrate:function(){var e=this;e._retryMigrate&&e._readyToMigrate()&&(e._retryMigrate(),e._retryMigrate=null)}}),t.Connection=o,e.connect=function(e,t){var n=new o(e,t);return l.push(n),n},l=[],e._allSubscriptionsReady=function(){return f.all(l,function(e){return f.all(e._subscriptions,function(e){return e.ready})})}}.call(this),function(){if(u.refresh=function(){},u.isClient){var t="/";"undefined"!=typeof __meteor_runtime_config__&&__meteor_runtime_config__.DDP_DEFAULT_CONNECTION_URL&&(t=__meteor_runtime_config__.DDP_DEFAULT_CONNECTION_URL);var n=new g,r=function(e){if(u._debug(e),Package.reload){var t=Package.reload.Reload._migrationData("livedata")||{},r=t.DDPVersionNegotiationFailures||0;++r,Package.reload.Reload._onMigrate("livedata",function(){return[!0,{DDPVersionNegotiationFailures:r}]}),n.retryLater(r,function(){Package.reload.Reload._reload()})}};u.connection=e.connect(t,{onDDPVersionNegotiationFailure:r}),f.each(["subscribe","methods","call","apply","status","reconnect","disconnect"],function(e){u[e]=f.bind(u.connection[e],u.connection)})}else u.connection=null;u.default_connection=u.connection,u.connect=e.connect}.call(this),"undefined"==typeof Package&&(Package={}),Package.livedata={DDP:e,LivedataTest:t}}(),function(){{var e;Package.meteor.Meteor,Package.logging.Log,Package.underscore._,Package.livedata.DDP,Package.ejson.EJSON}"undefined"==typeof Package&&(Package={}),Package["follower-livedata"]={Follower:e}}(),function(){Package.meteor.Meteor,Package.logging.Log,Package.underscore._,Package.livedata.DDP,Package.ejson.EJSON,Package["follower-livedata"].Follower;"undefined"==typeof Package&&(Package={}),Package["application-configuration"]={}}(),function(){var e,t=Package.meteor.Meteor,n=Package.random.Random,r=Package.ejson.EJSON,o=(Package.json.JSON,Package.underscore._),a=Package.minimongo.LocalCollection,i=(Package.minimongo.Minimongo,Package.logging.Log,Package.livedata.DDP),s=(Package.deps.Deps,Package.check.check),c=Package.check.Match;(function(){e=function(){var e=this;e.noConnCollections={}};var t=function(e,t){return e in t||(t[e]=new a(e)),t[e]};o.extend(e.prototype,{open:function(e,n){var r=this;return e?n?(n._mongo_livedata_collections||(n._mongo_livedata_collections={}),t(e,n._mongo_livedata_collections)):t(e,r.noConnCollections):new a}}),e=new e}).call(this),function(){t.Collection=function(r,i){var s=this;if(!(s instanceof t.Collection))throw new Error('use "new" to construct a Meteor.Collection');switch(i&&i.methods&&(i={connection:i}),i&&i.manager&&!i.connection&&(i.connection=i.manager),i=o.extend({connection:void 0,idGeneration:"STRING",transform:null,_driver:void 0,_preventAutopublish:!1},i),i.idGeneration){case"MONGO":s._makeNewID=function(){return new t.Collection.ObjectID};break;case"STRING":default:s._makeNewID=function(){return n.id()}}if(s._transform=a.wrapTransform(i.transform),r||null===r||t._debug("Warning: creating anonymous collection. It will not be saved or synchronized over the network. (Pass null for the collection name to turn off this warning.)"),s._connection=r&&null!==i.connection?i.connection?i.connection:t.isClient?t.connection:t.server:null,i._driver||(i._driver=r&&s._connection===t.server&&"undefined"!=typeof MongoInternals&&MongoInternals.defaultRemoteCollectionDriver?MongoInternals.defaultRemoteCollectionDriver():e),s._collection=i._driver.open(r,s._connection),s._name=r,s._connection&&s._connection.registerStore){var c=s._connection.registerStore(r,{beginUpdate:function(e,t){(e>1||t)&&s._collection.pauseObservers(),t&&s._collection.remove({})},update:function(e){var t=a._idParse(e.id),n=s._collection.findOne(t);if("replace"===e.msg){var r=e.replace;return r?n?s._collection.update(t,r):s._collection.insert(r):n&&s._collection.remove(t),void 0}if("added"===e.msg){if(n)throw new Error("Expected not to find a document already present for an add");s._collection.insert(o.extend({_id:t},e.fields))}else if("removed"===e.msg){if(!n)throw new Error("Expected to find a document already present for removed");s._collection.remove(t)}else{if("changed"!==e.msg)throw new Error("I don't know how to deal with this message");if(!n)throw new Error("Expected to find a document to change");if(!o.isEmpty(e.fields)){var i={};o.each(e.fields,function(e,t){void 0===e?(i.$unset||(i.$unset={}),i.$unset[t]=1):(i.$set||(i.$set={}),i.$set[t]=e)}),s._collection.update(t,i)}}},endUpdate:function(){s._collection.resumeObservers()},saveOriginals:function(){s._collection.saveOriginals()},retrieveOriginals:function(){return s._collection.retrieveOriginals()}});if(!c)throw new Error("There is already a collection named '"+r+"'")}s._defineMutationMethods(),Package.autopublish&&!i._preventAutopublish&&s._connection&&s._connection.publish&&s._connection.publish(null,function(){return s.find()},{is_auto:!0})},o.extend(t.Collection.prototype,{_getFindSelector:function(e){return 0==e.length?{}:e[0]},_getFindOptions:function(e){var t=this;return e.length<2?{transform:t._transform}:o.extend({transform:t._transform},e[1])},find:function(){var e=this,t=o.toArray(arguments);return e._collection.find(e._getFindSelector(t),e._getFindOptions(t))},findOne:function(){var e=this,t=o.toArray(arguments);return e._collection.findOne(e._getFindSelector(t),e._getFindOptions(t))}}),t.Collection._publishCursor=function(e,t,n){var r=e.observeChanges({added:function(e,r){t.added(n,e,r)},changed:function(e,r){t.changed(n,e,r)},removed:function(e){t.removed(n,e)}});t.onStop(function(){r.stop()})},t.Collection._rewriteSelector=function(e){if(a._selectorIsId(e)&&(e={_id:e}),!e||"_id"in e&&!e._id)return{_id:n.id()};var r={};return o.each(e,function(e,n){e instanceof RegExp?r[n]=l(e):e&&e.$regex instanceof RegExp?(r[n]=l(e.$regex),void 0!==e.$options&&(r[n].$options=e.$options)):r[n]=o.contains(["$or","$and","$nor"],n)?o.map(e,function(e){return t.Collection._rewriteSelector(e)}):e}),r};var l=function(e){s(e,RegExp);var t={$regex:e.source},n="";return e.ignoreCase&&(n+="i"),e.multiline&&(n+="m"),n&&(t.$options=n),t},u=function(e,n){if(!a._selectorIsIdPerhapsAsObject(e))throw new t.Error(403,"Not permitted. Untrusted code may only "+n+" documents by ID.")};o.each(["insert","update","remove"],function(e){t.Collection.prototype[e]=function(){var n,r,a,s=this,c=o.toArray(arguments);if(c.length&&c[c.length-1]instanceof Function&&(n=c.pop()),"insert"===e){if(!c.length)throw new Error("insert requires an argument");if(c[0]=o.extend({},c[0]),"_id"in c[0]){if(r=c[0]._id,!r||!("string"==typeof r||r instanceof t.Collection.ObjectID))throw new Error("Meteor requires document _id fields to be non-empty strings or ObjectIDs")}else r=c[0]._id=s._makeNewID()}else if(c[0]=t.Collection._rewriteSelector(c[0]),"update"===e){var l=c[2]=o.clone(c[2])||{};if(l&&"function"!=typeof l&&l.upsert)if(l.insertedId){if(!("string"==typeof l.insertedId||l.insertedId instanceof t.Collection.ObjectID))throw new Error("insertedId must be string or ObjectID")}else l.insertedId=s._makeNewID()}var d,h=function(t){return"insert"===e?r:t};if(n&&(d=function(e,t){n(e,!e&&h(t))}),s._connection&&s._connection!==t.server){var p=i._CurrentInvocation.get(),f=p&&p.isSimulation;!t.isClient||d||f||(d=function(n){n&&t._debug(e+" failed: "+(n.reason||n.stack))}),f||"insert"===e||u(c[0],e),a=h(s._connection.apply(s._prefix+e,c,d))}else{c.push(d);try{var m=s._collection[e].apply(s._collection,c);a=h(m)}catch(g){if(n)return n(g),null;throw g}}return a}}),t.Collection.prototype.upsert=function(e,t,n,r){var a=this;return r||"function"!=typeof n||(r=n,n={}),a.update(e,t,o.extend({},n,{_returnObject:!0,upsert:!0}),r)},t.Collection.prototype._ensureIndex=function(e,t){var n=this;if(!n._collection._ensureIndex)throw new Error("Can only call _ensureIndex on server collections");n._collection._ensureIndex(e,t)},t.Collection.prototype._dropIndex=function(e){var t=this;if(!t._collection._dropIndex)throw new Error("Can only call _dropIndex on server collections");t._collection._dropIndex(e)},t.Collection.prototype._dropCollection=function(){var e=this;if(!e._collection.dropCollection)throw new Error("Can only call _dropCollection on server collections");e._collection.dropCollection()},t.Collection.prototype._createCappedCollection=function(e){var t=this;if(!t._collection._createCappedCollection)throw new Error("Can only call _createCappedCollection on server collections");t._collection._createCappedCollection(e)},t.Collection.ObjectID=a._ObjectID,function(){var e=function(e,t){var n=["insert","update","remove","fetch","transform"];o.each(o.keys(t),function(t){if(!o.contains(n,t))throw new Error(e+": Invalid key: "+t)});var r=this;if(r._restricted=!0,o.each(["insert","update","remove"],function(n){if(t[n]){if(!(t[n]instanceof Function))throw new Error(e+": Value for `"+n+"` must be a function");t[n].transform=void 0===t.transform?r._transform:a.wrapTransform(t.transform),r._validators[n][e].push(t[n])}}),t.update||t.remove||t.fetch){if(t.fetch&&!(t.fetch instanceof Array))throw new Error(e+": Value for `fetch` must be an array");r._updateFetch(t.fetch)}};t.Collection.prototype.allow=function(t){e.call(this,"allow",t)},t.Collection.prototype.deny=function(t){e.call(this,"deny",t)}}(),t.Collection.prototype._defineMutationMethods=function(){var e=this;if(e._restricted=!1,e._insecure=void 0,e._validators={insert:{allow:[],deny:[]},update:{allow:[],deny:[]},remove:{allow:[],deny:[]},upsert:{allow:[],deny:[]},fetch:[],fetchAllFields:!1},e._name&&(e._prefix="/"+e._name+"/",e._connection)){var n={};o.each(["insert","update","remove"],function(r){n[e._prefix+r]=function(){s(arguments,[c.Any]);try{if(this.isSimulation)return e._collection[r].apply(e._collection,o.toArray(arguments));if("insert"!==r&&u(arguments[0],r),e._restricted){if(0===e._validators[r].allow.length)throw new t.Error(403,"Access denied. No allow validators set on restricted collection for method '"+r+"'.");var n="_validated"+r.charAt(0).toUpperCase()+r.slice(1),a=[this.userId].concat(o.toArray(arguments));return e[n].apply(e,a)}if(e._isInsecure())return e._collection[r].apply(e._collection,o.toArray(arguments));throw new t.Error(403,"Access denied")}catch(i){throw"MongoError"===i.name||"MinimongoError"===i.name?new t.Error(409,i.toString()):i}}}),(t.isClient||e._connection===t.server)&&e._connection.methods(n)}},t.Collection.prototype._updateFetch=function(e){var t=this;t._validators.fetchAllFields||(e?t._validators.fetch=o.union(t._validators.fetch,e):(t._validators.fetchAllFields=!0,t._validators.fetch=null))},t.Collection.prototype._isInsecure=function(){var e=this;return void 0===e._insecure?!!Package.insecure:e._insecure};var d=function(e,t){var n=t;return e.transform&&(n=e.transform(r.clone(t))),n};t.Collection.prototype._validatedInsert=function(e,n){var r=this;if(o.any(r._validators.insert.deny,function(t){return t(e,d(t,n))}))throw new t.Error(403,"Access denied");if(o.all(r._validators.insert.allow,function(t){return!t(e,d(t,n))}))throw new t.Error(403,"Access denied");r._collection.insert.call(r._collection,n)};var h=function(e,t){return e.transform?e.transform(t):t};t.Collection.prototype._validatedUpdate=function(e,n,r,i){var s=this;if(i=i||{},!a._selectorIsIdPerhapsAsObject(n))throw new Error("validated update should be of a single ID");if(i.upsert)throw new t.Error(403,"Access denied. Upserts not allowed in a restricted collection.");var c=[];o.each(r,function(e,n){if("$"!==n.charAt(0))throw new t.Error(403,"Access denied. In a restricted collection you can only update documents, not replace them. Use a Mongo update operator, such as '$set'.");if(!o.has(p,n))throw new t.Error(403,"Access denied. Operator "+n+" not allowed in a restricted collection.");o.each(o.keys(e),function(e){-1!==e.indexOf(".")&&(e=e.substring(0,e.indexOf("."))),o.contains(c,e)||c.push(e)})});var l={transform:null};s._validators.fetchAllFields||(l.fields={},o.each(s._validators.fetch,function(e){l.fields[e]=1}));var u=s._collection.findOne(n,l);if(!u)return 0;var d;if(o.any(s._validators.update.deny,function(t){return d||(d=h(t,u)),t(e,d,c,r)}))throw new t.Error(403,"Access denied");if(o.all(s._validators.update.allow,function(t){return d||(d=h(t,u)),!t(e,d,c,r)}))throw new t.Error(403,"Access denied");return s._collection.update.call(s._collection,n,r,i)};var p={$inc:1,$set:1,$unset:1,$addToSet:1,$pop:1,$pullAll:1,$pull:1,$pushAll:1,$push:1,$bit:1};t.Collection.prototype._validatedRemove=function(e,n){var r=this,a={transform:null};r._validators.fetchAllFields||(a.fields={},o.each(r._validators.fetch,function(e){a.fields[e]=1}));var i=r._collection.findOne(n,a);if(!i)return 0;if(o.any(r._validators.remove.deny,function(t){return t(e,h(t,i))}))throw new t.Error(403,"Access denied");if(o.all(r._validators.remove.allow,function(t){return!t(e,h(t,i))}))throw new t.Error(403,"Access denied");return r._collection.remove.call(r._collection,n)}}.call(this),"undefined"==typeof Package&&(Package={}),Package["mongo-livedata"]={}}(),function(){{var e,t=Package.meteor.Meteor,n=Package.deps.Deps,r=Package.retry.Retry;Package.livedata.DDP}(function(){var o=__meteor_runtime_config__.autoupdateVersion||"unknown",a=new t.Collection("meteor_autoupdate_clientVersions");e={},e.newClientAvailable=function(){return!!a.findOne({$and:[{current:!0},{_id:{$ne:o}}]})};var i=new r({minCount:0,baseTimeout:3e4}),s=0;e._retrySubscription=function(){t.subscribe("meteor_autoupdate_clientVersions",{onError:function(n){t._debug("autoupdate subscription failed:",n),s++,i.retryLater(s,function(){e._retrySubscription()})},onReady:function(){Package.reload&&n.autorun(function(e){a.findOne({current:!0})&&!a.findOne({_id:o})&&(e.stop(),Package.reload.Reload._reload())})}})},e._retrySubscription()}).call(this),"undefined"==typeof Package&&(Package={}),Package.autoupdate={Autoupdate:e}}(),function(){Package.meteor.Meteor,Package.reload.Reload,Package.autoupdate.Autoupdate;"undefined"==typeof Package&&(Package={}),Package["standard-app-packages"]={}}(),function(){{var e,t;Package.meteor.Meteor}(function(){!function(e,t){"object"==typeof module&&"object"==typeof module.exports?module.exports=e.document?t(e,!0):function(e){if(!e.document)throw new Error("jQuery requires a window with a document");return t(e)}:t(e)}("undefined"!=typeof window?window:this,function(e,t){function n(e){var t=e.length,n=at.type(e);return"function"===n||at.isWindow(e)?!1:1===e.nodeType&&t?!0:"array"===n||0===t||"number"==typeof t&&t>0&&t-1 in e}function r(e,t,n){if(at.isFunction(t))return at.grep(e,function(e,r){return!!t.call(e,r,e)!==n});if(t.nodeType)return at.grep(e,function(e){return e===t!==n});if("string"==typeof t){if(pt.test(t))return at.filter(t,e,n);t=at.filter(t,e)}return at.grep(e,function(e){return at.inArray(e,t)>=0!==n})}function o(e,t){do e=e[t];while(e&&1!==e.nodeType);return e}function a(e){var t=_t[e]={};return at.each(e.match(wt)||[],function(e,n){t[n]=!0}),t}function i(){mt.addEventListener?(mt.removeEventListener("DOMContentLoaded",s,!1),e.removeEventListener("load",s,!1)):(mt.detachEvent("onreadystatechange",s),e.detachEvent("onload",s))}function s(){(mt.addEventListener||"load"===event.type||"complete"===mt.readyState)&&(i(),at.ready())}function c(e,t,n){if(void 0===n&&1===e.nodeType){var r="data-"+t.replace(Ct,"-$1").toLowerCase();if(n=e.getAttribute(r),"string"==typeof n){try{n="true"===n?!0:"false"===n?!1:"null"===n?null:+n+""===n?+n:St.test(n)?at.parseJSON(n):n}catch(o){}at.data(e,t,n)}else n=void 0}return n}function l(e){var t;for(t in e)if(("data"!==t||!at.isEmptyObject(e[t]))&&"toJSON"!==t)return!1;return!0}function u(e,t,n,r){if(at.acceptData(e)){var o,a,i=at.expando,s=e.nodeType,c=s?at.cache:e,l=s?e[i]:e[i]&&i;if(l&&c[l]&&(r||c[l].data)||void 0!==n||"string"!=typeof t)return l||(l=s?e[i]=G.pop()||at.guid++:i),c[l]||(c[l]=s?{}:{toJSON:at.noop}),("object"==typeof t||"function"==typeof t)&&(r?c[l]=at.extend(c[l],t):c[l].data=at.extend(c[l].data,t)),a=c[l],r||(a.data||(a.data={}),a=a.data),void 0!==n&&(a[at.camelCase(t)]=n),"string"==typeof t?(o=a[t],null==o&&(o=a[at.camelCase(t)])):o=a,o}}function d(e,t,n){if(at.acceptData(e)){var r,o,a=e.nodeType,i=a?at.cache:e,s=a?e[at.expando]:at.expando;if(i[s]){if(t&&(r=n?i[s]:i[s].data)){at.isArray(t)?t=t.concat(at.map(t,at.camelCase)):t in r?t=[t]:(t=at.camelCase(t),t=t in r?[t]:t.split(" ")),o=t.length;
for(;o--;)delete r[t[o]];if(n?!l(r):!at.isEmptyObject(r))return}(n||(delete i[s].data,l(i[s])))&&(a?at.cleanData([e],!0):rt.deleteExpando||i!=i.window?delete i[s]:i[s]=null)}}}function h(){return!0}function p(){return!1}function f(){try{return mt.activeElement}catch(e){}}function m(e){var t=Lt.split("|"),n=e.createDocumentFragment();if(n.createElement)for(;t.length;)n.createElement(t.pop());return n}function g(e,t){var n,r,o=0,a=typeof e.getElementsByTagName!==xt?e.getElementsByTagName(t||"*"):typeof e.querySelectorAll!==xt?e.querySelectorAll(t||"*"):void 0;if(!a)for(a=[],n=e.childNodes||e;null!=(r=n[o]);o++)!t||at.nodeName(r,t)?a.push(r):at.merge(a,g(r,t));return void 0===t||t&&at.nodeName(e,t)?at.merge([e],a):a}function y(e){Ot.test(e.type)&&(e.defaultChecked=e.checked)}function v(e,t){return at.nodeName(e,"table")&&at.nodeName(11!==t.nodeType?t:t.firstChild,"tr")?e.getElementsByTagName("tbody")[0]||e.appendChild(e.ownerDocument.createElement("tbody")):e}function b(e){return e.type=(null!==at.find.attr(e,"type"))+"/"+e.type,e}function w(e){var t=Gt.exec(e.type);return t?e.type=t[1]:e.removeAttribute("type"),e}function _(e,t){for(var n,r=0;null!=(n=e[r]);r++)at._data(n,"globalEval",!t||at._data(t[r],"globalEval"))}function k(e,t){if(1===t.nodeType&&at.hasData(e)){var n,r,o,a=at._data(e),i=at._data(t,a),s=a.events;if(s){delete i.handle,i.events={};for(n in s)for(r=0,o=s[n].length;o>r;r++)at.event.add(t,n,s[n][r])}i.data&&(i.data=at.extend({},i.data))}}function T(e,t){var n,r,o;if(1===t.nodeType){if(n=t.nodeName.toLowerCase(),!rt.noCloneEvent&&t[at.expando]){o=at._data(t);for(r in o.events)at.removeEvent(t,r,o.handle);t.removeAttribute(at.expando)}"script"===n&&t.text!==e.text?(b(t).text=e.text,w(t)):"object"===n?(t.parentNode&&(t.outerHTML=e.outerHTML),rt.html5Clone&&e.innerHTML&&!at.trim(t.innerHTML)&&(t.innerHTML=e.innerHTML)):"input"===n&&Ot.test(e.type)?(t.defaultChecked=t.checked=e.checked,t.value!==e.value&&(t.value=e.value)):"option"===n?t.defaultSelected=t.selected=e.defaultSelected:("input"===n||"textarea"===n)&&(t.defaultValue=e.defaultValue)}}function x(t,n){var r=at(n.createElement(t)).appendTo(n.body),o=e.getDefaultComputedStyle?e.getDefaultComputedStyle(r[0]).display:at.css(r[0],"display");return r.detach(),o}function S(e){var t=mt,n=en[e];return n||(n=x(e,t),"none"!==n&&n||(Zt=(Zt||at("<iframe frameborder='0' width='0' height='0'/>")).appendTo(t.documentElement),t=(Zt[0].contentWindow||Zt[0].contentDocument).document,t.write(),t.close(),n=x(e,t),Zt.detach()),en[e]=n),n}function C(e,t){return{get:function(){var n=e();if(null!=n)return n?(delete this.get,void 0):(this.get=t).apply(this,arguments)}}}function M(e,t){if(t in e)return t;for(var n=t.charAt(0).toUpperCase()+t.slice(1),r=t,o=fn.length;o--;)if(t=fn[o]+n,t in e)return t;return r}function E(e,t){for(var n,r,o,a=[],i=0,s=e.length;s>i;i++)r=e[i],r.style&&(a[i]=at._data(r,"olddisplay"),n=r.style.display,t?(a[i]||"none"!==n||(r.style.display=""),""===r.style.display&&It(r)&&(a[i]=at._data(r,"olddisplay",S(r.nodeName)))):a[i]||(o=It(r),(n&&"none"!==n||!o)&&at._data(r,"olddisplay",o?n:at.css(r,"display"))));for(i=0;s>i;i++)r=e[i],r.style&&(t&&"none"!==r.style.display&&""!==r.style.display||(r.style.display=t?a[i]||"":"none"));return e}function I(e,t,n){var r=un.exec(t);return r?Math.max(0,r[1]-(n||0))+(r[2]||"px"):t}function A(e,t,n,r,o){for(var a=n===(r?"border":"content")?4:"width"===t?1:0,i=0;4>a;a+=2)"margin"===n&&(i+=at.css(e,n+Et[a],!0,o)),r?("content"===n&&(i-=at.css(e,"padding"+Et[a],!0,o)),"margin"!==n&&(i-=at.css(e,"border"+Et[a]+"Width",!0,o))):(i+=at.css(e,"padding"+Et[a],!0,o),"padding"!==n&&(i+=at.css(e,"border"+Et[a]+"Width",!0,o)));return i}function O(e,t,n){var r=!0,o="width"===t?e.offsetWidth:e.offsetHeight,a=tn(e),i=rt.boxSizing()&&"border-box"===at.css(e,"boxSizing",!1,a);if(0>=o||null==o){if(o=nn(e,t,a),(0>o||null==o)&&(o=e.style[t]),on.test(o))return o;r=i&&(rt.boxSizingReliable()||o===e.style[t]),o=parseFloat(o)||0}return o+A(e,t,n||(i?"border":"content"),r,a)+"px"}function j(e,t,n,r,o){return new j.prototype.init(e,t,n,r,o)}function P(){return setTimeout(function(){mn=void 0}),mn=at.now()}function N(e,t){var n,r={height:e},o=0;for(t=t?1:0;4>o;o+=2-t)n=Et[o],r["margin"+n]=r["padding"+n]=e;return t&&(r.opacity=r.width=e),r}function D(e,t,n){for(var r,o=(_n[t]||[]).concat(_n["*"]),a=0,i=o.length;i>a;a++)if(r=o[a].call(n,t,e))return r}function R(e,t,n){var r,o,a,i,s,c,l,u,d=this,h={},p=e.style,f=e.nodeType&&It(e),m=at._data(e,"fxshow");n.queue||(s=at._queueHooks(e,"fx"),null==s.unqueued&&(s.unqueued=0,c=s.empty.fire,s.empty.fire=function(){s.unqueued||c()}),s.unqueued++,d.always(function(){d.always(function(){s.unqueued--,at.queue(e,"fx").length||s.empty.fire()})})),1===e.nodeType&&("height"in t||"width"in t)&&(n.overflow=[p.overflow,p.overflowX,p.overflowY],l=at.css(e,"display"),u=S(e.nodeName),"none"===l&&(l=u),"inline"===l&&"none"===at.css(e,"float")&&(rt.inlineBlockNeedsLayout&&"inline"!==u?p.zoom=1:p.display="inline-block")),n.overflow&&(p.overflow="hidden",rt.shrinkWrapBlocks()||d.always(function(){p.overflow=n.overflow[0],p.overflowX=n.overflow[1],p.overflowY=n.overflow[2]}));for(r in t)if(o=t[r],yn.exec(o)){if(delete t[r],a=a||"toggle"===o,o===(f?"hide":"show")){if("show"!==o||!m||void 0===m[r])continue;f=!0}h[r]=m&&m[r]||at.style(e,r)}if(!at.isEmptyObject(h)){m?"hidden"in m&&(f=m.hidden):m=at._data(e,"fxshow",{}),a&&(m.hidden=!f),f?at(e).show():d.done(function(){at(e).hide()}),d.done(function(){var t;at._removeData(e,"fxshow");for(t in h)at.style(e,t,h[t])});for(r in h)i=D(f?m[r]:0,r,d),r in m||(m[r]=i.start,f&&(i.end=i.start,i.start="width"===r||"height"===r?1:0))}}function L(e,t){var n,r,o,a,i;for(n in e)if(r=at.camelCase(n),o=t[r],a=e[n],at.isArray(a)&&(o=a[1],a=e[n]=a[0]),n!==r&&(e[r]=a,delete e[n]),i=at.cssHooks[r],i&&"expand"in i){a=i.expand(a),delete e[r];for(n in a)n in e||(e[n]=a[n],t[n]=o)}else t[r]=o}function q(e,t,n){var r,o,a=0,i=wn.length,s=at.Deferred().always(function(){delete c.elem}),c=function(){if(o)return!1;for(var t=mn||P(),n=Math.max(0,l.startTime+l.duration-t),r=n/l.duration||0,a=1-r,i=0,c=l.tweens.length;c>i;i++)l.tweens[i].run(a);return s.notifyWith(e,[l,a,n]),1>a&&c?n:(s.resolveWith(e,[l]),!1)},l=s.promise({elem:e,props:at.extend({},t),opts:at.extend(!0,{specialEasing:{}},n),originalProperties:t,originalOptions:n,startTime:mn||P(),duration:n.duration,tweens:[],createTween:function(t,n){var r=at.Tween(e,l.opts,t,n,l.opts.specialEasing[t]||l.opts.easing);return l.tweens.push(r),r},stop:function(t){var n=0,r=t?l.tweens.length:0;if(o)return this;for(o=!0;r>n;n++)l.tweens[n].run(1);return t?s.resolveWith(e,[l,t]):s.rejectWith(e,[l,t]),this}}),u=l.props;for(L(u,l.opts.specialEasing);i>a;a++)if(r=wn[a].call(l,e,u,l.opts))return r;return at.map(u,D,l),at.isFunction(l.opts.start)&&l.opts.start.call(e,l),at.fx.timer(at.extend(c,{elem:e,anim:l,queue:l.opts.queue})),l.progress(l.opts.progress).done(l.opts.done,l.opts.complete).fail(l.opts.fail).always(l.opts.always)}function F(e){return function(t,n){"string"!=typeof t&&(n=t,t="*");var r,o=0,a=t.toLowerCase().match(wt)||[];if(at.isFunction(n))for(;r=a[o++];)"+"===r.charAt(0)?(r=r.slice(1)||"*",(e[r]=e[r]||[]).unshift(n)):(e[r]=e[r]||[]).push(n)}}function B(e,t,n,r){function o(s){var c;return a[s]=!0,at.each(e[s]||[],function(e,s){var l=s(t,n,r);return"string"!=typeof l||i||a[l]?i?!(c=l):void 0:(t.dataTypes.unshift(l),o(l),!1)}),c}var a={},i=e===Wn;return o(t.dataTypes[0])||!a["*"]&&o("*")}function H(e,t){var n,r,o=at.ajaxSettings.flatOptions||{};for(r in t)void 0!==t[r]&&((o[r]?e:n||(n={}))[r]=t[r]);return n&&at.extend(!0,e,n),e}function $(e,t,n){for(var r,o,a,i,s=e.contents,c=e.dataTypes;"*"===c[0];)c.shift(),void 0===o&&(o=e.mimeType||t.getResponseHeader("Content-Type"));if(o)for(i in s)if(s[i]&&s[i].test(o)){c.unshift(i);break}if(c[0]in n)a=c[0];else{for(i in n){if(!c[0]||e.converters[i+" "+c[0]]){a=i;break}r||(r=i)}a=a||r}return a?(a!==c[0]&&c.unshift(a),n[a]):void 0}function U(e,t,n,r){var o,a,i,s,c,l={},u=e.dataTypes.slice();if(u[1])for(i in e.converters)l[i.toLowerCase()]=e.converters[i];for(a=u.shift();a;)if(e.responseFields[a]&&(n[e.responseFields[a]]=t),!c&&r&&e.dataFilter&&(t=e.dataFilter(t,e.dataType)),c=a,a=u.shift())if("*"===a)a=c;else if("*"!==c&&c!==a){if(i=l[c+" "+a]||l["* "+a],!i)for(o in l)if(s=o.split(" "),s[1]===a&&(i=l[c+" "+s[0]]||l["* "+s[0]])){i===!0?i=l[o]:l[o]!==!0&&(a=s[0],u.unshift(s[1]));break}if(i!==!0)if(i&&e["throws"])t=i(t);else try{t=i(t)}catch(d){return{state:"parsererror",error:i?d:"No conversion from "+c+" to "+a}}}return{state:"success",data:t}}function J(e,t,n,r){var o;if(at.isArray(t))at.each(t,function(t,o){n||Xn.test(e)?r(e,o):J(e+"["+("object"==typeof o?t:"")+"]",o,n,r)});else if(n||"object"!==at.type(t))r(e,t);else for(o in t)J(e+"["+o+"]",t[o],n,r)}function W(){try{return new e.XMLHttpRequest}catch(t){}}function z(){try{return new e.ActiveXObject("Microsoft.XMLHTTP")}catch(t){}}function V(e){return at.isWindow(e)?e:9===e.nodeType?e.defaultView||e.parentWindow:!1}var G=[],X=G.slice,Y=G.concat,Q=G.push,K=G.indexOf,Z={},et=Z.toString,tt=Z.hasOwnProperty,nt="".trim,rt={},ot="1.11.0",at=function(e,t){return new at.fn.init(e,t)},it=/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,st=/^-ms-/,ct=/-([\da-z])/gi,lt=function(e,t){return t.toUpperCase()};at.fn=at.prototype={jquery:ot,constructor:at,selector:"",length:0,toArray:function(){return X.call(this)},get:function(e){return null!=e?0>e?this[e+this.length]:this[e]:X.call(this)},pushStack:function(e){var t=at.merge(this.constructor(),e);return t.prevObject=this,t.context=this.context,t},each:function(e,t){return at.each(this,e,t)},map:function(e){return this.pushStack(at.map(this,function(t,n){return e.call(t,n,t)}))},slice:function(){return this.pushStack(X.apply(this,arguments))},first:function(){return this.eq(0)},last:function(){return this.eq(-1)},eq:function(e){var t=this.length,n=+e+(0>e?t:0);return this.pushStack(n>=0&&t>n?[this[n]]:[])},end:function(){return this.prevObject||this.constructor(null)},push:Q,sort:G.sort,splice:G.splice},at.extend=at.fn.extend=function(){var e,t,n,r,o,a,i=arguments[0]||{},s=1,c=arguments.length,l=!1;for("boolean"==typeof i&&(l=i,i=arguments[s]||{},s++),"object"==typeof i||at.isFunction(i)||(i={}),s===c&&(i=this,s--);c>s;s++)if(null!=(o=arguments[s]))for(r in o)e=i[r],n=o[r],i!==n&&(l&&n&&(at.isPlainObject(n)||(t=at.isArray(n)))?(t?(t=!1,a=e&&at.isArray(e)?e:[]):a=e&&at.isPlainObject(e)?e:{},i[r]=at.extend(l,a,n)):void 0!==n&&(i[r]=n));return i},at.extend({expando:"jQuery"+(ot+Math.random()).replace(/\D/g,""),isReady:!0,error:function(e){throw new Error(e)},noop:function(){},isFunction:function(e){return"function"===at.type(e)},isArray:Array.isArray||function(e){return"array"===at.type(e)},isWindow:function(e){return null!=e&&e==e.window},isNumeric:function(e){return e-parseFloat(e)>=0},isEmptyObject:function(e){var t;for(t in e)return!1;return!0},isPlainObject:function(e){var t;if(!e||"object"!==at.type(e)||e.nodeType||at.isWindow(e))return!1;try{if(e.constructor&&!tt.call(e,"constructor")&&!tt.call(e.constructor.prototype,"isPrototypeOf"))return!1}catch(n){return!1}if(rt.ownLast)for(t in e)return tt.call(e,t);for(t in e);return void 0===t||tt.call(e,t)},type:function(e){return null==e?e+"":"object"==typeof e||"function"==typeof e?Z[et.call(e)]||"object":typeof e},globalEval:function(t){t&&at.trim(t)&&(e.execScript||function(t){e.eval.call(e,t)})(t)},camelCase:function(e){return e.replace(st,"ms-").replace(ct,lt)},nodeName:function(e,t){return e.nodeName&&e.nodeName.toLowerCase()===t.toLowerCase()},each:function(e,t,r){var o,a=0,i=e.length,s=n(e);if(r){if(s)for(;i>a&&(o=t.apply(e[a],r),o!==!1);a++);else for(a in e)if(o=t.apply(e[a],r),o===!1)break}else if(s)for(;i>a&&(o=t.call(e[a],a,e[a]),o!==!1);a++);else for(a in e)if(o=t.call(e[a],a,e[a]),o===!1)break;return e},trim:nt&&!nt.call("﻿ ")?function(e){return null==e?"":nt.call(e)}:function(e){return null==e?"":(e+"").replace(it,"")},makeArray:function(e,t){var r=t||[];return null!=e&&(n(Object(e))?at.merge(r,"string"==typeof e?[e]:e):Q.call(r,e)),r},inArray:function(e,t,n){var r;if(t){if(K)return K.call(t,e,n);for(r=t.length,n=n?0>n?Math.max(0,r+n):n:0;r>n;n++)if(n in t&&t[n]===e)return n}return-1},merge:function(e,t){for(var n=+t.length,r=0,o=e.length;n>r;)e[o++]=t[r++];if(n!==n)for(;void 0!==t[r];)e[o++]=t[r++];return e.length=o,e},grep:function(e,t,n){for(var r,o=[],a=0,i=e.length,s=!n;i>a;a++)r=!t(e[a],a),r!==s&&o.push(e[a]);return o},map:function(e,t,r){var o,a=0,i=e.length,s=n(e),c=[];if(s)for(;i>a;a++)o=t(e[a],a,r),null!=o&&c.push(o);else for(a in e)o=t(e[a],a,r),null!=o&&c.push(o);return Y.apply([],c)},guid:1,proxy:function(e,t){var n,r,o;return"string"==typeof t&&(o=e[t],t=e,e=o),at.isFunction(e)?(n=X.call(arguments,2),r=function(){return e.apply(t||this,n.concat(X.call(arguments)))},r.guid=e.guid=e.guid||at.guid++,r):void 0},now:function(){return+new Date},support:rt}),at.each("Boolean Number String Function Array Date RegExp Object Error".split(" "),function(e,t){Z["[object "+t+"]"]=t.toLowerCase()});var ut=function(e){function t(e,t,n,r){var o,a,i,s,c,l,d,f,m,g;if((t?t.ownerDocument||t:B)!==j&&O(t),t=t||j,n=n||[],!e||"string"!=typeof e)return n;if(1!==(s=t.nodeType)&&9!==s)return[];if(N&&!r){if(o=vt.exec(e))if(i=o[1]){if(9===s){if(a=t.getElementById(i),!a||!a.parentNode)return n;if(a.id===i)return n.push(a),n}else if(t.ownerDocument&&(a=t.ownerDocument.getElementById(i))&&q(t,a)&&a.id===i)return n.push(a),n}else{if(o[2])return Z.apply(n,t.getElementsByTagName(e)),n;if((i=o[3])&&T.getElementsByClassName&&t.getElementsByClassName)return Z.apply(n,t.getElementsByClassName(i)),n}if(T.qsa&&(!D||!D.test(e))){if(f=d=F,m=t,g=9===s&&e,1===s&&"object"!==t.nodeName.toLowerCase()){for(l=h(e),(d=t.getAttribute("id"))?f=d.replace(wt,"\\$&"):t.setAttribute("id",f),f="[id='"+f+"'] ",c=l.length;c--;)l[c]=f+p(l[c]);m=bt.test(e)&&u(t.parentNode)||t,g=l.join(",")}if(g)try{return Z.apply(n,m.querySelectorAll(g)),n}catch(y){}finally{d||t.removeAttribute("id")}}}return _(e.replace(ct,"$1"),t,n,r)}function n(){function e(n,r){return t.push(n+" ")>x.cacheLength&&delete e[t.shift()],e[n+" "]=r}var t=[];return e}function r(e){return e[F]=!0,e}function o(e){var t=j.createElement("div");try{return!!e(t)}catch(n){return!1}finally{t.parentNode&&t.parentNode.removeChild(t),t=null}}function a(e,t){for(var n=e.split("|"),r=e.length;r--;)x.attrHandle[n[r]]=t}function i(e,t){var n=t&&e,r=n&&1===e.nodeType&&1===t.nodeType&&(~t.sourceIndex||G)-(~e.sourceIndex||G);if(r)return r;if(n)for(;n=n.nextSibling;)if(n===t)return-1;return e?1:-1}function s(e){return function(t){var n=t.nodeName.toLowerCase();return"input"===n&&t.type===e}}function c(e){return function(t){var n=t.nodeName.toLowerCase();return("input"===n||"button"===n)&&t.type===e}}function l(e){return r(function(t){return t=+t,r(function(n,r){for(var o,a=e([],n.length,t),i=a.length;i--;)n[o=a[i]]&&(n[o]=!(r[o]=n[o]))})})}function u(e){return e&&typeof e.getElementsByTagName!==V&&e}function d(){}function h(e,n){var r,o,a,i,s,c,l,u=J[e+" "];if(u)return n?0:u.slice(0);for(s=e,c=[],l=x.preFilter;s;){(!r||(o=lt.exec(s)))&&(o&&(s=s.slice(o[0].length)||s),c.push(a=[])),r=!1,(o=ut.exec(s))&&(r=o.shift(),a.push({value:r,type:o[0].replace(ct," ")}),s=s.slice(r.length));for(i in x.filter)!(o=ft[i].exec(s))||l[i]&&!(o=l[i](o))||(r=o.shift(),a.push({value:r,type:i,matches:o}),s=s.slice(r.length));if(!r)break}return n?s.length:s?t.error(e):J(e,c).slice(0)}function p(e){for(var t=0,n=e.length,r="";n>t;t++)r+=e[t].value;return r}function f(e,t,n){var r=t.dir,o=n&&"parentNode"===r,a=$++;return t.first?function(t,n,a){for(;t=t[r];)if(1===t.nodeType||o)return e(t,n,a)}:function(t,n,i){var s,c,l=[H,a];if(i){for(;t=t[r];)if((1===t.nodeType||o)&&e(t,n,i))return!0}else for(;t=t[r];)if(1===t.nodeType||o){if(c=t[F]||(t[F]={}),(s=c[r])&&s[0]===H&&s[1]===a)return l[2]=s[2];if(c[r]=l,l[2]=e(t,n,i))return!0}}}function m(e){return e.length>1?function(t,n,r){for(var o=e.length;o--;)if(!e[o](t,n,r))return!1;return!0}:e[0]}function g(e,t,n,r,o){for(var a,i=[],s=0,c=e.length,l=null!=t;c>s;s++)(a=e[s])&&(!n||n(a,r,o))&&(i.push(a),l&&t.push(s));return i}function y(e,t,n,o,a,i){return o&&!o[F]&&(o=y(o)),a&&!a[F]&&(a=y(a,i)),r(function(r,i,s,c){var l,u,d,h=[],p=[],f=i.length,m=r||w(t||"*",s.nodeType?[s]:s,[]),y=!e||!r&&t?m:g(m,h,e,s,c),v=n?a||(r?e:f||o)?[]:i:y;if(n&&n(y,v,s,c),o)for(l=g(v,p),o(l,[],s,c),u=l.length;u--;)(d=l[u])&&(v[p[u]]=!(y[p[u]]=d));if(r){if(a||e){if(a){for(l=[],u=v.length;u--;)(d=v[u])&&l.push(y[u]=d);a(null,v=[],l,c)}for(u=v.length;u--;)(d=v[u])&&(l=a?tt.call(r,d):h[u])>-1&&(r[l]=!(i[l]=d))}}else v=g(v===i?v.splice(f,v.length):v),a?a(null,i,v,c):Z.apply(i,v)})}function v(e){for(var t,n,r,o=e.length,a=x.relative[e[0].type],i=a||x.relative[" "],s=a?1:0,c=f(function(e){return e===t},i,!0),l=f(function(e){return tt.call(t,e)>-1},i,!0),u=[function(e,n,r){return!a&&(r||n!==E)||((t=n).nodeType?c(e,n,r):l(e,n,r))}];o>s;s++)if(n=x.relative[e[s].type])u=[f(m(u),n)];else{if(n=x.filter[e[s].type].apply(null,e[s].matches),n[F]){for(r=++s;o>r&&!x.relative[e[r].type];r++);return y(s>1&&m(u),s>1&&p(e.slice(0,s-1).concat({value:" "===e[s-2].type?"*":""})).replace(ct,"$1"),n,r>s&&v(e.slice(s,r)),o>r&&v(e=e.slice(r)),o>r&&p(e))}u.push(n)}return m(u)}function b(e,n){var o=n.length>0,a=e.length>0,i=function(r,i,s,c,l){var u,d,h,p=0,f="0",m=r&&[],y=[],v=E,b=r||a&&x.find.TAG("*",l),w=H+=null==v?1:Math.random()||.1,_=b.length;for(l&&(E=i!==j&&i);f!==_&&null!=(u=b[f]);f++){if(a&&u){for(d=0;h=e[d++];)if(h(u,i,s)){c.push(u);break}l&&(H=w)}o&&((u=!h&&u)&&p--,r&&m.push(u))}if(p+=f,o&&f!==p){for(d=0;h=n[d++];)h(m,y,i,s);if(r){if(p>0)for(;f--;)m[f]||y[f]||(y[f]=Q.call(c));y=g(y)}Z.apply(c,y),l&&!r&&y.length>0&&p+n.length>1&&t.uniqueSort(c)}return l&&(H=w,E=v),m};return o?r(i):i}function w(e,n,r){for(var o=0,a=n.length;a>o;o++)t(e,n[o],r);return r}function _(e,t,n,r){var o,a,i,s,c,l=h(e);if(!r&&1===l.length){if(a=l[0]=l[0].slice(0),a.length>2&&"ID"===(i=a[0]).type&&T.getById&&9===t.nodeType&&N&&x.relative[a[1].type]){if(t=(x.find.ID(i.matches[0].replace(_t,kt),t)||[])[0],!t)return n;e=e.slice(a.shift().value.length)}for(o=ft.needsContext.test(e)?0:a.length;o--&&(i=a[o],!x.relative[s=i.type]);)if((c=x.find[s])&&(r=c(i.matches[0].replace(_t,kt),bt.test(a[0].type)&&u(t.parentNode)||t))){if(a.splice(o,1),e=r.length&&p(a),!e)return Z.apply(n,r),n;break}}return M(e,l)(r,t,!N,n,bt.test(e)&&u(t.parentNode)||t),n}var k,T,x,S,C,M,E,I,A,O,j,P,N,D,R,L,q,F="sizzle"+-new Date,B=e.document,H=0,$=0,U=n(),J=n(),W=n(),z=function(e,t){return e===t&&(A=!0),0},V="undefined",G=1<<31,X={}.hasOwnProperty,Y=[],Q=Y.pop,K=Y.push,Z=Y.push,et=Y.slice,tt=Y.indexOf||function(e){for(var t=0,n=this.length;n>t;t++)if(this[t]===e)return t;return-1},nt="checked|selected|async|autofocus|autoplay|controls|defer|disabled|hidden|ismap|loop|multiple|open|readonly|required|scoped",rt="[\\x20\\t\\r\\n\\f]",ot="(?:\\\\.|[\\w-]|[^\\x00-\\xa0])+",at=ot.replace("w","w#"),it="\\["+rt+"*("+ot+")"+rt+"*(?:([*^$|!~]?=)"+rt+"*(?:(['\"])((?:\\\\.|[^\\\\])*?)\\3|("+at+")|)|)"+rt+"*\\]",st=":("+ot+")(?:\\(((['\"])((?:\\\\.|[^\\\\])*?)\\3|((?:\\\\.|[^\\\\()[\\]]|"+it.replace(3,8)+")*)|.*)\\)|)",ct=new RegExp("^"+rt+"+|((?:^|[^\\\\])(?:\\\\.)*)"+rt+"+$","g"),lt=new RegExp("^"+rt+"*,"+rt+"*"),ut=new RegExp("^"+rt+"*([>+~]|"+rt+")"+rt+"*"),dt=new RegExp("="+rt+"*([^\\]'\"]*?)"+rt+"*\\]","g"),ht=new RegExp(st),pt=new RegExp("^"+at+"$"),ft={ID:new RegExp("^#("+ot+")"),CLASS:new RegExp("^\\.("+ot+")"),TAG:new RegExp("^("+ot.replace("w","w*")+")"),ATTR:new RegExp("^"+it),PSEUDO:new RegExp("^"+st),CHILD:new RegExp("^:(only|first|last|nth|nth-last)-(child|of-type)(?:\\("+rt+"*(even|odd|(([+-]|)(\\d*)n|)"+rt+"*(?:([+-]|)"+rt+"*(\\d+)|))"+rt+"*\\)|)","i"),bool:new RegExp("^(?:"+nt+")$","i"),needsContext:new RegExp("^"+rt+"*[>+~]|:(even|odd|eq|gt|lt|nth|first|last)(?:\\("+rt+"*((?:-\\d)?\\d*)"+rt+"*\\)|)(?=[^-]|$)","i")},mt=/^(?:input|select|textarea|button)$/i,gt=/^h\d$/i,yt=/^[^{]+\{\s*\[native \w/,vt=/^(?:#([\w-]+)|(\w+)|\.([\w-]+))$/,bt=/[+~]/,wt=/'|\\/g,_t=new RegExp("\\\\([\\da-f]{1,6}"+rt+"?|("+rt+")|.)","ig"),kt=function(e,t,n){var r="0x"+t-65536;return r!==r||n?t:0>r?String.fromCharCode(r+65536):String.fromCharCode(r>>10|55296,1023&r|56320)};try{Z.apply(Y=et.call(B.childNodes),B.childNodes),Y[B.childNodes.length].nodeType}catch(Tt){Z={apply:Y.length?function(e,t){K.apply(e,et.call(t))}:function(e,t){for(var n=e.length,r=0;e[n++]=t[r++];);e.length=n-1}}}T=t.support={},C=t.isXML=function(e){var t=e&&(e.ownerDocument||e).documentElement;return t?"HTML"!==t.nodeName:!1},O=t.setDocument=function(e){var t,n=e?e.ownerDocument||e:B,r=n.defaultView;return n!==j&&9===n.nodeType&&n.documentElement?(j=n,P=n.documentElement,N=!C(n),r&&r!==r.top&&(r.addEventListener?r.addEventListener("unload",function(){O()},!1):r.attachEvent&&r.attachEvent("onunload",function(){O()})),T.attributes=o(function(e){return e.className="i",!e.getAttribute("className")}),T.getElementsByTagName=o(function(e){return e.appendChild(n.createComment("")),!e.getElementsByTagName("*").length}),T.getElementsByClassName=yt.test(n.getElementsByClassName)&&o(function(e){return e.innerHTML="<div class='a'></div><div class='a i'></div>",e.firstChild.className="i",2===e.getElementsByClassName("i").length}),T.getById=o(function(e){return P.appendChild(e).id=F,!n.getElementsByName||!n.getElementsByName(F).length}),T.getById?(x.find.ID=function(e,t){if(typeof t.getElementById!==V&&N){var n=t.getElementById(e);return n&&n.parentNode?[n]:[]}},x.filter.ID=function(e){var t=e.replace(_t,kt);return function(e){return e.getAttribute("id")===t}}):(delete x.find.ID,x.filter.ID=function(e){var t=e.replace(_t,kt);return function(e){var n=typeof e.getAttributeNode!==V&&e.getAttributeNode("id");return n&&n.value===t}}),x.find.TAG=T.getElementsByTagName?function(e,t){return typeof t.getElementsByTagName!==V?t.getElementsByTagName(e):void 0}:function(e,t){var n,r=[],o=0,a=t.getElementsByTagName(e);if("*"===e){for(;n=a[o++];)1===n.nodeType&&r.push(n);return r}return a},x.find.CLASS=T.getElementsByClassName&&function(e,t){return typeof t.getElementsByClassName!==V&&N?t.getElementsByClassName(e):void 0},R=[],D=[],(T.qsa=yt.test(n.querySelectorAll))&&(o(function(e){e.innerHTML="<select t=''><option selected=''></option></select>",e.querySelectorAll("[t^='']").length&&D.push("[*^$]="+rt+"*(?:''|\"\")"),e.querySelectorAll("[selected]").length||D.push("\\["+rt+"*(?:value|"+nt+")"),e.querySelectorAll(":checked").length||D.push(":checked")}),o(function(e){var t=n.createElement("input");t.setAttribute("type","hidden"),e.appendChild(t).setAttribute("name","D"),e.querySelectorAll("[name=d]").length&&D.push("name"+rt+"*[*^$|!~]?="),e.querySelectorAll(":enabled").length||D.push(":enabled",":disabled"),e.querySelectorAll("*,:x"),D.push(",.*:")})),(T.matchesSelector=yt.test(L=P.webkitMatchesSelector||P.mozMatchesSelector||P.oMatchesSelector||P.msMatchesSelector))&&o(function(e){T.disconnectedMatch=L.call(e,"div"),L.call(e,"[s!='']:x"),R.push("!=",st)}),D=D.length&&new RegExp(D.join("|")),R=R.length&&new RegExp(R.join("|")),t=yt.test(P.compareDocumentPosition),q=t||yt.test(P.contains)?function(e,t){var n=9===e.nodeType?e.documentElement:e,r=t&&t.parentNode;return e===r||!(!r||1!==r.nodeType||!(n.contains?n.contains(r):e.compareDocumentPosition&&16&e.compareDocumentPosition(r)))}:function(e,t){if(t)for(;t=t.parentNode;)if(t===e)return!0;return!1},z=t?function(e,t){if(e===t)return A=!0,0;var r=!e.compareDocumentPosition-!t.compareDocumentPosition;return r?r:(r=(e.ownerDocument||e)===(t.ownerDocument||t)?e.compareDocumentPosition(t):1,1&r||!T.sortDetached&&t.compareDocumentPosition(e)===r?e===n||e.ownerDocument===B&&q(B,e)?-1:t===n||t.ownerDocument===B&&q(B,t)?1:I?tt.call(I,e)-tt.call(I,t):0:4&r?-1:1)}:function(e,t){if(e===t)return A=!0,0;var r,o=0,a=e.parentNode,s=t.parentNode,c=[e],l=[t];if(!a||!s)return e===n?-1:t===n?1:a?-1:s?1:I?tt.call(I,e)-tt.call(I,t):0;if(a===s)return i(e,t);for(r=e;r=r.parentNode;)c.unshift(r);for(r=t;r=r.parentNode;)l.unshift(r);for(;c[o]===l[o];)o++;return o?i(c[o],l[o]):c[o]===B?-1:l[o]===B?1:0},n):j},t.matches=function(e,n){return t(e,null,null,n)},t.matchesSelector=function(e,n){if((e.ownerDocument||e)!==j&&O(e),n=n.replace(dt,"='$1']"),!(!T.matchesSelector||!N||R&&R.test(n)||D&&D.test(n)))try{var r=L.call(e,n);if(r||T.disconnectedMatch||e.document&&11!==e.document.nodeType)return r}catch(o){}return t(n,j,null,[e]).length>0},t.contains=function(e,t){return(e.ownerDocument||e)!==j&&O(e),q(e,t)},t.attr=function(e,t){(e.ownerDocument||e)!==j&&O(e);var n=x.attrHandle[t.toLowerCase()],r=n&&X.call(x.attrHandle,t.toLowerCase())?n(e,t,!N):void 0;return void 0!==r?r:T.attributes||!N?e.getAttribute(t):(r=e.getAttributeNode(t))&&r.specified?r.value:null},t.error=function(e){throw new Error("Syntax error, unrecognized expression: "+e)},t.uniqueSort=function(e){var t,n=[],r=0,o=0;if(A=!T.detectDuplicates,I=!T.sortStable&&e.slice(0),e.sort(z),A){for(;t=e[o++];)t===e[o]&&(r=n.push(o));for(;r--;)e.splice(n[r],1)}return I=null,e},S=t.getText=function(e){var t,n="",r=0,o=e.nodeType;if(o){if(1===o||9===o||11===o){if("string"==typeof e.textContent)return e.textContent;for(e=e.firstChild;e;e=e.nextSibling)n+=S(e)}else if(3===o||4===o)return e.nodeValue}else for(;t=e[r++];)n+=S(t);return n},x=t.selectors={cacheLength:50,createPseudo:r,match:ft,attrHandle:{},find:{},relative:{">":{dir:"parentNode",first:!0}," ":{dir:"parentNode"},"+":{dir:"previousSibling",first:!0},"~":{dir:"previousSibling"}},preFilter:{ATTR:function(e){return e[1]=e[1].replace(_t,kt),e[3]=(e[4]||e[5]||"").replace(_t,kt),"~="===e[2]&&(e[3]=" "+e[3]+" "),e.slice(0,4)},CHILD:function(e){return e[1]=e[1].toLowerCase(),"nth"===e[1].slice(0,3)?(e[3]||t.error(e[0]),e[4]=+(e[4]?e[5]+(e[6]||1):2*("even"===e[3]||"odd"===e[3])),e[5]=+(e[7]+e[8]||"odd"===e[3])):e[3]&&t.error(e[0]),e},PSEUDO:function(e){var t,n=!e[5]&&e[2];return ft.CHILD.test(e[0])?null:(e[3]&&void 0!==e[4]?e[2]=e[4]:n&&ht.test(n)&&(t=h(n,!0))&&(t=n.indexOf(")",n.length-t)-n.length)&&(e[0]=e[0].slice(0,t),e[2]=n.slice(0,t)),e.slice(0,3))}},filter:{TAG:function(e){var t=e.replace(_t,kt).toLowerCase();return"*"===e?function(){return!0}:function(e){return e.nodeName&&e.nodeName.toLowerCase()===t}},CLASS:function(e){var t=U[e+" "];return t||(t=new RegExp("(^|"+rt+")"+e+"("+rt+"|$)"))&&U(e,function(e){return t.test("string"==typeof e.className&&e.className||typeof e.getAttribute!==V&&e.getAttribute("class")||"")})},ATTR:function(e,n,r){return function(o){var a=t.attr(o,e);return null==a?"!="===n:n?(a+="","="===n?a===r:"!="===n?a!==r:"^="===n?r&&0===a.indexOf(r):"*="===n?r&&a.indexOf(r)>-1:"$="===n?r&&a.slice(-r.length)===r:"~="===n?(" "+a+" ").indexOf(r)>-1:"|="===n?a===r||a.slice(0,r.length+1)===r+"-":!1):!0}},CHILD:function(e,t,n,r,o){var a="nth"!==e.slice(0,3),i="last"!==e.slice(-4),s="of-type"===t;return 1===r&&0===o?function(e){return!!e.parentNode}:function(t,n,c){var l,u,d,h,p,f,m=a!==i?"nextSibling":"previousSibling",g=t.parentNode,y=s&&t.nodeName.toLowerCase(),v=!c&&!s;if(g){if(a){for(;m;){for(d=t;d=d[m];)if(s?d.nodeName.toLowerCase()===y:1===d.nodeType)return!1;f=m="only"===e&&!f&&"nextSibling"}return!0}if(f=[i?g.firstChild:g.lastChild],i&&v){for(u=g[F]||(g[F]={}),l=u[e]||[],p=l[0]===H&&l[1],h=l[0]===H&&l[2],d=p&&g.childNodes[p];d=++p&&d&&d[m]||(h=p=0)||f.pop();)if(1===d.nodeType&&++h&&d===t){u[e]=[H,p,h];break}}else if(v&&(l=(t[F]||(t[F]={}))[e])&&l[0]===H)h=l[1];else for(;(d=++p&&d&&d[m]||(h=p=0)||f.pop())&&((s?d.nodeName.toLowerCase()!==y:1!==d.nodeType)||!++h||(v&&((d[F]||(d[F]={}))[e]=[H,h]),d!==t)););return h-=o,h===r||h%r===0&&h/r>=0}}},PSEUDO:function(e,n){var o,a=x.pseudos[e]||x.setFilters[e.toLowerCase()]||t.error("unsupported pseudo: "+e);return a[F]?a(n):a.length>1?(o=[e,e,"",n],x.setFilters.hasOwnProperty(e.toLowerCase())?r(function(e,t){for(var r,o=a(e,n),i=o.length;i--;)r=tt.call(e,o[i]),e[r]=!(t[r]=o[i])}):function(e){return a(e,0,o)}):a}},pseudos:{not:r(function(e){var t=[],n=[],o=M(e.replace(ct,"$1"));return o[F]?r(function(e,t,n,r){for(var a,i=o(e,null,r,[]),s=e.length;s--;)(a=i[s])&&(e[s]=!(t[s]=a))}):function(e,r,a){return t[0]=e,o(t,null,a,n),!n.pop()}}),has:r(function(e){return function(n){return t(e,n).length>0}}),contains:r(function(e){return function(t){return(t.textContent||t.innerText||S(t)).indexOf(e)>-1}}),lang:r(function(e){return pt.test(e||"")||t.error("unsupported lang: "+e),e=e.replace(_t,kt).toLowerCase(),function(t){var n;do if(n=N?t.lang:t.getAttribute("xml:lang")||t.getAttribute("lang"))return n=n.toLowerCase(),n===e||0===n.indexOf(e+"-");while((t=t.parentNode)&&1===t.nodeType);return!1}}),target:function(t){var n=e.location&&e.location.hash;return n&&n.slice(1)===t.id},root:function(e){return e===P},focus:function(e){return e===j.activeElement&&(!j.hasFocus||j.hasFocus())&&!!(e.type||e.href||~e.tabIndex)},enabled:function(e){return e.disabled===!1},disabled:function(e){return e.disabled===!0},checked:function(e){var t=e.nodeName.toLowerCase();return"input"===t&&!!e.checked||"option"===t&&!!e.selected},selected:function(e){return e.parentNode&&e.parentNode.selectedIndex,e.selected===!0},empty:function(e){for(e=e.firstChild;e;e=e.nextSibling)if(e.nodeType<6)return!1;return!0},parent:function(e){return!x.pseudos.empty(e)},header:function(e){return gt.test(e.nodeName)},input:function(e){return mt.test(e.nodeName)},button:function(e){var t=e.nodeName.toLowerCase();return"input"===t&&"button"===e.type||"button"===t},text:function(e){var t;return"input"===e.nodeName.toLowerCase()&&"text"===e.type&&(null==(t=e.getAttribute("type"))||"text"===t.toLowerCase())},first:l(function(){return[0]}),last:l(function(e,t){return[t-1]}),eq:l(function(e,t,n){return[0>n?n+t:n]}),even:l(function(e,t){for(var n=0;t>n;n+=2)e.push(n);return e}),odd:l(function(e,t){for(var n=1;t>n;n+=2)e.push(n);return e}),lt:l(function(e,t,n){for(var r=0>n?n+t:n;--r>=0;)e.push(r);return e}),gt:l(function(e,t,n){for(var r=0>n?n+t:n;++r<t;)e.push(r);return e})}},x.pseudos.nth=x.pseudos.eq;for(k in{radio:!0,checkbox:!0,file:!0,password:!0,image:!0})x.pseudos[k]=s(k);for(k in{submit:!0,reset:!0})x.pseudos[k]=c(k);return d.prototype=x.filters=x.pseudos,x.setFilters=new d,M=t.compile=function(e,t){var n,r=[],o=[],a=W[e+" "];if(!a){for(t||(t=h(e)),n=t.length;n--;)a=v(t[n]),a[F]?r.push(a):o.push(a);a=W(e,b(o,r))}return a},T.sortStable=F.split("").sort(z).join("")===F,T.detectDuplicates=!!A,O(),T.sortDetached=o(function(e){return 1&e.compareDocumentPosition(j.createElement("div"))}),o(function(e){return e.innerHTML="<a href='#'></a>","#"===e.firstChild.getAttribute("href")})||a("type|href|height|width",function(e,t,n){return n?void 0:e.getAttribute(t,"type"===t.toLowerCase()?1:2)}),T.attributes&&o(function(e){return e.innerHTML="<input/>",e.firstChild.setAttribute("value",""),""===e.firstChild.getAttribute("value")})||a("value",function(e,t,n){return n||"input"!==e.nodeName.toLowerCase()?void 0:e.defaultValue}),o(function(e){return null==e.getAttribute("disabled")})||a(nt,function(e,t,n){var r;return n?void 0:e[t]===!0?t.toLowerCase():(r=e.getAttributeNode(t))&&r.specified?r.value:null}),t}(e);at.find=ut,at.expr=ut.selectors,at.expr[":"]=at.expr.pseudos,at.unique=ut.uniqueSort,at.text=ut.getText,at.isXMLDoc=ut.isXML,at.contains=ut.contains;var dt=at.expr.match.needsContext,ht=/^<(\w+)\s*\/?>(?:<\/\1>|)$/,pt=/^.[^:#\[\.,]*$/;at.filter=function(e,t,n){var r=t[0];return n&&(e=":not("+e+")"),1===t.length&&1===r.nodeType?at.find.matchesSelector(r,e)?[r]:[]:at.find.matches(e,at.grep(t,function(e){return 1===e.nodeType}))},at.fn.extend({find:function(e){var t,n=[],r=this,o=r.length;if("string"!=typeof e)return this.pushStack(at(e).filter(function(){for(t=0;o>t;t++)if(at.contains(r[t],this))return!0}));for(t=0;o>t;t++)at.find(e,r[t],n);return n=this.pushStack(o>1?at.unique(n):n),n.selector=this.selector?this.selector+" "+e:e,n},filter:function(e){return this.pushStack(r(this,e||[],!1))},not:function(e){return this.pushStack(r(this,e||[],!0))
},is:function(e){return!!r(this,"string"==typeof e&&dt.test(e)?at(e):e||[],!1).length}});var ft,mt=e.document,gt=/^(?:\s*(<[\w\W]+>)[^>]*|#([\w-]*))$/,yt=at.fn.init=function(e,t){var n,r;if(!e)return this;if("string"==typeof e){if(n="<"===e.charAt(0)&&">"===e.charAt(e.length-1)&&e.length>=3?[null,e,null]:gt.exec(e),!n||!n[1]&&t)return!t||t.jquery?(t||ft).find(e):this.constructor(t).find(e);if(n[1]){if(t=t instanceof at?t[0]:t,at.merge(this,at.parseHTML(n[1],t&&t.nodeType?t.ownerDocument||t:mt,!0)),ht.test(n[1])&&at.isPlainObject(t))for(n in t)at.isFunction(this[n])?this[n](t[n]):this.attr(n,t[n]);return this}if(r=mt.getElementById(n[2]),r&&r.parentNode){if(r.id!==n[2])return ft.find(e);this.length=1,this[0]=r}return this.context=mt,this.selector=e,this}return e.nodeType?(this.context=this[0]=e,this.length=1,this):at.isFunction(e)?"undefined"!=typeof ft.ready?ft.ready(e):e(at):(void 0!==e.selector&&(this.selector=e.selector,this.context=e.context),at.makeArray(e,this))};yt.prototype=at.fn,ft=at(mt);var vt=/^(?:parents|prev(?:Until|All))/,bt={children:!0,contents:!0,next:!0,prev:!0};at.extend({dir:function(e,t,n){for(var r=[],o=e[t];o&&9!==o.nodeType&&(void 0===n||1!==o.nodeType||!at(o).is(n));)1===o.nodeType&&r.push(o),o=o[t];return r},sibling:function(e,t){for(var n=[];e;e=e.nextSibling)1===e.nodeType&&e!==t&&n.push(e);return n}}),at.fn.extend({has:function(e){var t,n=at(e,this),r=n.length;return this.filter(function(){for(t=0;r>t;t++)if(at.contains(this,n[t]))return!0})},closest:function(e,t){for(var n,r=0,o=this.length,a=[],i=dt.test(e)||"string"!=typeof e?at(e,t||this.context):0;o>r;r++)for(n=this[r];n&&n!==t;n=n.parentNode)if(n.nodeType<11&&(i?i.index(n)>-1:1===n.nodeType&&at.find.matchesSelector(n,e))){a.push(n);break}return this.pushStack(a.length>1?at.unique(a):a)},index:function(e){return e?"string"==typeof e?at.inArray(this[0],at(e)):at.inArray(e.jquery?e[0]:e,this):this[0]&&this[0].parentNode?this.first().prevAll().length:-1},add:function(e,t){return this.pushStack(at.unique(at.merge(this.get(),at(e,t))))},addBack:function(e){return this.add(null==e?this.prevObject:this.prevObject.filter(e))}}),at.each({parent:function(e){var t=e.parentNode;return t&&11!==t.nodeType?t:null},parents:function(e){return at.dir(e,"parentNode")},parentsUntil:function(e,t,n){return at.dir(e,"parentNode",n)},next:function(e){return o(e,"nextSibling")},prev:function(e){return o(e,"previousSibling")},nextAll:function(e){return at.dir(e,"nextSibling")},prevAll:function(e){return at.dir(e,"previousSibling")},nextUntil:function(e,t,n){return at.dir(e,"nextSibling",n)},prevUntil:function(e,t,n){return at.dir(e,"previousSibling",n)},siblings:function(e){return at.sibling((e.parentNode||{}).firstChild,e)},children:function(e){return at.sibling(e.firstChild)},contents:function(e){return at.nodeName(e,"iframe")?e.contentDocument||e.contentWindow.document:at.merge([],e.childNodes)}},function(e,t){at.fn[e]=function(n,r){var o=at.map(this,t,n);return"Until"!==e.slice(-5)&&(r=n),r&&"string"==typeof r&&(o=at.filter(r,o)),this.length>1&&(bt[e]||(o=at.unique(o)),vt.test(e)&&(o=o.reverse())),this.pushStack(o)}});var wt=/\S+/g,_t={};at.Callbacks=function(e){e="string"==typeof e?_t[e]||a(e):at.extend({},e);var t,n,r,o,i,s,c=[],l=!e.once&&[],u=function(a){for(n=e.memory&&a,r=!0,i=s||0,s=0,o=c.length,t=!0;c&&o>i;i++)if(c[i].apply(a[0],a[1])===!1&&e.stopOnFalse){n=!1;break}t=!1,c&&(l?l.length&&u(l.shift()):n?c=[]:d.disable())},d={add:function(){if(c){var r=c.length;!function a(t){at.each(t,function(t,n){var r=at.type(n);"function"===r?e.unique&&d.has(n)||c.push(n):n&&n.length&&"string"!==r&&a(n)})}(arguments),t?o=c.length:n&&(s=r,u(n))}return this},remove:function(){return c&&at.each(arguments,function(e,n){for(var r;(r=at.inArray(n,c,r))>-1;)c.splice(r,1),t&&(o>=r&&o--,i>=r&&i--)}),this},has:function(e){return e?at.inArray(e,c)>-1:!(!c||!c.length)},empty:function(){return c=[],o=0,this},disable:function(){return c=l=n=void 0,this},disabled:function(){return!c},lock:function(){return l=void 0,n||d.disable(),this},locked:function(){return!l},fireWith:function(e,n){return!c||r&&!l||(n=n||[],n=[e,n.slice?n.slice():n],t?l.push(n):u(n)),this},fire:function(){return d.fireWith(this,arguments),this},fired:function(){return!!r}};return d},at.extend({Deferred:function(e){var t=[["resolve","done",at.Callbacks("once memory"),"resolved"],["reject","fail",at.Callbacks("once memory"),"rejected"],["notify","progress",at.Callbacks("memory")]],n="pending",r={state:function(){return n},always:function(){return o.done(arguments).fail(arguments),this},then:function(){var e=arguments;return at.Deferred(function(n){at.each(t,function(t,a){var i=at.isFunction(e[t])&&e[t];o[a[1]](function(){var e=i&&i.apply(this,arguments);e&&at.isFunction(e.promise)?e.promise().done(n.resolve).fail(n.reject).progress(n.notify):n[a[0]+"With"](this===r?n.promise():this,i?[e]:arguments)})}),e=null}).promise()},promise:function(e){return null!=e?at.extend(e,r):r}},o={};return r.pipe=r.then,at.each(t,function(e,a){var i=a[2],s=a[3];r[a[1]]=i.add,s&&i.add(function(){n=s},t[1^e][2].disable,t[2][2].lock),o[a[0]]=function(){return o[a[0]+"With"](this===o?r:this,arguments),this},o[a[0]+"With"]=i.fireWith}),r.promise(o),e&&e.call(o,o),o},when:function(e){var t,n,r,o=0,a=X.call(arguments),i=a.length,s=1!==i||e&&at.isFunction(e.promise)?i:0,c=1===s?e:at.Deferred(),l=function(e,n,r){return function(o){n[e]=this,r[e]=arguments.length>1?X.call(arguments):o,r===t?c.notifyWith(n,r):--s||c.resolveWith(n,r)}};if(i>1)for(t=new Array(i),n=new Array(i),r=new Array(i);i>o;o++)a[o]&&at.isFunction(a[o].promise)?a[o].promise().done(l(o,r,a)).fail(c.reject).progress(l(o,n,t)):--s;return s||c.resolveWith(r,a),c.promise()}});var kt;at.fn.ready=function(e){return at.ready.promise().done(e),this},at.extend({isReady:!1,readyWait:1,holdReady:function(e){e?at.readyWait++:at.ready(!0)},ready:function(e){if(e===!0?!--at.readyWait:!at.isReady){if(!mt.body)return setTimeout(at.ready);at.isReady=!0,e!==!0&&--at.readyWait>0||(kt.resolveWith(mt,[at]),at.fn.trigger&&at(mt).trigger("ready").off("ready"))}}}),at.ready.promise=function(t){if(!kt)if(kt=at.Deferred(),"complete"===mt.readyState)setTimeout(at.ready);else if(mt.addEventListener)mt.addEventListener("DOMContentLoaded",s,!1),e.addEventListener("load",s,!1);else{mt.attachEvent("onreadystatechange",s),e.attachEvent("onload",s);var n=!1;try{n=null==e.frameElement&&mt.documentElement}catch(r){}n&&n.doScroll&&!function o(){if(!at.isReady){try{n.doScroll("left")}catch(e){return setTimeout(o,50)}i(),at.ready()}}()}return kt.promise(t)};var Tt,xt="undefined";for(Tt in at(rt))break;rt.ownLast="0"!==Tt,rt.inlineBlockNeedsLayout=!1,at(function(){var e,t,n=mt.getElementsByTagName("body")[0];n&&(e=mt.createElement("div"),e.style.cssText="border:0;width:0;height:0;position:absolute;top:0;left:-9999px;margin-top:1px",t=mt.createElement("div"),n.appendChild(e).appendChild(t),typeof t.style.zoom!==xt&&(t.style.cssText="border:0;margin:0;width:1px;padding:1px;display:inline;zoom:1",(rt.inlineBlockNeedsLayout=3===t.offsetWidth)&&(n.style.zoom=1)),n.removeChild(e),e=t=null)}),function(){var e=mt.createElement("div");if(null==rt.deleteExpando){rt.deleteExpando=!0;try{delete e.test}catch(t){rt.deleteExpando=!1}}e=null}(),at.acceptData=function(e){var t=at.noData[(e.nodeName+" ").toLowerCase()],n=+e.nodeType||1;return 1!==n&&9!==n?!1:!t||t!==!0&&e.getAttribute("classid")===t};var St=/^(?:\{[\w\W]*\}|\[[\w\W]*\])$/,Ct=/([A-Z])/g;at.extend({cache:{},noData:{"applet ":!0,"embed ":!0,"object ":"clsid:D27CDB6E-AE6D-11cf-96B8-444553540000"},hasData:function(e){return e=e.nodeType?at.cache[e[at.expando]]:e[at.expando],!!e&&!l(e)},data:function(e,t,n){return u(e,t,n)},removeData:function(e,t){return d(e,t)},_data:function(e,t,n){return u(e,t,n,!0)},_removeData:function(e,t){return d(e,t,!0)}}),at.fn.extend({data:function(e,t){var n,r,o,a=this[0],i=a&&a.attributes;if(void 0===e){if(this.length&&(o=at.data(a),1===a.nodeType&&!at._data(a,"parsedAttrs"))){for(n=i.length;n--;)r=i[n].name,0===r.indexOf("data-")&&(r=at.camelCase(r.slice(5)),c(a,r,o[r]));at._data(a,"parsedAttrs",!0)}return o}return"object"==typeof e?this.each(function(){at.data(this,e)}):arguments.length>1?this.each(function(){at.data(this,e,t)}):a?c(a,e,at.data(a,e)):void 0},removeData:function(e){return this.each(function(){at.removeData(this,e)})}}),at.extend({queue:function(e,t,n){var r;return e?(t=(t||"fx")+"queue",r=at._data(e,t),n&&(!r||at.isArray(n)?r=at._data(e,t,at.makeArray(n)):r.push(n)),r||[]):void 0},dequeue:function(e,t){t=t||"fx";var n=at.queue(e,t),r=n.length,o=n.shift(),a=at._queueHooks(e,t),i=function(){at.dequeue(e,t)};"inprogress"===o&&(o=n.shift(),r--),o&&("fx"===t&&n.unshift("inprogress"),delete a.stop,o.call(e,i,a)),!r&&a&&a.empty.fire()},_queueHooks:function(e,t){var n=t+"queueHooks";return at._data(e,n)||at._data(e,n,{empty:at.Callbacks("once memory").add(function(){at._removeData(e,t+"queue"),at._removeData(e,n)})})}}),at.fn.extend({queue:function(e,t){var n=2;return"string"!=typeof e&&(t=e,e="fx",n--),arguments.length<n?at.queue(this[0],e):void 0===t?this:this.each(function(){var n=at.queue(this,e,t);at._queueHooks(this,e),"fx"===e&&"inprogress"!==n[0]&&at.dequeue(this,e)})},dequeue:function(e){return this.each(function(){at.dequeue(this,e)})},clearQueue:function(e){return this.queue(e||"fx",[])},promise:function(e,t){var n,r=1,o=at.Deferred(),a=this,i=this.length,s=function(){--r||o.resolveWith(a,[a])};for("string"!=typeof e&&(t=e,e=void 0),e=e||"fx";i--;)n=at._data(a[i],e+"queueHooks"),n&&n.empty&&(r++,n.empty.add(s));return s(),o.promise(t)}});var Mt=/[+-]?(?:\d*\.|)\d+(?:[eE][+-]?\d+|)/.source,Et=["Top","Right","Bottom","Left"],It=function(e,t){return e=t||e,"none"===at.css(e,"display")||!at.contains(e.ownerDocument,e)},At=at.access=function(e,t,n,r,o,a,i){var s=0,c=e.length,l=null==n;if("object"===at.type(n)){o=!0;for(s in n)at.access(e,t,s,n[s],!0,a,i)}else if(void 0!==r&&(o=!0,at.isFunction(r)||(i=!0),l&&(i?(t.call(e,r),t=null):(l=t,t=function(e,t,n){return l.call(at(e),n)})),t))for(;c>s;s++)t(e[s],n,i?r:r.call(e[s],s,t(e[s],n)));return o?e:l?t.call(e):c?t(e[0],n):a},Ot=/^(?:checkbox|radio)$/i;!function(){var e=mt.createDocumentFragment(),t=mt.createElement("div"),n=mt.createElement("input");if(t.setAttribute("className","t"),t.innerHTML="  <link/><table></table><a href='/a'>a</a>",rt.leadingWhitespace=3===t.firstChild.nodeType,rt.tbody=!t.getElementsByTagName("tbody").length,rt.htmlSerialize=!!t.getElementsByTagName("link").length,rt.html5Clone="<:nav></:nav>"!==mt.createElement("nav").cloneNode(!0).outerHTML,n.type="checkbox",n.checked=!0,e.appendChild(n),rt.appendChecked=n.checked,t.innerHTML="<textarea>x</textarea>",rt.noCloneChecked=!!t.cloneNode(!0).lastChild.defaultValue,e.appendChild(t),t.innerHTML="<input type='radio' checked='checked' name='t'/>",rt.checkClone=t.cloneNode(!0).cloneNode(!0).lastChild.checked,rt.noCloneEvent=!0,t.attachEvent&&(t.attachEvent("onclick",function(){rt.noCloneEvent=!1}),t.cloneNode(!0).click()),null==rt.deleteExpando){rt.deleteExpando=!0;try{delete t.test}catch(r){rt.deleteExpando=!1}}e=t=n=null}(),function(){var t,n,r=mt.createElement("div");for(t in{submit:!0,change:!0,focusin:!0})n="on"+t,(rt[t+"Bubbles"]=n in e)||(r.setAttribute(n,"t"),rt[t+"Bubbles"]=r.attributes[n].expando===!1);r=null}();var jt=/^(?:input|select|textarea)$/i,Pt=/^key/,Nt=/^(?:mouse|contextmenu)|click/,Dt=/^(?:focusinfocus|focusoutblur)$/,Rt=/^([^.]*)(?:\.(.+)|)$/;at.event={global:{},add:function(e,t,n,r,o){var a,i,s,c,l,u,d,h,p,f,m,g=at._data(e);if(g){for(n.handler&&(c=n,n=c.handler,o=c.selector),n.guid||(n.guid=at.guid++),(i=g.events)||(i=g.events={}),(u=g.handle)||(u=g.handle=function(e){return typeof at===xt||e&&at.event.triggered===e.type?void 0:at.event.dispatch.apply(u.elem,arguments)},u.elem=e),t=(t||"").match(wt)||[""],s=t.length;s--;)a=Rt.exec(t[s])||[],p=m=a[1],f=(a[2]||"").split(".").sort(),p&&(l=at.event.special[p]||{},p=(o?l.delegateType:l.bindType)||p,l=at.event.special[p]||{},d=at.extend({type:p,origType:m,data:r,handler:n,guid:n.guid,selector:o,needsContext:o&&at.expr.match.needsContext.test(o),namespace:f.join(".")},c),(h=i[p])||(h=i[p]=[],h.delegateCount=0,l.setup&&l.setup.call(e,r,f,u)!==!1||(e.addEventListener?e.addEventListener(p,u,!1):e.attachEvent&&e.attachEvent("on"+p,u))),l.add&&(l.add.call(e,d),d.handler.guid||(d.handler.guid=n.guid)),o?h.splice(h.delegateCount++,0,d):h.push(d),at.event.global[p]=!0);e=null}},remove:function(e,t,n,r,o){var a,i,s,c,l,u,d,h,p,f,m,g=at.hasData(e)&&at._data(e);if(g&&(u=g.events)){for(t=(t||"").match(wt)||[""],l=t.length;l--;)if(s=Rt.exec(t[l])||[],p=m=s[1],f=(s[2]||"").split(".").sort(),p){for(d=at.event.special[p]||{},p=(r?d.delegateType:d.bindType)||p,h=u[p]||[],s=s[2]&&new RegExp("(^|\\.)"+f.join("\\.(?:.*\\.|)")+"(\\.|$)"),c=a=h.length;a--;)i=h[a],!o&&m!==i.origType||n&&n.guid!==i.guid||s&&!s.test(i.namespace)||r&&r!==i.selector&&("**"!==r||!i.selector)||(h.splice(a,1),i.selector&&h.delegateCount--,d.remove&&d.remove.call(e,i));c&&!h.length&&(d.teardown&&d.teardown.call(e,f,g.handle)!==!1||at.removeEvent(e,p,g.handle),delete u[p])}else for(p in u)at.event.remove(e,p+t[l],n,r,!0);at.isEmptyObject(u)&&(delete g.handle,at._removeData(e,"events"))}},trigger:function(t,n,r,o){var a,i,s,c,l,u,d,h=[r||mt],p=tt.call(t,"type")?t.type:t,f=tt.call(t,"namespace")?t.namespace.split("."):[];if(s=u=r=r||mt,3!==r.nodeType&&8!==r.nodeType&&!Dt.test(p+at.event.triggered)&&(p.indexOf(".")>=0&&(f=p.split("."),p=f.shift(),f.sort()),i=p.indexOf(":")<0&&"on"+p,t=t[at.expando]?t:new at.Event(p,"object"==typeof t&&t),t.isTrigger=o?2:3,t.namespace=f.join("."),t.namespace_re=t.namespace?new RegExp("(^|\\.)"+f.join("\\.(?:.*\\.|)")+"(\\.|$)"):null,t.result=void 0,t.target||(t.target=r),n=null==n?[t]:at.makeArray(n,[t]),l=at.event.special[p]||{},o||!l.trigger||l.trigger.apply(r,n)!==!1)){if(!o&&!l.noBubble&&!at.isWindow(r)){for(c=l.delegateType||p,Dt.test(c+p)||(s=s.parentNode);s;s=s.parentNode)h.push(s),u=s;u===(r.ownerDocument||mt)&&h.push(u.defaultView||u.parentWindow||e)}for(d=0;(s=h[d++])&&!t.isPropagationStopped();)t.type=d>1?c:l.bindType||p,a=(at._data(s,"events")||{})[t.type]&&at._data(s,"handle"),a&&a.apply(s,n),a=i&&s[i],a&&a.apply&&at.acceptData(s)&&(t.result=a.apply(s,n),t.result===!1&&t.preventDefault());if(t.type=p,!o&&!t.isDefaultPrevented()&&(!l._default||l._default.apply(h.pop(),n)===!1)&&at.acceptData(r)&&i&&r[p]&&!at.isWindow(r)){u=r[i],u&&(r[i]=null),at.event.triggered=p;try{r[p]()}catch(m){}at.event.triggered=void 0,u&&(r[i]=u)}return t.result}},dispatch:function(e){e=at.event.fix(e);var t,n,r,o,a,i=[],s=X.call(arguments),c=(at._data(this,"events")||{})[e.type]||[],l=at.event.special[e.type]||{};if(s[0]=e,e.delegateTarget=this,!l.preDispatch||l.preDispatch.call(this,e)!==!1){for(i=at.event.handlers.call(this,e,c),t=0;(o=i[t++])&&!e.isPropagationStopped();)for(e.currentTarget=o.elem,a=0;(r=o.handlers[a++])&&!e.isImmediatePropagationStopped();)(!e.namespace_re||e.namespace_re.test(r.namespace))&&(e.handleObj=r,e.data=r.data,n=((at.event.special[r.origType]||{}).handle||r.handler).apply(o.elem,s),void 0!==n&&(e.result=n)===!1&&(e.preventDefault(),e.stopPropagation()));return l.postDispatch&&l.postDispatch.call(this,e),e.result}},handlers:function(e,t){var n,r,o,a,i=[],s=t.delegateCount,c=e.target;if(s&&c.nodeType&&(!e.button||"click"!==e.type))for(;c!=this;c=c.parentNode||this)if(1===c.nodeType&&(c.disabled!==!0||"click"!==e.type)){for(o=[],a=0;s>a;a++)r=t[a],n=r.selector+" ",void 0===o[n]&&(o[n]=r.needsContext?at(n,this).index(c)>=0:at.find(n,this,null,[c]).length),o[n]&&o.push(r);o.length&&i.push({elem:c,handlers:o})}return s<t.length&&i.push({elem:this,handlers:t.slice(s)}),i},fix:function(e){if(e[at.expando])return e;var t,n,r,o=e.type,a=e,i=this.fixHooks[o];for(i||(this.fixHooks[o]=i=Nt.test(o)?this.mouseHooks:Pt.test(o)?this.keyHooks:{}),r=i.props?this.props.concat(i.props):this.props,e=new at.Event(a),t=r.length;t--;)n=r[t],e[n]=a[n];return e.target||(e.target=a.srcElement||mt),3===e.target.nodeType&&(e.target=e.target.parentNode),e.metaKey=!!e.metaKey,i.filter?i.filter(e,a):e},props:"altKey bubbles cancelable ctrlKey currentTarget eventPhase metaKey relatedTarget shiftKey target timeStamp view which".split(" "),fixHooks:{},keyHooks:{props:"char charCode key keyCode".split(" "),filter:function(e,t){return null==e.which&&(e.which=null!=t.charCode?t.charCode:t.keyCode),e}},mouseHooks:{props:"button buttons clientX clientY fromElement offsetX offsetY pageX pageY screenX screenY toElement".split(" "),filter:function(e,t){var n,r,o,a=t.button,i=t.fromElement;return null==e.pageX&&null!=t.clientX&&(r=e.target.ownerDocument||mt,o=r.documentElement,n=r.body,e.pageX=t.clientX+(o&&o.scrollLeft||n&&n.scrollLeft||0)-(o&&o.clientLeft||n&&n.clientLeft||0),e.pageY=t.clientY+(o&&o.scrollTop||n&&n.scrollTop||0)-(o&&o.clientTop||n&&n.clientTop||0)),!e.relatedTarget&&i&&(e.relatedTarget=i===e.target?t.toElement:i),e.which||void 0===a||(e.which=1&a?1:2&a?3:4&a?2:0),e}},special:{load:{noBubble:!0},focus:{trigger:function(){if(this!==f()&&this.focus)try{return this.focus(),!1}catch(e){}},delegateType:"focusin"},blur:{trigger:function(){return this===f()&&this.blur?(this.blur(),!1):void 0},delegateType:"focusout"},click:{trigger:function(){return at.nodeName(this,"input")&&"checkbox"===this.type&&this.click?(this.click(),!1):void 0},_default:function(e){return at.nodeName(e.target,"a")}},beforeunload:{postDispatch:function(e){void 0!==e.result&&(e.originalEvent.returnValue=e.result)}}},simulate:function(e,t,n,r){var o=at.extend(new at.Event,n,{type:e,isSimulated:!0,originalEvent:{}});r?at.event.trigger(o,null,t):at.event.dispatch.call(t,o),o.isDefaultPrevented()&&n.preventDefault()}},at.removeEvent=mt.removeEventListener?function(e,t,n){e.removeEventListener&&e.removeEventListener(t,n,!1)}:function(e,t,n){var r="on"+t;e.detachEvent&&(typeof e[r]===xt&&(e[r]=null),e.detachEvent(r,n))},at.Event=function(e,t){return this instanceof at.Event?(e&&e.type?(this.originalEvent=e,this.type=e.type,this.isDefaultPrevented=e.defaultPrevented||void 0===e.defaultPrevented&&(e.returnValue===!1||e.getPreventDefault&&e.getPreventDefault())?h:p):this.type=e,t&&at.extend(this,t),this.timeStamp=e&&e.timeStamp||at.now(),this[at.expando]=!0,void 0):new at.Event(e,t)},at.Event.prototype={isDefaultPrevented:p,isPropagationStopped:p,isImmediatePropagationStopped:p,preventDefault:function(){var e=this.originalEvent;this.isDefaultPrevented=h,e&&(e.preventDefault?e.preventDefault():e.returnValue=!1)},stopPropagation:function(){var e=this.originalEvent;this.isPropagationStopped=h,e&&(e.stopPropagation&&e.stopPropagation(),e.cancelBubble=!0)},stopImmediatePropagation:function(){this.isImmediatePropagationStopped=h,this.stopPropagation()}},at.each({mouseenter:"mouseover",mouseleave:"mouseout"},function(e,t){at.event.special[e]={delegateType:t,bindType:t,handle:function(e){var n,r=this,o=e.relatedTarget,a=e.handleObj;return(!o||o!==r&&!at.contains(r,o))&&(e.type=a.origType,n=a.handler.apply(this,arguments),e.type=t),n}}}),rt.submitBubbles||(at.event.special.submit={setup:function(){return at.nodeName(this,"form")?!1:(at.event.add(this,"click._submit keypress._submit",function(e){var t=e.target,n=at.nodeName(t,"input")||at.nodeName(t,"button")?t.form:void 0;n&&!at._data(n,"submitBubbles")&&(at.event.add(n,"submit._submit",function(e){e._submit_bubble=!0}),at._data(n,"submitBubbles",!0))}),void 0)},postDispatch:function(e){e._submit_bubble&&(delete e._submit_bubble,this.parentNode&&!e.isTrigger&&at.event.simulate("submit",this.parentNode,e,!0))},teardown:function(){return at.nodeName(this,"form")?!1:(at.event.remove(this,"._submit"),void 0)}}),rt.changeBubbles||(at.event.special.change={setup:function(){return jt.test(this.nodeName)?(("checkbox"===this.type||"radio"===this.type)&&(at.event.add(this,"propertychange._change",function(e){"checked"===e.originalEvent.propertyName&&(this._just_changed=!0)}),at.event.add(this,"click._change",function(e){this._just_changed&&!e.isTrigger&&(this._just_changed=!1),at.event.simulate("change",this,e,!0)})),!1):(at.event.add(this,"beforeactivate._change",function(e){var t=e.target;jt.test(t.nodeName)&&!at._data(t,"changeBubbles")&&(at.event.add(t,"change._change",function(e){!this.parentNode||e.isSimulated||e.isTrigger||at.event.simulate("change",this.parentNode,e,!0)}),at._data(t,"changeBubbles",!0))}),void 0)},handle:function(e){var t=e.target;return this!==t||e.isSimulated||e.isTrigger||"radio"!==t.type&&"checkbox"!==t.type?e.handleObj.handler.apply(this,arguments):void 0},teardown:function(){return at.event.remove(this,"._change"),!jt.test(this.nodeName)}}),rt.focusinBubbles||at.each({focus:"focusin",blur:"focusout"},function(e,t){var n=function(e){at.event.simulate(t,e.target,at.event.fix(e),!0)};at.event.special[t]={setup:function(){var r=this.ownerDocument||this,o=at._data(r,t);o||r.addEventListener(e,n,!0),at._data(r,t,(o||0)+1)},teardown:function(){var r=this.ownerDocument||this,o=at._data(r,t)-1;o?at._data(r,t,o):(r.removeEventListener(e,n,!0),at._removeData(r,t))}}}),at.fn.extend({on:function(e,t,n,r,o){var a,i;if("object"==typeof e){"string"!=typeof t&&(n=n||t,t=void 0);for(a in e)this.on(a,t,n,e[a],o);return this}if(null==n&&null==r?(r=t,n=t=void 0):null==r&&("string"==typeof t?(r=n,n=void 0):(r=n,n=t,t=void 0)),r===!1)r=p;else if(!r)return this;return 1===o&&(i=r,r=function(e){return at().off(e),i.apply(this,arguments)},r.guid=i.guid||(i.guid=at.guid++)),this.each(function(){at.event.add(this,e,r,n,t)})},one:function(e,t,n,r){return this.on(e,t,n,r,1)},off:function(e,t,n){var r,o;if(e&&e.preventDefault&&e.handleObj)return r=e.handleObj,at(e.delegateTarget).off(r.namespace?r.origType+"."+r.namespace:r.origType,r.selector,r.handler),this;if("object"==typeof e){for(o in e)this.off(o,t,e[o]);return this}return(t===!1||"function"==typeof t)&&(n=t,t=void 0),n===!1&&(n=p),this.each(function(){at.event.remove(this,e,n,t)})},trigger:function(e,t){return this.each(function(){at.event.trigger(e,t,this)})},triggerHandler:function(e,t){var n=this[0];return n?at.event.trigger(e,t,n,!0):void 0}});var Lt="abbr|article|aside|audio|bdi|canvas|data|datalist|details|figcaption|figure|footer|header|hgroup|mark|meter|nav|output|progress|section|summary|time|video",qt=/ jQuery\d+="(?:null|\d+)"/g,Ft=new RegExp("<(?:"+Lt+")[\\s/>]","i"),Bt=/^\s+/,Ht=/<(?!area|br|col|embed|hr|img|input|link|meta|param)(([\w:]+)[^>]*)\/>/gi,$t=/<([\w:]+)/,Ut=/<tbody/i,Jt=/<|&#?\w+;/,Wt=/<(?:script|style|link)/i,zt=/checked\s*(?:[^=]|=\s*.checked.)/i,Vt=/^$|\/(?:java|ecma)script/i,Gt=/^true\/(.*)/,Xt=/^\s*<!(?:\[CDATA\[|--)|(?:\]\]|--)>\s*$/g,Yt={option:[1,"<select multiple='multiple'>","</select>"],legend:[1,"<fieldset>","</fieldset>"],area:[1,"<map>","</map>"],param:[1,"<object>","</object>"],thead:[1,"<table>","</table>"],tr:[2,"<table><tbody>","</tbody></table>"],col:[2,"<table><tbody></tbody><colgroup>","</colgroup></table>"],td:[3,"<table><tbody><tr>","</tr></tbody></table>"],_default:rt.htmlSerialize?[0,"",""]:[1,"X<div>","</div>"]},Qt=m(mt),Kt=Qt.appendChild(mt.createElement("div"));Yt.optgroup=Yt.option,Yt.tbody=Yt.tfoot=Yt.colgroup=Yt.caption=Yt.thead,Yt.th=Yt.td,at.extend({clone:function(e,t,n){var r,o,a,i,s,c=at.contains(e.ownerDocument,e);if(rt.html5Clone||at.isXMLDoc(e)||!Ft.test("<"+e.nodeName+">")?a=e.cloneNode(!0):(Kt.innerHTML=e.outerHTML,Kt.removeChild(a=Kt.firstChild)),!(rt.noCloneEvent&&rt.noCloneChecked||1!==e.nodeType&&11!==e.nodeType||at.isXMLDoc(e)))for(r=g(a),s=g(e),i=0;null!=(o=s[i]);++i)r[i]&&T(o,r[i]);if(t)if(n)for(s=s||g(e),r=r||g(a),i=0;null!=(o=s[i]);i++)k(o,r[i]);else k(e,a);return r=g(a,"script"),r.length>0&&_(r,!c&&g(e,"script")),r=s=o=null,a},buildFragment:function(e,t,n,r){for(var o,a,i,s,c,l,u,d=e.length,h=m(t),p=[],f=0;d>f;f++)if(a=e[f],a||0===a)if("object"===at.type(a))at.merge(p,a.nodeType?[a]:a);else if(Jt.test(a)){for(s=s||h.appendChild(t.createElement("div")),c=($t.exec(a)||["",""])[1].toLowerCase(),u=Yt[c]||Yt._default,s.innerHTML=u[1]+a.replace(Ht,"<$1></$2>")+u[2],o=u[0];o--;)s=s.lastChild;if(!rt.leadingWhitespace&&Bt.test(a)&&p.push(t.createTextNode(Bt.exec(a)[0])),!rt.tbody)for(a="table"!==c||Ut.test(a)?"<table>"!==u[1]||Ut.test(a)?0:s:s.firstChild,o=a&&a.childNodes.length;o--;)at.nodeName(l=a.childNodes[o],"tbody")&&!l.childNodes.length&&a.removeChild(l);for(at.merge(p,s.childNodes),s.textContent="";s.firstChild;)s.removeChild(s.firstChild);s=h.lastChild}else p.push(t.createTextNode(a));for(s&&h.removeChild(s),rt.appendChecked||at.grep(g(p,"input"),y),f=0;a=p[f++];)if((!r||-1===at.inArray(a,r))&&(i=at.contains(a.ownerDocument,a),s=g(h.appendChild(a),"script"),i&&_(s),n))for(o=0;a=s[o++];)Vt.test(a.type||"")&&n.push(a);return s=null,h},cleanData:function(e,t){for(var n,r,o,a,i=0,s=at.expando,c=at.cache,l=rt.deleteExpando,u=at.event.special;null!=(n=e[i]);i++)if((t||at.acceptData(n))&&(o=n[s],a=o&&c[o])){if(a.events)for(r in a.events)u[r]?at.event.remove(n,r):at.removeEvent(n,r,a.handle);c[o]&&(delete c[o],l?delete n[s]:typeof n.removeAttribute!==xt?n.removeAttribute(s):n[s]=null,G.push(o))}}}),at.fn.extend({text:function(e){return At(this,function(e){return void 0===e?at.text(this):this.empty().append((this[0]&&this[0].ownerDocument||mt).createTextNode(e))},null,e,arguments.length)},append:function(){return this.domManip(arguments,function(e){if(1===this.nodeType||11===this.nodeType||9===this.nodeType){var t=v(this,e);t.appendChild(e)}})},prepend:function(){return this.domManip(arguments,function(e){if(1===this.nodeType||11===this.nodeType||9===this.nodeType){var t=v(this,e);t.insertBefore(e,t.firstChild)}})},before:function(){return this.domManip(arguments,function(e){this.parentNode&&this.parentNode.insertBefore(e,this)})},after:function(){return this.domManip(arguments,function(e){this.parentNode&&this.parentNode.insertBefore(e,this.nextSibling)})},remove:function(e,t){for(var n,r=e?at.filter(e,this):this,o=0;null!=(n=r[o]);o++)t||1!==n.nodeType||at.cleanData(g(n)),n.parentNode&&(t&&at.contains(n.ownerDocument,n)&&_(g(n,"script")),n.parentNode.removeChild(n));return this},empty:function(){for(var e,t=0;null!=(e=this[t]);t++){for(1===e.nodeType&&at.cleanData(g(e,!1));e.firstChild;)e.removeChild(e.firstChild);e.options&&at.nodeName(e,"select")&&(e.options.length=0)}return this},clone:function(e,t){return e=null==e?!1:e,t=null==t?e:t,this.map(function(){return at.clone(this,e,t)})},html:function(e){return At(this,function(e){var t=this[0]||{},n=0,r=this.length;if(void 0===e)return 1===t.nodeType?t.innerHTML.replace(qt,""):void 0;if(!("string"!=typeof e||Wt.test(e)||!rt.htmlSerialize&&Ft.test(e)||!rt.leadingWhitespace&&Bt.test(e)||Yt[($t.exec(e)||["",""])[1].toLowerCase()])){e=e.replace(Ht,"<$1></$2>");try{for(;r>n;n++)t=this[n]||{},1===t.nodeType&&(at.cleanData(g(t,!1)),t.innerHTML=e);t=0}catch(o){}}t&&this.empty().append(e)},null,e,arguments.length)},replaceWith:function(){var e=arguments[0];return this.domManip(arguments,function(t){e=this.parentNode,at.cleanData(g(this)),e&&e.replaceChild(t,this)}),e&&(e.length||e.nodeType)?this:this.remove()},detach:function(e){return this.remove(e,!0)},domManip:function(e,t){e=Y.apply([],e);var n,r,o,a,i,s,c=0,l=this.length,u=this,d=l-1,h=e[0],p=at.isFunction(h);if(p||l>1&&"string"==typeof h&&!rt.checkClone&&zt.test(h))return this.each(function(n){var r=u.eq(n);p&&(e[0]=h.call(this,n,r.html())),r.domManip(e,t)});if(l&&(s=at.buildFragment(e,this[0].ownerDocument,!1,this),n=s.firstChild,1===s.childNodes.length&&(s=n),n)){for(a=at.map(g(s,"script"),b),o=a.length;l>c;c++)r=s,c!==d&&(r=at.clone(r,!0,!0),o&&at.merge(a,g(r,"script"))),t.call(this[c],r,c);if(o)for(i=a[a.length-1].ownerDocument,at.map(a,w),c=0;o>c;c++)r=a[c],Vt.test(r.type||"")&&!at._data(r,"globalEval")&&at.contains(i,r)&&(r.src?at._evalUrl&&at._evalUrl(r.src):at.globalEval((r.text||r.textContent||r.innerHTML||"").replace(Xt,"")));s=n=null}return this}}),at.each({appendTo:"append",prependTo:"prepend",insertBefore:"before",insertAfter:"after",replaceAll:"replaceWith"},function(e,t){at.fn[e]=function(e){for(var n,r=0,o=[],a=at(e),i=a.length-1;i>=r;r++)n=r===i?this:this.clone(!0),at(a[r])[t](n),Q.apply(o,n.get());return this.pushStack(o)}});var Zt,en={};!function(){var e,t,n=mt.createElement("div"),r="-webkit-box-sizing:content-box;-moz-box-sizing:content-box;box-sizing:content-box;display:block;padding:0;margin:0;border:0";n.innerHTML="  <link/><table></table><a href='/a'>a</a><input type='checkbox'/>",e=n.getElementsByTagName("a")[0],e.style.cssText="float:left;opacity:.5",rt.opacity=/^0.5/.test(e.style.opacity),rt.cssFloat=!!e.style.cssFloat,n.style.backgroundClip="content-box",n.cloneNode(!0).style.backgroundClip="",rt.clearCloneStyle="content-box"===n.style.backgroundClip,e=n=null,rt.shrinkWrapBlocks=function(){var e,n,o,a;if(null==t){if(e=mt.getElementsByTagName("body")[0],!e)return;a="border:0;width:0;height:0;position:absolute;top:0;left:-9999px",n=mt.createElement("div"),o=mt.createElement("div"),e.appendChild(n).appendChild(o),t=!1,typeof o.style.zoom!==xt&&(o.style.cssText=r+";width:1px;padding:1px;zoom:1",o.innerHTML="<div></div>",o.firstChild.style.width="5px",t=3!==o.offsetWidth),e.removeChild(n),e=n=o=null}return t}}();var tn,nn,rn=/^margin/,on=new RegExp("^("+Mt+")(?!px)[a-z%]+$","i"),an=/^(top|right|bottom|left)$/;e.getComputedStyle?(tn=function(e){return e.ownerDocument.defaultView.getComputedStyle(e,null)},nn=function(e,t,n){var r,o,a,i,s=e.style;return n=n||tn(e),i=n?n.getPropertyValue(t)||n[t]:void 0,n&&(""!==i||at.contains(e.ownerDocument,e)||(i=at.style(e,t)),on.test(i)&&rn.test(t)&&(r=s.width,o=s.minWidth,a=s.maxWidth,s.minWidth=s.maxWidth=s.width=i,i=n.width,s.width=r,s.minWidth=o,s.maxWidth=a)),void 0===i?i:i+""}):mt.documentElement.currentStyle&&(tn=function(e){return e.currentStyle},nn=function(e,t,n){var r,o,a,i,s=e.style;return n=n||tn(e),i=n?n[t]:void 0,null==i&&s&&s[t]&&(i=s[t]),on.test(i)&&!an.test(t)&&(r=s.left,o=e.runtimeStyle,a=o&&o.left,a&&(o.left=e.currentStyle.left),s.left="fontSize"===t?"1em":i,i=s.pixelLeft+"px",s.left=r,a&&(o.left=a)),void 0===i?i:i+""||"auto"}),function(){function t(){var t,n,r=mt.getElementsByTagName("body")[0];r&&(t=mt.createElement("div"),n=mt.createElement("div"),t.style.cssText=l,r.appendChild(t).appendChild(n),n.style.cssText="-webkit-box-sizing:border-box;-moz-box-sizing:border-box;box-sizing:border-box;position:absolute;display:block;padding:1px;border:1px;width:4px;margin-top:1%;top:1%",at.swap(r,null!=r.style.zoom?{zoom:1}:{},function(){o=4===n.offsetWidth}),a=!0,i=!1,s=!0,e.getComputedStyle&&(i="1%"!==(e.getComputedStyle(n,null)||{}).top,a="4px"===(e.getComputedStyle(n,null)||{width:"4px"}).width),r.removeChild(t),n=r=null)}var n,r,o,a,i,s,c=mt.createElement("div"),l="border:0;width:0;height:0;position:absolute;top:0;left:-9999px",u="-webkit-box-sizing:content-box;-moz-box-sizing:content-box;box-sizing:content-box;display:block;padding:0;margin:0;border:0";c.innerHTML="  <link/><table></table><a href='/a'>a</a><input type='checkbox'/>",n=c.getElementsByTagName("a")[0],n.style.cssText="float:left;opacity:.5",rt.opacity=/^0.5/.test(n.style.opacity),rt.cssFloat=!!n.style.cssFloat,c.style.backgroundClip="content-box",c.cloneNode(!0).style.backgroundClip="",rt.clearCloneStyle="content-box"===c.style.backgroundClip,n=c=null,at.extend(rt,{reliableHiddenOffsets:function(){if(null!=r)return r;var e,t,n,o=mt.createElement("div"),a=mt.getElementsByTagName("body")[0];if(a)return o.setAttribute("className","t"),o.innerHTML="  <link/><table></table><a href='/a'>a</a><input type='checkbox'/>",e=mt.createElement("div"),e.style.cssText=l,a.appendChild(e).appendChild(o),o.innerHTML="<table><tr><td></td><td>t</td></tr></table>",t=o.getElementsByTagName("td"),t[0].style.cssText="padding:0;margin:0;border:0;display:none",n=0===t[0].offsetHeight,t[0].style.display="",t[1].style.display="none",r=n&&0===t[0].offsetHeight,a.removeChild(e),o=a=null,r},boxSizing:function(){return null==o&&t(),o
},boxSizingReliable:function(){return null==a&&t(),a},pixelPosition:function(){return null==i&&t(),i},reliableMarginRight:function(){var t,n,r,o;if(null==s&&e.getComputedStyle){if(t=mt.getElementsByTagName("body")[0],!t)return;n=mt.createElement("div"),r=mt.createElement("div"),n.style.cssText=l,t.appendChild(n).appendChild(r),o=r.appendChild(mt.createElement("div")),o.style.cssText=r.style.cssText=u,o.style.marginRight=o.style.width="0",r.style.width="1px",s=!parseFloat((e.getComputedStyle(o,null)||{}).marginRight),t.removeChild(n)}return s}})}(),at.swap=function(e,t,n,r){var o,a,i={};for(a in t)i[a]=e.style[a],e.style[a]=t[a];o=n.apply(e,r||[]);for(a in t)e.style[a]=i[a];return o};var sn=/alpha\([^)]*\)/i,cn=/opacity\s*=\s*([^)]*)/,ln=/^(none|table(?!-c[ea]).+)/,un=new RegExp("^("+Mt+")(.*)$","i"),dn=new RegExp("^([+-])=("+Mt+")","i"),hn={position:"absolute",visibility:"hidden",display:"block"},pn={letterSpacing:0,fontWeight:400},fn=["Webkit","O","Moz","ms"];at.extend({cssHooks:{opacity:{get:function(e,t){if(t){var n=nn(e,"opacity");return""===n?"1":n}}}},cssNumber:{columnCount:!0,fillOpacity:!0,fontWeight:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,widows:!0,zIndex:!0,zoom:!0},cssProps:{"float":rt.cssFloat?"cssFloat":"styleFloat"},style:function(e,t,n,r){if(e&&3!==e.nodeType&&8!==e.nodeType&&e.style){var o,a,i,s=at.camelCase(t),c=e.style;if(t=at.cssProps[s]||(at.cssProps[s]=M(c,s)),i=at.cssHooks[t]||at.cssHooks[s],void 0===n)return i&&"get"in i&&void 0!==(o=i.get(e,!1,r))?o:c[t];if(a=typeof n,"string"===a&&(o=dn.exec(n))&&(n=(o[1]+1)*o[2]+parseFloat(at.css(e,t)),a="number"),null!=n&&n===n&&("number"!==a||at.cssNumber[s]||(n+="px"),rt.clearCloneStyle||""!==n||0!==t.indexOf("background")||(c[t]="inherit"),!(i&&"set"in i&&void 0===(n=i.set(e,n,r)))))try{c[t]="",c[t]=n}catch(l){}}},css:function(e,t,n,r){var o,a,i,s=at.camelCase(t);return t=at.cssProps[s]||(at.cssProps[s]=M(e.style,s)),i=at.cssHooks[t]||at.cssHooks[s],i&&"get"in i&&(a=i.get(e,!0,n)),void 0===a&&(a=nn(e,t,r)),"normal"===a&&t in pn&&(a=pn[t]),""===n||n?(o=parseFloat(a),n===!0||at.isNumeric(o)?o||0:a):a}}),at.each(["height","width"],function(e,t){at.cssHooks[t]={get:function(e,n,r){return n?0===e.offsetWidth&&ln.test(at.css(e,"display"))?at.swap(e,hn,function(){return O(e,t,r)}):O(e,t,r):void 0},set:function(e,n,r){var o=r&&tn(e);return I(e,n,r?A(e,t,r,rt.boxSizing()&&"border-box"===at.css(e,"boxSizing",!1,o),o):0)}}}),rt.opacity||(at.cssHooks.opacity={get:function(e,t){return cn.test((t&&e.currentStyle?e.currentStyle.filter:e.style.filter)||"")?.01*parseFloat(RegExp.$1)+"":t?"1":""},set:function(e,t){var n=e.style,r=e.currentStyle,o=at.isNumeric(t)?"alpha(opacity="+100*t+")":"",a=r&&r.filter||n.filter||"";n.zoom=1,(t>=1||""===t)&&""===at.trim(a.replace(sn,""))&&n.removeAttribute&&(n.removeAttribute("filter"),""===t||r&&!r.filter)||(n.filter=sn.test(a)?a.replace(sn,o):a+" "+o)}}),at.cssHooks.marginRight=C(rt.reliableMarginRight,function(e,t){return t?at.swap(e,{display:"inline-block"},nn,[e,"marginRight"]):void 0}),at.each({margin:"",padding:"",border:"Width"},function(e,t){at.cssHooks[e+t]={expand:function(n){for(var r=0,o={},a="string"==typeof n?n.split(" "):[n];4>r;r++)o[e+Et[r]+t]=a[r]||a[r-2]||a[0];return o}},rn.test(e)||(at.cssHooks[e+t].set=I)}),at.fn.extend({css:function(e,t){return At(this,function(e,t,n){var r,o,a={},i=0;if(at.isArray(t)){for(r=tn(e),o=t.length;o>i;i++)a[t[i]]=at.css(e,t[i],!1,r);return a}return void 0!==n?at.style(e,t,n):at.css(e,t)},e,t,arguments.length>1)},show:function(){return E(this,!0)},hide:function(){return E(this)},toggle:function(e){return"boolean"==typeof e?e?this.show():this.hide():this.each(function(){It(this)?at(this).show():at(this).hide()})}}),at.Tween=j,j.prototype={constructor:j,init:function(e,t,n,r,o,a){this.elem=e,this.prop=n,this.easing=o||"swing",this.options=t,this.start=this.now=this.cur(),this.end=r,this.unit=a||(at.cssNumber[n]?"":"px")},cur:function(){var e=j.propHooks[this.prop];return e&&e.get?e.get(this):j.propHooks._default.get(this)},run:function(e){var t,n=j.propHooks[this.prop];return this.pos=t=this.options.duration?at.easing[this.easing](e,this.options.duration*e,0,1,this.options.duration):e,this.now=(this.end-this.start)*t+this.start,this.options.step&&this.options.step.call(this.elem,this.now,this),n&&n.set?n.set(this):j.propHooks._default.set(this),this}},j.prototype.init.prototype=j.prototype,j.propHooks={_default:{get:function(e){var t;return null==e.elem[e.prop]||e.elem.style&&null!=e.elem.style[e.prop]?(t=at.css(e.elem,e.prop,""),t&&"auto"!==t?t:0):e.elem[e.prop]},set:function(e){at.fx.step[e.prop]?at.fx.step[e.prop](e):e.elem.style&&(null!=e.elem.style[at.cssProps[e.prop]]||at.cssHooks[e.prop])?at.style(e.elem,e.prop,e.now+e.unit):e.elem[e.prop]=e.now}}},j.propHooks.scrollTop=j.propHooks.scrollLeft={set:function(e){e.elem.nodeType&&e.elem.parentNode&&(e.elem[e.prop]=e.now)}},at.easing={linear:function(e){return e},swing:function(e){return.5-Math.cos(e*Math.PI)/2}},at.fx=j.prototype.init,at.fx.step={};var mn,gn,yn=/^(?:toggle|show|hide)$/,vn=new RegExp("^(?:([+-])=|)("+Mt+")([a-z%]*)$","i"),bn=/queueHooks$/,wn=[R],_n={"*":[function(e,t){var n=this.createTween(e,t),r=n.cur(),o=vn.exec(t),a=o&&o[3]||(at.cssNumber[e]?"":"px"),i=(at.cssNumber[e]||"px"!==a&&+r)&&vn.exec(at.css(n.elem,e)),s=1,c=20;if(i&&i[3]!==a){a=a||i[3],o=o||[],i=+r||1;do s=s||".5",i/=s,at.style(n.elem,e,i+a);while(s!==(s=n.cur()/r)&&1!==s&&--c)}return o&&(i=n.start=+i||+r||0,n.unit=a,n.end=o[1]?i+(o[1]+1)*o[2]:+o[2]),n}]};at.Animation=at.extend(q,{tweener:function(e,t){at.isFunction(e)?(t=e,e=["*"]):e=e.split(" ");for(var n,r=0,o=e.length;o>r;r++)n=e[r],_n[n]=_n[n]||[],_n[n].unshift(t)},prefilter:function(e,t){t?wn.unshift(e):wn.push(e)}}),at.speed=function(e,t,n){var r=e&&"object"==typeof e?at.extend({},e):{complete:n||!n&&t||at.isFunction(e)&&e,duration:e,easing:n&&t||t&&!at.isFunction(t)&&t};return r.duration=at.fx.off?0:"number"==typeof r.duration?r.duration:r.duration in at.fx.speeds?at.fx.speeds[r.duration]:at.fx.speeds._default,(null==r.queue||r.queue===!0)&&(r.queue="fx"),r.old=r.complete,r.complete=function(){at.isFunction(r.old)&&r.old.call(this),r.queue&&at.dequeue(this,r.queue)},r},at.fn.extend({fadeTo:function(e,t,n,r){return this.filter(It).css("opacity",0).show().end().animate({opacity:t},e,n,r)},animate:function(e,t,n,r){var o=at.isEmptyObject(e),a=at.speed(t,n,r),i=function(){var t=q(this,at.extend({},e),a);(o||at._data(this,"finish"))&&t.stop(!0)};return i.finish=i,o||a.queue===!1?this.each(i):this.queue(a.queue,i)},stop:function(e,t,n){var r=function(e){var t=e.stop;delete e.stop,t(n)};return"string"!=typeof e&&(n=t,t=e,e=void 0),t&&e!==!1&&this.queue(e||"fx",[]),this.each(function(){var t=!0,o=null!=e&&e+"queueHooks",a=at.timers,i=at._data(this);if(o)i[o]&&i[o].stop&&r(i[o]);else for(o in i)i[o]&&i[o].stop&&bn.test(o)&&r(i[o]);for(o=a.length;o--;)a[o].elem!==this||null!=e&&a[o].queue!==e||(a[o].anim.stop(n),t=!1,a.splice(o,1));(t||!n)&&at.dequeue(this,e)})},finish:function(e){return e!==!1&&(e=e||"fx"),this.each(function(){var t,n=at._data(this),r=n[e+"queue"],o=n[e+"queueHooks"],a=at.timers,i=r?r.length:0;for(n.finish=!0,at.queue(this,e,[]),o&&o.stop&&o.stop.call(this,!0),t=a.length;t--;)a[t].elem===this&&a[t].queue===e&&(a[t].anim.stop(!0),a.splice(t,1));for(t=0;i>t;t++)r[t]&&r[t].finish&&r[t].finish.call(this);delete n.finish})}}),at.each(["toggle","show","hide"],function(e,t){var n=at.fn[t];at.fn[t]=function(e,r,o){return null==e||"boolean"==typeof e?n.apply(this,arguments):this.animate(N(t,!0),e,r,o)}}),at.each({slideDown:N("show"),slideUp:N("hide"),slideToggle:N("toggle"),fadeIn:{opacity:"show"},fadeOut:{opacity:"hide"},fadeToggle:{opacity:"toggle"}},function(e,t){at.fn[e]=function(e,n,r){return this.animate(t,e,n,r)}}),at.timers=[],at.fx.tick=function(){var e,t=at.timers,n=0;for(mn=at.now();n<t.length;n++)e=t[n],e()||t[n]!==e||t.splice(n--,1);t.length||at.fx.stop(),mn=void 0},at.fx.timer=function(e){at.timers.push(e),e()?at.fx.start():at.timers.pop()},at.fx.interval=13,at.fx.start=function(){gn||(gn=setInterval(at.fx.tick,at.fx.interval))},at.fx.stop=function(){clearInterval(gn),gn=null},at.fx.speeds={slow:600,fast:200,_default:400},at.fn.delay=function(e,t){return e=at.fx?at.fx.speeds[e]||e:e,t=t||"fx",this.queue(t,function(t,n){var r=setTimeout(t,e);n.stop=function(){clearTimeout(r)}})},function(){var e,t,n,r,o=mt.createElement("div");o.setAttribute("className","t"),o.innerHTML="  <link/><table></table><a href='/a'>a</a><input type='checkbox'/>",e=o.getElementsByTagName("a")[0],n=mt.createElement("select"),r=n.appendChild(mt.createElement("option")),t=o.getElementsByTagName("input")[0],e.style.cssText="top:1px",rt.getSetAttribute="t"!==o.className,rt.style=/top/.test(e.getAttribute("style")),rt.hrefNormalized="/a"===e.getAttribute("href"),rt.checkOn=!!t.value,rt.optSelected=r.selected,rt.enctype=!!mt.createElement("form").enctype,n.disabled=!0,rt.optDisabled=!r.disabled,t=mt.createElement("input"),t.setAttribute("value",""),rt.input=""===t.getAttribute("value"),t.value="t",t.setAttribute("type","radio"),rt.radioValue="t"===t.value,e=t=n=r=o=null}();var kn=/\r/g;at.fn.extend({val:function(e){var t,n,r,o=this[0];{if(arguments.length)return r=at.isFunction(e),this.each(function(n){var o;1===this.nodeType&&(o=r?e.call(this,n,at(this).val()):e,null==o?o="":"number"==typeof o?o+="":at.isArray(o)&&(o=at.map(o,function(e){return null==e?"":e+""})),t=at.valHooks[this.type]||at.valHooks[this.nodeName.toLowerCase()],t&&"set"in t&&void 0!==t.set(this,o,"value")||(this.value=o))});if(o)return t=at.valHooks[o.type]||at.valHooks[o.nodeName.toLowerCase()],t&&"get"in t&&void 0!==(n=t.get(o,"value"))?n:(n=o.value,"string"==typeof n?n.replace(kn,""):null==n?"":n)}}}),at.extend({valHooks:{option:{get:function(e){var t=at.find.attr(e,"value");return null!=t?t:at.text(e)}},select:{get:function(e){for(var t,n,r=e.options,o=e.selectedIndex,a="select-one"===e.type||0>o,i=a?null:[],s=a?o+1:r.length,c=0>o?s:a?o:0;s>c;c++)if(n=r[c],!(!n.selected&&c!==o||(rt.optDisabled?n.disabled:null!==n.getAttribute("disabled"))||n.parentNode.disabled&&at.nodeName(n.parentNode,"optgroup"))){if(t=at(n).val(),a)return t;i.push(t)}return i},set:function(e,t){for(var n,r,o=e.options,a=at.makeArray(t),i=o.length;i--;)if(r=o[i],at.inArray(at.valHooks.option.get(r),a)>=0)try{r.selected=n=!0}catch(s){r.scrollHeight}else r.selected=!1;return n||(e.selectedIndex=-1),o}}}}),at.each(["radio","checkbox"],function(){at.valHooks[this]={set:function(e,t){return at.isArray(t)?e.checked=at.inArray(at(e).val(),t)>=0:void 0}},rt.checkOn||(at.valHooks[this].get=function(e){return null===e.getAttribute("value")?"on":e.value})});var Tn,xn,Sn=at.expr.attrHandle,Cn=/^(?:checked|selected)$/i,Mn=rt.getSetAttribute,En=rt.input;at.fn.extend({attr:function(e,t){return At(this,at.attr,e,t,arguments.length>1)},removeAttr:function(e){return this.each(function(){at.removeAttr(this,e)})}}),at.extend({attr:function(e,t,n){var r,o,a=e.nodeType;if(e&&3!==a&&8!==a&&2!==a)return typeof e.getAttribute===xt?at.prop(e,t,n):(1===a&&at.isXMLDoc(e)||(t=t.toLowerCase(),r=at.attrHooks[t]||(at.expr.match.bool.test(t)?xn:Tn)),void 0===n?r&&"get"in r&&null!==(o=r.get(e,t))?o:(o=at.find.attr(e,t),null==o?void 0:o):null!==n?r&&"set"in r&&void 0!==(o=r.set(e,n,t))?o:(e.setAttribute(t,n+""),n):(at.removeAttr(e,t),void 0))},removeAttr:function(e,t){var n,r,o=0,a=t&&t.match(wt);if(a&&1===e.nodeType)for(;n=a[o++];)r=at.propFix[n]||n,at.expr.match.bool.test(n)?En&&Mn||!Cn.test(n)?e[r]=!1:e[at.camelCase("default-"+n)]=e[r]=!1:at.attr(e,n,""),e.removeAttribute(Mn?n:r)},attrHooks:{type:{set:function(e,t){if(!rt.radioValue&&"radio"===t&&at.nodeName(e,"input")){var n=e.value;return e.setAttribute("type",t),n&&(e.value=n),t}}}}}),xn={set:function(e,t,n){return t===!1?at.removeAttr(e,n):En&&Mn||!Cn.test(n)?e.setAttribute(!Mn&&at.propFix[n]||n,n):e[at.camelCase("default-"+n)]=e[n]=!0,n}},at.each(at.expr.match.bool.source.match(/\w+/g),function(e,t){var n=Sn[t]||at.find.attr;Sn[t]=En&&Mn||!Cn.test(t)?function(e,t,r){var o,a;return r||(a=Sn[t],Sn[t]=o,o=null!=n(e,t,r)?t.toLowerCase():null,Sn[t]=a),o}:function(e,t,n){return n?void 0:e[at.camelCase("default-"+t)]?t.toLowerCase():null}}),En&&Mn||(at.attrHooks.value={set:function(e,t,n){return at.nodeName(e,"input")?(e.defaultValue=t,void 0):Tn&&Tn.set(e,t,n)}}),Mn||(Tn={set:function(e,t,n){var r=e.getAttributeNode(n);return r||e.setAttributeNode(r=e.ownerDocument.createAttribute(n)),r.value=t+="","value"===n||t===e.getAttribute(n)?t:void 0}},Sn.id=Sn.name=Sn.coords=function(e,t,n){var r;return n?void 0:(r=e.getAttributeNode(t))&&""!==r.value?r.value:null},at.valHooks.button={get:function(e,t){var n=e.getAttributeNode(t);return n&&n.specified?n.value:void 0},set:Tn.set},at.attrHooks.contenteditable={set:function(e,t,n){Tn.set(e,""===t?!1:t,n)}},at.each(["width","height"],function(e,t){at.attrHooks[t]={set:function(e,n){return""===n?(e.setAttribute(t,"auto"),n):void 0}}})),rt.style||(at.attrHooks.style={get:function(e){return e.style.cssText||void 0},set:function(e,t){return e.style.cssText=t+""}});var In=/^(?:input|select|textarea|button|object)$/i,An=/^(?:a|area)$/i;at.fn.extend({prop:function(e,t){return At(this,at.prop,e,t,arguments.length>1)},removeProp:function(e){return e=at.propFix[e]||e,this.each(function(){try{this[e]=void 0,delete this[e]}catch(t){}})}}),at.extend({propFix:{"for":"htmlFor","class":"className"},prop:function(e,t,n){var r,o,a,i=e.nodeType;if(e&&3!==i&&8!==i&&2!==i)return a=1!==i||!at.isXMLDoc(e),a&&(t=at.propFix[t]||t,o=at.propHooks[t]),void 0!==n?o&&"set"in o&&void 0!==(r=o.set(e,n,t))?r:e[t]=n:o&&"get"in o&&null!==(r=o.get(e,t))?r:e[t]},propHooks:{tabIndex:{get:function(e){var t=at.find.attr(e,"tabindex");return t?parseInt(t,10):In.test(e.nodeName)||An.test(e.nodeName)&&e.href?0:-1}}}}),rt.hrefNormalized||at.each(["href","src"],function(e,t){at.propHooks[t]={get:function(e){return e.getAttribute(t,4)}}}),rt.optSelected||(at.propHooks.selected={get:function(e){var t=e.parentNode;return t&&(t.selectedIndex,t.parentNode&&t.parentNode.selectedIndex),null}}),at.each(["tabIndex","readOnly","maxLength","cellSpacing","cellPadding","rowSpan","colSpan","useMap","frameBorder","contentEditable"],function(){at.propFix[this.toLowerCase()]=this}),rt.enctype||(at.propFix.enctype="encoding");var On=/[\t\r\n\f]/g;at.fn.extend({addClass:function(e){var t,n,r,o,a,i,s=0,c=this.length,l="string"==typeof e&&e;if(at.isFunction(e))return this.each(function(t){at(this).addClass(e.call(this,t,this.className))});if(l)for(t=(e||"").match(wt)||[];c>s;s++)if(n=this[s],r=1===n.nodeType&&(n.className?(" "+n.className+" ").replace(On," "):" ")){for(a=0;o=t[a++];)r.indexOf(" "+o+" ")<0&&(r+=o+" ");i=at.trim(r),n.className!==i&&(n.className=i)}return this},removeClass:function(e){var t,n,r,o,a,i,s=0,c=this.length,l=0===arguments.length||"string"==typeof e&&e;if(at.isFunction(e))return this.each(function(t){at(this).removeClass(e.call(this,t,this.className))});if(l)for(t=(e||"").match(wt)||[];c>s;s++)if(n=this[s],r=1===n.nodeType&&(n.className?(" "+n.className+" ").replace(On," "):"")){for(a=0;o=t[a++];)for(;r.indexOf(" "+o+" ")>=0;)r=r.replace(" "+o+" "," ");i=e?at.trim(r):"",n.className!==i&&(n.className=i)}return this},toggleClass:function(e,t){var n=typeof e;return"boolean"==typeof t&&"string"===n?t?this.addClass(e):this.removeClass(e):at.isFunction(e)?this.each(function(n){at(this).toggleClass(e.call(this,n,this.className,t),t)}):this.each(function(){if("string"===n)for(var t,r=0,o=at(this),a=e.match(wt)||[];t=a[r++];)o.hasClass(t)?o.removeClass(t):o.addClass(t);else(n===xt||"boolean"===n)&&(this.className&&at._data(this,"__className__",this.className),this.className=this.className||e===!1?"":at._data(this,"__className__")||"")})},hasClass:function(e){for(var t=" "+e+" ",n=0,r=this.length;r>n;n++)if(1===this[n].nodeType&&(" "+this[n].className+" ").replace(On," ").indexOf(t)>=0)return!0;return!1}}),at.each("blur focus focusin focusout load resize scroll unload click dblclick mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave change select submit keydown keypress keyup error contextmenu".split(" "),function(e,t){at.fn[t]=function(e,n){return arguments.length>0?this.on(t,null,e,n):this.trigger(t)}}),at.fn.extend({hover:function(e,t){return this.mouseenter(e).mouseleave(t||e)},bind:function(e,t,n){return this.on(e,null,t,n)},unbind:function(e,t){return this.off(e,null,t)},delegate:function(e,t,n,r){return this.on(t,e,n,r)},undelegate:function(e,t,n){return 1===arguments.length?this.off(e,"**"):this.off(t,e||"**",n)}});var jn=at.now(),Pn=/\?/,Nn=/(,)|(\[|{)|(}|])|"(?:[^"\\\r\n]|\\["\\\/bfnrt]|\\u[\da-fA-F]{4})*"\s*:?|true|false|null|-?(?!0\d)\d+(?:\.\d+|)(?:[eE][+-]?\d+|)/g;at.parseJSON=function(t){if(e.JSON&&e.JSON.parse)return e.JSON.parse(t+"");var n,r=null,o=at.trim(t+"");return o&&!at.trim(o.replace(Nn,function(e,t,o,a){return n&&t&&(r=0),0===r?e:(n=o||t,r+=!a-!o,"")}))?Function("return "+o)():at.error("Invalid JSON: "+t)},at.parseXML=function(t){var n,r;if(!t||"string"!=typeof t)return null;try{e.DOMParser?(r=new DOMParser,n=r.parseFromString(t,"text/xml")):(n=new ActiveXObject("Microsoft.XMLDOM"),n.async="false",n.loadXML(t))}catch(o){n=void 0}return n&&n.documentElement&&!n.getElementsByTagName("parsererror").length||at.error("Invalid XML: "+t),n};var Dn,Rn,Ln=/#.*$/,qn=/([?&])_=[^&]*/,Fn=/^(.*?):[ \t]*([^\r\n]*)\r?$/gm,Bn=/^(?:about|app|app-storage|.+-extension|file|res|widget):$/,Hn=/^(?:GET|HEAD)$/,$n=/^\/\//,Un=/^([\w.+-]+:)(?:\/\/(?:[^\/?#]*@|)([^\/?#:]*)(?::(\d+)|)|)/,Jn={},Wn={},zn="*/".concat("*");try{Rn=location.href}catch(Vn){Rn=mt.createElement("a"),Rn.href="",Rn=Rn.href}Dn=Un.exec(Rn.toLowerCase())||[],at.extend({active:0,lastModified:{},etag:{},ajaxSettings:{url:Rn,type:"GET",isLocal:Bn.test(Dn[1]),global:!0,processData:!0,async:!0,contentType:"application/x-www-form-urlencoded; charset=UTF-8",accepts:{"*":zn,text:"text/plain",html:"text/html",xml:"application/xml, text/xml",json:"application/json, text/javascript"},contents:{xml:/xml/,html:/html/,json:/json/},responseFields:{xml:"responseXML",text:"responseText",json:"responseJSON"},converters:{"* text":String,"text html":!0,"text json":at.parseJSON,"text xml":at.parseXML},flatOptions:{url:!0,context:!0}},ajaxSetup:function(e,t){return t?H(H(e,at.ajaxSettings),t):H(at.ajaxSettings,e)},ajaxPrefilter:F(Jn),ajaxTransport:F(Wn),ajax:function(e,t){function n(e,t,n,r){var o,u,y,v,w,k=t;2!==b&&(b=2,s&&clearTimeout(s),l=void 0,i=r||"",_.readyState=e>0?4:0,o=e>=200&&300>e||304===e,n&&(v=$(d,_,n)),v=U(d,v,_,o),o?(d.ifModified&&(w=_.getResponseHeader("Last-Modified"),w&&(at.lastModified[a]=w),w=_.getResponseHeader("etag"),w&&(at.etag[a]=w)),204===e||"HEAD"===d.type?k="nocontent":304===e?k="notmodified":(k=v.state,u=v.data,y=v.error,o=!y)):(y=k,(e||!k)&&(k="error",0>e&&(e=0))),_.status=e,_.statusText=(t||k)+"",o?f.resolveWith(h,[u,k,_]):f.rejectWith(h,[_,k,y]),_.statusCode(g),g=void 0,c&&p.trigger(o?"ajaxSuccess":"ajaxError",[_,d,o?u:y]),m.fireWith(h,[_,k]),c&&(p.trigger("ajaxComplete",[_,d]),--at.active||at.event.trigger("ajaxStop")))}"object"==typeof e&&(t=e,e=void 0),t=t||{};var r,o,a,i,s,c,l,u,d=at.ajaxSetup({},t),h=d.context||d,p=d.context&&(h.nodeType||h.jquery)?at(h):at.event,f=at.Deferred(),m=at.Callbacks("once memory"),g=d.statusCode||{},y={},v={},b=0,w="canceled",_={readyState:0,getResponseHeader:function(e){var t;if(2===b){if(!u)for(u={};t=Fn.exec(i);)u[t[1].toLowerCase()]=t[2];t=u[e.toLowerCase()]}return null==t?null:t},getAllResponseHeaders:function(){return 2===b?i:null},setRequestHeader:function(e,t){var n=e.toLowerCase();return b||(e=v[n]=v[n]||e,y[e]=t),this},overrideMimeType:function(e){return b||(d.mimeType=e),this},statusCode:function(e){var t;if(e)if(2>b)for(t in e)g[t]=[g[t],e[t]];else _.always(e[_.status]);return this},abort:function(e){var t=e||w;return l&&l.abort(t),n(0,t),this}};if(f.promise(_).complete=m.add,_.success=_.done,_.error=_.fail,d.url=((e||d.url||Rn)+"").replace(Ln,"").replace($n,Dn[1]+"//"),d.type=t.method||t.type||d.method||d.type,d.dataTypes=at.trim(d.dataType||"*").toLowerCase().match(wt)||[""],null==d.crossDomain&&(r=Un.exec(d.url.toLowerCase()),d.crossDomain=!(!r||r[1]===Dn[1]&&r[2]===Dn[2]&&(r[3]||("http:"===r[1]?"80":"443"))===(Dn[3]||("http:"===Dn[1]?"80":"443")))),d.data&&d.processData&&"string"!=typeof d.data&&(d.data=at.param(d.data,d.traditional)),B(Jn,d,t,_),2===b)return _;c=d.global,c&&0===at.active++&&at.event.trigger("ajaxStart"),d.type=d.type.toUpperCase(),d.hasContent=!Hn.test(d.type),a=d.url,d.hasContent||(d.data&&(a=d.url+=(Pn.test(a)?"&":"?")+d.data,delete d.data),d.cache===!1&&(d.url=qn.test(a)?a.replace(qn,"$1_="+jn++):a+(Pn.test(a)?"&":"?")+"_="+jn++)),d.ifModified&&(at.lastModified[a]&&_.setRequestHeader("If-Modified-Since",at.lastModified[a]),at.etag[a]&&_.setRequestHeader("If-None-Match",at.etag[a])),(d.data&&d.hasContent&&d.contentType!==!1||t.contentType)&&_.setRequestHeader("Content-Type",d.contentType),_.setRequestHeader("Accept",d.dataTypes[0]&&d.accepts[d.dataTypes[0]]?d.accepts[d.dataTypes[0]]+("*"!==d.dataTypes[0]?", "+zn+"; q=0.01":""):d.accepts["*"]);for(o in d.headers)_.setRequestHeader(o,d.headers[o]);if(d.beforeSend&&(d.beforeSend.call(h,_,d)===!1||2===b))return _.abort();w="abort";for(o in{success:1,error:1,complete:1})_[o](d[o]);if(l=B(Wn,d,t,_)){_.readyState=1,c&&p.trigger("ajaxSend",[_,d]),d.async&&d.timeout>0&&(s=setTimeout(function(){_.abort("timeout")},d.timeout));try{b=1,l.send(y,n)}catch(k){if(!(2>b))throw k;n(-1,k)}}else n(-1,"No Transport");return _},getJSON:function(e,t,n){return at.get(e,t,n,"json")},getScript:function(e,t){return at.get(e,void 0,t,"script")}}),at.each(["get","post"],function(e,t){at[t]=function(e,n,r,o){return at.isFunction(n)&&(o=o||r,r=n,n=void 0),at.ajax({url:e,type:t,dataType:o,data:n,success:r})}}),at.each(["ajaxStart","ajaxStop","ajaxComplete","ajaxError","ajaxSuccess","ajaxSend"],function(e,t){at.fn[t]=function(e){return this.on(t,e)}}),at._evalUrl=function(e){return at.ajax({url:e,type:"GET",dataType:"script",async:!1,global:!1,"throws":!0})},at.fn.extend({wrapAll:function(e){if(at.isFunction(e))return this.each(function(t){at(this).wrapAll(e.call(this,t))});if(this[0]){var t=at(e,this[0].ownerDocument).eq(0).clone(!0);this[0].parentNode&&t.insertBefore(this[0]),t.map(function(){for(var e=this;e.firstChild&&1===e.firstChild.nodeType;)e=e.firstChild;return e}).append(this)}return this},wrapInner:function(e){return at.isFunction(e)?this.each(function(t){at(this).wrapInner(e.call(this,t))}):this.each(function(){var t=at(this),n=t.contents();n.length?n.wrapAll(e):t.append(e)})},wrap:function(e){var t=at.isFunction(e);return this.each(function(n){at(this).wrapAll(t?e.call(this,n):e)})},unwrap:function(){return this.parent().each(function(){at.nodeName(this,"body")||at(this).replaceWith(this.childNodes)}).end()}}),at.expr.filters.hidden=function(e){return e.offsetWidth<=0&&e.offsetHeight<=0||!rt.reliableHiddenOffsets()&&"none"===(e.style&&e.style.display||at.css(e,"display"))},at.expr.filters.visible=function(e){return!at.expr.filters.hidden(e)};var Gn=/%20/g,Xn=/\[\]$/,Yn=/\r?\n/g,Qn=/^(?:submit|button|image|reset|file)$/i,Kn=/^(?:input|select|textarea|keygen)/i;at.param=function(e,t){var n,r=[],o=function(e,t){t=at.isFunction(t)?t():null==t?"":t,r[r.length]=encodeURIComponent(e)+"="+encodeURIComponent(t)};if(void 0===t&&(t=at.ajaxSettings&&at.ajaxSettings.traditional),at.isArray(e)||e.jquery&&!at.isPlainObject(e))at.each(e,function(){o(this.name,this.value)});else for(n in e)J(n,e[n],t,o);return r.join("&").replace(Gn,"+")},at.fn.extend({serialize:function(){return at.param(this.serializeArray())},serializeArray:function(){return this.map(function(){var e=at.prop(this,"elements");return e?at.makeArray(e):this}).filter(function(){var e=this.type;return this.name&&!at(this).is(":disabled")&&Kn.test(this.nodeName)&&!Qn.test(e)&&(this.checked||!Ot.test(e))}).map(function(e,t){var n=at(this).val();return null==n?null:at.isArray(n)?at.map(n,function(e){return{name:t.name,value:e.replace(Yn,"\r\n")}}):{name:t.name,value:n.replace(Yn,"\r\n")}}).get()}}),at.ajaxSettings.xhr=void 0!==e.ActiveXObject?function(){return!this.isLocal&&/^(get|post|head|put|delete|options)$/i.test(this.type)&&W()||z()}:W;var Zn=0,er={},tr=at.ajaxSettings.xhr();e.ActiveXObject&&at(e).on("unload",function(){for(var e in er)er[e](void 0,!0)}),rt.cors=!!tr&&"withCredentials"in tr,tr=rt.ajax=!!tr,tr&&at.ajaxTransport(function(e){if(!e.crossDomain||rt.cors){var t;return{send:function(n,r){var o,a=e.xhr(),i=++Zn;if(a.open(e.type,e.url,e.async,e.username,e.password),e.xhrFields)for(o in e.xhrFields)a[o]=e.xhrFields[o];e.mimeType&&a.overrideMimeType&&a.overrideMimeType(e.mimeType),e.crossDomain||n["X-Requested-With"]||(n["X-Requested-With"]="XMLHttpRequest");for(o in n)void 0!==n[o]&&a.setRequestHeader(o,n[o]+"");a.send(e.hasContent&&e.data||null),t=function(n,o){var s,c,l;if(t&&(o||4===a.readyState))if(delete er[i],t=void 0,a.onreadystatechange=at.noop,o)4!==a.readyState&&a.abort();else{l={},s=a.status,"string"==typeof a.responseText&&(l.text=a.responseText);try{c=a.statusText}catch(u){c=""}s||!e.isLocal||e.crossDomain?1223===s&&(s=204):s=l.text?200:404}l&&r(s,c,l,a.getAllResponseHeaders())},e.async?4===a.readyState?setTimeout(t):a.onreadystatechange=er[i]=t:t()},abort:function(){t&&t(void 0,!0)}}}}),at.ajaxSetup({accepts:{script:"text/javascript, application/javascript, application/ecmascript, application/x-ecmascript"},contents:{script:/(?:java|ecma)script/},converters:{"text script":function(e){return at.globalEval(e),e}}}),at.ajaxPrefilter("script",function(e){void 0===e.cache&&(e.cache=!1),e.crossDomain&&(e.type="GET",e.global=!1)}),at.ajaxTransport("script",function(e){if(e.crossDomain){var t,n=mt.head||at("head")[0]||mt.documentElement;return{send:function(r,o){t=mt.createElement("script"),t.async=!0,e.scriptCharset&&(t.charset=e.scriptCharset),t.src=e.url,t.onload=t.onreadystatechange=function(e,n){(n||!t.readyState||/loaded|complete/.test(t.readyState))&&(t.onload=t.onreadystatechange=null,t.parentNode&&t.parentNode.removeChild(t),t=null,n||o(200,"success"))},n.insertBefore(t,n.firstChild)},abort:function(){t&&t.onload(void 0,!0)}}}});var nr=[],rr=/(=)\?(?=&|$)|\?\?/;at.ajaxSetup({jsonp:"callback",jsonpCallback:function(){var e=nr.pop()||at.expando+"_"+jn++;return this[e]=!0,e}}),at.ajaxPrefilter("json jsonp",function(t,n,r){var o,a,i,s=t.jsonp!==!1&&(rr.test(t.url)?"url":"string"==typeof t.data&&!(t.contentType||"").indexOf("application/x-www-form-urlencoded")&&rr.test(t.data)&&"data");return s||"jsonp"===t.dataTypes[0]?(o=t.jsonpCallback=at.isFunction(t.jsonpCallback)?t.jsonpCallback():t.jsonpCallback,s?t[s]=t[s].replace(rr,"$1"+o):t.jsonp!==!1&&(t.url+=(Pn.test(t.url)?"&":"?")+t.jsonp+"="+o),t.converters["script json"]=function(){return i||at.error(o+" was not called"),i[0]},t.dataTypes[0]="json",a=e[o],e[o]=function(){i=arguments},r.always(function(){e[o]=a,t[o]&&(t.jsonpCallback=n.jsonpCallback,nr.push(o)),i&&at.isFunction(a)&&a(i[0]),i=a=void 0}),"script"):void 0}),at.parseHTML=function(e,t,n){if(!e||"string"!=typeof e)return null;"boolean"==typeof t&&(n=t,t=!1),t=t||mt;var r=ht.exec(e),o=!n&&[];return r?[t.createElement(r[1])]:(r=at.buildFragment([e],t,o),o&&o.length&&at(o).remove(),at.merge([],r.childNodes))};var or=at.fn.load;at.fn.load=function(e,t,n){if("string"!=typeof e&&or)return or.apply(this,arguments);var r,o,a,i=this,s=e.indexOf(" ");return s>=0&&(r=e.slice(s,e.length),e=e.slice(0,s)),at.isFunction(t)?(n=t,t=void 0):t&&"object"==typeof t&&(a="POST"),i.length>0&&at.ajax({url:e,type:a,dataType:"html",data:t}).done(function(e){o=arguments,i.html(r?at("<div>").append(at.parseHTML(e)).find(r):e)}).complete(n&&function(e,t){i.each(n,o||[e.responseText,t,e])}),this},at.expr.filters.animated=function(e){return at.grep(at.timers,function(t){return e===t.elem}).length};var ar=e.document.documentElement;at.offset={setOffset:function(e,t,n){var r,o,a,i,s,c,l,u=at.css(e,"position"),d=at(e),h={};"static"===u&&(e.style.position="relative"),s=d.offset(),a=at.css(e,"top"),c=at.css(e,"left"),l=("absolute"===u||"fixed"===u)&&at.inArray("auto",[a,c])>-1,l?(r=d.position(),i=r.top,o=r.left):(i=parseFloat(a)||0,o=parseFloat(c)||0),at.isFunction(t)&&(t=t.call(e,n,s)),null!=t.top&&(h.top=t.top-s.top+i),null!=t.left&&(h.left=t.left-s.left+o),"using"in t?t.using.call(e,h):d.css(h)}},at.fn.extend({offset:function(e){if(arguments.length)return void 0===e?this:this.each(function(t){at.offset.setOffset(this,e,t)});var t,n,r={top:0,left:0},o=this[0],a=o&&o.ownerDocument;if(a)return t=a.documentElement,at.contains(t,o)?(typeof o.getBoundingClientRect!==xt&&(r=o.getBoundingClientRect()),n=V(a),{top:r.top+(n.pageYOffset||t.scrollTop)-(t.clientTop||0),left:r.left+(n.pageXOffset||t.scrollLeft)-(t.clientLeft||0)}):r},position:function(){if(this[0]){var e,t,n={top:0,left:0},r=this[0];return"fixed"===at.css(r,"position")?t=r.getBoundingClientRect():(e=this.offsetParent(),t=this.offset(),at.nodeName(e[0],"html")||(n=e.offset()),n.top+=at.css(e[0],"borderTopWidth",!0),n.left+=at.css(e[0],"borderLeftWidth",!0)),{top:t.top-n.top-at.css(r,"marginTop",!0),left:t.left-n.left-at.css(r,"marginLeft",!0)}}},offsetParent:function(){return this.map(function(){for(var e=this.offsetParent||ar;e&&!at.nodeName(e,"html")&&"static"===at.css(e,"position");)e=e.offsetParent;return e||ar})}}),at.each({scrollLeft:"pageXOffset",scrollTop:"pageYOffset"},function(e,t){var n=/Y/.test(t);at.fn[e]=function(r){return At(this,function(e,r,o){var a=V(e);return void 0===o?a?t in a?a[t]:a.document.documentElement[r]:e[r]:(a?a.scrollTo(n?at(a).scrollLeft():o,n?o:at(a).scrollTop()):e[r]=o,void 0)},e,r,arguments.length,null)}}),at.each(["top","left"],function(e,t){at.cssHooks[t]=C(rt.pixelPosition,function(e,n){return n?(n=nn(e,t),on.test(n)?at(e).position()[t]+"px":n):void 0})}),at.each({Height:"height",Width:"width"},function(e,t){at.each({padding:"inner"+e,content:t,"":"outer"+e},function(n,r){at.fn[r]=function(r,o){var a=arguments.length&&(n||"boolean"!=typeof r),i=n||(r===!0||o===!0?"margin":"border");return At(this,function(t,n,r){var o;return at.isWindow(t)?t.document.documentElement["client"+e]:9===t.nodeType?(o=t.documentElement,Math.max(t.body["scroll"+e],o["scroll"+e],t.body["offset"+e],o["offset"+e],o["client"+e])):void 0===r?at.css(t,n,i):at.style(t,n,r,i)},t,a?r:void 0,a,null)}})}),at.fn.size=function(){return this.length},at.fn.andSelf=at.fn.addBack,"function"==typeof define&&define.amd&&define("jquery",[],function(){return at});var ir=e.jQuery,sr=e.$;return at.noConflict=function(t){return e.$===at&&(e.$=sr),t&&e.jQuery===at&&(e.jQuery=ir),at},typeof t===xt&&(e.jQuery=e.$=at),at})}).call(this),function(){e=t=window.jQuery.noConflict()}.call(this),"undefined"==typeof Package&&(Package={}),Package.jquery={$:e,jQuery:t}}(),function(){var e,t=(Package.meteor.Meteor,Package.jquery.$,Package.jquery.jQuery,Package.underscore._);(function(){e={};var n=function(e,n){if(!document.querySelectorAll)throw new Error("This browser doesn't support querySelectorAll.");var r=n;return f(n,"DomUtils_findAllBySelector_scope",function(n){var o=t.map(e.split(","),function(e){return n+" "+e}).join(",");return r.querySelectorAll(o)})},r=window.Sizzle||window.jQuery&&window.jQuery.find||n,o=document.createElement("div");o.innerHTML="   <link/><table></table><select><!----></select>";var a=document.createElement("div");a.innerHTML="<select><option selected>Foo</option></select>",a.firstChild.setAttribute("name","myname");var i={leadingWhitespaceKilled:3!==o.firstChild.nodeType,tbodyInsertion:o.getElementsByTagName("tbody").length>0,tagsLost:0===o.getElementsByTagName("link").length,commentsLost:!o.getElementsByTagName("select")[0].firstChild,selectValueMustBeFromAttribute:"Foo"!==a.firstChild.value,mustSetNameInCreateElement:a.firstChild.outerHTML&&-1===a.firstChild.outerHTML.indexOf("myname")},s={option:[1,"<select multiple='multiple'>","</select>"],legend:[1,"<fieldset>","</fieldset>"],thead:[1,"<table>","</table>"],tr:[2,"<table><tbody>","</tbody></table>"],td:[3,"<table><tbody><tr>","</tr></tbody></table>"],col:[2,"<table><tbody></tbody><colgroup>","</colgroup></table>"],area:[1,"<map>","</map>"],_default:[0,"",""]};
t.extend(s,{optgroup:s.option,tbody:s.thead,tfoot:s.thead,colgroup:s.thead,caption:s.thead,th:s.td}),i.tagsLost&&(s._default=[1,"div<div>","</div>"]);var c=/^\s+/,l=/<(?!area|br|col|embed|hr|img|input|link|meta|param)(([\w:]+)[^>]*)\/>/gi,u=/<([\w:]+)/,d=/<tbody/i,h=/<|&#?\w+;/;e.htmlToFragment=function(e){var n=document,r=n.createDocumentFragment();if(e.length)if(h.test(e)){e=e.replace(l,"<$1></$2>");var o=u.exec(e),a=o?o[1].toLowerCase():"",p=s[a]||s._default,f=p[1]+e+p[2];i.commentsLost&&(f=f.replace(/<\s*(select|option)\b/gi,'<ins domutilsrealtagname="$1"'),f=f.replace(/<\/\s*(select|option)\b/gi,"</ins"));var m=n.createElement("div");m.innerHTML=f;for(var g=p[0];g--;)m=m.lastChild;if(i.tbodyInsertion&&!d.test(e)){var y=m.getElementsByTagName("tbody");t.each(y,function(e){e.firstChild||e.parentNode.removeChild(e)})}if(i.leadingWhitespaceKilled){var v=c.exec(e);v&&m.insertBefore(n.createTextNode(v[0]),m.firstChild)}if(i.commentsLost){var b=[];t.each(m.getElementsByTagName("ins"),function(e){e.getAttribute("domutilsrealtagname")&&b.push(e)}),t.each(b,function(e){var n=e.getAttribute("domutilsrealtagname");i.mustSetNameInCreateElement&&e.getAttribute("name")&&(n="<"+n+" name='"+t.escape(e.getAttribute("name"))+"'/>");var r=document.createElement(n);e.removeAttribute("domutilsrealtagname");for(var o=e.attributes,a=0;a<o.length;++a){var s=o.item(a);if(s.specified){var c=s.name.toLowerCase(),l=String(s.value);"selected"===c&&""===l&&(l="selected"),r.setAttribute(c,l)}}for(;e.firstChild;)r.appendChild(e.firstChild);e.parentNode.replaceChild(r,e)})}for(;m.firstChild;)r.appendChild(m.firstChild)}else r.appendChild(n.createTextNode(e));else;return r},e.fragmentToHtml=function(t){return t=t.cloneNode(!0),e.fragmentToContainer(t).innerHTML},e.fragmentToContainer=function(e){for(var t=document,n=e.firstChild;n&&1!==n.nodeType;)n=n.nextSibling;var r=t.createElement("div");if(n){var o=n.nodeName,a=s[o]||s._default;r.innerHTML=a[1]+a[2];for(var i=a[0];i--;)r=r.lastChild;r.appendChild(e)}else r.appendChild(e);return r},e.elementContains=function(e,t){return 1!==e.nodeType?!1:e===t?!1:e.compareDocumentPosition?16&e.compareDocumentPosition(t):(t=t.parentNode,t&&1===t.nodeType?e===t?!0:e.contains(t):!1)},e.findAll=function(t,n){if(11===t.nodeType){for(var o=t,a=e.fragmentToContainer(o),i=r(n,a);a.firstChild;)o.appendChild(a.firstChild);return i}return r(n,t)},e.find=function(t,n){var r=e.findAll(t,n);return r.length?r[0]:null};var p=function(t,n,r){return e.elementContains(t,n)?!1:e.compareElementIndex(n,t)<=0&&e.compareElementIndex(t,r)<=0};e.findAllClipped=function(n,r,o,a){for(;o!==a&&1!==o.nodeType;)o=o.nextSibling;for(;o!==a&&1!==a.nodeType;)a=a.previousSibling;if(1!==o.nodeType)return[];var i=e.findAll(n,r);return t.reject(i,function(e){return!p(e,o,a)})},e.findClipped=function(t,n,r,o){var a=e.findAllClipped(t,n,r,o);return a.length?a[0]:null};var f=function(e,t,n){var r=!1;e.getAttribute("id")||(e.setAttribute("id",t),r=!0);try{var o=e.getAttribute("id").replace(/'/g,"\\$&");return n("[id='"+o+"']")}finally{r&&e.removeAttribute("id")}},m=function(t,n,r,o,a){for(var i=r.split(","),s=0,c=i.length;c>s;s++){var l=f(t,"DomUtils_matchesSelector_target",function(i){var s,c=r.match(/\S.*?(?=\s*$)/)[0],l=c+i;return s=o?e.findClipped(n,l,o,a):e.find(n,l),s===t});if(l)return!0}return!1};e.matchesSelector=function(e,t,n){return m(e,t,n)},e.matchesSelectorClipped=function(e,t,n,r,o){return m(e,t,n,r,o)},e.compareElementIndex=function(e,t){if(e===t)return 0;if(e.compareDocumentPosition){var n=e.compareDocumentPosition(t);return 24&n?0:4&n?-1:1}return e.contains(t)||t.contains(e)?0:e.sourceIndex<t.sourceIndex?-1:1},e.wrapFragmentForContainer=function(e,n){if(n&&"TABLE"===n.nodeName&&t.any(e.childNodes,function(e){return"TR"===e.nodeName})){var r=document.createElement("TBODY");r.appendChild(e),e.appendChild(r)}},e.isInDocument=function(t){return t===document?!0:(1!==t.nodeType&&(t=t.parentNode),t&&1===t.nodeType?t===document.body?!0:e.elementContains(document.body,t):!1)},e.rangeToHtml=function(t,n){for(var r=document.createDocumentFragment(),o=t,a=n.nextSibling;o&&o!==a;o=o.nextSibling)r.appendChild(o.cloneNode(!0));return e.fragmentToHtml(r)},e.outerHtml=function(t){return e.rangeToHtml(t,t)},e.setElementValue=function(t,n){if(t.value=n,t.value!==n&&"SELECT"===t.nodeName)for(var r=e.findAll(t,"option"),o=0;o<r.length;++o)if(e.getElementValue(r[o])===n)return r[o].selected=!0,void 0},e.getElementValue=function(t){if(!i.selectValueMustBeFromAttribute)return t.value;if("OPTION"===t.nodeName){var n=t.attributes.value;return!n||n.specified?t.value:t.text}return"SELECT"===t.nodeName?t.selectedIndex<0?null:e.getElementValue(t.options[t.selectedIndex]):t.value}}).call(this),"undefined"==typeof Package&&(Package={}),Package.domutils={DomUtils:e}}(),function(){{var e;Package.meteor.Meteor}(function(){var t=function(){var e=document.createTextNode("");try{e.test=123}catch(t){}return 123!==e.test?!1:document.documentMode?!1:!0}(),n=function(e,n){if(t)return[e,n];if(3===e.nodeType){var r=document.createComment("IE");e.parentNode.insertBefore(r,e),e=r}if(3===n.nodeType){var r=document.createComment("IE");n.parentNode.insertBefore(r,n.nextSibling),n=r}return[e,n]};e=function(e,t,o,a){if(11===t.nodeType)o=t.lastChild,t=t.firstChild;else if(!t.parentNode)throw new Error("LiveRange start and end must have a parent");o=o||t,this.tag=e;var i=n(t,o);t=this._ensureTag(i[0]),o=this._ensureTag(i[1]);var s=r(t[e][0],!0,o,t,a),c=r(o[e][1],!1,t,o,a);this._insertEntries(t,0,s,[this]),this._insertEntries(o,1,c,[this])};var r=function(e,t,n,r,o){for(var a,i=t?n.parentNode.lastChild:r,s=t?!o:o,c=0,l=i;c<=e.length;c++){for(var u=e[c],d=u&&(t?u._end:u._start);l!==d&&l!==n;)l=l.previousSibling;if(d===n){if(a=c,s)break}else if(l===n){a=c;break}}return a};e.prototype._ensureTag=function(e){return this.tag in e||(e[this.tag]=[[],[]]),e};var o=function(){var e=document.createElement("DIV"),t=!1;try{e.test=12,delete e.test,t=!0}catch(n){}return t}();e._cleanNode=function(e,t,n){var r=t[e];!r||r[0].length+r[1].length&&!n||(o?delete t[e]:t.removeAttribute(e))},e.prototype.destroy=function(t){var n=this;if(t){if(this.visit(function(e,t){e&&(t._start=null,t._end=null)},function(t,r){if(!t)for(var o=r.firstChild;o;o=o.nextSibling)e._cleanNode(n.tag,o,!0)}),this._removeEntries(this._start,0,this._startIndex),this._removeEntries(this._end,1,0,this._endIndex+1),this._start!==this._end){for(var r=this._start.nextSibling;r!==this._end;r=r.nextSibling)e._cleanNode(n.tag,r,!0);this._start[n.tag]&&this._removeEntries(this._start,1),this._end[n.tag]&&this._removeEntries(this._end,0)}this._start=this._end=null}else this._removeEntries(this._start,0,this._startIndex,this._startIndex+1),this._removeEntries(this._end,1,this._endIndex,this._endIndex+1),this._start=this._end=null},e.prototype.firstNode=function(){return this._start},e.prototype.lastNode=function(){return this._end},e.prototype.containerNode=function(){return this._start.parentNode},e.prototype.visit=function(e,t){e=e||function(){},t=t||function(){};var n=this.tag,r=function(o,a,i){for(var s=i||0,c=a.nextSibling,l=o;l&&l!==c;l=l.nextSibling){var u=l[n]&&l[n][0];if(u&&s<u.length){var d=u[s],h=d._start,p=d._end;e(!0,d)!==!1&&r(h,p,s+1),e(!1,d),l=p}else t(!0,l)!==!1&&l.firstChild&&r(l.firstChild,l.lastChild),t(!1,l);s=0}};r(this._start,this._end,this._startIndex+1)},e.prototype._removeEntries=function(t,n,r,o){var a=t[this.tag][n];r=r||0,o=o||0===o?o:a.length;for(var i=a.splice(r,o-r),s=r;s<a.length;s++)n?a[s]._endIndex=s:a[s]._startIndex=s;return a.length||e._cleanNode(this.tag,t),i},e.prototype._insertEntries=function(e,t,n,r){var o=e[this.tag][t];Array.prototype.splice.apply(o,[n,0].concat(r));for(var a=n;a<o.length;a++)t?(o[a]._end=e,o[a]._endIndex=a):(o[a]._start=e,o[a]._startIndex=a)},e.prototype.replaceContents=function(e){if(!e.firstChild)throw new Error("replaceContents requires non-empty fragment");return this.operate(function(t,n){t.parentNode.insertBefore(e,t);for(var r=t.ownerDocument.createDocumentFragment(),o=t;;){var a=o.nextSibling;if(r.appendChild(o),o===n)break;if(o=a,!o)throw new Error("LiveRanges must begin and end on siblings in order")}return r})},e.prototype.operate=function(e){var t=this._start,r=this._end,o=this._removeEntries(t,0,0,this._startIndex+1),a=this._removeEntries(r,1,this._endIndex),i=t.parentNode,s=t.previousSibling,c=r.nextSibling,l=null;l=e(t,r);var u=s?s.nextSibling:i.firstChild,d=c?c.previousSibling:i.lastChild;if(!u||u===c)throw new Error("Ranges must contain at least one element");var h=n(u,d);return u=this._ensureTag(h[0]),d=this._ensureTag(h[1]),this._insertEntries(u,0,0,o),this._insertEntries(d,1,d[this.tag][1].length,a),l},e.transplantTag=function(e,t,n){if(n[e]){t[e]=n[e],n[e]=null;for(var r=t[e][0],o=t[e][1],a=0;a<r.length;a++)r[a]._start=t;for(var a=0;a<o.length;a++)o[a]._end=t}},e.transplantRange=function(e,t,n){n._ensureTag(e),t!==e&&n._ensureTag(t),n._insertEntries(e,0,0,n._start[n.tag][0].slice(0,n._startIndex+1)),n._insertEntries(t,1,0,n._end[n.tag][1].slice(n._endIndex))},e.prototype.insertBefore=function(e){var t=e.firstChild;t&&(this._start.parentNode.insertBefore(e,this._start),this._ensureTag(t),this._insertEntries(t,0,0,this._removeEntries(this._start,0,0,this._startIndex)))},e.prototype.insertAfter=function(e){var t=e.lastChild;t&&(this._end.parentNode.insertBefore(e,this._end.nextSibling),this._ensureTag(t),this._insertEntries(t,1,t[this.tag][1].length,this._removeEntries(this._end,1,this._endIndex+1)))},e.prototype.extract=function(){if(this._startIndex>0&&this._start[this.tag][0][this._startIndex-1]._end===this._end)return null;var e=this._start.previousSibling,t=this._end.nextSibling,n=this._start.parentNode;this._startIndex>0&&(this._ensureTag(t),this._insertEntries(t,0,0,this._removeEntries(this._start,0,0,this._startIndex))),this._endIndex<this._end[this.tag][1].length-1&&(this._ensureTag(e),this._insertEntries(e,1,e[this.tag][1].length,this._removeEntries(this._end,1,this._endIndex+1)));for(var r,o=document.createDocumentFragment();r=e?e.nextSibling:n.firstChild,r&&r!==t;)o.appendChild(r);return o},e.prototype.findParent=function(t){var n=a(this.tag,this._end,this._endIndex);return n?n:t?null:e.findRange(this.tag,this.containerNode())},e.findRange=function(t,n){var r=a(t,n);return r?r:n.parentNode?e.findRange(t,n.parentNode):null};var a=function(e,t,n){if("undefined"==typeof n&&(n=-1),t[e]&&n+1<t[e][1].length)return t[e][1][n+1];for(var r=t.nextSibling;r;){var n=0,o=r[e]&&r[e][0];if(o&&o.length){var a=o[0];r=a._end,n=a._endIndex+1}if(r[e]&&n<r[e][1].length)return r[e][1][n];r=r.nextSibling}return null}}).call(this),"undefined"==typeof Package&&(Package={}),Package.liverange={LiveRange:e}}(),function(){var e,t=(Package.meteor.Meteor,Package.underscore._),n=Package.domutils.DomUtils;(function(){var n,r=[],o=function(){return!1},a=function(){return!0},i=function(e){var t=e.stopPropagation,n=e.preventDefault;e.isPropagationStopped=o,e.isImmediatePropagationStopped=o,e.isDefaultPrevented=o,e.stopPropagation=function(){e.isPropagationStopped=a,t?t.call(e):e.cancelBubble=!0},e.preventDefault=function(){e.isDefaultPrevented=a,n?n.call(e):e.returnValue=!1},e.stopImmediatePropagation=function(){e.stopPropagation(),e.isImmediatePropagationStopped=a};var r=e.type;if(void 0===e.metaKey&&(e.metaKey=e.ctrlKey),/^key/.test(r))null==e.which&&(e.which=null!=e.charCode?e.charCode:e.keyCode);else if(/^(?:mouse|contextmenu)|click/.test(r)&&(!e.relatedTarget&&e.fromElement&&(e.relatedTarget=e.fromElement===e.target?e.toElement:e.fromElement),!e.which&&void 0!==e.button)){var i=e.button;e.which=1&i?1:2&i?3:4&i?2:0}return e},s=function(e){e=i(e),t.each(r,function(t){t.types[e.type]&&(!t._checkIECompliance||e.currentTarget["_uevents_test_eventtype_"+e.type])&&t.handler.call(null,e)})},c=function(){return n||(n=document.addEventListener?new e._impl.w3c(s):new e._impl.ie(s)),n},l={};e=function(e,t){this.handler=e,this.types={},this.impl=c(),this._checkIECompliance=t,r.push(this)},t.extend(e.prototype,{addType:function(e){this.types[e]||(this.types[e]=!0,l[e]=(l[e]||0)+1,1===l[e]&&this.impl.addType(e))},removeType:function(e){this.types[e]&&(delete this.types[e],l[e]--,l[e]||this.impl.removeType(e))},installHandler:function(e,n){1===e.nodeType&&(this.impl.installHandler(e,n),this._checkIECompliance&&(e["_uevents_test_eventtype_"+n]=e,e.firstChild&&t.each(e.getElementsByTagName("*"),function(e){e["_uevents_test_eventtype_"+n]=e})))},destroy:function(){var e=this;r=t.without(r,e),t.each(t.keys(e.types),function(t){e.removeType(t)})}})}).call(this),function(){var r=0,o=1,a=2;e._impl=e._impl||{},e._impl.w3c=function(e){this.deliver=e,this.typeCounts={},this.boundHandler=t.bind(this.handler,this),this.boundCapturer=t.bind(this.capturer,this),this.focusBlurMode="onfocusin"in document.createElement("DIV")?r:a,this.simulateMouseEnterLeave=!window.opera},t.extend(e._impl.w3c.prototype,{addType:function(e){this._listen(this._expandEventType(e))},removeType:function(e){this._unlisten(this._expandEventType(e))},installHandler:function(){},_expandEventType:function(e){var t=[e];return this.focusBlurMode===o?"focus"===e?t.push("focusin"):"blur"===e&&t.push("focusout"):this.focusBlurMode===a&&("focusin"===e?t.push("focus"):"focusout"===e&&t.push("blur")),this.simulateMouseEnterLeave&&("mouseenter"===e?t.push("mouseover"):"mouseleave"===e&&t.push("mouseout")),"tap"===e&&(t.push("touchmove"),t.push("touchend")),t},_listen:function(e){var n=this;t.each(e,function(e){1===(n.typeCounts[e]=(n.typeCounts[e]||0)+1)&&document.addEventListener(e,n.boundCapturer,!0)})},_unlisten:function(e){var n=this;t.each(e,function(e){--n.typeCounts[e]||document.removeEventListener(e,n.boundCapturer,!0)})},capturer:function(e){3===e.target.nodeType&&(e.target=e.target.parentNode);var n=e.type,r=e.bubbles,o=e.target;o.addEventListener(n,this.boundHandler,!1);var a;if(r){a=[];for(var i=o.parentNode;i;i=i.parentNode)i.addEventListener(n,this.boundHandler,!1),a.push(i)}setTimeout(function(){o.removeEventListener(n,this.boundHandler,!1),r&&t.each(a,function(e){e.removeEventListener(n,this.boundHandler,!1)})},0)},handler:function(e){var t=function(e,t,n,r,o){var a=document.createEvent("UIEvents");a.initUIEvent(e,n,r,window,o),a.synthetic=!0,t.dispatchEvent(a)};if(e.currentTarget===e.target&&(this.focusBlurMode===o?"focusin"===e.type?t("focus",e.target,!1):"focusout"===e.type&&t("blur",e.target,!1):this.focusBlurMode===a&&("focus"===e.type?t("focusin",e.target,!0):"blur"===e.type&&t("focusout",e.target,!0))),this.focusBlurMode===o){if(("focus"===e.type||"blur"===e.type)&&!e.synthetic)return}else if(this.focusBlurMode===a&&("focusin"===e.type||"focusout"===e.type)&&!e.synthetic)return;(!this.simulateMouseEnterLeave||"mouseenter"!==e.type&&"mouseleave"!==e.type||e.synthetic)&&(this.deliver(e),!this.simulateMouseEnterLeave||e.relatedTarget&&(e.currentTarget===e.relatedTarget||n.elementContains(e.currentTarget,e.relatedTarget))||("mouseover"===e.type?t("mouseenter",e.currentTarget,!1):"mouseout"===e.type&&t("mouseleave",e.currentTarget,!1)),"touchmove"===e.type&&(e.currentTarget._notTapping=!0),"touchend"===e.type&&(e.currentTarget._notTapping||t("tap",e.currentTarget,!0),delete e.currentTarget._notTapping))}})}.call(this),function(){e._impl=e._impl||{},e._impl.ie=function(e){var t=this;this.deliver=e,this.curriedHandler=function(){t.handler.call(this,t)},document.attachEvent("ondatasetcomplete",function(){var e=window.event,t=e&&e.srcElement;e.synthetic&&t&&"FORM"===t.nodeName&&e.returnValue!==!1&&t.submit()})},t.extend(e._impl.ie.prototype,{addType:function(){},removeType:function(){},installHandler:function(e,t){var n="on"+t;if(1===e.nodeType){this._install(e,n);for(var r=e.getElementsByTagName("*"),o=0,a=r.length;a>o;o++)this._install(r[o],n)}},_install:function(e,t){var n=[t];"onfocus"===t?n.push("onfocusin"):"onblur"===t?n.push("onfocusout"):"onchange"===t?("INPUT"!==e.nodeName||"checkbox"!==e.type&&"radio"!==e.type||(n=["onpropertychange"]),n.push("oncellchange")):"onsubmit"===t&&n.push("ondatasetcomplete");for(var r=0;r<n.length;r++)e[n[r]]=this.curriedHandler},handler:function(e){var t=function(e,t){var n=document.createEventObject();return n.synthetic=!0,t.fireEvent(e,n),n.returnValue},n=window.event,r=n.type,o=n.srcElement||document;if(n.target=o,1===this.nodeType){n.currentTarget=this;var a=this;if(a!==o||n.synthetic||("focusin"===r?t("onfocus",a):"focusout"===r?t("onblur",a):"change"===r?t("oncellchange",a):"propertychange"===r?"checked"===n.propertyName&&t("oncellchange",a):"submit"===r&&t("ondatasetcomplete",a)),("focus"===r||"blur"===n.type||"change"===n.type||"submit"===n.type)&&!n.synthetic)return"submit"===n.type&&(n.returnValue=!1),void 0;"cellchange"===r&&n.synthetic&&(r=n.type="change"),"datasetcomplete"===r&&n.synthetic&&(r=n.type="submit"),e.deliver(n)}}})}.call(this),"undefined"==typeof Package&&(Package={}),Package["universal-events"]={UniversalEventListener:e}}(),function(){var e,t,n,r,o,a,i,s=Package.meteor.Meteor,c=Package.underscore._,l=Package.random.Random,u=Package.domutils.DomUtils,d=Package.liverange.LiveRange,h=Package["universal-events"].UniversalEventListener,p=Package["ordered-dict"].OrderedDict,f=Package.deps.Deps,m=Package.ejson.EJSON;(function(){e={},t={};var i=function(){var e=null;return{get:function(){return e},withValue:function(t,n){var r=e;e=t;try{return n()}finally{e=r}}}}();n="_spark_"+l.id(),t.TAG=n,e._TAG=n;var s="data",g="isolate",y="events",v="watch",b="label",w="landmark",_="list",k="item",T=!1;t.setCheckIECompliance=function(e){T=e};var x={};e._addGlobalPreserve=function(e,t){x[e]=t};var S=function(e,t,r,o){var a=new d(n,t,r,o);return a.type=e,a},C=function(e,t){for(var r=d.findRange(n,t);r&&r.type!==e;)r=r.findParent();return r},M=function(e,t){do t=t.findParent();while(t&&t.type!==e);return t},E=function(e,t){for(var r=new d(n,e,t,!0),o=r;o;o=o.findParent())o.type===v&&o.notify();r.destroy()},I=!1,A=function(e){var t=I;I=!0;try{return e()}finally{I=t}};r=function(){this.annotations={},this._branchNotes={},this.currentBranch=this.newLabelStack(),this.landmarkRanges=[],this.pc=new P},c.extend(r.prototype,{annotate:function(e,t,n){if("function"!=typeof n){var r=n;n=function(e){e&&c.extend(e,r)}}var o=(t||"")+":"+l.id();return this.annotations[o]=function(e,r){if(!e||!t)return n(null),void 0;var o=S(t,e,r);n(o)},"<$"+o+">"+e+"</$"+o+">"},newLabelStack:function(){var e=[this._branchNotes];return{pushLabel:function(t){var n=e[e.length-1],r="_"+t;e.push(n[r]=n[r]||{})},popLabel:function(){e.pop()},getNotes:function(){var t=e[e.length-1];return t},mark:function(t){for(var n=e.length-1;n>=0&&!e[n][t];n--)e[n][t]=!0}}},materialize:function(e){var t=this,n=i.withValue(t,e);n=t.annotate(n);var r,o={},a=function(e){for(var t=e.firstChild;t;){var n=t.nextSibling;if(8===t.nodeType){var r=o[t.nodeValue];if(r===!1)throw new Error("Spark HTML fragments may only be used once. Second use in "+u.fragmentToHtml(e));r&&(o[t.nodeValue]=!1,u.wrapFragmentForContainer(r,t.parentNode),t.parentNode.replaceChild(r,t))}else 1===t.nodeType&&a(t);t=n}},s=[[]],l=[],d=/<(\/?)\$([^<>]+)>|<|[^<]+/g;d.lastIndex=0;for(var h;h=d.exec(n);){var p=!h[1],f=h[2],m=t.annotations[f];if(m===!1)throw new Error("Spark HTML fragments may be used only once. Second use of: "+u.fragmentToHtml(o[f]));if(m)if(p)l.push(f),s.push([]);else{var g=l.pop();if(g!==f)throw new Error("Range mismatch: "+g+" / "+f);var y=u.htmlToFragment(s.pop().join(""));if(a(y),y.firstChild||y.appendChild(document.createComment("empty")),m(y.firstChild,y.lastChild),t.annotations[f]=!1,!l.length){r=y;break}o[f]=y,s[s.length-1].push("<!--"+f+"-->")}else s[s.length-1].push(h[0])}return j(r,t.landmarkRanges),t.landmarkRanges=[],c.each(t.annotations,function(e){e&&e()}),t.annotations={},c.each(u.findAll(r,"[value], textarea, select"),function(e){e._sparkOriginalRenderedValue=[u.getElementValue(e)]}),c.each(u.findAll(r,"input[type=checkbox], input[type=radio]"),function(e){e._sparkOriginalRenderedChecked=[!!e.checked]}),r}});var O=function(e){return function(){var t=i.get(),n=c.toArray(arguments);return t?(n.push(t),e.apply(null,n)):n.pop()}},j=function(t,r){var o=new d(n,t),a=!1;o.finalize=function(){a=!0},f.afterFlush(function(){if(!a){if(!u.isInDocument(o.firstNode())){for(var t=o.firstNode();t.parentNode;)t=t.parentNode;if(!t._protect)return e.finalize(t),void 0}c.each(r,function(e){e.isPreservedConstant||e.rendered.call(e.landmark)});for(var n=o;n=M(w,n);)n.rendered.call(n.landmark);E(o.firstNode(),o.lastNode()),o.destroy()}})};e.render=function(e){var t=new r,n=t.materialize(e);return n};var P=function(){this.roots=[],this.regionPreservations=[]};c.extend(P.prototype,{addRoot:function(e,t,n,r){var o=this;o.roots.push({context:r,preserve:e,fromRange:t,toRange:n})},addConstantRegion:function(e,t){var n=this;n.regionPreservations.push({type:"region",fromStart:e.firstNode(),fromEnd:e.lastNode(),newRange:t})},computePreservations:function(e,t){var r=this,o=c.clone(r.regionPreservations),a=function(e,t,n,r,o){e=e||t.containerNode();var a=u.findAllClipped(e,r,t.firstNode(),t.lastNode());c.each(a,function(e){var t=n(e);t&&o(e,t)})};c.each(r.roots,function(e){e.fromNodesByLabel={},c.each(e.preserve,function(t,n){e.fromNodesByLabel[n]={},a(e.context,e.fromRange,t,n,function(t,r){e.fromNodesByLabel[n][r]=t})})});var i=new d(n,t.firstNode(),t.lastNode()),s=document.createDocumentFragment();s.appendChild(document.createComment(""));var l=i.replaceContents(s),h=new d(n,l);e.insertBefore(l),c.each(r.roots,function(e){c.each(e.preserve,function(t,n){a(e.context,e.toRange,t,n,function(t,r){var a=e.fromNodesByLabel[n][r];a&&(o.push({type:"node",from:a,to:t}),e.fromNodesByLabel[n][r]=null)})})});var p=h.extract();return h.destroy(),i.replaceContents(p),i.destroy(),o}});e.renderToRange=function(t,o){var i=t.firstNode();if(i&&i.parentNode){var s=new r,l=function(e,t){var n=s.newLabelStack();e.visit(function(e,r){r.type===b?e?n.pushLabel(r.label):n.popLabel():r.type===w&&e&&t(r,n.getNotes())})};l(t,function(e,t){t.originalRange=e});var h=u.findAllClipped(t.containerNode(),"input[type=radio]",t.firstNode(),t.lastNode());c.each(h,function(e){e._currentChecked=[!!e.checked]});var p=s.materialize(o);u.wrapFragmentForContainer(p,t.containerNode());var f=new d(n,p),m=s.pc;l(f,function(e,t){t.originalRange&&(e.constant&&m.addConstantRegion(t.originalRange,e),m.addRoot(e.preserve,t.originalRange,e))});for(var g=t;(g=g.findParent())&&g.firstNode().parentNode;)g.type===w,g&&m.addRoot(g.preserve,t,f,g.containerNode());m.addRoot(x,t,f);var y=m.computePreservations(t,f);f.destroy();var v={};A(function(){t.operate(function(t,n){e.finalize(t,n),a(t.parentNode,p,t.previousSibling,n.nextSibling,y,v)})}),c.each(v.regionPreservations,function(e){e.isPreservedConstant=!0})}},e.finalize=function(e,t){if(!e.parentNode&&11!==e.nodeType){var r=document.createDocumentFragment();r.appendChild(e),e=r,t=null}var o=new d(n,e,t);o.visit(function(e,t){e&&t.finalize&&t.finalize()}),o.destroy(!0)},e.setDataContext=O(function(e,t,n){return n.annotate(t,s,{data:e})}),e.getDataContext=function(e){var t=C(s,e);return t&&t.data};var N=null,D=function(){return N||(N=new h(function(e){if(!I){for(var t=[],n=C(y,e.currentTarget);n;)t.push(n),n=M(y,n);c.each(t,function(t){t.handler(e)})}},T)),N};e.attachEvents=O(function(t,n,r){var o=D(),a={};c.each(t,function(e,t){"function"==typeof e&&(e=[e]);var n=t.split(/,\s+/);c.each(n,function(t){var n=t.split(/\s+/);if(0!==n.length){var r=n.shift(),o=n.join(" ");a[r]=a[r]||[],c.each(e,function(e){a[r].push({selector:o,callback:e})})}})});var i=c.keys(a),s=function(e){c.each(i,function(t){for(var n=e.firstNode(),r=e.lastNode().nextSibling;n&&n!==r;n=n.nextSibling)o.installHandler(n,t)})};n=r.annotate(n,v,{notify:function(){s(this)}});var l=!1;return n=r.annotate(n,y,function(t){t&&(c.each(i,function(e){o.addType(e)}),s(t),t.finalize=function(){l=!0},t.handler=function(n){for(var r=a[n.type]||[],o=0;o<r.length;o++){if(l||n.isImmediatePropagationStopped())return;var i=r[o],s=i.callback,c=i.selector;if(c){if(!u.matchesSelectorClipped(n.currentTarget,t.containerNode(),c,t.firstNode(),t.lastNode()))continue}else if(n.currentTarget!==n.target)continue;var d=e.getDataContext(n.currentTarget)||{},h=M(w,t),p=h&&h.landmark,f=s.call(d,n,p);f===!1&&(n.stopImmediatePropagation(),n.preventDefault())}})})}),e.isolate=function(t){var n=i.get();if(!n)return t();var r,o,a=!0;return f.autorun(function(i){a?(o=n.annotate(t(),g,function(e){e?(r=e,r.finalize=function(){i.stop()}):i.stop()}),a=!1):e.renderToRange(r,t)}),o};var R=function(e,t){c.each(t,function(t,n){void 0===t?delete e[n]:e[n]=t})};o=Package.minimongo?Package.minimongo.LocalCollection._idStringify:function(e){return e},e.list=function(t,n,r){r=r||function(){return""};var a={},s={};c.each(["addedBefore","removed","movedBefore","changed"],function(e){s[e]=function(){return a[e].apply(null,arguments)}});var l=new p(o);c.extend(a,{addedBefore:function(e,t,n){var r=m.clone(t);r._id=e;var o={doc:r,liveRange:null};l.putBefore(e,o,n)}});var d,h=t.observeChanges(s),g=i.get(),y=g?c.bind(g.annotate,g):function(e){return e},v=function(e){return t.getTransform&&t.getTransform()?t.getTransform()(m.clone(e)):e},b="";l.empty()?b=r():l.forEach(function(e){b+=y(n(v(e.doc)),k,function(t){e.liveRange=t})});var T=!1,x=function(){h.stop(),T=!0};b=y(b,_,function(e){e?(d=e,d.finalize=x):x()}),g||x();var C=function(){for(var e=d;e=M(w,e);)e.rendered.call(e.landmark)},E=function(e){f.afterFlush(function(){T||A(e)})};return c.extend(a,{addedBefore:function(t,r,o){E(function(){var a=m.clone(r);a._id=t;var i=e.render(c.bind(n,null,v(a)));u.wrapFragmentForContainer(i,d.containerNode());var s=S(k,i);l.empty()?e.finalize(d.replaceContents(i)):null===o?l.lastValue().liveRange.insertAfter(i):l.get(o).liveRange.insertBefore(i),l.putBefore(t,{doc:a,liveRange:s},o)})},removed:function(t){E(function(){if(l.first()===l.last()){var n=e.render(r);u.wrapFragmentForContainer(n,d.containerNode()),e.finalize(d.replaceContents(n))}else e.finalize(l.get(t).liveRange.extract());l.remove(t),C()})},movedBefore:function(e,t){E(function(){var n=l.get(e).liveRange.extract();null===t?l.lastValue().liveRange.insertAfter(n):l.get(t).liveRange.insertBefore(n),l.moveBefore(e,t),C()})},changed:function(t,r){E(function(){var o=l.get(t);if(!o)throw new Error("Unknown id for changed: "+t);R(o.doc,r),e.renderToRange(o.liveRange,c.bind(n,null,v(o.doc)))})}}),b};var L=1;e.Landmark=function(){this.id=L++,this._range=null},c.extend(e.Landmark.prototype,{firstNode:function(){return this._range.firstNode()},lastNode:function(){return this._range.lastNode()},find:function(e){var t=this._range;return u.findClipped(t.containerNode(),e,t.firstNode(),t.lastNode())},findAll:function(e){var t=this._range;return u.findAllClipped(t.containerNode(),e,t.firstNode(),t.lastNode())},hasDom:function(){return!!this._range}}),e.UNIQUE_LABEL=["UNIQUE_LABEL"],e.labelBranch=function(t,n){var r=i.get();if(!r||null===t)return n();t===e.UNIQUE_LABEL&&(t=l.id()),r.currentBranch.pushLabel(t);var o=n(),a=r.currentBranch.getNotes().occupied;return r.currentBranch.popLabel(),a?r.annotate(o,b,{label:t}):o},e.createLandmark=function(t,n){var r=i.get();if(!r){var o=new e.Landmark;t.created&&t.created.call(o);var a=n(o);return t.destroyed&&t.destroyed.call(o),a}var s={};c.isArray(t.preserve)?c.each(t.preserve,function(e){s[e]=!0}):s=t.preserve||{};for(var l in s)"function"!=typeof s[l]&&(s[l]=function(){return!0});r.currentBranch.mark("occupied");var o,u=r.currentBranch.getNotes();if(u.originalRange){if(u.originalRange.superceded)throw new Error("Can't create second landmark in same branch");u.originalRange.superceded=!0,o=u.originalRange.landmark}else o=new e.Landmark,t.created&&f.nonreactive(function(){t.created.call(o)});u.landmark=o;var a=n(o);return r.annotate(a,w,function(e){return e?(c.extend(e,{preserve:s,constant:!!t.constant,rendered:t.rendered||function(){},destroyed:t.destroyed||function(){},landmark:o,finalize:function(){this.superceded||(this.landmark._range=null,this.destroyed.call(this.landmark))}}),o._range=e,r.landmarkRanges.push(e),r=null,void 0):(t.destroyed&&t.destroyed.call(o),void 0)})},t.getEnclosingLandmark=function(e){var t=C(w,e);return t?t.landmark:null}}).call(this),function(){a=function(e,t,r,o,s,l){var h=function(e,t){d.transplantTag(n,e,t)},p=new i(e,t,r,o),f=function(e,t,n,r){for(var o=t?t.nextSibling:e.firstChild;o&&o!==n;o=o.nextSibling)r(o)!==!1&&o.firstChild&&f(o,null,null,r)};l=l||{};var m=l.regionPreservations=l.regionPreservations||[],g=null;return f(t,null,null,function(e){var t=c.find(s,function(t){return"region"===t.type&&t.newRange.firstNode()===e})||c.find(s,function(t){return"node"===t.type&&t.to===e});if(t){var n="region"===t.type?t.fromStart:t.from;if(!g||u.compareElementIndex(g,n)<0)if("region"===t.type)p.match(t.fromStart,t.newRange.firstNode(),h,!0)&&(p.skipToSiblings(t.fromEnd,t.newRange.lastNode()),d.transplantRange(t.fromStart,t.fromEnd,t.newRange),m.push(t.newRange));else if("node"===t.type&&p.match(n,e,h))return g=n,(n.firstChild||e.firstChild)&&"TEXTAREA"!==n.nodeName&&"SELECT"!==n.nodeName&&a(n,e,null,null,s),!1}return!0}),p.finish(),l},i=function(e,t,n,r){this.tgtParent=e,this.srcParent=t,this.tgtBefore=n,this.tgtAfter=r,this.lastKeptTgtNode=null,this.lastKeptSrcNode=null},i.prototype.match=function(e,t,n,r){var o=this.lastKeptTgtNode,a=this.lastKeptSrcNode,s=e,c=t;if(!s!=!c)return!1;var l=!o,d=!s;if(!l){for(;!(o.parentNode===this.tgtParent||s&&u.elementContains(o.parentNode,s));)this._replaceNodes(o,null,a,null),o=o.parentNode,a=a.parentNode;if(this.lastKeptTgtNode=o,this.lastKeptSrcNode=a,!d&&(u.elementContains(a,c)||a.parentNode!==this.srcParent&&!u.elementContains(a.parentNode,c)))return!1}if(d)this._replaceNodes(o,null,a,null,this.tgtParent,this.srcParent);else{if(!r&&s.nodeName!==c.nodeName)return!1;for(var h=s.parentNode,p=c.parentNode;h!==(l?this.tgtParent:o.parentNode);h=h.parentNode,p=p.parentNode){if(p===(l?this.srcParent:a.parentNode))return!1;if(h.nodeName!==p.nodeName)return!1}if(p!==(l?this.srcParent:a.parentNode))return!1;for(var f=!0;;){if(f&&r||(1===s.nodeType&&i._copyAttributes(s,c),n&&n(s,c)),f=!1,(l?this.tgtParent:o.parentNode)===s.parentNode){this._replaceNodes(o,s,a,c);break}this._replaceNodes(null,s,null,c),s=s.parentNode,c=c.parentNode}}return this.lastKeptTgtNode=e,this.lastKeptSrcNode=t,!0},i.prototype.skipToSiblings=function(e,t){var n=this.lastKeptTgtNode,r=this.lastKeptSrcNode;return n&&n.parentNode===e.parentNode?r&&r.parentNode===t.parentNode?(this.lastKeptTgtNode=e,this.lastKeptSrcNode=t,!0):!1:!1},i.prototype.finish=function(){return this.match(null,null)},i.prototype._replaceNodes=function(e,t,n,r,o,a){var i=o||(e||t).parentNode,s=a||(n||r).parentNode;i===this.tgtParent&&(e=e||this.tgtBefore,t=t||this.tgtAfter),s===this.srcParent&&(n=n||this.srcBefore,r=r||this.srcAfter);for(var c;(c=e?e.nextSibling:i.firstChild)&&c!==t;)i.removeChild(c);for(var l;(l=n?n.nextSibling:s.firstChild)&&l!==r;)i.insertBefore(l,t||null)},i._copyAttributes=function(e,t){var n=t.attributes,r=e.attributes,o=e===document.activeElement;e.style.cssText&&(e.style.cssText="");var a=!1,i=null;if("INPUT"===e.nodeName&&(a="radio"===e.type,a||"checkbox"===e.type)){var s=!!e._sparkOriginalRenderedChecked&&e._sparkOriginalRenderedChecked[0],c=!!t._sparkOriginalRenderedChecked&&t._sparkOriginalRenderedChecked[0],l=e._currentChecked?e._currentChecked[0]:e.checked;s===c?i=l:(i=c,e._sparkOriginalRenderedChecked=[i])}for(var d=r.length-1;d>=0;d--){var h=r[d];if(h.specified){var p=h.name;if(r[p]&&"id"!==p&&"type"!==p&&(!a||"name"!==p)&&"value"!==p&&"src"!==p){var f=e[p];(!f||"object"!=typeof f&&!/^jQuery/.test(p))&&e.removeAttributeNode(h)}}}if(e.mergeAttributes){var m=t._sparkOriginalRenderedValue;t.removeAttribute("_sparkOriginalRenderedValue"),e.mergeAttributes(t),m&&(t._sparkOriginalRenderedValue=m),t.name&&(e.name=t.name)}else for(var d=0,g=n.length;g>d;d++){var y=n.item(d);
if(y.specified){var p=y.name.toLowerCase(),v=String(y.value);if("type"===p);else if("checked"===p);else if("style"===p)e.style.cssText=t.style.cssText;else if("class"===p)e.className=t.className;else if("value"===p);else if("src"===p)t.src!==e.src&&(e.src=t.src);else try{e.setAttribute(p,v)}catch(b){throw new Error("Error copying attribute '"+p+"': "+b)}}}var w=function(e){return e._sparkOriginalRenderedValue?e._sparkOriginalRenderedValue[0]:null},_=w(t),k=w(e),T=u.getElementValue(e);if("SELECT"===e.nodeName){for(;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.insertBefore(t.firstChild,null);u.setElementValue(e,T)}_===k||T!==_&&o||(T!==_&&u.setElementValue(e,_),e._sparkOriginalRenderedValue=[_]),null!==i&&(e.checked!==i&&(e.checked=i),e.defaultChecked=i,i?e.setAttribute("checked","checked"):e.removeAttribute("checked"))},t.Patcher=i}.call(this),function(){s.render=function(t){return e.render(function(){return e.isolate("function"==typeof t?t:function(){return String(t)})})},s.renderList=function(t,n,r){return e.render(function(){return e.list(t,function(t){var r=t._id?o(t._id):null;return e.labelBranch(r,function(){return e.isolate(c.bind(n,null,t))})},function(){return r?e.isolate(r):""})})}}.call(this),function(){e._labelFromIdOrName=function(e){var t=null;if(1===e.nodeType)if(e.getAttribute("id"))t="#"+e.getAttribute("id");else if(e.getAttribute("name"))for(t=e.getAttribute("name"),"INPUT"!==e.nodeName||"radio"!==e.type&&"checkbox"!==e.type||!e.value||(t=t+":"+e.value);e.parentNode&&1===e.parentNode.nodeType;){if(e=e.parentNode,e.id){t="#"+e.id+"/"+t;break}e.getAttribute("name")&&(t=e.getAttribute("name")+"/"+t)}return t}}.call(this),"undefined"==typeof Package&&(Package={}),Package.spark={Spark:e,SparkTest:t}}(),function(){var e,t=(Package.meteor.Meteor,Package.underscore._),n=Package.spark.Spark;(function(){e={},e.json_ast_to_func=function(t){return function(n,r){return e.evaluate(t,n,r)}};var r=Package.minimongo?Package.minimongo.LocalCollection._idStringify:function(e){return e};e._default_helpers={"with":function(e,t){return!e||e instanceof Array&&!e.length?t.inverse(this):t.fn(e)},each:function(e,o){var a=this;return e&&e.length>0?t.map(e,function(e){var t=e&&e._id&&r(e._id)||("string"==typeof e?e:null)||n.UNIQUE_LABEL;return n.labelBranch(t,function(){return o.fn(e)})}).join(""):n.labelBranch("else",function(){return o.inverse(a)})},"if":function(e,t){return!e||e instanceof Array&&!e.length?t.inverse(this):t.fn(this)},unless:function(e,t){return!e||e instanceof Array&&!e.length?t.fn(this):t.inverse(this)}},e.registerHelper=function(t,n){if(t in e._default_helpers)throw new Error("There is already a helper '"+t+"'");e._default_helpers[t]=n},e._escape=function(){var e={"<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;","`":"&#x60;","&":"&amp;"},t=function(t){return e[t]};return function(e){return e.replace(/[&<>"'`]/g,t)}}(),e._defaultThis=function(){return this}(),e.evaluate=function(r,o,a){a=a||{};var i=t.extend({},e._default_helpers);t.extend(i,a.helpers||{});var s=a.partials||{},c=function(e,n){if("object"!=typeof n)return n;for(var r=0;r<n[0];r++){if(!e.parent)throw new Error("Too many '..' segments");e=e.parent}if(1===n.length)return e.data;var o=!1;""===n[1]&&(n=n.slice(),n.splice(1,1),o=!0);var a,s=e.data;if(0===n[0]&&i.hasOwnProperty(n[1])&&!o)a=i[n[1]];else{if(!a instanceof Object&&"undefined"!=typeof function(){}[n[1]]&&!o)throw new Error("Can't call a helper '"+n[1]+"' because it is a built-in function property in JavaScript");a=e.data&&e.data[n[1]]}for(var r=2;r<n.length;r++){if("function"==typeof a&&(a=a.call(s),s=a),void 0===a||null===a){a="";break}a=a[n[r]]}return"function"==typeof a?t.bind(a,s):a},l=function(e,n,r,o){r=r||{},n=n.slice(0);var a=n[n.length-1],i={};"object"!=typeof a||a instanceof Array||t.each(n.pop(),function(t,n){var r=c(e,t);i[n]="function"==typeof r?r():r});for(var s=function(t,n){for(var r=t.slice(1),o=0;o<r.length;o++)"function"==typeof r[o]&&(r[o]=r[o]());return n&&r.push(n),t[0].apply(e.data,r)},l=new Array(n.length),u=0;u<n.length;u++)l[u]=c(e,n[u]);if("function"!=typeof l[0])return l[0];if(o&&l.length>1){var d=l[1];"function"==typeof d&&(d=s(l.slice(1),{hash:i})),l=[l[0],d],r.hash={}}else r.hash=i;return s(l,r)},u=function(r,o,a){var i,c=[],d=function(e){return"string"==typeof e?e:null===e?"null":void 0===e?"":e.toString()},h=function(t,r){return function(o){return(o||e._defaultThis)===(r||e._defaultThis)?t(o):n.setDataContext(o,t(o))}},p=function(t){return t instanceof e.SafeString?t.toString():e._escape(d(t))},f=function(){return(a?a+".":"")+i},m=function(e,t){return n.labelBranch(e+"@"+f(),t)};return t.each(o,function(e,t){if(i=t,"string"==typeof e)c.push(e);else if("{"===e[0])c.push(m(e[1],function(){return p(l(r,e[1]))}));else if("!"===e[0])c.push(m(e[1],function(){return d(l(r,e[1]||""))}));else if("#"===e[0]){var n=f(),o=h(function(t){return u({parent:r,data:t},e[2],n)},r.data);o.fn=o,o.inverse=h(function(t){return u({parent:r,data:t},e[3]||[],n)},r.data);var a=m(e[1],function(){return d(l(r,e[1],o,!0))});c.push(a)}else{if(">"!==e[0])throw new Error("bad element in template");var g=e[1];if(!(g in s))throw new Error("No such template '"+g+"'");var a=m(g,function(){return d(s[g](r.data))});c.push(a)}}),c.join("")},d=(a.name||"")+"#";return u({data:o,parent:null},r,d)},e.SafeString=function(e){this.string=e},e.SafeString.prototype.toString=function(){return this.string.toString()}}).call(this),"undefined"==typeof Package&&(Package={}),Package.handlebars={Handlebars:e}}(),function(){{var e;Package.meteor.Meteor}(function(){e={},e.converter=function(){var e,t,n,r=0;this.makeHtml=function(r){return e=new Array,t=new Array,n=new Array,r=r.replace(/~/g,"~T"),r=r.replace(/\$/g,"~D"),r=r.replace(/\r\n/g,"\n"),r=r.replace(/\r/g,"\n"),r="\n\n"+r+"\n\n",r=A(r),r=r.replace(/^[ \t]+$/gm,""),r=i(r),r=a(r),r=c(r),r=E(r),r=r.replace(/~D/g,"$$"),r=r.replace(/~T/g,"~")};var o,a=function(n){var n=n.replace(/^[ ]{0,3}\[(.+)\]:[ \t]*\n?[ \t]*<?(\S+?)>?[ \t]*\n?[ \t]*(?:(\n*)["(](.+?)[")][ \t]*)?(?:\n+|\Z)/gm,function(n,r,o,a,i){return r=r.toLowerCase(),e[r]=x(o),a?a+i:(i&&(t[r]=i.replace(/"/g,"&quot;")),"")});return n},i=function(e){e=e.replace(/\n/g,"\n\n");return e=e.replace(/^(<(p|div|h[1-6]|blockquote|pre|table|dl|ol|ul|script|noscript|form|fieldset|iframe|math|ins|del)\b[^\r]*?\n<\/\2>[ \t]*(?=\n+))/gm,s),e=e.replace(/^(<(p|div|h[1-6]|blockquote|pre|table|dl|ol|ul|script|noscript|form|fieldset|iframe|math)\b[^\r]*?.*<\/\2>[ \t]*(?=\n+)\n)/gm,s),e=e.replace(/(\n[ ]{0,3}(<(hr)\b([^<>])*?\/?>)[ \t]*(?=\n{2,}))/g,s),e=e.replace(/(\n\n[ ]{0,3}<!(--[^\r]*?--\s*)+>[ \t]*(?=\n{2,}))/g,s),e=e.replace(/(?:\n\n)([ ]{0,3}(?:<([?%])[^\r]*?\2>)[ \t]*(?=\n{2,}))/g,s),e=e.replace(/\n\n/g,"\n")},s=function(e,t){var r=t;return r=r.replace(/\n\n/g,"\n"),r=r.replace(/^\n/,""),r=r.replace(/\n+$/g,""),r="\n\n~K"+(n.push(r)-1)+"K\n\n"},c=function(e){e=m(e);var t=v("<hr />");return e=e.replace(/^[ ]{0,2}([ ]?\*[ ]?){3,}[ \t]*$/gm,t),e=e.replace(/^[ ]{0,2}([ ]?\-[ ]?){3,}[ \t]*$/gm,t),e=e.replace(/^[ ]{0,2}([ ]?\_[ ]?){3,}[ \t]*$/gm,t),e=g(e),e=y(e),e=k(e),e=i(e),e=T(e)},l=function(e){return e=b(e),e=u(e),e=S(e),e=p(e),e=d(e),e=C(e),e=x(e),e=_(e),e=e.replace(/  +\n/g," <br />\n")},u=function(e){var t=/(<[a-z\/!$]("[^"]*"|'[^']*'|[^'">])*>|<!(--.*?--\s*)+>)/gi;return e=e.replace(t,function(e){var t=e.replace(/(.)<\/?code>(?=.)/g,"$1`");return t=O(t,"\\`*_")})},d=function(e){return e=e.replace(/(\[((?:\[[^\]]*\]|[^\[\]])*)\][ ]?(?:\n[ ]*)?\[(.*?)\])()()()()/g,h),e=e.replace(/(\[((?:\[[^\]]*\]|[^\[\]])*)\]\([ \t]*()<?(.*?)>?[ \t]*((['"])(.*?)\6[ \t]*)?\))/g,h),e=e.replace(/(\[([^\[\]]+)\])()()()()()/g,h)},h=function(n,r,o,a,i,s,c,l){void 0==l&&(l="");var u=r,d=o,h=a.toLowerCase(),p=i,f=l;if(""==p)if(""==h&&(h=d.toLowerCase().replace(/ ?\n/g," ")),p="#"+h,void 0!=e[h])p=e[h],void 0!=t[h]&&(f=t[h]);else{if(!(u.search(/\(\s*\)$/m)>-1))return u;p=""}p=O(p,"*_");var m='<a href="'+p+'"';return""!=f&&(f=f.replace(/"/g,"&quot;"),f=O(f,"*_"),m+=' title="'+f+'"'),m+=">"+d+"</a>"},p=function(e){return e=e.replace(/(!\[(.*?)\][ ]?(?:\n[ ]*)?\[(.*?)\])()()()()/g,f),e=e.replace(/(!\[(.*?)\]\s?\([ \t]*()<?(\S+?)>?[ \t]*((['"])(.*?)\6[ \t]*)?\))/g,f)},f=function(n,r,o,a,i,s,c,l){var u=r,d=o,h=a.toLowerCase(),p=i,f=l;if(f||(f=""),""==p){if(""==h&&(h=d.toLowerCase().replace(/ ?\n/g," ")),p="#"+h,void 0==e[h])return u;p=e[h],void 0!=t[h]&&(f=t[h])}d=d.replace(/"/g,"&quot;"),p=O(p,"*_");var m='<img src="'+p+'" alt="'+d+'"';return f=f.replace(/"/g,"&quot;"),f=O(f,"*_"),m+=' title="'+f+'"',m+=" />"},m=function(e){function t(e){return e.replace(/[^\w]/g,"").toLowerCase()}return e=e.replace(/^(.+)[ \t]*\n=+[ \t]*\n+/gm,function(e,n){return v('<h1 id="'+t(n)+'">'+l(n)+"</h1>")}),e=e.replace(/^(.+)[ \t]*\n-+[ \t]*\n+/gm,function(e,n){return v('<h2 id="'+t(n)+'">'+l(n)+"</h2>")}),e=e.replace(/^(\#{1,6})[ \t]*(.+?)[ \t]*\#*\n+/gm,function(e,n,r){var o=n.length;return v("<h"+o+' id="'+t(r)+'">'+l(r)+"</h"+o+">")})},g=function(e){e+="~0";var t=/^(([ ]{0,3}([*+-]|\d+[.])[ \t]+)[^\r]+?(~0|\n{2,}(?=\S)(?![ \t]*(?:[*+-]|\d+[.])[ \t]+)))/gm;return r?e=e.replace(t,function(e,t,n){var r=t,a=n.search(/[*+-]/g)>-1?"ul":"ol";r=r.replace(/\n{2,}/g,"\n\n\n");var i=o(r);return i=i.replace(/\s+$/,""),i="<"+a+">"+i+"</"+a+">\n"}):(t=/(\n\n|^\n?)(([ ]{0,3}([*+-]|\d+[.])[ \t]+)[^\r]+?(~0|\n{2,}(?=\S)(?![ \t]*(?:[*+-]|\d+[.])[ \t]+)))/g,e=e.replace(t,function(e,t,n,r){var a=t,i=n,s=r.search(/[*+-]/g)>-1?"ul":"ol",i=i.replace(/\n{2,}/g,"\n\n\n"),c=o(i);return c=a+"<"+s+">\n"+c+"</"+s+">\n"})),e=e.replace(/~0/,"")};o=function(e){return r++,e=e.replace(/\n{2,}$/,"\n"),e+="~0",e=e.replace(/(\n)?(^[ \t]*)([*+-]|\d+[.])[ \t]+([^\r]+?(\n{1,2}))(?=\n*(~0|\2([*+-]|\d+[.])[ \t]+))/gm,function(e,t,n,r,o){var a=o,i=t;return i||a.search(/\n{2,}/)>-1?a=c(I(a)):(a=g(I(a)),a=a.replace(/\n$/,""),a=l(a)),"<li>"+a+"</li>\n"}),e=e.replace(/~0/g,""),r--,e};var y=function(e){return e+="~0",e=e.replace(/(?:\n\n|^)((?:(?:[ ]{4}|\t).*\n+)+)(\n*[ ]{0,3}[^ \t\n]|(?=~0))/g,function(e,t,n){var r=t,o=n;return r=w(I(r)),r=A(r),r=r.replace(/^\n+/g,""),r=r.replace(/\n+$/g,""),r="<pre><code>"+r+"\n</code></pre>",v(r)+o}),e=e.replace(/~0/,"")},v=function(e){return e=e.replace(/(^\n+|\n+$)/g,""),"\n\n~K"+(n.push(e)-1)+"K\n\n"},b=function(e){return e=e.replace(/(^|[^\\])(`+)([^\r]*?[^`])\2(?!`)/gm,function(e,t,n,r){var o=r;return o=o.replace(/^([ \t]*)/g,""),o=o.replace(/[ \t]*$/g,""),o=w(o),t+"<code>"+o+"</code>"})},w=function(e){return e=e.replace(/&/g,"&amp;"),e=e.replace(/</g,"&lt;"),e=e.replace(/>/g,"&gt;"),e=O(e,"*_{}[]\\",!1)},_=function(e){return e=e.replace(/(\*\*|__)(?=\S)([^\r]*?\S[*_]*)\1/g,"<strong>$2</strong>"),e=e.replace(/(\*|_)(?=\S)([^\r]*?\S)\1/g,"<em>$2</em>")},k=function(e){return e=e.replace(/((^[ \t]*>[ \t]?.+\n(.+\n)*\n*)+)/gm,function(e,t){var n=t;return n=n.replace(/^[ \t]*>[ \t]?/gm,"~0"),n=n.replace(/~0/g,""),n=n.replace(/^[ \t]+$/gm,""),n=c(n),n=n.replace(/(^|\n)/g,"$1  "),n=n.replace(/(\s*<pre>[^\r]+?<\/pre>)/gm,function(e,t){var n=t;return n=n.replace(/^  /gm,"~0"),n=n.replace(/~0/g,"")}),v("<blockquote>\n"+n+"\n</blockquote>")})},T=function(e){e=e.replace(/^\n+/g,""),e=e.replace(/\n+$/g,"");for(var t=e.split(/\n{2,}/g),r=new Array,o=t.length,a=0;o>a;a++){var i=t[a];i.search(/~K(\d+)K/g)>=0?r.push(i):i.search(/\S/)>=0&&(i=l(i),i=i.replace(/^([ \t]*)/g,"<p>"),i+="</p>",r.push(i))}o=r.length;for(var a=0;o>a;a++)for(;r[a].search(/~K(\d+)K/)>=0;){var s=n[RegExp.$1];s=s.replace(/\$/g,"$$$$"),r[a]=r[a].replace(/~K\d+K/,s)}return r.join("\n\n")},x=function(e){return e=e.replace(/&(?!#?[xX]?(?:[0-9a-fA-F]+|\w+);)/g,"&amp;"),e=e.replace(/<(?![a-z\/?\$!])/gi,"&lt;")},S=function(e){return e=e.replace(/\\(\\)/g,j),e=e.replace(/\\([`*_{}\[\]()>#+-.!])/g,j)},C=function(e){return e=e.replace(/<((https?|ftp|dict):[^'">\s]+)>/gi,'<a href="$1">$1</a>'),e=e.replace(/<(?:mailto:)?([-.\w]+\@[-a-z0-9]+(\.[-a-z0-9]+)*\.[a-z]+)>/gi,function(e,t){return M(E(t))})},M=function(e){function t(e){var t="0123456789ABCDEF",n=e.charCodeAt(0);return t.charAt(n>>4)+t.charAt(15&n)}var n=[function(e){return"&#"+e.charCodeAt(0)+";"},function(e){return"&#x"+t(e)+";"},function(e){return e}];return e="mailto:"+e,e=e.replace(/./g,function(e){if("@"==e)e=n[Math.floor(2*Math.random())](e);else if(":"!=e){var t=Math.random();e=t>.9?n[2](e):t>.45?n[1](e):n[0](e)}return e}),e='<a href="'+e+'">'+e+"</a>",e=e.replace(/">.+:/g,'">')},E=function(e){return e=e.replace(/~E(\d+)E/g,function(e,t){var n=parseInt(t);return String.fromCharCode(n)})},I=function(e){return e=e.replace(/^(\t|[ ]{1,4})/gm,"~0"),e=e.replace(/~0/g,"")},A=function(e){return e=e.replace(/\t(?=\t)/g,"    "),e=e.replace(/\t/g,"~A~B"),e=e.replace(/~B(.+?)~A/g,function(e,t){for(var n=t,r=4-n.length%4,o=0;r>o;o++)n+=" ";return n}),e=e.replace(/~A/g,"    "),e=e.replace(/~B/g,"")},O=function(e,t,n){var r="(["+t.replace(/([\[\]\\])/g,"\\$1")+"])";n&&(r="\\\\"+r);var o=new RegExp(r,"g");return e=e.replace(o,j)},j=function(e,t){var n=t.charCodeAt(0);return"~E"+n+"E"}},"undefined"!=typeof exports&&(exports.Showdown=e)}).call(this),function(){Package.handlebars&&Package.handlebars.Handlebars.registerHelper("markdown",function(t){var n=new e.converter;return n.makeHtml(t.fn(this))})}.call(this),"undefined"==typeof Package&&(Package={}),Package.showdown={Showdown:e}}(),function(){Package.meteor.Meteor;(function(){var e=null;window.PR_SHOULD_USE_CONTINUATION=!0,function(){function t(e){function t(e){var t=e.charCodeAt(0);if(92!==t)return t;var n=e.charAt(1);return(t=d[n])?t:n>="0"&&"7">=n?parseInt(e.substring(1),8):"u"===n||"x"===n?parseInt(e.substring(2),16):e.charCodeAt(1)}function n(e){return 32>e?(16>e?"\\x0":"\\x")+e.toString(16):(e=String.fromCharCode(e),("\\"===e||"-"===e||"["===e||"]"===e)&&(e="\\"+e),e)}function r(e){for(var r=e.substring(1,e.length-1).match(/\\u[\dA-Fa-f]{4}|\\x[\dA-Fa-f]{2}|\\[0-3][0-7]{0,2}|\\[0-7]{1,2}|\\[\S\s]|[^\\]/g),e=[],o=[],a="^"===r[0],i=a?1:0,s=r.length;s>i;++i){var c=r[i];if(/\\[bdsw]/i.test(c))e.push(c);else{var l,c=t(c);s>i+2&&"-"===r[i+1]?(l=t(r[i+2]),i+=2):l=c,o.push([c,l]),65>l||c>122||(65>l||c>90||o.push([32|Math.max(65,c),32|Math.min(l,90)]),97>l||c>122||o.push([-33&Math.max(97,c),-33&Math.min(l,122)]))}}for(o.sort(function(e,t){return e[0]-t[0]||t[1]-e[1]}),r=[],c=[0/0,0/0],i=0;i<o.length;++i)s=o[i],s[0]<=c[1]+1?c[1]=Math.max(c[1],s[1]):r.push(c=s);for(o=["["],a&&o.push("^"),o.push.apply(o,e),i=0;i<r.length;++i)s=r[i],o.push(n(s[0])),s[1]>s[0]&&(s[1]+1>s[0]&&o.push("-"),o.push(n(s[1])));return o.push("]"),o.join("")}function o(e){for(var t=e.source.match(/\[(?:[^\\\]]|\\[\S\s])*]|\\u[\dA-Fa-f]{4}|\\x[\dA-Fa-f]{2}|\\\d+|\\[^\dux]|\(\?[!:=]|[()^]|[^()[\\^]+/g),n=t.length,o=[],s=0,c=0;n>s;++s){var l=t[s];"("===l?++c:"\\"===l.charAt(0)&&(l=+l.substring(1))&&c>=l&&(o[l]=-1)}for(s=1;s<o.length;++s)-1===o[s]&&(o[s]=++a);for(c=s=0;n>s;++s)l=t[s],"("===l?(++c,void 0===o[c]&&(t[s]="(?:")):"\\"===l.charAt(0)&&(l=+l.substring(1))&&c>=l&&(t[s]="\\"+o[c]);for(c=s=0;n>s;++s)"^"===t[s]&&"^"!==t[s+1]&&(t[s]="");if(e.ignoreCase&&i)for(s=0;n>s;++s)l=t[s],e=l.charAt(0),l.length>=2&&"["===e?t[s]=r(l):"\\"!==e&&(t[s]=l.replace(/[A-Za-z]/g,function(e){return e=e.charCodeAt(0),"["+String.fromCharCode(-33&e,32|e)+"]"}));return t.join("")}for(var a=0,i=!1,s=!1,c=0,l=e.length;l>c;++c){var u=e[c];if(u.ignoreCase)s=!0;else if(/[a-z]/i.test(u.source.replace(/\\u[\da-f]{4}|\\x[\da-f]{2}|\\[^UXux]/gi,""))){i=!0,s=!1;break}}for(var d={b:8,t:9,n:10,v:11,f:12,r:13},h=[],c=0,l=e.length;l>c;++c){if(u=e[c],u.global||u.multiline)throw Error(""+u);h.push("(?:"+o(u)+")")}return RegExp(h.join("|"),s?"gi":"g")}function n(t){function n(e){switch(e.nodeType){case 1:if(o.test(e.className))break;for(var t=e.firstChild;t;t=t.nextSibling)n(t);t=e.nodeName,("BR"===t||"LI"===t)&&(a[c]="\n",s[c<<1]=i++,s[c++<<1|1]=e);break;case 3:case 4:t=e.nodeValue,t.length&&(t=l?t.replace(/\r\n?/g,"\n"):t.replace(/[\t\n\r ]+/g," "),a[c]=t,s[c<<1]=i,i+=t.length,s[c++<<1|1]=e)}}var r,o=/(?:^|\s)nocode(?:\s|$)/,a=[],i=0,s=[],c=0;t.currentStyle?r=t.currentStyle.whiteSpace:window.getComputedStyle&&(r=document.defaultView.getComputedStyle(t,e).getPropertyValue("white-space"));var l=r&&"pre"===r.substring(0,3);return n(t),{a:a.join("").replace(/\n$/,""),c:s}}function r(e,t,n,r){t&&(e={a:t,d:e},n(e),r.push.apply(r,e.e))}function o(n,o){function a(e){for(var t=e.d,n=[t,"pln"],u=0,d=e.a.match(i)||[],h={},p=0,f=d.length;f>p;++p){var m,g=d[p],y=h[g],v=void 0;if("string"==typeof y)m=!1;else{var b=s[g.charAt(0)];if(b)v=g.match(b[1]),y=b[0];else{for(m=0;l>m;++m)if(b=o[m],v=g.match(b[1])){y=b[0];break}v||(y="pln")}!(m=y.length>=5&&"lang-"===y.substring(0,5))||v&&"string"==typeof v[1]||(m=!1,y="src"),m||(h[g]=y)}if(b=u,u+=g.length,m){m=v[1];var w=g.indexOf(m),_=w+m.length;v[2]&&(_=g.length-v[2].length,w=_-m.length),y=y.substring(5),r(t+b,g.substring(0,w),a,n),r(t+b+w,m,c(y,m),n),r(t+b+_,g.substring(_),a,n)}else n.push(t+b,y)}e.e=n}var i,s={};!function(){for(var r=n.concat(o),a=[],c={},l=0,u=r.length;u>l;++l){var d=r[l],h=d[3];if(h)for(var p=h.length;--p>=0;)s[h.charAt(p)]=d;d=d[1],h=""+d,c.hasOwnProperty(h)||(a.push(d),c[h]=e)}a.push(/[\S\s]/),i=t(a)}();var l=o.length;return a}function a(t){var n=[],r=[];t.tripleQuotedStrings?n.push(["str",/^(?:'''(?:[^'\\]|\\[\S\s]|''?(?=[^']))*(?:'''|$)|"""(?:[^"\\]|\\[\S\s]|""?(?=[^"]))*(?:"""|$)|'(?:[^'\\]|\\[\S\s])*(?:'|$)|"(?:[^"\\]|\\[\S\s])*(?:"|$))/,e,"'\""]):t.multiLineStrings?n.push(["str",/^(?:'(?:[^'\\]|\\[\S\s])*(?:'|$)|"(?:[^"\\]|\\[\S\s])*(?:"|$)|`(?:[^\\`]|\\[\S\s])*(?:`|$))/,e,"'\"`"]):n.push(["str",/^(?:'(?:[^\n\r'\\]|\\.)*(?:'|$)|"(?:[^\n\r"\\]|\\.)*(?:"|$))/,e,"\"'"]),t.verbatimStrings&&r.push(["str",/^@"(?:[^"]|"")*(?:"|$)/,e]);var a=t.hashComments;return a&&(t.cStyleComments?(a>1?n.push(["com",/^#(?:##(?:[^#]|#(?!##))*(?:###|$)|.*)/,e,"#"]):n.push(["com",/^#(?:(?:define|elif|else|endif|error|ifdef|include|ifndef|line|pragma|undef|warning)\b|[^\n\r]*)/,e,"#"]),r.push(["str",/^<(?:(?:(?:\.\.\/)*|\/?)(?:[\w-]+(?:\/[\w-]+)+)?[\w-]+\.h|[a-z]\w*)>/,e])):n.push(["com",/^#[^\n\r]*/,e,"#"])),t.cStyleComments&&(r.push(["com",/^\/\/[^\n\r]*/,e]),r.push(["com",/^\/\*[\S\s]*?(?:\*\/|$)/,e])),t.regexLiterals&&r.push(["lang-regex",/^(?:^^\.?|[!+-]|!=|!==|#|%|%=|&|&&|&&=|&=|\(|\*|\*=|\+=|,|-=|->|\/|\/=|:|::|;|<|<<|<<=|<=|=|==|===|>|>=|>>|>>=|>>>|>>>=|[?@[^]|\^=|\^\^|\^\^=|{|\||\|=|\|\||\|\|=|~|break|case|continue|delete|do|else|finally|instanceof|return|throw|try|typeof)\s*(\/(?=[^*/])(?:[^/[\\]|\\[\S\s]|\[(?:[^\\\]]|\\[\S\s])*(?:]|$))+\/)/]),(a=t.types)&&r.push(["typ",a]),t=(""+t.keywords).replace(/^ | $/g,""),t.length&&r.push(["kwd",RegExp("^(?:"+t.replace(/[\s,]+/g,"|")+")\\b"),e]),n.push(["pln",/^\s+/,e," \r\n	 "]),r.push(["lit",/^@[$_a-z][\w$@]*/i,e],["typ",/^(?:[@_]?[A-Z]+[a-z][\w$@]*|\w+_t\b)/,e],["pln",/^[$_a-z][\w$@]*/i,e],["lit",/^(?:0x[\da-f]+|(?:\d(?:_\d+)*\d*(?:\.\d*)?|\.\d\+)(?:e[+-]?\d+)?)[a-z]*/i,e,"0123456789"],["pln",/^\\[\S\s]?/,e],["pun",/^.[^\s\w"-$'./@\\`]*/,e]),o(n,r)}function i(t,n){function r(e){switch(e.nodeType){case 1:if(i.test(e.className))break;if("BR"===e.nodeName)o(e),e.parentNode&&e.parentNode.removeChild(e);else for(e=e.firstChild;e;e=e.nextSibling)r(e);break;case 3:case 4:if(l){var t=e.nodeValue,n=t.match(s);if(n){var a=t.substring(0,n.index);e.nodeValue=a,(t=t.substring(n.index+n[0].length))&&e.parentNode.insertBefore(c.createTextNode(t),e.nextSibling),o(e),a||e.parentNode.removeChild(e)}}}}function o(e){function t(e,n){var r=n?e.cloneNode(!1):e,o=e.parentNode;if(o){var o=t(o,1),a=e.nextSibling;o.appendChild(r);for(var i=a;i;i=a)a=i.nextSibling,o.appendChild(i)}return r}for(;!e.nextSibling;)if(e=e.parentNode,!e)return;for(var n,e=t(e.nextSibling,0);(n=e.parentNode)&&1===n.nodeType;)e=n;u.push(e)}var a,i=/(?:^|\s)nocode(?:\s|$)/,s=/\r\n?|\n/,c=t.ownerDocument;t.currentStyle?a=t.currentStyle.whiteSpace:window.getComputedStyle&&(a=c.defaultView.getComputedStyle(t,e).getPropertyValue("white-space"));var l=a&&"pre"===a.substring(0,3);for(a=c.createElement("LI");t.firstChild;)a.appendChild(t.firstChild);for(var u=[a],d=0;d<u.length;++d)r(u[d]);n===(0|n)&&u[0].setAttribute("value",n);var h=c.createElement("OL");h.className="linenums";for(var p=Math.max(0,n-1|0)||0,d=0,f=u.length;f>d;++d)a=u[d],a.className="L"+(d+p)%10,a.firstChild||a.appendChild(c.createTextNode(" ")),h.appendChild(a);t.appendChild(h)}function s(e,t){for(var n=t.length;--n>=0;){var r=t[n];w.hasOwnProperty(r)?window.console&&console.warn("cannot override language handler %s",r):w[r]=e}}function c(e,t){return e&&w.hasOwnProperty(e)||(e=/^\s*</.test(t)?"default-markup":"default-code"),w[e]}function l(e){var t=e.g;try{var r=n(e.h),o=r.a;e.a=o,e.c=r.c,e.d=0,c(t,o)(e);var a=/\bMSIE\b/.test(navigator.userAgent),t=/\n/g,i=e.a,s=i.length,r=0,l=e.c,u=l.length,o=0,d=e.e,h=d.length,e=0;d[h]=s;var p,f;for(f=p=0;h>f;)d[f]!==d[f+2]?(d[p++]=d[f++],d[p++]=d[f++]):f+=2;for(h=p,f=p=0;h>f;){for(var m=d[f],g=d[f+1],y=f+2;h>=y+2&&d[y+1]===g;)y+=2;d[p++]=m,d[p++]=g,f=y}for(d.length=p;u>o;){var v,b=l[o+2]||s,w=d[e+2]||s,y=Math.min(b,w),_=l[o+1];if(1!==_.nodeType&&(v=i.substring(r,y))){a&&(v=v.replace(t,"\r")),_.nodeValue=v;var k=_.ownerDocument,T=k.createElement("SPAN");T.className=d[e+1];var x=_.parentNode;x.replaceChild(T,_),T.appendChild(_),b>r&&(l[o+1]=_=k.createTextNode(i.substring(y,b)),x.insertBefore(_,T.nextSibling))}r=y,r>=b&&(o+=2),r>=w&&(e+=2)}}catch(S){"console"in window&&console.log(S&&S.stack?S.stack:S)}}var u=["break,continue,do,else,for,if,return,while"],d=[[u,"auto,case,char,const,default,double,enum,extern,float,goto,int,long,register,short,signed,sizeof,static,struct,switch,typedef,union,unsigned,void,volatile"],"catch,class,delete,false,import,new,operator,private,protected,public,this,throw,true,try,typeof"],h=[d,"alignof,align_union,asm,axiom,bool,concept,concept_map,const_cast,constexpr,decltype,dynamic_cast,explicit,export,friend,inline,late_check,mutable,namespace,nullptr,reinterpret_cast,static_assert,static_cast,template,typeid,typename,using,virtual,where"],p=[d,"abstract,boolean,byte,extends,final,finally,implements,import,instanceof,null,native,package,strictfp,super,synchronized,throws,transient"],f=[p,"as,base,by,checked,decimal,delegate,descending,dynamic,event,fixed,foreach,from,group,implicit,in,interface,internal,into,is,lock,object,out,override,orderby,params,partial,readonly,ref,sbyte,sealed,stackalloc,string,select,uint,ulong,unchecked,unsafe,ushort,var"],d=[d,"debugger,eval,export,function,get,null,set,undefined,var,with,Infinity,NaN"],m=[u,"and,as,assert,class,def,del,elif,except,exec,finally,from,global,import,in,is,lambda,nonlocal,not,or,pass,print,raise,try,with,yield,False,True,None"],g=[u,"alias,and,begin,case,class,def,defined,elsif,end,ensure,false,in,module,next,nil,not,or,redo,rescue,retry,self,super,then,true,undef,unless,until,when,yield,BEGIN,END"],u=[u,"case,done,elif,esac,eval,fi,function,in,local,set,then,until"],y=/^(DIR|FILE|vector|(de|priority_)?queue|list|stack|(const_)?iterator|(multi)?(set|map)|bitset|u?(int|float)\d*)/,v=/\S/,b=a({keywords:[h,f,d,"caller,delete,die,do,dump,elsif,eval,exit,foreach,for,goto,if,import,last,local,my,next,no,our,print,package,redo,require,sub,undef,unless,until,use,wantarray,while,BEGIN,END"+m,g,u],hashComments:!0,cStyleComments:!0,multiLineStrings:!0,regexLiterals:!0}),w={};s(b,["default-code"]),s(o([],[["pln",/^[^<?]+/],["dec",/^<!\w[^>]*(?:>|$)/],["com",/^<\!--[\S\s]*?(?:--\>|$)/],["lang-",/^<\?([\S\s]+?)(?:\?>|$)/],["lang-",/^<%([\S\s]+?)(?:%>|$)/],["pun",/^(?:<[%?]|[%?]>)/],["lang-",/^<xmp\b[^>]*>([\S\s]+?)<\/xmp\b[^>]*>/i],["lang-js",/^<script\b[^>]*>([\S\s]*?)(<\/script\b[^>]*>)/i],["lang-css",/^<style\b[^>]*>([\S\s]*?)(<\/style\b[^>]*>)/i],["lang-in.tag",/^(<\/?[a-z][^<>]*>)/i]]),["default-markup","htm","html","mxml","xhtml","xml","xsl"]),s(o([["pln",/^\s+/,e," 	\r\n"],["atv",/^(?:"[^"]*"?|'[^']*'?)/,e,"\"'"]],[["tag",/^^<\/?[a-z](?:[\w-.:]*\w)?|\/?>$/i],["atn",/^(?!style[\s=]|on)[a-z](?:[\w:-]*\w)?/i],["lang-uq.val",/^=\s*([^\s"'>]*(?:[^\s"'/>]|\/(?=\s)))/],["pun",/^[/<->]+/],["lang-js",/^on\w+\s*=\s*"([^"]+)"/i],["lang-js",/^on\w+\s*=\s*'([^']+)'/i],["lang-js",/^on\w+\s*=\s*([^\s"'>]+)/i],["lang-css",/^style\s*=\s*"([^"]+)"/i],["lang-css",/^style\s*=\s*'([^']+)'/i],["lang-css",/^style\s*=\s*([^\s"'>]+)/i]]),["in.tag"]),s(o([],[["atv",/^[\S\s]+/]]),["uq.val"]),s(a({keywords:h,hashComments:!0,cStyleComments:!0,types:y}),["c","cc","cpp","cxx","cyc","m"]),s(a({keywords:"null,true,false"}),["json"]),s(a({keywords:f,hashComments:!0,cStyleComments:!0,verbatimStrings:!0,types:y}),["cs"]),s(a({keywords:p,cStyleComments:!0}),["java"]),s(a({keywords:u,hashComments:!0,multiLineStrings:!0}),["bsh","csh","sh"]),s(a({keywords:m,hashComments:!0,multiLineStrings:!0,tripleQuotedStrings:!0}),["cv","py"]),s(a({keywords:"caller,delete,die,do,dump,elsif,eval,exit,foreach,for,goto,if,import,last,local,my,next,no,our,print,package,redo,require,sub,undef,unless,until,use,wantarray,while,BEGIN,END",hashComments:!0,multiLineStrings:!0,regexLiterals:!0}),["perl","pl","pm"]),s(a({keywords:g,hashComments:!0,multiLineStrings:!0,regexLiterals:!0}),["rb"]),s(a({keywords:d,cStyleComments:!0,regexLiterals:!0}),["js"]),s(a({keywords:"all,and,by,catch,class,else,extends,false,finally,for,if,in,is,isnt,loop,new,no,not,null,of,off,on,or,return,super,then,true,try,unless,until,when,while,yes",hashComments:3,cStyleComments:!0,multilineStrings:!0,tripleQuotedStrings:!0,regexLiterals:!0}),["coffee"]),s(o([],[["str",/^[\S\s]+/]]),["regex"]),window.prettyPrintOne=function(e,t,n){var r=document.createElement("PRE");return r.innerHTML=e,n&&i(r,n),l({g:t,i:n,h:r}),r.innerHTML},window.prettyPrint=function(t){function n(){for(var e=window.PR_SHOULD_USE_CONTINUATION?u.now()+250:1/0;h<o.length&&u.now()<e;h++){var r=o[h],a=r.className;if(a.indexOf("prettyprint")>=0){var s,c,a=a.match(p);if(c=!a){c=r;for(var f=void 0,m=c.firstChild;m;m=m.nextSibling)var g=m.nodeType,f=1===g?f?c:m:3===g?v.test(m.nodeValue)?c:f:f;c=(s=f===c?void 0:f)&&"CODE"===s.tagName}for(c&&(a=s.className.match(p)),a&&(a=a[1]),c=!1,f=r.parentNode;f;f=f.parentNode)if(("pre"===f.tagName||"code"===f.tagName||"xmp"===f.tagName)&&f.className&&f.className.indexOf("prettyprint")>=0){c=!0;break}c||((c=(c=r.className.match(/\blinenums\b(?::(\d+))?/))?c[1]&&c[1].length?+c[1]:!0:!1)&&i(r,c),d={g:a,h:r,i:c},l(d))}}h<o.length?setTimeout(n,250):t&&t()}for(var r=[document.getElementsByTagName("pre"),document.getElementsByTagName("code"),document.getElementsByTagName("xmp")],o=[],a=0;a<r.length;++a)for(var s=0,c=r[a].length;c>s;++s)o.push(r[a][s]);var r=e,u=Date;u.now||(u={now:function(){return+new Date}});var d,h=0,p=/\blang(?:uage)?-([\w.]+)(?!\S)/;n()},window.PR={createSimpleLexer:o,registerLangHandler:s,sourceDecorator:a,PR_ATTRIB_NAME:"atn",PR_ATTRIB_VALUE:"atv",PR_COMMENT:"com",PR_DECLARATION:"dec",PR_KEYWORD:"kwd",PR_LITERAL:"lit",PR_NOCODE:"nocode",PR_PLAIN:"pln",PR_PUNCTUATION:"pun",PR_SOURCE:"src",PR_STRING:"str",PR_TAG:"tag",PR_TYPE:"typ"}}()}).call(this),"undefined"==typeof Package&&(Package={}),Package["code-prettify"]={}}(),function(){Package.meteor.Meteor;"undefined"==typeof Package&&(Package={}),Package.coffeescript={}}(),function(){{var e;Package.meteor.Meteor,Package.jquery.$,Package.jquery.jQuery}(function(){e="object"==typeof e?e:{};var t=[].indexOf||function(e){for(var t=0,n=this.length;n>t;t++)if(t in this&&this[t]===e)return t;return-1},n=[].slice;!function(e,t){return"function"==typeof define&&define.amd?define("waypoints",["jquery"],function(n){return t(n,e)}):t(e.jQuery,e)}(this,function(e,r){var o,a,i,s,c,l,u,d,h,p,f,m,g,y,v,b;return o=e(r),d=t.call(r,"ontouchstart")>=0,s={horizontal:{},vertical:{}},c=1,u={},l="waypoints-context-id",f="resize.waypoints",m="scroll.waypoints",g=1,y="waypoints-waypoint-ids",v="waypoint",b="waypoints",a=function(){function t(t){this.$element=t,this.element=t[0],this.didResize=!1,this.didScroll=!1,this.id="context"+c++,this.oldScroll={x:t.scrollLeft(),y:t.scrollTop()},this.waypoints={horizontal:{},vertical:{}},this.element[l]=this.id,u[this.id]=this,t.bind(m,function(t){return function(){var n;return t.didScroll||d?void 0:(t.didScroll=!0,n=function(){return t.doScroll(),t.didScroll=!1},r.setTimeout(n,e[b].settings.scrollThrottle))}}(this)),t.bind(f,function(t){return function(){var n;return t.didResize?void 0:(t.didResize=!0,n=function(){return e[b]("refresh"),t.didResize=!1},r.setTimeout(n,e[b].settings.resizeThrottle))}}(this))}return t.prototype.doScroll=function(){var t;return t={horizontal:{newScroll:this.$element.scrollLeft(),oldScroll:this.oldScroll.x,forward:"right",backward:"left"},vertical:{newScroll:this.$element.scrollTop(),oldScroll:this.oldScroll.y,forward:"down",backward:"up"}},!d||t.vertical.oldScroll&&t.vertical.newScroll||e[b]("refresh"),e.each(t,function(t){return function(n,r){var o,a,i;return i=[],a=r.newScroll>r.oldScroll,o=a?r.forward:r.backward,e.each(t.waypoints[n],function(e,t){var n,o;return r.oldScroll<(n=t.offset)&&n<=r.newScroll?i.push(t):r.newScroll<(o=t.offset)&&o<=r.oldScroll?i.push(t):void 0}),i.sort(function(e,t){return e.offset-t.offset}),a||i.reverse(),e.each(i,function(e,t){return t.options.continuous||e===i.length-1?t.trigger([o]):void 0})}}(this)),this.oldScroll={x:t.horizontal.newScroll,y:t.vertical.newScroll}},t.prototype.refresh=function(){var t,n,r;return r=e.isWindow(this.element),n=this.$element.offset(),this.doScroll(),t={horizontal:{contextOffset:r?0:n.left,contextScroll:r?0:this.oldScroll.x,contextDimension:this.$element.width(),oldScroll:this.oldScroll.x,forward:"right",backward:"left",offsetProp:"left"},vertical:{contextOffset:r?0:n.top,contextScroll:r?0:this.oldScroll.y,contextDimension:r?e[b]("viewportHeight"):this.$element.height(),oldScroll:this.oldScroll.y,forward:"down",backward:"up",offsetProp:"top"}},e.each(t,function(t){return function(n,r){return e.each(t.waypoints[n],function(t,n){var o,a,i,s,c;return o=n.options.offset,i=n.offset,a=e.isWindow(n.element)?0:n.$element.offset()[r.offsetProp],e.isFunction(o)?o=o.apply(n.element):"string"==typeof o&&(o=parseFloat(o),n.options.offset.indexOf("%")>-1&&(o=Math.ceil(r.contextDimension*o/100))),n.offset=a-r.contextOffset+r.contextScroll-o,n.options.onlyOnScroll&&null!=i||!n.enabled?void 0:null!==i&&i<(s=r.oldScroll)&&s<=n.offset?n.trigger([r.backward]):null!==i&&i>(c=r.oldScroll)&&c>=n.offset?n.trigger([r.forward]):null===i&&r.oldScroll>=n.offset?n.trigger([r.forward]):void 0})}}(this))},t.prototype.checkEmpty=function(){return e.isEmptyObject(this.waypoints.horizontal)&&e.isEmptyObject(this.waypoints.vertical)?(this.$element.unbind([f,m].join(" ")),delete u[this.id]):void 0},t}(),i=function(){function t(t,n,r){var o,a;r=e.extend({},e.fn[v].defaults,r),"bottom-in-view"===r.offset&&(r.offset=function(){var t;return t=e[b]("viewportHeight"),e.isWindow(n.element)||(t=n.$element.height()),t-e(this).outerHeight()}),this.$element=t,this.element=t[0],this.axis=r.horizontal?"horizontal":"vertical",this.callback=r.handler,this.context=n,this.enabled=r.enabled,this.id="waypoints"+g++,this.offset=null,this.options=r,n.waypoints[this.axis][this.id]=this,s[this.axis][this.id]=this,o=null!=(a=this.element[y])?a:[],o.push(this.id),this.element[y]=o}return t.prototype.trigger=function(e){return this.enabled?(null!=this.callback&&this.callback.apply(this.element,e),this.options.triggerOnce?this.destroy():void 0):void 0},t.prototype.disable=function(){return this.enabled=!1},t.prototype.enable=function(){return this.context.refresh(),this.enabled=!0},t.prototype.destroy=function(){return delete s[this.axis][this.id],delete this.context.waypoints[this.axis][this.id],this.context.checkEmpty()},t.getWaypointsByElement=function(t){var n,r;return(r=t[y])?(n=e.extend({},s.horizontal,s.vertical),e.map(r,function(e){return n[e]})):[]},t}(),p={init:function(t,n){return null==n&&(n={}),null==n.handler&&(n.handler=t),this.each(function(){var t,r,o,s;return t=e(this),o=null!=(s=n.context)?s:e.fn[v].defaults.context,e.isWindow(o)||(o=t.closest(o)),o=e(o),r=u[o[0][l]],r||(r=new a(o)),new i(t,r,n)}),e[b]("refresh"),this
},disable:function(){return p._invoke.call(this,"disable")},enable:function(){return p._invoke.call(this,"enable")},destroy:function(){return p._invoke.call(this,"destroy")},prev:function(e,t){return p._traverse.call(this,e,t,function(e,t,n){return t>0?e.push(n[t-1]):void 0})},next:function(e,t){return p._traverse.call(this,e,t,function(e,t,n){return t<n.length-1?e.push(n[t+1]):void 0})},_traverse:function(t,n,o){var a,i;return null==t&&(t="vertical"),null==n&&(n=r),i=h.aggregate(n),a=[],this.each(function(){var n;return n=e.inArray(this,i[t]),o(a,n,i[t])}),this.pushStack(a)},_invoke:function(t){return this.each(function(){var n;return n=i.getWaypointsByElement(this),e.each(n,function(e,n){return n[t](),!0})}),this}},e.fn[v]=function(){var t,r;return r=arguments[0],t=2<=arguments.length?n.call(arguments,1):[],p[r]?p[r].apply(this,t):e.isFunction(r)?p.init.apply(this,arguments):e.isPlainObject(r)?p.init.apply(this,[null,r]):r?e.error("The "+r+" method does not exist in jQuery Waypoints."):e.error("jQuery Waypoints needs a callback function or handler option.")},e.fn[v].defaults={context:r,continuous:!0,enabled:!0,horizontal:!1,offset:0,triggerOnce:!1},h={refresh:function(){return e.each(u,function(e,t){return t.refresh()})},viewportHeight:function(){var e;return null!=(e=r.innerHeight)?e:o.height()},aggregate:function(t){var n,r,o;return n=s,t&&(n=null!=(o=u[e(t)[0][l]])?o.waypoints:void 0),n?(r={horizontal:[],vertical:[]},e.each(r,function(t,o){return e.each(n[t],function(e,t){return o.push(t)}),o.sort(function(e,t){return e.offset-t.offset}),r[t]=e.map(o,function(e){return e.element}),r[t]=e.unique(r[t])}),r):[]},above:function(e){return null==e&&(e=r),h._filter(e,"vertical",function(e,t){return t.offset<=e.oldScroll.y})},below:function(e){return null==e&&(e=r),h._filter(e,"vertical",function(e,t){return t.offset>e.oldScroll.y})},left:function(e){return null==e&&(e=r),h._filter(e,"horizontal",function(e,t){return t.offset<=e.oldScroll.x})},right:function(e){return null==e&&(e=r),h._filter(e,"horizontal",function(e,t){return t.offset>e.oldScroll.x})},enable:function(){return h._invoke("enable")},disable:function(){return h._invoke("disable")},destroy:function(){return h._invoke("destroy")},extendFn:function(e,t){return p[e]=t},_invoke:function(t){var n;return n=e.extend({},s.vertical,s.horizontal),e.each(n,function(e,n){return n[t](),!0})},_filter:function(t,n,r){var o,a;return(o=u[e(t)[0][l]])?(a=[],e.each(o.waypoints[n],function(e,t){return r(o,t)?a.push(t):void 0}),a.sort(function(e,t){return e.offset-t.offset}),e.map(a,function(e){return e.element})):[]}},e[b]=function(){var e,t;return t=arguments[0],e=2<=arguments.length?n.call(arguments,1):[],h[t]?h[t].apply(null,e):h.aggregate.call(null,t)},e[b].settings={resizeThrottle:100,scrollThrottle:30},o.load(function(){return e[b]("refresh")})})}).call(this),"undefined"==typeof Package&&(Package={}),Package["jquery-waypoints"]={}}(),function(){Package.meteor.Meteor;"undefined"==typeof Package&&(Package={}),Package.less={}}(),function(){var e,t=(Package.meteor.Meteor,Package.underscore._),n=Package.spark.Spark,r=Package.handlebars.Handlebars;(function(){e={};var o={},a=Package.minimongo?Package.minimongo.LocalCollection._idStringify:function(e){return e},i=function(){i=function(){};var e=r._default_helpers.each;r._default_helpers.each=function(r,o){var i=function(){return!r||r instanceof Array||r instanceof Object&&"observeChanges"in r};if(!i())throw new Error("{{#each}} only accepts arrays, cursors, or falsey values. You passed: "+r);return r&&"observeChanges"in r?n.list(r,function(e){return n.labelBranch(e&&e._id&&a(e._id)||n.UNIQUE_LABEL,function(){var r=n.isolate(t.bind(o.fn,null,e));return n.setDataContext(e,r)})},function(){return o.inverse?n.isolate(o.inverse):""}):e.call(this,r,o)},t.extend(r._default_helpers,{isolate:function(e){var t=this;return n.isolate(function(){return e.fn(t)})},constant:function(e){var t=this;return n.createLandmark({constant:!0},function(){return e.fn(t)})}})},s={},c=function(e){var t=s[e.id]||(s[e.id]={find:function(t){if(!e.hasDom())throw new Error("Template not in DOM");return e.find(t)},findAll:function(t){if(!e.hasDom())throw new Error("Template not in DOM");return e.findAll(t)}});return t.firstNode=e.hasDom()?e.firstNode():null,t.lastNode=e.hasDom()?e.lastNode():null,t},l={_tmpl_data:null,events:function(e){var n=this._tmpl_data.events=this._tmpl_data.events||{};t.each(e,function(e,t){n[t]=n[t]||[],n[t].push(e)})},preserve:function(e){var n=this._tmpl_data.preserve=this._tmpl_data.preserve||{};t.isArray(e)?t.each(e,function(e){n[e]=!0}):t.extend(n,e)},helpers:function(e){var t=this._tmpl_data.helpers=this._tmpl_data.helpers||{};for(var n in e)t[n]=e[n]}};e.__define__=function(a,u){if(i(),"__define__"===a)throw new Error("Sorry, '__define__' is a special name and cannot be used as the name of a template");var d=function(r){var i=a&&e[a]||{},h=i._tmpl_data||{},p=n.labelBranch("Template."+a,function(){var e=n.createLandmark({preserve:h.preserve||{},created:function(){var e=c(this);e.data=r,i.created&&i.created.call(e)},rendered:function(){var e=c(this);e.data=r,i.rendered&&i.rendered.call(e)},destroyed:function(){i.destroyed&&i.destroyed.call(c(this)),delete s[this.id]}},function(){var e=n.isolate(function(){return u(r,{helpers:t.extend({},d,h.helpers||{}),partials:o,name:a})}),s=function(e){var n={};return t.each(e,function(e,r){"function"==typeof e&&(e=[e]),n[r]=t.map(e,function(e){return function(t,n){return e.call(this,t,c(n))}})}),n},p=i.events!==l.events?i.events:h.events;return i.events&&(e=n.attachEvents(s(p),e)),e});return e=n.setDataContext(r,e)});return p};if(t.extend(d,r.helpers),a){if(e[a])throw new Error("There are multiple templates named '"+a+"'. Each template needs a unique name.");e[a]=d,t.extend(d,l),d._tmpl_data={},o[a]=d}return d}}).call(this),"undefined"==typeof Package&&(Package={}),Package.templating={Template:e}}(),function(){Package.meteor.Meteor,Package.templating.Template,Package.underscore._,Package.spark.Spark;"undefined"==typeof Package&&(Package={}),Package.spiderable={}}(),function(){var e=Package.meteor.Meteor,t=Package.reload.Reload;(function(){if(window.applicationCache){var n=!1,r=null,o=!1;t._onMigrate("appcache",function(t){if(o)return[!0];if(window.applicationCache.status===window.applicationCache.UNCACHED)return[!0];if(!n){try{window.applicationCache.update()}catch(a){return e._debug("applicationCache update error",a),[!0]}n=!0}return r=t,!1});var a=function(){n&&(o=!0,r())};window.applicationCache.addEventListener("updateready",a,!1),window.applicationCache.addEventListener("noupdate",a,!1),window.applicationCache.addEventListener("obsolete",function(){r?a():(o=!0,t._reload())},!1)}}).call(this),"undefined"==typeof Package&&(Package={}),Package.appcache={}}(),function(){var e,t=(Package.meteor.Meteor,Package.underscore._);(function(){e={_isCssLoaded:function(){return 0===document.styleSheets.length?!0:t.find(document.styleSheets,function(e){return e.cssText&&!e.cssRules?!e.cssText.match(/meteor-css-not-found-error/):!t.find(e.cssRules,function(e){return".meteor-css-not-found-error"===e.selectorText})})}}}).call(this),"undefined"==typeof Package&&(Package={}),Package.webapp={WebApp:e}}(),function(){var e,t=Package.meteor.Meteor,n=Package.underscore._,r=Package.deps.Deps,o=Package.ejson.EJSON;(function(){var a=function(e){return void 0===e?"undefined":o.stringify(e)},i=function(e){return void 0===e||"undefined"===e?void 0:o.parse(e)};e=function(e){this.keys=e||{},this.keyDeps={},this.keyValueDeps={}},n.extend(e.prototype,{set:function(e,t){var r=this;t=a(t);var o="undefined";if(n.has(r.keys,e)&&(o=r.keys[e]),t!==o){r.keys[e]=t;var i=function(e){e&&e.changed()};i(r.keyDeps[e]),r.keyValueDeps[e]&&(i(r.keyValueDeps[e][o]),i(r.keyValueDeps[e][t]))}},setDefault:function(e,t){var n=this;void 0===n.keys[e]&&n.set(e,t)},get:function(e){var t=this;return t._ensureKey(e),t.keyDeps[e].depend(),i(t.keys[e])},equals:function(e,s){var c=this,l=Package["mongo-livedata"]&&t.Collection.ObjectID;if(!("string"==typeof s||"number"==typeof s||"boolean"==typeof s||"undefined"==typeof s||s instanceof Date||l&&s instanceof l||null===s))throw new Error("ReactiveDict.equals: value must be scalar");var u=a(s);if(r.active){c._ensureKey(e),n.has(c.keyValueDeps[e],u)||(c.keyValueDeps[e][u]=new r.Dependency);var d=c.keyValueDeps[e][u].depend();d&&r.onInvalidate(function(){c.keyValueDeps[e][u].hasDependents()||delete c.keyValueDeps[e][u]})}var h=void 0;return n.has(c.keys,e)&&(h=i(c.keys[e])),o.equals(h,s)},_ensureKey:function(e){var t=this;e in t.keyDeps||(t.keyDeps[e]=new r.Dependency,t.keyValueDeps[e]={})},getMigrationData:function(){return this.keys}})}).call(this),"undefined"==typeof Package&&(Package={}),Package["reactive-dict"]={ReactiveDict:e}}(),function(){{var e,t=(Package.meteor.Meteor,Package.underscore._,Package["reactive-dict"].ReactiveDict);Package.ejson.EJSON}(function(){var n={};if(Package.reload){var r=Package.reload.Reload._migrationData("session");r&&r.keys&&(n=r.keys)}e=new t(n),Package.reload&&Package.reload.Reload._onMigrate("session",function(){return[!0,{keys:e.keys}]})}).call(this),"undefined"==typeof Package&&(Package={}),Package.session={Session:e}}(),$=Package.jquery.$,jQuery=Package.jquery.jQuery,_=Package.underscore._,Showdown=Package.showdown.Showdown,Handlebars=Package.handlebars.Handlebars,Meteor=Package.meteor.Meteor,WebApp=Package.webapp.WebApp,Log=Package.logging.Log,Deps=Package.deps.Deps,Session=Package.session.Session,DDP=Package.livedata.DDP,Template=Package.templating.Template,check=Package.check.check,Match=Package.check.Match,Random=Package.random.Random,EJSON=Package.ejson.EJSON,Spark=Package.spark.Spark,function(){Template.__define__("pkg_accounts_ui",Package.handlebars.Handlebars.json_ast_to_func([["#",[[0,"better_markdown"]],["\n## `accounts-ui`\n\nA turn-key user interface for Meteor Accounts.\n\nTo add Accounts and a set of login controls to an application, add the\n`accounts-ui` package and at least one login provider package:\n`accounts-password`, `accounts-facebook`, `accounts-github`,\n`accounts-google`, `accounts-twitter`, or `accounts-weibo`.\n\nThen simply add the `",["{",[[0,"dstache"]]],'loginButtons}}` helper to an HTML file. This\nwill place a login widget on the page. If there is only one provider configured\nand it is an external service, this will add a login/logout button. If you use\n`accounts-password` or use multiple external login services, this will add\na "Sign in" link which opens a dropdown menu with login options. If you plan to\nposition the login dropdown in the right edge of the screen, use\n`',["{",[[0,"dstache"]]],'loginButtons align="right"}}` in order to get the dropdown to lay\nitself out without expanding off the edge of the screen.\n\nTo configure the behavior of `',["{",[[0,"dstache"]]],"loginButtons}}`, use\n[`Accounts.ui.config`](#accounts_ui_config).\n\n`accounts-ui` also includes modal popup dialogs to handle links from\n[`sendResetPasswordEmail`](#accounts_sendresetpasswordemail), [`sendVerificationEmail`](#accounts_sendverificationemail),\nand [`sendEnrollmentEmail`](#accounts_sendenrollmentemail). These\ndo not have to be manually placed in HTML: they are automatically activated\nwhen the URLs are loaded.\n\n\n\n"]]]))}(),function(){Template.__define__("pkg_amplify",Package.handlebars.Handlebars.json_ast_to_func([["#",[[0,"better_markdown"]],["\n\n## `amplify`\n\n[Amplify](http://amplifyjs.com/) provides a simple cross-browser API for HTML5 local storage, an\nin-browser communication channel for loosely coupling application\ncomponents, and several useful utility functions.\n\nAmplify defines a global namespace `amplify` on the client only. It does\nnot run on the server.\n\n"]]]))}(),function(){Template.__define__("pkg_appcache",Package.handlebars.Handlebars.json_ast_to_func([["#",[[0,"better_markdown"]],["\n\n## `appcache`\n\nThe `appcache` package stores the static parts of a Meteor application\n(the client side Javascript, HTML, CSS, and images) in the browser's\n[application cache](https://en.wikipedia.org/wiki/AppCache). To enable\ncaching simply add the `appcache` package to your project.\n\n* Once a user has visited a Meteor application for the first time and\n  the application has been cached, on subsequent visits the web page\n  loads faster because the browser can load the application out of the\n  cache without contacting the server first.\n\n* Hot code pushes are loaded by the browser in the background while the\n  app continues to run.  Once the new code has been fully loaded the\n  browser is able to switch over to the new code quickly.\n\n* The application cache allows the application to be loaded even when\n  the browser doesn't have an Internet connection, and so enables using\n  the app offline.\n\n(Note however that the `appcache` package by itself doesn't make\n*data* available offline: in an application loaded offline, a Meteor\nCollection will appear to be empty in the client until the Internet\nbecomes available and the browser is able to establish a livedata\nconnection).\n\nThe application cache works transparently in all supported browsers\nexcept for Firefox, which pops up a message saying \"This website is\nasking to store data on your computer for offline use\" and asks the\nuser whether to allow or deny the request.  The application cache is\ndisabled on Firefox by default; to turn it on use:\n\n    Meteor.AppCache.config({firefox: true});\n\nYou can also disable the application cache for specific browsers:\n\n    Meteor.AppCache.config({\n      chrome: false,\n      firefox: true,\n      ie: false\n    });\n\nThe supported browsers that can be enabled or disabled are `android`,\n`chrome`, `chromium`, `chromeMobileIOS`, `firefox`, `ie`,\n`mobileSafari` and `safari`.\n\nBrowsers limit the amount of data they will put in the application\ncache, which can vary due to factors such as how much disk space is\nfree.  Unfortunately if your application goes over the limit rather\nthan disabling the application cache altogether and running the\napplication online, the browser will instead fail that particular\n*update* of the cache, leaving your users running old code.\n\nThus it's best to keep the size of the cache below 5MB.  The\n`appcache` package will print a warning on the Meteor server console\nif the total size of the resources being cached is over 5MB.\n\nIf you have files too large to fit in the cache you can disable\ncaching by URL prefix.  For example,\n\n    Meteor.AppCache.config({onlineOnly: ['/online/']});\n\ncauses files in your `public/online` directory to not be cached, and\nso they will only be available online.  You can then move your large\nfiles into that directory and refer to them at the new URL:\n\n    <img src=\"/online/bigimage.jpg\">\n\nIf you'd prefer not to move your files, you can use the file names\nthemselves as the URL prefix:\n\n    Meteor.AppCache.config({\n      onlineOnly: [\n        '/bigimage.jpg',\n        '/largedata.json'\n      ]\n    });\n\nthough keep in mind that since the exclusion is by prefix (this is a\nlimitation of the application cache manifest), excluding\n`/largedata.json` will also exclude such URLs as\n`/largedata.json.orig` and `/largedata.json/file1`.\n\nFor more information about how Meteor interacts with the application\ncache, see the\n[AppCache page](https://github.com/meteor/meteor/wiki/AppCache)\nin the Meteor wiki.\n\n"]]]))}(),function(){Template.__define__("pkg_audit_argument_checks",Package.handlebars.Handlebars.json_ast_to_func([["#",[[0,"better_markdown"]],["\n\n## `audit-argument-checks`\n\nThis package causes Meteor to require that all arguments passed to methods and\npublish functions are [`check`ed](#check). Any method that does not pass each\none of its arguments to `check` will throw an error, which will be logged on the\nserver and which will appear to the client as a\n`500 Internal server error`. This is a simple way to help ensure that your\napp has complete check coverage.\n\nMethods and publish functions that do not need to validate their arguments can\nsimply run `check(arguments, [Match.Any])` to satisfy the\n`audit-argument-checks` coverage checker.\n\n"]]]))}(),function(){Template.__define__("pkg_backbone",Package.handlebars.Handlebars.json_ast_to_func([["#",[[0,"better_markdown"]],["\n## `backbone`\n\n[Backbone](http://documentcloud.github.com/backbone/) is a popular client-side MVC framework for managing complex\ndata in the browser. In addition to the MVC and DOM-binding\nfunctionality, it also provides an API for HTML5 pushState and\nclient-side URL routing.\n\n"]]]))}(),function(){Template.__define__("pkg_bootstrap",Package.handlebars.Handlebars.json_ast_to_func([["#",[[0,"better_markdown"]],["\n## `bootstrap`\n\n[Twitter's Bootstrap](http://twitter.github.com/bootstrap/) package is a front-end toolkit for faster, more\nbeautiful web development.  Bootstrap provides simple and flexible HTML,\nCSS, and JavaScript for popular user interface components and\ninteractions including typography, forms, buttons, tables, grids, and\nnavigation.\n\n\n"]]]))}(),function(){Template.__define__("pkg_browser_policy",Package.handlebars.Handlebars.json_ast_to_func([["#",[[0,"better_markdown"]],['\n## `browser-policy`\n\nThe `browser-policy` package lets you set security-related policies that will be\nenforced by newer browsers. These policies help you prevent and mitigate common\nattacks like cross-site scripting and clickjacking.\n\nWhen you add `browser-policy` to your app, you get default configurations for\nthe HTTP headers X-Frame-Options and Content-Security-Policy. X-Frame-Options\ntells the browser which websites are allowed to frame your app. You should only\nlet trusted websites frame your app, because malicious sites could harm your\nusers with <a href="https://www.owasp.org/index.php/Clickjacking">clickjacking\nattacks</a>.\n<a href="https://developer.mozilla.org/en-US/docs/Security/CSP/Introducing_Content_Security_Policy">Content-Security-Policy</a>\ntells the browser where your app can load content from, which encourages safe\npractices and mitigates the damage of a cross-site-scripting attack.\n`browser-policy` also provides functions for you to configure these policies if\nthe defaults are not suitable.\n\nIf you only want to use Content-Security-Policy or X-Frame-Options but not both,\nyou can add the individual packages `browser-policy-content` or\n`browser-policy-framing` instead of `browser-policy`.\n\nFor most apps, we recommend that you take the following steps:\n\n* Add `browser-policy` to your app to enable a starter policy. With this starter\npolicy, your app\'s client code will be able to load content (images, scripts,\nfonts, etc.) only from its own origin, except that XMLHttpRequests and WebSocket\nconnections can go to any origin. Further, your app\'s client code will not be\nable to use functions such as `eval()` that convert strings to code. Users\'\nbrowsers will only let your app be framed by web pages on the same origin as\nyour app.\n* You can use the functions described below to customize the policies. If your\napp does not need any inline Javascript such as inline `<script>` tags, we\nrecommend that you modify the policy by calling\n`BrowserPolicy.content.disallowInlineScripts()` in server code. This will result\nin one extra round trip when your app is loaded, but will help prevent\ncross-site scripting attacks by disabling all scripts except those loaded from a\n`script src` attribute.\n\nMeteor determines the browser policy when the server starts up, so you should\ncall `BrowserPolicy` functions on the server in top-level application code or in\n`Meteor.startup`. `BrowserPolicy` functions cannot be used in client code.\n\n#### Frame options\n\nBy default, if you add `browser-policy` or `browser-policy-framing`, only web\npages on the same origin as your app are allowed to frame your app. You can use\nthe following functions to modify this policy.\n<dl class="callbacks">\n',["#",[[0,"dtdd"],"BrowserPolicy.framing.disallow()"],["\nYour app will never render inside a frame or iframe.\n"]],"\n\n",["#",[[0,"dtdd"],"BrowserPolicy.framing.restrictToOrigin(origin)"],['\nYour app will only render inside frames loaded by `origin`. You can only call\nthis function once with a single origin, and cannot use wildcards or specify\nmultiple origins that are allowed to frame your app. (This is a limitation of\nthe X-Frame-Options header.) Example values of `origin` include\n"http://example.com" and "https://foo.example.com".\n',["#",[[0,"warning"]],["\nThis value of the X-Frame-Options header is not yet supported in Chrome or\nSafari and will be ignored in those browsers.\n"]],"\n"]],"\n\n",["#",[[0,"dtdd"],"BrowserPolicy.framing.allowAll()"],["\nThis unsets the X-Frame-Options header, so that your app can be framed by\nany webpage.\n"]],'\n</dl>\n\n#### Content options\n\nYou can use the functions in this section to control how different types of\ncontent can be loaded on your site.\n\nYou can use the following functions to adjust policies on where Javascript and\nCSS can be run:\n\n<dl class="callbacks">\n',["#",[[0,"dtdd"],"BrowserPolicy.content.allowInlineScripts()"],["\nAllows inline `<script>` tags, `javascript:` URLs, and inline event handlers.\nThe default policy already allows inline scripts.\n"]],"\n\n",["#",[[0,"dtdd"],"BrowserPolicy.content.disallowInlineScripts()"],["\nDisallows inline Javascript. Calling this function results in an extra\nround-trip on page load to retrieve Meteor runtime configuration that is usually\npart of an inline script tag.\n"]],"\n\n",["#",[[0,"dtdd"],"BrowserPolicy.content.allowEval()"],["\nAllows the creation of Javascript code from strings using function such as `eval()`.\n"]],"\n\n",["#",[[0,"dtdd"],"BrowserPolicy.content.disallowEval()"],["\nDisallows eval and related functions. The default policy already disallows eval.\n"]],"\n\n",["#",[[0,"dtdd"],"BrowserPolicy.content.allowInlineStyles()"],["\nAllows inline style tags and style attributes. The default policy already allows\ninline styles.\n"]],"\n\n",["#",[[0,"dtdd"],"BrowserPolicy.content.disallowInlineStyles()"],["\nDisallows inline CSS.\n"]],'\n</dl>\n\nFinally, you can configure a whitelist of allowed requests that various types of\ncontent can make. The following functions are defined for the content types\nscript, object, image, media, font, frame, and connect.\n\n<dl class="callbacks">\n',["#",[[0,"dtdd"],"BrowserPolicy.content.allow&lt;ContentType&gt;Origin(origin)"],["\nAllows this type of content to be loaded from the given origin. `origin` is a\nstring and can include an optional scheme (such as `http` or `https`), an\noptional wildcard at the beginning, and an optional port which can be a\nwildcard. Examples include `example.com`, `https://*.example.com`, and\n`example.com:*`. You can call these functions multiple times with\ndifferent origins to specify a whitelist of allowed origins. Origins\nthat don't specify a protocol will allow content over both HTTP and\nHTTPS: passing `example.com` will allow content from both\n`http://example.com` and `https://example.com`.\n"]],"\n\n",["#",[[0,"dtdd"],"BrowserPolicy.content.allow&lt;ContentType&gt;DataUrl()"],["\nAllows this type of content to be loaded from a `data:` URL.\n"]],"\n\n",["#",[[0,"dtdd"],"BrowserPolicy.content.allow&lt;ContentType&gt;SameOrigin()"],["\nAllows this type of content to be loaded from the same origin as your app.\n"]],"\n\n",["#",[[0,"dtdd"],"BrowserPolicy.content.disallow&lt;ContentType&gt;()"],["\nDisallows this type of content on your app.\n"]],'\n</dl>\n\nYou can also set policies for all these types of content at once, using these\nfunctions:\n\n* `BrowserPolicy.content.allowSameOriginForAll()`,\n* `BrowserPolicy.content.allowDataUrlForAll()`,\n* `BrowserPolicy.content.allowOriginForAll(origin)`\n* `BrowserPolicy.content.disallowAll()`\n\nFor example, if you want to allow the\norigin `https://foo.com` for all types of content but you want to disable\n`<object>` tags, you can call\n`BrowserPolicy.content.allowOriginForAll("https://foo.com")` followed by\n`BrowserPolicy.content.disallowObject()`.\n\nOther examples of using the `BrowserPolicy.content` API:\n\n* `BrowserPolicy.content.disallowFont()` causes the browser to disallow all\n`<font>` tags.\n* `BrowserPolicy.content.allowImageOrigin("https://example.com")`\nallows images to have their `src` attributes point to images served from\n`https://example.com`.\n* `BrowserPolicy.content.allowConnectOrigin("https://example.com")` allows XMLHttpRequest\nand WebSocket connections to `https://example.com`.\n* `BrowserPolicy.content.allowFrameOrigin("https://example.com")` allows\nyour site to load the origin `https://example.com` in a frame or\niframe. The `BrowserPolicy.framing` API allows you to control which\nsites can frame your site, while\n`BrowserPolicy.content.allowFrameOrigin` allows you to control which\nsites can be loaded inside frames on your site.\n\n\n']]]))}(),function(){Template.__define__("pkg_coffeescript",Package.handlebars.Handlebars.json_ast_to_func([["#",[[0,"better_markdown"]],["\n## `coffeescript`\n\n[CoffeeScript](http://coffeescript.org/) is a little language that\ncompiles into JavaScript. It provides a simple syntax without lots of\nbraces and parentheses.  The code compiles one-to-one into the\nequivalent JS, and there is no interpretation at runtime.\n\nCoffeeScript is supported on both the client and the server. Files\nending with `.coffee`, `.litcoffee`, or `.coffee.md` are automatically\ncompiled to JavaScript.\n\n### Namespacing and CoffeeScript\n\nHere's how CoffeeScript works with Meteor's namespacing.\n\n* Per the usual CoffeeScript convention, CoffeeScript variable are\n  file-scoped by default (visible only in the `.coffee` file where\n  they are defined.)\n\n* When writing a package, CoffeeScript-defined variables can be\n  exported like any other variable (see [Writing\n  Packages](#writingpackages)). Exporting a variable pulls it up to\n  package scope, meaning that it will be visible to all of the code in\n  your app or package (both `.js` and `.coffee` files).\n\n* Package-scope variables declared in `.js` files are visible in any\n  `.coffee` files in the same app or project.\n\n* There is no way to make a package-scope variable from a `.coffee`\n  file other than exporting it. We couldn't figure out a way to make\n  this fit naturally inside the CoffeeScript language. If you want to\n  use package-scope variables with CoffeeScript, one way is to make a\n  short `.js` file that declares all of your package-scope\n  variables. They can then be used and assigned to from `.coffee`\n  files.\n\n* If you want to share variables between `.coffee` files in the same\n  package, and don't want to separately declare them in a `.js` file,\n  we have an experimental feature that you may like. An object called\n  `share` is visible in CoffeeScript code and is shared across all\n  `.coffee` files in the same package. So, you can write `share.foo`\n  for a value that is shared between all CoffeeScript code in a\n  package, but doesn't escape that package.\n\nHeavy CoffeeScript users, please let us know how this arrangement\nworks for you, whether `share` is helpful for you, and anything else\nyou'd like to see changed.\n\n"]]]))}(),function(){Template.__define__("pkg_d3",Package.handlebars.Handlebars.json_ast_to_func([["#",[[0,"better_markdown"]],["\n\n## `d3`\n\n[D3.js](http://d3js.org/) is a JavaScript library for manipulating\ndocuments based on data. D3 helps you bring data to life using HTML, SVG\nand CSS. D3's emphasis on web standards gives you the full capabilities\nof modern browsers without tying yourself to a proprietary framework,\ncombining powerful visualization components and a data-driven approach\nto DOM manipulation.\n\nThe `d3` package adds the D3 library to the client JavaScript\nbundle. It has no effect on the server.\n\n"]]]))}(),function(){Template.__define__("pkg_force_ssl",Package.handlebars.Handlebars.json_ast_to_func([["#",[[0,"better_markdown"]],["\n## `force-ssl`\n\nThis package causes Meteor to redirect insecure connections (HTTP) to a\nsecure URL (HTTPS). Use this package to ensure that communication to the\nserver is always encrypted to protect users from active spoofing\nattacks.\n\nTo simplify development, unencrypted connections from `localhost` are\nalways accepted over HTTP.\n\nApplication bundles (`meteor bundle`) do not include an HTTPS server or\ncertificate. A proxy server that terminates SSL in front of a Meteor\nbundle must set the standard `x-forwarded-proto` header for the\n`force-ssl` package to work.\n\nApplications deployed to `meteor.com` subdomains with\n`meteor deploy` are automatically served via HTTPS using Meteor's\ncertificate.\n\n"]]]))}(),function(){Template.__define__("pkg_jquery",Package.handlebars.Handlebars.json_ast_to_func([["#",[[0,"better_markdown"]],["\n\n## `jquery`\n\n[jQuery](http://jquery.com/) is a fast and concise JavaScript\nLibrary that simplifies HTML document traversing, event handling,\nanimating, and Ajax interactions for rapid web development.\n\nThe `jquery` package adds the jQuery library to the client JavaScript\nbundle. It has no effect on the server.\n\nIn addition to the `jquery` package, Meteor provides several jQuery\nplugins as separate packages. These include:\n\n* [`jquery-history`](https://github.com/balupton/history.js)\n* [`jquery-layout`](http://layout.jquery-dev.net/)\n* [`jquery-waypoints`](http://imakewebthings.com/jquery-waypoints/)\n\n"]]]))}(),function(){Template.__define__("pkg_less",Package.handlebars.Handlebars.json_ast_to_func([["#",[[0,"better_markdown"]],["\n## `less`\n\n[LESS](http://lesscss.org/) extends CSS with dynamic behavior such as variables, mixins,\noperations and functions. It allows for more compact stylesheets and\nhelps reduce code duplication in CSS files.\n\nWith the `less` package installed, `.less` files in your application are\nautomatically compiled to CSS and the results are included in the client CSS\nbundle.\n\n",["#",[[0,"note"]],["\nIf you want to `@import` a file, give it the extension `.import.less`\nto prevent Meteor from processing it independently.\n"]],"\n\n"]]]))}(),function(){Template.__define__("pkg_random",Package.handlebars.Handlebars.json_ast_to_func([["#",[[0,"better_markdown"]],['\n## `random`\n\nThe `random` package provides several functions for generating random\nnumbers. It uses a cryptographically strong pseudorandom number generator when\npossible, but falls back to a weaker random number generator when\ncryptographically strong randomness is not available (on older browsers or on\nservers that don\'t have enough entropy to seed the cryptographically strong\ngenerator).\n\n<dl class="callbacks">\n',["#",[[0,"dtdd"],"Random.id()"],['\nReturns a unique identifier, such as `"Jjwjg6gouWLXhMGKW"`, that is likely to\nbe unique in the whole world.\n']],"\n\n",["#",[[0,"dtdd"],"Random.fraction()"],["\nReturns a number between 0 and 1, like `Math.random`.\n"]],"\n\n",["#",[[0,"dtdd"],"Random.choice(arrayOrString)"],["\nReturns a random element of the given array or string.\n"]],"\n\n",["#",[[0,"dtdd"],"Random.hexString(n)"],["\nReturns a random string of `n` hexadecimal digits.\n"]],"\n</dl>\n\n"]]]))}(),function(){Template.__define__("pkg_showdown",Package.handlebars.Handlebars.json_ast_to_func([["#",[[0,"markdown"]],["\n\n## `showdown`\n<!-- XXX rename to markdown when we rename the package -->\n\nThis package lets you use Markdown in your templates. It's easy: just\nput your markdown inside\n<code>{&#123;#markdown}}</code> ... <code>{&#123;/markdown}}</code>\ntags. You can still use all of the usual Meteor template features\ninside a Markdown block, such `#each`, and you still get reactivity.\n\n<!-- XXX include an example -->\n\n"]]]))}(),function(){Template.__define__("pkg_spiderable",Package.handlebars.Handlebars.json_ast_to_func([["#",[[0,"better_markdown"]],["\n## `spiderable`\n\n\nThe `spiderable` package is a temporary solution to allow web search engines to\nindex a Meteor application. It uses the [AJAX Crawling\nspecification](https://developers.google.com/webmasters/ajax-crawling/)\npublished by Google to serve HTML to compatible spiders (Google, Bing, Yandex,\nand more).\n\nWhen a spider requests an HTML snapshot of a page the Meteor server runs the\nclient half of the application inside [phantomjs](http://phantomjs.org/), a\nheadless browser, and returns the full HTML generated by the client code.\n\n",["#",[[0,"warning"]],["\nThis is a temporary approach to allow Meteor applications to be\nsearchable. Expect significant changes to this package.\n"]],'\n\nIn order to have links between multiple pages on a site visible to spiders, apps\nmust use real links (eg `<a href="/about">`) rather than simply re-rendering\nportions of the page when an element is clicked. Apps should render their\ncontent based on the URL of the page and can use [HTML5\npushState](https://developer.mozilla.org/en-US/docs/DOM/Manipulating_the_browser_history)\nto alter the URL on the client without triggering a page reload. See the [Todos\nexample](http://meteor.com/examples/todos) for a demonstration.\n\n\n',["#",[[0,"warning"]],["\nIf you deploy your application with `meteor bundle`, you must install\n`phantomjs` ([http://phantomjs.org](http://phantomjs.org/)) somewhere in your\n`$PATH`. If you use `meteor deploy` this is already taken care of.\n"]],"\n\n\n"]]]))
}(),function(){Template.__define__("pkg_stylus",Package.handlebars.Handlebars.json_ast_to_func([["#",[[0,"better_markdown"]],["\n## `stylus`\n\n[Stylus](http://learnboost.github.com/stylus/) is a CSS pre-processor with a simple syntax and expressive\ndynamic behavior. It allows for more compact stylesheets and\nhelps reduce code duplication in CSS files.\n\nWith the `stylus` package installed, `.styl` files in your application are\nautomatically compiled to CSS and the results are included in the client\nCSS bundle.\n\nThe `stylus` package also includes `nib` support. Add `@import 'nib'` to\nyour `.styl` files to enable cross-browser mixins such as\n`linear-gradient` and `border-radius`.\n\n",["#",[[0,"note"]],["\nIf you want to `@import` a file, give it the extension `.import.styl`\nto prevent Meteor from processing it independently.\n"]],"\n\nSee <http://visionmedia.github.com/nib> for documentation of the nib extensions of Stylus.\n\n"]]]))}(),function(){Template.__define__("pkg_underscore",Package.handlebars.Handlebars.json_ast_to_func([["#",[[0,"better_markdown"]],["\n## `underscore`\n\n[Underscore](http://underscorejs.org/) is a utility-belt library for \nJavaScript that provides support for functional programming. It is \ninvaluable for writing clear, concise JavaScript in a functional style.\n\nThe `underscore` package defines the `_` namespace on both the client\nand the server.\n\n\n",["#",[[0,"warning"]],["\nCurrently, underscore is included in all projects, as the Meteor\ncore depends on it. _ is available in the global namespace on both the\nclient and the server even if you do not include this package. However\nif you do use underscore in your application, you should still add the\npackage as we will remove the default underscore in the future.\n"]],"\n\n",["#",[[0,"warning"]],["\nWe have slightly modified the way Underscore differentiates between\nobjects and arrays in [collection functions](http://underscorejs.org/#each).\nThe original Underscore logic is to treat any object with a numeric `length`\nproperty as an array (which helps it work properly on\n[`NodeList`s](https://developer.mozilla.org/en-US/docs/Web/API/NodeList)).\nIn Meteor's version of Underscore, objects with a numeric `length` property\nare treated as objects if they have no prototype (specifically, if\n`x.constructor === Object`.\n"]],"\n\n\n"]]]))}(),function(){Template.__define__("api",Package.handlebars.Handlebars.json_ast_to_func([["#",[[0,"better_markdown"]],['\n\n<h1 id="api">The Meteor API</h1>\n\nYour JavaScript code can run in two environments: the *client* (browser), and\nthe *server* (a [Node.js](http://nodejs.org/) container on a server).  For each\nfunction in this API reference, we\'ll indicate if the function is available just\non the client, just on the server, or *Anywhere*.\n\n<h2 id="core"><span>Meteor Core</span></h2>\n\n',["#",[[0,"with"],[0,"isClient"]],[[">","api_box"]]],"\n",["#",[[0,"with"],[0,"isServer"]],[[">","api_box"]]],"\n\n",["#",[[0,"note"]],["\n`Meteor.isServer` can be used to limit where code runs, but it does not\nprevent code from being sent to the client. Any sensitive code that you\ndon't want served to the client, such as code containing passwords or\nauthentication mechanisms, should be kept in the `server` directory.\n"]],"\n\n\n",["#",[[0,"with"],[0,"startup"]],[[">","api_box"]]],'\n\nOn a server, the function will run as soon as the server process is\nfinished starting. On a client, the function will run as soon as the DOM\nis ready.\n\nThe `startup` callbacks are called in the same order as the calls to\n`Meteor.startup` were made.\n\nOn a client, `startup` callbacks from packages will be called\nfirst, followed by `<body>` templates from your `.html` files,\nfollowed by your application code.\n\n    // On server startup, if the database is empty, create some initial data.\n    if (Meteor.isServer) {\n      Meteor.startup(function () {\n        if (Rooms.find().count() === 0) {\n          Rooms.insert({name: "Initial room"});\n        }\n      });\n    }\n\n',["#",[[0,"with"],[0,"absoluteUrl"]],[[">","api_box"]]],"\n\n",["#",[[0,"with"],[0,"settings"]],[[">","api_box"]]],"\n\n",["#",[[0,"with"],[0,"release"]],[[">","api_box"]]],'\n\n<h2 id="publishandsubscribe"><span>Publish and subscribe</span></h2>\n\nThese functions control how Meteor servers publish sets of records and\nhow clients can subscribe to those sets.\n\n',["#",[[0,"with"],[0,"publish"]],[[">","api_box"]]],"\n\nTo publish records to clients, call `Meteor.publish` on the server with\ntwo parameters: the name of the record set, and a *publish function*\nthat Meteor will call each time a client subscribes to the name.\n\nPublish functions can return a\n[`Collection.Cursor`](#meteor_collection_cursor), in which case Meteor\nwill publish that cursor's documents to each subscribed client. You can\nalso return an array of `Collection.Cursor`s, in which case Meteor will\npublish all of the cursors.\n\n",["#",[[0,"warning"]],["\nIf you return multiple cursors in an array, they currently must all be from\ndifferent collections. We hope to lift this restriction in a future release.\n"]],'\n\n    // server: publish the rooms collection, minus secret info.\n    Meteor.publish("rooms", function () {\n      return Rooms.find({}, {fields: {secretInfo: 0}});\n    });\n\n    // ... and publish secret info for rooms where the logged-in user\n    // is an admin. If the client subscribes to both streams, the records\n    // are merged together into the same documents in the Rooms collection.\n    Meteor.publish("adminSecretInfo", function () {\n      return Rooms.find({admin: this.userId}, {fields: {secretInfo: 1}});\n    });\n\n    // publish dependent documents and simulate joins\n    Meteor.publish("roomAndMessages", function (roomId) {\n      check(roomId, String);\n      return [\n        Rooms.find({_id: roomId}, {fields: {secretInfo: 0}}),\n        Messages.find({roomId: roomId})\n      ];\n    });\n\nAlternatively, a publish function can directly control its published\nrecord set by calling the functions [`added`](#publish_added) (to add a\nnew document to the published record set), [`changed`](#publish_changed)\n(to change or clear some fields on a document already in the published\nrecord set), and [`removed`](#publish_removed) (to remove documents from\nthe published record set).  Publish functions that use these functions\nshould also call [`ready`](#publish_ready) once the initial record set\nis complete.  These methods are provided by `this` in your publish\nfunction.\n\nExample:\n\n    // server: publish the current size of a collection\n    Meteor.publish("counts-by-room", function (roomId) {\n      var self = this;\n      check(roomId, String);\n      var count = 0;\n      var initializing = true;\n      var handle = Messages.find({roomId: roomId}).observeChanges({\n        added: function (id) {\n          count++;\n          if (!initializing)\n            self.changed("counts", roomId, {count: count});\n        },\n        removed: function (id) {\n          count--;\n          self.changed("counts", roomId, {count: count});\n        }\n        // don\'t care about changed\n      });\n\n      // Observe only returns after the initial added callbacks have\n      // run.  Now return an initial value and mark the subscription\n      // as ready.\n      initializing = false;\n      self.added("counts", roomId, {count: count});\n      self.ready();\n\n      // Stop observing the cursor when client unsubs.\n      // Stopping a subscription automatically takes\n      // care of sending the client any removed messages.\n      self.onStop(function () {\n        handle.stop();\n      });\n    });\n\n    // client: declare collection to hold count object\n    Counts = new Meteor.Collection("counts");\n\n    // client: subscribe to the count for the current room\n    Deps.autorun(function () {\n      Meteor.subscribe("counts-by-room", Session.get("roomId"));\n    });\n\n    // client: use the new collection\n    console.log("Current room has " +\n                Counts.findOne(Session.get("roomId")).count +\n                " messages.");\n\n',["#",[[0,"warning"]],["\nMeteor will emit a warning message if you call `Meteor.publish` in a\nproject that includes the `autopublish` package.  Your publish function\nwill still work.\n"]],"\n\n",["#",[[0,"with"],[0,"subscription_userId"]],[[">","api_box"]]],"\n\nThis is constant. However, if the logged-in user changes, the publish\nfunction is rerun with the new value.\n\n",["#",[[0,"with"],[0,"subscription_added"]],[[">","api_box"]]],"\n",["#",[[0,"with"],[0,"subscription_changed"]],[[">","api_box"]]],"\n",["#",[[0,"with"],[0,"subscription_removed"]],[[">","api_box"]]],"\n",["#",[[0,"with"],[0,"subscription_ready"]],[[">","api_box"]]],"\n\n",["#",[[0,"with"],[0,"subscription_onStop"]],[[">","api_box"]]],"\n\nIf you call [`observe`](#observe) or [`observeChanges`](#observe_changes) in your\npublish handler, this is the place to stop the observes.\n\n",["#",[[0,"with"],[0,"subscription_error"]],[[">","api_box"]]],"\n",["#",[[0,"with"],[0,"subscription_stop"]],[[">","api_box"]]],"\n\n",["#",[[0,"with"],[0,"subscription_connection"]],[[">","api_box"]]],"\n\n",["#",[[0,"with"],[0,"subscribe"]],[[">","api_box"]]],'\n\nWhen you subscribe to a record set, it tells the server to send records to the\nclient.  The client stores these records in local [Minimongo\ncollections](#meteor_collection), with the same name as the `collection`\nargument used in the publish handler\'s `added`, `changed`, and `removed`\ncallbacks.  Meteor will queue incoming attributes until you declare the\n[`Meteor.Collection`](#meteor_collection) on the client with the matching\ncollection name.\n\n    // okay to subscribe (and possibly receive data) before declaring\n    // the client collection that will hold it.  assume "allplayers"\n    // publishes data from server\'s "players" collection.\n    Meteor.subscribe("allplayers");\n    ...\n    // client queues incoming players records until ...\n    ...\n    Players = new Meteor.Collection("players");\n\nThe client will see a document if the document is currently in the published\nrecord set of any of its subscriptions.\n\nThe `onReady` callback is called with no arguments when the server\n[marks the subscription as ready](#publish_ready). The `onError` callback is\ncalled with a [`Meteor.Error`](#meteor_error) if the subscription fails or is\nterminated by the server.\n\n`Meteor.subscribe` returns a subscription handle, which is an object with the\nfollowing methods:\n\n<dl class="callbacks">\n',["#",[[0,"dtdd"],"stop()"],["\nCancel the subscription. This will typically result in the server directing the\nclient to remove the subscription's data from the client's cache.\n"]],"\n\n",["#",[[0,"dtdd"],"ready()"],["\nTrue if the server has [marked the subscription as ready](#publish_ready). A\nreactive data source.\n"]],'\n</dl>\n\nIf you call `Meteor.subscribe` within a [reactive computation](#reactivity),\nfor example using\n[`Deps.autorun`](#deps_autorun), the subscription will automatically be\ncancelled when the computation is invalidated or stopped; it\'s not necessary\nto call `stop` on\nsubscriptions made from inside `autorun`. However, if the next iteration\nof your run function subscribes to the same record set (same name and\nparameters), Meteor is smart enough to skip a wasteful\nunsubscribe/resubscribe. For example:\n\n    Deps.autorun(function () {\n      Meteor.subscribe("chat", {room: Session.get("current-room")});\n      Meteor.subscribe("privateMessages");\n    });\n\nThis subscribes you to the chat messages in the current room and to your private\nmessages. When you change rooms by calling `Session.set("current-room",\n"new-room")`, Meteor will subscribe to the new room\'s chat messages,\nunsubscribe from the original room\'s chat messages, and continue to\nstay subscribed to your private messages.\n\nIf more than one subscription sends conflicting values for a field (same\ncollection name, document ID, and field name), then the value on the client will\nbe one of the published values, chosen arbitrarily.\n\n<h2 id="methods_header"><span>Methods</span></h2>\n\nMethods are remote functions that Meteor clients can invoke.\n\n',["#",[[0,"with"],[0,"methods"]],[[">","api_box"]]],"\n\nExample:\n\n    Meteor.methods({\n      foo: function (arg1, arg2) {\n        check(arg1, String);\n        check(arg2, [Number]);\n        // .. do stuff ..\n        if (you want to throw an error)\n          throw new Meteor.Error(404, \"Can't find my pants\");\n        return \"some return value\";\n      },\n\n      bar: function () {\n        // .. do other stuff ..\n        return \"baz\";\n      }\n    });\n\nCalling `methods` on the server defines functions that can be called remotely by\nclients.  They should return an [EJSON](#ejson)-able value or throw an\nexception.  Inside your method invocation, `this` is bound to a method\ninvocation object, which provides the following:\n\n* `isSimulation`: a boolean value, true if this invocation is a stub.\n* `unblock`: when called, allows the next method from this client to\nbegin running.\n* `userId`: the id of the current user.\n* `setUserId`: a function that associates the current client with a user.\n* `connection`: on the server, the [connection](#meteor_onconnection) this method call was received on.\n\nCalling `methods` on the client defines *stub* functions associated with\nserver methods of the same name.  You don't have to define a stub for\nyour method if you don't want to.  In that case, method calls are just\nlike remote procedure calls in other systems, and you'll have to wait\nfor the results from the server.\n\nIf you do define a stub, when a client invokes a server method it will\nalso run its stub in parallel.  On the client, the return value of a\nstub is ignored.  Stubs are run for their side-effects: they are\nintended to *simulate* the result of what the server's method will do,\nbut without waiting for the round trip delay.  If a stub throws an\nexception it will be logged to the console.\n\nYou use methods all the time, because the database mutators\n([`insert`](#insert), [`update`](#update), [`remove`](#remove)) are implemented\nas methods. When you call any of these functions on the client, you're invoking\ntheir stub version that update the local cache, and sending the same write\nrequest to the server. When the server responds, the client updates the local\ncache with the writes that actually occurred on the server.\n\n",["#",[[0,"with"],[0,"method_invocation_userId"]],[[">","api_box"]]],"\n\nThe user id is an arbitrary string &mdash; typically the id of the user record\nin the database. You can set it with the `setUserId` function. If you're using\nthe [Meteor accounts system](#accounts_api) then this is handled for you.\n\n",["#",[[0,"with"],[0,"method_invocation_setUserId"]],[[">","api_box"]]],"\n\nCall this function to change the currently logged in user on the\nconnection that made this method call. This simply sets the value of\n`userId` for future method calls received on this connection. Pass\n`null` to log out the connection.\n\nIf you are using the [built-in Meteor accounts system](#accounts_api) then this\nshould correspond to the `_id` field of a document in the\n[`Meteor.users`](#meteor_users) collection.\n\n`setUserId` is not retroactive. It affects the current method call and\nany future method calls on the connection. Any previous method calls on\nthis connection will still see the value of `userId` that was in effect\nwhen they started.\n\n",["#",[[0,"with"],[0,"method_invocation_isSimulation"]],[[">","api_box"]]],"\n\n",["#",[[0,"with"],[0,"method_invocation_unblock"]],[[">","api_box"]]],"\n\nOn the server, methods from a given client run one at a time. The N+1th\ninvocation from a client won't start until the Nth invocation\nreturns. However, you can change this by calling `this.unblock`. This\nwill allow the N+1th invocation to start running in a new fiber.\n\n",["#",[[0,"with"],[0,"method_invocation_connection"]],[[">","api_box"]]],"\n\n",["#",[[0,"with"],[0,"error"]],[[">","api_box"]]],"\n\nIf you want to return an error from a method, throw an exception.  Methods can\nthrow any kind of exception.  But `Meteor.Error` is the only kind of error that\na server will send to the client. If a method function throws a different\nexception, then it will be mapped to a sanitized version on the\nwire. Specifically, if the `sanitizedError` field on the thrown error is set to\na `Meteor.Error`, then that error will be sent to the client. Otherwise, if no\nsanitized version is available, the client gets\n`Meteor.Error(500, 'Internal server error')`.\n\n",["#",[[0,"with"],[0,"meteor_call"]],[[">","api_box"]]],"\n\nThis is how to invoke a method.  It will run the method on the server.  If a\nstub is available, it will also run the stub on the client.  (See also\n[`Meteor.apply`](#meteor_apply), which is identical to `Meteor.call` except that\nyou specify the parameters as an array instead of as separate arguments and you\ncan specify a few options controlling how the method is executed.)\n\nIf you include a callback function as the last argument (which can't be\nan argument to the method, since functions aren't serializable), the\nmethod will run asynchronously: it will return nothing in particular and\nwill not throw an exception.  When the method is complete (which may or\nmay not happen before `Meteor.call` returns), the callback will be\ncalled with two arguments: `error` and `result`. If an error was thrown,\nthen `error` will be the exception object.  Otherwise, `error` will be\nundefined and the return value (possibly undefined) will be in `result`.\n\n    // async call\n    Meteor.call('foo', 1, 2, function (error, result) { ... } );\n\nIf you do not pass a callback on the server, the method invocation will\nblock until the method is complete.  It will eventually return the\nreturn value of the method, or it will throw an exception if the method\nthrew an exception. (Possibly mapped to 500 Server Error if the\nexception happened remotely and it was not a `Meteor.Error` exception.)\n\n    // sync call\n    var result = Meteor.call('foo', 1, 2);\n\nOn the client, if you do not pass a callback and you are not inside a\nstub, `call` will return `undefined`, and you will have no way to get\nthe return value of the method. That is because the client doesn't have\nfibers, so there is not actually any way it can block on the remote\nexecution of a method.\n\nFinally, if you are inside a stub on the client and call another\nmethod, the other method is not executed (no RPC is generated, nothing\n\"real\" happens).  If that other method has a stub, that stub stands in\nfor the method and is executed. The method call's return value is the\nreturn value of the stub function.  The client has no problem executing\na stub synchronously, and that is why it's okay for the client to use\nthe synchronous `Meteor.call` form from inside a method body, as\ndescribed earlier.\n\nMeteor tracks the database writes performed by methods, both on the client and\nthe server, and does not invoke `asyncCallback` until all of the server's writes\nreplace the stub's writes in the local cache. In some cases, there can be a lag\nbetween the method's return value being available and the writes being visible:\nfor example, if another method still outstanding wrote to the same document, the\nlocal cache may not be up to date until the other method finishes as well. If\nyou want to process the method's result as soon as it arrives from the server,\neven if the method's writes are not available yet, you can specify an\n`onResultReceived` callback to [`Meteor.apply`](#meteor_apply).\n\n",["#",[[0,"with"],[0,"meteor_apply"]],[[">","api_box"]]],'\n\n`Meteor.apply` is just like `Meteor.call`, except that the method arguments are\npassed as an array rather than directly as arguments, and you can specify\noptions about how the client executes the method.\n\n<h2 id="connections"><span>Server connections</span></h2>\n\nThese functions manage and inspect the network connection between the\nMeteor client and server.\n\n',["#",[[0,"with"],[0,"status"]],[[">","api_box"]]],'\n\nThis method returns the status of the connection between the client and\nthe server. The return value is an object with the following fields:\n\n<dl class="objdesc">\n',["#",[[0,"dtdd"],{name:"connected",type:"Boolean"}],["\n  True if currently connected to the server. If false, changes and\n  method invocations will be queued up until the connection is\n  reestablished.\n"]],"\n\n",["#",[[0,"dtdd"],{name:"status",type:"String"}],["\n  Describes the current reconnection status. The possible\n  values are `connected` (the connection is up and\n  running), `connecting` (disconnected and trying to open a\n  new connection), `failed` (permanently failed to connect; e.g., the client\n  and server support different versions of DDP), `waiting` (failed\n  to connect and waiting to try to reconnect) and `offline` (user has disconnected the connection).\n"]],"\n\n",["#",[[0,"dtdd"],{name:"retryCount",type:"Number"}],["\n  The number of times the client has tried to reconnect since the\n  connection was lost. 0 when connected.\n"]],"\n\n",["#",[[0,"dtdd"],{name:"retryTime",type:"Number or undefined"}],["\n  The estimated time of the next reconnection attempt. To turn this\n  into an interval until the next reconnection, use\n  `retryTime - (new Date()).getTime()`. This key will\n  be set only when `status` is `waiting`.\n"]],"\n\n",["#",[[0,"dtdd"],{name:"reason",type:"String or undefined"}],["\n  If `status` is `failed`, a description of why the connection failed.\n"]],"\n</dl>\n\nInstead of using callbacks to notify you on changes, this is\na [reactive](#reactivity) data source. You can use it in a\n[template](#templates) or [computation](#deps_autorun)\nto get realtime updates.\n\n",["#",[[0,"with"],[0,"reconnect"]],[[">","api_box"]]],"\n\n",["#",[[0,"with"],[0,"disconnect"]],[[">","api_box"]]],"\n\nCall this method to disconnect from the server and stop all\nlive data updates. While the client is disconnected it will not receive\nupdates to collections, method calls will be queued until the\nconnection is reestablished, and hot code push will be disabled.\n\nCall [Meteor.reconnect](#meteor_reconnect) to reestablish the connection\nand resume data transfer.\n\nThis can be used to save battery on mobile devices when real time\nupdates are not required.\n\n\n",["#",[[0,"with"],[0,"onConnection"]],[[">","api_box"]]],'\n\n`onConnection` returns an object with a single method `stop`.  Calling\n`stop` unregisters the callback, so that this callback will no longer\nbe called on new connections.\n\nThe callback is called with a single argument, the server-side\n`connection` representing the connection from the client.  This object\ncontains the following fields:\n\n<dl class="objdesc">\n',["#",[[0,"dtdd"],{name:"id",type:"String"}],["\nA globally unique id for this connection.\n"]],"\n\n",["#",[[0,"dtdd"],{name:"close",type:"Function"}],["\nClose this DDP connection. The client is free to reconnect, but will\nreceive a different connection with a new `id` if it does.\n"]],"\n\n",["#",[[0,"dtdd"],{name:"onClose",type:"Function"}],["\nRegister a callback to be called when the connection is closed. If the\nconnection is already closed, the callback will be called immediately.\n"]],"\n\n",["#",[[0,"dtdd"],{name:"clientAddress",type:"String"}],['\n  The IP address of the client in dotted form (such as `"127.0.0.1"`).\n\n  If you\'re running your Meteor server behind a proxy (so that clients\n  are connecting to the proxy instead of to your server directly),\n  you\'ll need to set the `HTTP_FORWARDED_COUNT` environment variable\n  for the correct IP address to be reported by `clientAddress`.\n\n  Set `HTTP_FORWARDED_COUNT` to an integer representing the number of\n  proxies in front of your server.  For example, you\'d set it to `"1"`\n  when your server was behind one proxy.\n']],"\n\n",["#",[[0,"dtdd"],{name:"httpHeaders",type:"Object"}],["\n  When the connection came in over an HTTP transport (such as with\n  Meteor's default SockJS implementation), this field contains\n  whitelisted HTTP headers.\n\n  Cookies are deliberately excluded from the headers as they are a\n  security risk for this transport.  For details and alternatives, see\n  the [SockJS\n  documentation](https://github.com/sockjs/sockjs-node#authorisation).\n"]],"\n</dl>\n\n",["#",[[0,"note"]],["\nCurrently when a client reconnects to the server (such as after\ntemporarily losing its Internet connection), it will get a new\nconnection each time.  The `onConnection` callbacks will be called\nagain, and the new connection will have a new connection `id`.\n\nIn the future, when client reconnection is fully implemented,\nreconnecting from the client will reconnect to the same connection on\nthe server: the `onConnection` callback won't be called for that\nconnection again, and the connection will still have the same\nconnection `id`.\n"]],"\n\n\n",["#",[[0,"with"],[0,"connect"]],[[">","api_box"]]],'\n\nTo call methods on another Meteor application or subscribe to its data\nsets, call `DDP.connect` with the URL of the application.\n`DDP.connect` returns an object which provides:\n\n* `subscribe` -\n  Subscribe to a record set. See\n  [Meteor.subscribe](#meteor_subscribe).\n* `call` -\n  Invoke a method. See [Meteor.call](#meteor_call).\n* `apply` -\n  Invoke a method with an argument array. See\n  [Meteor.apply](#meteor_apply).\n* `methods` -\n  Define client-only stubs for methods defined on the remote server. See\n  [Meteor.methods](#meteor_methods).\n* `status` -\n  Get the current connection status. See\n  [Meteor.status](#meteor_status).\n* `reconnect` -\n  See [Meteor.reconnect](#meteor_reconnect).\n* `disconnect` -\n  See [Meteor.disconnect](#meteor_disconnect).\n* `onReconnect` - Set this to a function to be called as the first step of\n  reconnecting. This function can call methods which will be executed before\n  any other outstanding methods. For example, this can be used to re-establish\n  the appropriate authentication context on the new connection.\n\nBy default, clients open a connection to the server from which they\'re loaded.\nWhen you call `Meteor.subscribe`, `Meteor.status`, `Meteor.call`, and\n`Meteor.apply`, you are using a connection back to that default\nserver.\n\n\n<h2 id="collections"><span>Collections</span></h2>\n\nMeteor stores data in *collections*.  To get started, declare a\ncollection with `new Meteor.Collection`.\n\n',["#",[[0,"with"],[0,"meteor_collection"]],[[">","api_box"]]],'\n\nCalling this function is analogous to declaring a model in a traditional ORM\n(Object-Relation Mapper)-centric framework. It sets up a *collection* (a storage\nspace for records, or "documents") that can be used to store a particular type\nof information, like users, posts, scores, todo items, or whatever matters to\nyour application.  Each document is a EJSON object.  It includes an `_id`\nproperty whose value is unique in the collection, which Meteor will set when you\nfirst create the document.\n\n    // common code on client and server declares livedata-managed mongo\n    // collection.\n    Chatrooms = new Meteor.Collection("chatrooms");\n    Messages = new Meteor.Collection("messages");\n\nThe function returns an object with methods to [`insert`](#insert)\ndocuments in the collection, [`update`](#update) their properties, and\n[`remove`](#remove) them, and to [`find`](#find) the documents in the\ncollection that match arbitrary criteria. The way these methods work is\ncompatible with the popular Mongo database API.  The same database API\nworks on both the client and the server (see below).\n\n    // return array of my messages\n    var myMessages = Messages.find({userId: Session.get(\'myUserId\')}).fetch();\n\n    // create a new message\n    Messages.insert({text: "Hello, world!"});\n\n    // mark my first message as "important"\n    Messages.update(myMessages[0]._id, {$set: {important: true}});\n\nIf you pass a `name` when you create the collection, then you are\ndeclaring a persistent collection &mdash; one that is stored on the\nserver and seen by all users. Client code and server code can both\naccess the same collection using the same API.\n\nSpecifically, when you pass a `name`, here\'s what happens:\n\n* On the server (if you do not specify a `connection`), a collection with that\nname is created on a backend Mongo server. When you call methods on that\ncollection on the server, they translate directly into normal Mongo operations\n(after checking that they match your [access control rules](#allow)).\n\n* On the client (and on the server if you specify a `connection`), a Minimongo\ninstance is created. Minimongo is essentially an in-memory, non-persistent\nimplementation of Mongo in pure JavaScript. It serves as a local cache that\nstores just the subset of the database that this client is working with. Queries\n([`find`](#find)) on these collections are served directly out of this cache,\nwithout talking to the server.\n\n* When you write to the database on the client ([`insert`](#insert),\n[`update`](#update), [`remove`](#remove)), the command is executed locally\nimmediately, and, simultaneously, it\'s sent to the server and executed\nthere too. This happens via [stubs](#meteor_methods), because writes are\nimplemented as methods.\n\n',["#",[[0,"note"]],["\nWhen, on the server, you write to a collection which has a specified\n`connection` to another server, it sends the corresponding method to the other\nserver and receives the changed values back from it over DDP. Unlike on the\nclient, it does not execute the write locally first.\n"]],'\n\nIf you pass `null` as the `name`, then you\'re creating a local\ncollection. It\'s not synchronized anywhere; it\'s just a local scratchpad\nthat supports Mongo-style [`find`](#find), [`insert`](#insert),\n[`update`](#update), and [`remove`](#remove) operations.  (On both the\nclient and the server, this scratchpad is implemented using Minimongo.)\n\nBy default, Meteor automatically publishes every document in your\ncollection to each connected client.  To turn this behavior off, remove\nthe `autopublish` package:\n\n    $ meteor remove autopublish\n\nand instead call [`Meteor.publish`](#meteor_publish) to specify which parts of\nyour collection should be published to which users.\n\n    // Create a collection called Posts and put a document in it. The\n    // document will be immediately visible in the local copy of the\n    // collection. It will be written to the server-side database\n    // a fraction of a second later, and a fraction of a second\n    // after that, it will be synchronized down to any other clients\n    // that are subscribed to a query that includes it (see\n    // Meteor.subscribe and autopublish)\n    Posts = new Meteor.Collection("posts");\n    Posts.insert({title: "Hello world", body: "First post"});\n\n    // Changes are visible immediately -- no waiting for a round trip to\n    // the server.\n    assert(Posts.find().count() === 1);\n\n    // Create a temporary, local collection. It works just like any other\n    // collection, but it doesn\'t send changes to the server, and it\n    // can\'t receive any data from subscriptions.\n    Scratchpad = new Meteor.Collection;\n    for (var i = 0; i < 10; i++)\n      Scratchpad.insert({number: i * 2});\n    assert(Scratchpad.find({number: {$lt: 9}}).count() === 5);\n\n\nIf you specify a `transform` option to the `Collection` or any of its retrieval\nmethods, documents are passed through the `transform` function before being\nreturned or passed to callbacks.  This allows you to add methods or otherwise\nmodify the contents of your collection from their database representation.  You\ncan also specify `transform` on a particular `find`, `findOne`, `allow`, or\n`deny` call.  Transform functions must return an object and they may not change\nthe value of the document\'s `_id` field (though it\'s OK to leave it out).\n\n    // An Animal class that takes a document in its constructor\n    Animal = function (doc) {\n      _.extend(this, doc);\n    };\n    _.extend(Animal.prototype, {\n      makeNoise: function () {\n        console.log(this.sound);\n      }\n    });\n\n    // Define a Collection that uses Animal as its document\n    Animals = new Meteor.Collection("Animals", {\n      transform: function (doc) { return new Animal(doc); }\n    });\n\n    // Create an Animal and call its makeNoise method\n    Animals.insert({name: "raptor", sound: "roar"});\n    Animals.findOne({name: "raptor"}).makeNoise(); // prints "roar"\n\n`transform` functions are not called reactively.  If you want to add a\ndynamically changing attribute to an object, do it with a function that computes\nthe value at the time it\'s called, not by computing the attribute at `transform`\ntime.\n\n',["#",[[0,"warning"]],["\nIn this release, Minimongo has some limitations:\n\n* `$pull` in modifiers can only accept certain kinds\nof selectors.\n* `findAndModify`, aggregate functions, and\nmap/reduce aren't supported.\n\nAll of these will be addressed in a future release. For full\nMinimongo release notes, see packages/minimongo/NOTES\nin the repository.\n"]],"\n\n",["#",[[0,"warning"]],["\nMinimongo doesn't currently have indexes. It's rare for this to be an\nissue, since it's unusual for a client to have enough data that an\nindex is worthwhile.\n"]],"\n\n",["#",[[0,"with"],[0,"find"]],[[">","api_box"]]],"\n\n`find` returns a cursor.  It does not immediately access the database or return\ndocuments.  Cursors provide `fetch` to return all matching documents, `map` and\n`forEach` to iterate over all matching documents, and `observe` and\n`observeChanges` to register callbacks when the set of matching documents\nchanges.\n\n",["#",[[0,"warning"]],["\nCollection cursors are not query snapshots.  If the database changes\nbetween calling `Collection.find` and fetching the\nresults of the cursor, or while fetching results from the cursor,\nthose changes may or may not appear in the result set.\n"]],"\n\nCursors are a reactive data source. On the client, the first time you retrieve a\ncursor's documents with `fetch`, `map`, or `forEach` inside a\nreactive computation (eg, a template or\n[`autorun`](#deps_autorun)), Meteor will register a\ndependency on the underlying data.  Any change to the collection that\nchanges the documents in a cursor will trigger a recomputation.  To\ndisable this behavior, pass `{reactive: false}` as an option to\n`find`.\n\nNote that when `fields` are specified, only changes to the included\nfields will trigger callbacks in `observe`, `observeChanges` and\ninvalidations in reactive computations using this cursor. Careful use\nof `fields` allows for more fine-grained reactivity for computations\nthat don't depend on an entire document.\n\n",["#",[[0,"with"],[0,"findone"]],[[">","api_box"]]],"\n\nEquivalent to `find(selector, options).fetch()[0]` with\n`options.limit = 1`.\n\n",["#",[[0,"with"],[0,"insert"]],[[">","api_box"]]],'\n\nAdd a document to the collection. A document is just an object, and\nits fields can contain any combination of EJSON-compatible datatypes\n(arrays, objects, numbers, strings, `null`, true, and false).\n\n`insert` will generate a unique ID for the object you pass, insert it\nin the database, and return the ID. When `insert` is called from\nuntrusted client code, it will be allowed only if passes any\napplicable [`allow`](#allow) and [`deny`](#deny) rules.\n\nOn the server, if you don\'t provide a callback, then `insert` blocks\nuntil the database acknowledges the write, or throws an exception if\nsomething went wrong.  If you do provide a callback, `insert` still\nreturns the ID immediately.  Once the insert completes (or fails), the\ncallback is called with error and result arguments.  In an error case,\n`result` is undefined.  If the insert is successful, `error` is\nundefined and `result` is the new document ID.\n\nOn the client, `insert` never blocks.  If you do not provide a callback\nand the insert fails on the server, then Meteor will log a warning to\nthe console.  If you provide a callback, Meteor will call that function\nwith `error` and `result` arguments.  In an error case, `result` is\nundefined.  If the insert is successful, `error` is undefined and\n`result` is the new document ID.\n\nExample:\n\n    var groceriesId = Lists.insert({name: "Groceries"});\n    Items.insert({list: groceriesId, name: "Watercress"});\n    Items.insert({list: groceriesId, name: "Persimmons"});\n\n',["#",[[0,"with"],[0,"update"]],[[">","api_box"]]],"\n\nModify documents that match `selector` according to `modifier` (see\n[modifier documentation](#modifiers)).\n\nThe behavior of `update` differs depending on whether it is called by\ntrusted or untrusted code. Trusted code includes server code and\nmethod code. Untrusted code includes client-side code such as event\nhandlers and a browser's JavaScript console.\n\n- Trusted code can modify multiple documents at once by setting\n  `multi` to true, and can use an arbitrary [Mongo\n  selector](#selectors) to find the documents to modify. It bypasses\n  any access control rules set up by [`allow`](#allow) and\n  [`deny`](#deny). The number of affected documents will be returned\n  from the `update` call if you don't pass a callback.\n\n- Untrusted code can only modify a single document at once, specified\n  by its `_id`. The modification is allowed only after checking any\n  applicable [`allow`](#allow) and [`deny`](#deny) rules. The number\n  of affected documents will be returned to the callback. Untrusted\n  code cannot perform upserts, except in insecure mode.\n\nOn the server, if you don't provide a callback, then `update` blocks\nuntil the database acknowledges the write, or throws an exception if\nsomething went wrong.  If you do provide a callback, `update` returns\nimmediately.  Once the update completes, the callback is called with a\nsingle error argument in the case of failure, or a second argument\nindicating the number of affected documents if the update was successful.\n\nOn the client, `update` never blocks.  If you do not provide a callback\nand the update fails on the server, then Meteor will log a warning to\nthe console.  If you provide a callback, Meteor will call that function\nwith an error argument if there was an error, or a second argument\nindicating the number of affected documents if the update was successful.\n\nClient example:\n\n    // When the givePoints button in the admin dashboard is pressed,\n    // give 5 points to the current player. The new score will be\n    // immediately visible on everyone's screens.\n    Template.adminDashboard.events({\n      'click .givePoints': function () {\n        Players.update(Session.get(\"currentPlayer\"), {$inc: {score: 5}});\n      }\n    });\n\nServer example:\n\n    // Give the \"Winner\" badge to each user with a score greater than\n    // 10. If they are logged in and their badge list is visible on the\n    // screen, it will update automatically as they watch.\n    Meteor.methods({\n      declareWinners: function () {\n        Players.update({score: {$gt: 10}},\n                       {$addToSet: {badges: \"Winner\"}},\n                       {multi: true});\n      }\n    });\n\nYou can use `update` to perform a Mongo upsert by setting the `upsert`\noption to true. You can also use the [`upsert`](#upsert) method to perform an\nupsert that returns the _id of the document that was inserted (if there was one)\nin addition to the number of affected documents.\n\n",["#",[[0,"with"],[0,"upsert"]],[[">","api_box"]]],"\n\nModify documents that match `selector` according to `modifier`, or insert\na document if no documents were modified. `upsert` is the same as calling\n`update` with the `upsert` option set to true, except that the return\nvalue of `upsert` is an object that contain the keys `numberAffected`\nand `insertedId`. (`update` returns only the number of affected documents.)\n\n",["#",[[0,"with"],[0,"remove"]],[[">","api_box"]]],"\n\nFind all of the documents that match `selector` and delete them from\nthe collection.\n\nThe behavior of `remove` differs depending on whether it is called by\ntrusted or untrusted code. Trusted code includes server code and\nmethod code. Untrusted code includes client-side code such as event\nhandlers and a browser's JavaScript console.\n\n- Trusted code can use an arbitrary [Mongo selector](#selectors) to\n  find the documents to remove, and can remove more than one document\n  at once by passing a selector that matches multiple documents. It\n  bypasses any access control rules set up by [`allow`](#allow) and\n  [`deny`](#deny). The number of removed documents will be returned\n  from `remove` if you don't pass a callback.\n\n  As a safety measure, if `selector` is omitted (or is `undefined`),\n  no documents will be removed. Set `selector` to `{}` if you really\n  want to remove all documents from your collection.\n\n- Untrusted code can only remove a single document at a time,\n  specified by its `_id`. The document is removed only after checking\n  any applicable [`allow`](#allow) and [`deny`](#deny) rules. The\n  number of removed documents will be returned to the callback.\n\nOn the server, if you don't provide a callback, then `remove` blocks\nuntil the database acknowledges the write and then returns the number\nof removed documents, or throws an exception if\nsomething went wrong.  If you do provide a callback, `remove` returns\nimmediately.  Once the remove completes, the callback is called with a\nsingle error argument in the case of failure, or a second argument\nindicating the number of removed documents if the remove was successful.\n\nOn the client, `remove` never blocks.  If you do not provide a callback\nand the remove fails on the server, then Meteor will log a warning to the\nconsole.  If you provide a callback, Meteor will call that function with an\nerror argument if there was an error, or a second argument indicating the number\nof removed documents if the remove was successful.\n\nClient example:\n\n    // When the remove button is clicked on a chat message, delete\n    // that message.\n    Template.chat.events({\n      'click .remove': function () {\n        Messages.remove(this._id);\n      }\n    });\n\nServer example:\n\n    // When the server starts, clear the log, and delete all players\n    // with a karma of less than -2.\n    Meteor.startup(function () {\n      if (Meteor.isServer) {\n        Logs.remove({});\n        Players.remove({karma: {$lt: -2}});\n      }\n    });\n\n",["#",[[0,"with"],[0,"allow"]],[[">","api_box"]]],"\n\nWhen a client calls `insert`, `update`, or `remove` on a collection, the\ncollection's `allow` and [`deny`](#deny) callbacks are called\non the server to determine if the write should be allowed. If at least\none `allow` callback allows the write, and no `deny` callbacks deny the\nwrite, then the write is allowed to proceed.\n\nThese checks are run only when a client tries to write to the database\ndirectly, for example by calling `update` from inside an event\nhandler. Server code is trusted and isn't subject to `allow` and `deny`\nrestrictions. That includes methods that are called with `Meteor.call`\n&mdash; they are expected to do their own access checking rather than\nrelying on `allow` and `deny`.\n\nYou can call `allow` as many times as you like, and each call can\ninclude any combination of `insert`, `update`, and `remove`\nfunctions. The functions should return `true` if they think the\noperation should be allowed. Otherwise they should return `false`, or\nnothing at all (`undefined`). In that case Meteor will continue\nsearching through any other `allow` rules on the collection.\n\nThe available callbacks are:\n\n<dl class=\"callbacks\">\n",["#",[[0,"dtdd"],"insert(userId, doc)"],["\nThe user `userId` wants to insert the document `doc` into the\ncollection. Return `true` if this should be allowed.\n"]],"\n\n",["#",[[0,"dtdd"],"update(userId, doc, fieldNames, modifier)"],["\n\nThe user `userId` wants to update a document `doc`. (`doc` is the\ncurrent version of the document from the database, without the\nproposed update.) Return `true` to permit the change.\n\n`fieldNames` is an array of the (top-level) fields in `doc` that the\nclient wants to modify, for example\n`['name',`&nbsp;`'score']`.\n\n`modifier` is the raw Mongo modifier that\nthe client wants to execute; for example,\n`{$set: {'name.first': \"Alice\"}, $inc: {score: 1}}`.\n\nOnly Mongo modifiers are supported (operations like `$set` and `$push`).\nIf the user tries to replace the entire document rather than use\n$-modifiers, the request will be denied without checking the `allow`\nfunctions.\n\n"]],"\n\n",["#",[[0,"dtdd"],"remove(userId, doc)"],["\n\nThe user `userId` wants to remove `doc` from the database. Return\n`true` to permit this.\n\n"]],"\n\n</dl>\n\nWhen calling `update` or `remove` Meteor will by default fetch the\nentire document `doc` from the database. If you have large documents\nyou may wish to fetch only the fields that are actually used by your\nfunctions. Accomplish this by setting `fetch` to an array of field\nnames to retrieve.\n\nExample:\n\n    // Create a collection where users can only modify documents that\n    // they own. Ownership is tracked by an 'owner' field on each\n    // document. All documents must be owned by the user that created\n    // them and ownership can't be changed. Only a document's owner\n    // is allowed to delete it, and the 'locked' attribute can be\n    // set on a document to prevent its accidental deletion.\n\n    Posts = new Meteor.Collection(\"posts\");\n\n    Posts.allow({\n      insert: function (userId, doc) {\n        // the user must be logged in, and the document must be owned by the user\n        return (userId && doc.owner === userId);\n      },\n      update: function (userId, doc, fields, modifier) {\n        // can only change your own documents\n        return doc.owner === userId;\n      },\n      remove: function (userId, doc) {\n        // can only remove your own documents\n        return doc.owner === userId;\n      },\n      fetch: ['owner']\n    });\n\n    Posts.deny({\n      update: function (userId, docs, fields, modifier) {\n        // can't change owners\n        return _.contains(fields, 'owner');\n      },\n      remove: function (userId, doc) {\n        // can't remove locked documents\n        return doc.locked;\n      },\n      fetch: ['locked'] // no need to fetch 'owner'\n    });\n\nIf you never set up any `allow` rules on a collection then all client\nwrites to the collection will be denied, and it will only be possible to\nwrite to the collection from server-side code. In this case you will\nhave to create a method for each possible write that clients are allowed\nto do. You'll then call these methods with `Meteor.call` rather than\nhaving the clients call `insert`, `update`, and `remove` directly on the\ncollection.\n\nMeteor also has a special \"insecure mode\" for quickly prototyping new\napplications. In insecure mode, if you haven't set up any `allow` or `deny`\nrules on a collection, then all users have full write access to the\ncollection. This is the only effect of insecure mode. If you call `allow` or\n`deny` at all on a collection, even `Posts.allow({})`, then access is checked\njust like normal on that collection. __New Meteor projects start in insecure\nmode by default.__ To turn it off just run `$ meteor remove insecure`.\n\n",["#",[[0,"with"],[0,"deny"]],[[">","api_box"]]],"\n\nThis works just like [`allow`](#allow), except it lets you\nmake sure that certain writes are definitely denied, even if there is an\n`allow` rule that says that they should be permitted.\n\nWhen a client tries to write to a collection, the Meteor server first\nchecks the collection's `deny` rules. If none of them return true then\nit checks the collection's `allow` rules. Meteor allows the write only\nif no `deny` rules return `true` and at least one `allow` rule returns\n`true`.\n\n<h2 id=\"meteor_collection_cursor\"><span>Cursors</span></h2>\n\nTo create a cursor, use [`find`](#find).  To access the documents in a\ncursor, use [`forEach`](#foreach), [`map`](#map), or [`fetch`](#fetch).\n\n",["#",[[0,"with"],[0,"cursor_foreach"]],[[">","api_box"]]],'\n\nThis interface is compatible with [Array.forEach](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Array/forEach).\n\nWhen called from a reactive computation, `forEach` registers dependencies on\nthe matching documents.\n\nExamples:\n\n    // Print the titles of the five top-scoring posts\n    var topPosts = Posts.find({}, {sort: {score: -1}, limit: 5});\n    var count = 0;\n    topPosts.forEach(function (post) {\n      console.log("Title of post " + count + ": " + post.title);\n      count += 1;\n    });\n\n',["#",[[0,"with"],[0,"cursor_map"]],[[">","api_box"]]],"\n\nThis interface is compatible with [Array.map](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Array/map).\n\nWhen called from a reactive computation, `map` registers dependencies on\nthe matching documents.\n\n<!-- The following is not yet implemented, but users shouldn't assume\n     sequential execution anyway because that will break. -->\nOn the server, if `callback` yields, other calls to `callback` may occur while\nthe first call is waiting. If strict sequential execution is necessary, use\n`forEach` instead.\n\n",["#",[[0,"with"],[0,"cursor_fetch"]],[[">","api_box"]]],"\n\nWhen called from a reactive computation, `fetch` registers dependencies on\nthe matching documents.\n\n",["#",[[0,"with"],[0,"cursor_count"]],[[">","api_box"]]],'\n\n    // Display a count of posts matching certain criteria. Automatically\n    // keep it updated as the database changes.\n    var frag = Meteor.render(function () {\n      var highScoring = Posts.find({score: {$gt: 10}});\n      return "<p>There are " + highScoring.count() + " posts with " +\n        "scores greater than 10</p>";\n    });\n    document.body.appendChild(frag);\n\nUnlike the other functions, `count` registers a dependency only on the\nnumber of matching documents.  (Updates that just change or reorder the\ndocuments in the result set will not trigger a recomputation.)\n\n',["#",[[0,"with"],[0,"cursor_rewind"]],[[">","api_box"]]],"\n\nThe `forEach`, `map`, or `fetch` methods can only be called once on a\ncursor.  To access the data in a cursor more than once, use `rewind` to\nreset the cursor.\n\n",["#",[[0,"with"],[0,"cursor_observe"]],[[">","api_box"]]],'\n\nEstablishes a *live query* that invokes callbacks when the result of\nthe query changes. The callbacks receive the entire contents of the\ndocument that was affected, as well as its old contents, if\napplicable. If you only need to receive the fields that changed, see\n[`observeChanges`](#observe_changes).\n\n`callbacks` may have the following functions as properties:\n\n<dl class="callbacks">\n<dt><span class="name">added(document)</span> <span class="or">or</span></dt>\n<dt><span class="name">addedAt(document, atIndex, before)</span></dt>\n<dd>\n',["#",[[0,"better_markdown"]],["\nA new document `document` entered the result set. The new document\nappears at position `atIndex`. It is immediately before the document\nwhose `_id` is `before`. `before` will be `null` if the new document\nis at the end of the results.\n"]],'\n</dd>\n\n<dt><span class="name">changed(newDocument, oldDocument)\n    <span class="or">or</span></span></dt>\n<dt><span class="name">changedAt(newDocument, oldDocument, atIndex)</span></dt>\n<dd>\n',["#",[[0,"better_markdown"]],["\nThe contents of a document were previously `oldDocument` and are now\n`newDocument`. The position of the changed document is `atIndex`.\n"]],'\n</dd>\n\n<dt><span class="name">removed(oldDocument)</span>\n  <span class="or">or</span></dt>\n<dt><span class="name">removedAt(oldDocument, atIndex)</span></dt>\n<dd>\n',["#",[[0,"better_markdown"]],["\nThe document `oldDocument` is no longer in the result set. It used to be at position `atIndex`.\n"]],"\n</dd>\n\n",["#",[[0,"dtdd"],"movedTo(document, fromIndex, toIndex, before)"],["\nA document changed its position in the result set, from `fromIndex` to `toIndex`\n(which is before the document with id `before`). Its current contents is\n`document`.\n"]],"\n</dl>\n\nUse `added`, `changed`, and `removed` when you don't care about the\norder of the documents in the result set. They are more efficient than\n`addedAt`, `changedAt`, and `removedAt`.\n\nBefore `observe` returns, `added` (or `addedAt`) will be called zero\nor more times to deliver the initial results of the query.\n\n`observe` returns a live query handle, which is an object with a `stop` method.\nCall `stop` with no arguments to stop calling the callback functions and tear\ndown the query. **The query will run forever until you call this.**  If\n`observe` is called from a `Deps.autorun` computation, it is automatically\nstopped when the computation is rerun or stopped.\n(If the cursor was created with the option `reactive` set to false, it will\nonly deliver the initial results and will not call any further callbacks;\nit is not necessary to call `stop` on the handle.)\n\n\n",["#",[[0,"with"],[0,"cursor_observe_changes"]],[[">","api_box"]]],'\n\nEstablishes a *live query* that invokes callbacks when the result of\nthe query changes. In contrast to [`observe`](#observe),\n`observeChanges` provides only the difference between the old and new\nresult set, not the entire contents of the document that changed.\n\n`callbacks` may have the following functions as properties:\n\n<dl class="callbacks">\n<dt><span class="name">added(id, fields)</span>\n  <span class="or">or</span></dt>\n<dt><span class="name">addedBefore(id, fields, before)</span></dt>\n<dd>\n',["#",[[0,"better_markdown"]],["\nA new document entered the result set. It has the `id` and `fields`\nspecified. `fields` contains all fields of the document excluding the\n`_id` field. The new document is before the document identified by\n`before`, or at the end if `before` is `null`.\n"]],"\n</dd>\n\n",["#",[[0,"dtdd"],"changed(id, fields)"],["\nThe document identified by `id` has changed. `fields` contains the\nchanged fields with their new values. If a field was removed from the\ndocument then it will be present in `fields` with a value of\n`undefined`.\n"]],"\n\n",["#",[[0,"dtdd"],"movedBefore(id, before)"],["\nThe document identified by `id` changed its position in the ordered result set,\nand now appears before the document identified by `before`.\n"]],"\n\n",["#",[[0,"dtdd"],"removed(id)"],["\nThe document identified by `id` was removed from the result set.\n"]],"\n</dl>\n\n`observeChanges` is significantly more efficient if you do not use\n`addedBefore` or `movedBefore`.\n\nBefore `observeChanges` returns, `added` (or `addedBefore`) will be called\nzero or more times to deliver the initial results of the query.\n\n`observeChanges` returns a live query handle, which is an object with a `stop`\nmethod.  Call `stop` with no arguments to stop calling the callback functions\nand tear down the query. **The query will run forever until you call this.**\nIf\n`observeChanges` is called from a `Deps.autorun` computation, it is automatically\nstopped when the computation is rerun or stopped.\n(If the cursor was created with the option `reactive` set to false, it will\nonly deliver the initial results and will not call any further callbacks;\nit is not necessary to call `stop` on the handle.)\n\n",["#",[[0,"note"]],["\nUnlike `observe`, `observeChanges` does not provide absolute position\ninformation (that is, `atIndex` positions rather than `before`\npositions.) This is for efficiency.\n"]],'\n\nExample:\n\n    // Keep track of how many administrators are online.\n    var count = 0;\n    var query = Users.find({admin: true, onlineNow: true});\n    var handle = query.observeChanges({\n      added: function (id, user) {\n        count++;\n        console.log(user.name + " brings the total to " + count + " admins.");\n      },\n      removed: function () {\n        count--;\n        console.log("Lost one. We\'re now down to " + count + " admins.");\n      }\n    });\n\n    // After five seconds, stop keeping the count.\n    setTimeout(function () {handle.stop();}, 5000);\n\n',["#",[[0,"with"],[0,"collection_object_id"]],[[">","api_box"]]],"\n\n`Meteor.Collection.ObjectID` follows the same API as the [Node MongoDB driver\n`ObjectID`](http://mongodb.github.com/node-mongodb-native/api-bson-generated/objectid.html)\nclass. Note that you must use the `equals` method (or [`EJSON.equals`](#ejson_equals)) to\ncompare them; the `===` operator will not work. If you are writing generic code\nthat needs to deal with `_id` fields that may be either strings or `ObjectID`s, use\n[`EJSON.equals`](#ejson_equals) instead of `===` to compare them.\n\n",["#",[[0,"note"]],["\n  `ObjectID` values created by Meteor will not have meaningful answers to their `getTimestamp`\n  method, since Meteor currently constructs them fully randomly.\n"]],"\n\n",["#",[[0,"api_box_inline"],[0,"selectors"]],['\n\nThe simplest selectors are just a string or\n[`Meteor.Collection.ObjectID`](#collection_object_id). These selectors match the\ndocument with that value in its `_id` field.\n\nA slightly more complex form of selector is an object containing a set of keys\nthat must match in a document:\n\n    // Matches all documents where deleted is false\n    {deleted: false}\n\n    // Matches all documents where the name and cognomen are as given\n    {name: "Rhialto", cognomen: "the Marvelous"}\n\n    // Matches every document\n    {}\n\nBut they can also contain more complicated tests:\n\n    // Matches documents where age is greater than 18\n    {age: {$gt: 18}}\n\n    // Also matches documents where tags is an array containing "popular"\n    {tags: "popular"}\n\n    // Matches documents where fruit is one of three possibilities\n    {fruit: {$in: ["peach", "plum", "pear"]}}\n\nSee the [complete\ndocumentation](http://docs.mongodb.org/manual/reference/operator/).\n\n']],"\n\n",["#",[[0,"api_box_inline"],[0,"modifiers"]],['\n\nA modifier is an object that describes how to update a document in\nplace by changing some of its fields. Some examples:\n\n    // Set the \'admin\' property on the document to true\n    {$set: {admin: true}}\n\n    // Add 2 to the \'votes\' property, and add "Traz"\n    // to the end of the \'supporters\' array\n    {$inc: {votes: 2}, $push: {supporters: "Traz"}}\n\nBut if a modifier doesn\'t contain any $-operators, then it is instead\ninterpreted as a literal document, and completely replaces whatever was\npreviously in the database. (Literal document modifiers are not currently\nsupported by [validated updates](#allow).)\n\n    // Find the document with id "123", and completely replace it.\n    Users.update({_id: "123"}, {name: "Alice", friends: ["Bob"]});\n\nSee the [full list of\nmodifiers](http://www.mongodb.org/display/DOCS/Updating#Updating-ModifierOperations).\n\n']],"\n\n",["#",[[0,"api_box_inline"],[0,"sortspecifiers"]],['\n\nSorts may be specified using your choice of several syntaxes:\n\n    // All of these do the same thing (sort in ascending order by\n    // key "a", breaking ties in descending order of key "b")\n\n    [["a", "asc"], ["b", "desc"]]\n    ["a", ["b", "desc"]]\n    {a: 1, b: -1}\n\nThe last form will only work if your JavaScript implementation\npreserves the order of keys in objects. Most do, most of the time, but\nit\'s up to you to be sure.\n\n']],"\n\n",["#",[[0,"api_box_inline"],[0,"fieldspecifiers"]],["\n\nQueries can specify a particular set of fields to include or exclude from the\nresult object.\n\nTo exclude specific fields from the result objects, the field specifier is a\ndictionary whose keys are field names and whose values are `0`. All unspecified\nfields are included.\n\n    // Users.find({}, {fields: {password: 0, hash: 0}})\n\nTo include only specific fields in the result documents, use `1` as\nthe value. The `_id` field is still included in the result.\n\n    // Users.find({}, {fields: {firstname: 1, lastname: 1}})\n\nWith one exception, it is not possible to mix inclusion and exclusion styles:\nthe keys must either be all 1 or all 0.  The exception is that you may specify\n`_id: 0` in an inclusion specifier, which will leave `_id` out of the result\nobject as well.  However, such field specifiers can not be used with\n[`observeChanges`](#observe_changes), [`observe`](#observe), cursors returned\nfrom a [publish function](#meteor_publish), or cursors used in\n`",["{",[[0,"dstache"]]],'#each}}` in a template. They may be used with [`fetch`](#fetch),\n[`findOne`](#findone), [`forEach`](#foreach), and [`map`](#map).\n\n\n<a href="http://docs.mongodb.org/manual/reference/operator/projection/">Field\noperators</a> such as `$` and `$elemMatch` are not available on the client side\nyet.\n\nA more advanced example:\n\n    Users.insert({ alterEgos: [{ name: "Kira", alliance: "murderer" },\n                               { name: "L", alliance: "police" }],\n                   name: "Yagami Light" });\n\n    Users.findOne({}, { fields: { \'alterEgos.name\': 1, _id: 0 } });\n\n    // returns { alterEgos: [{ name: "Kira" }, { name: "L" }] }\n\nSee <a href="http://docs.mongodb.org/manual/tutorial/project-fields-from-query-results/#projection">\nthe MongoDB docs</a> for details of the nested field rules and array behavior.\n\n']],'\n\n<h2 id="session"><span>Session</span></h2>\n\n`Session` provides a global object on the client that you can use to\nstore an arbitrary set of key-value pairs. Use it to store things like\nthe currently selected item in a list.\n\nWhat\'s special about `Session` is that it\'s reactive. If\nyou call [`Session.get`](#session_get)`("currentList")`\nfrom inside a template, the template will automatically be rerendered\nwhenever [`Session.set`](#session_set)`("currentList", x)` is called.\n\n',["#",[[0,"with"],[0,"set"]],[[">","api_box"]]],'\n\nExample:\n\n    Deps.autorun(function () {\n      Meteor.subscribe("chat-history", {room: Session.get("currentRoomId")});\n    });\n\n    // Causes the function passed to Deps.autorun to be re-run, so\n    // that the chat-history subscription is moved to the room "home".\n    Session.set("currentRoomId", "home");\n\n',["#",[[0,"with"],[0,"setDefault"]],[[">","api_box"]]],"\n\nThis is useful in initialization code, to avoid re-initializing a session\nvariable every time a new version of your app is loaded.\n\n",["#",[[0,"with"],[0,"get"]],[[">","api_box"]]],'\n\nExample:\n\n    Session.set("enemy", "Eastasia");\n    var frag = Meteor.render(function () {\n      return "<p>We\'ve always been at war with " +\n        Session.get("enemy") + "</p>";\n    });\n\n    // Page will say "We\'ve always been at war with Eastasia"\n    document.body.append(frag);\n\n    // Page will change to say "We\'ve always been at war with Eurasia"\n    Session.set("enemy", "Eurasia");\n\n',["#",[[0,"with"],[0,"equals"]],[[">","api_box"]]],'\n\nIf value is a scalar, then these two expressions do the same thing:\n\n    (1) Session.get("key") === value\n    (2) Session.equals("key", value)\n\n... but the second one is always better. It triggers fewer invalidations\n(template redraws), making your program more efficient.\n\nExample:\n\n    <template name="postsView">\n    ',["{",[[0,"dstache"]]],"! Show a dynamically updating list of items. Let the user click on an\n        item to select it. The selected item is given a CSS class so it\n        can be rendered differently. }}\n\n    ",["{",[[0,"dstache"]]],"#each posts}}\n      ",["{",[[0,"dstache"]]],"> postItem }}\n    ",["{",[[0,"dstache"]]],"/each}}\n    </",'template>\n\n    <template name="postItem">\n      <div class="',["{",[[0,"dstache"]]],'postClass}}">',["{",[[0,"dstache"]]],"title}}</div>\n    </",'template>\n\n    ///// in JS file\n    Template.postsView.posts = function() {\n      return Posts.find();\n    };\n\n    Template.postItem.postClass = function() {\n      return Session.equals("selectedPost", this._id) ?\n        "selected" : "";\n    };\n\n    Template.postItem.events({\n      \'click\': function() {\n        Session.set("selectedPost", this._id);\n      }\n    });\n\n    // Using Session.equals here means that when the user clicks\n    // on an item and changes the selection, only the newly selected\n    // and the newly unselected items are re-rendered.\n    //\n    // If Session.get had been used instead of Session.equals, then\n    // when the selection changed, all the items would be re-rendered.\n\nFor object and array session values, you cannot use `Session.equals`; instead,\nyou need to use the `underscore` package and write\n`_.isEqual(Session.get(key), value)`.\n\n\n\n<h2 id="accounts_api"><span>Accounts</span></h2>\n\nThe Meteor Accounts system builds on top of the `userId` support in\n[`publish`](#publish_userId) and [`methods`](#method_userId). The core\npackages add the concept of user documents stored in the database, and\nadditional packages add [secure password\nauthentication](#accounts_passwords), [integration with third party\nlogin services](#meteor_loginwithexternalservice), and a [pre-built user\ninterface](#accountsui).\n\nThe basic Accounts system is in the `accounts-base` package, but\napplications typically include this automatically by adding one of the\nlogin provider packages: `accounts-password`, `accounts-facebook`,\n`accounts-github`, `accounts-google`, `accounts-meetup`,\n`accounts-twitter`, or `accounts-weibo`.\n\n\n',["#",[[0,"with"],[0,"user"]],[[">","api_box"]]],"\n\nRetrieves the user record for the current user from\nthe [`Meteor.users`](#meteor_users) collection.\n\nOn the client, this will be the subset of the fields in the document that\nare published from the server (other fields won't be available on the\nclient). By default the server publishes `username`, `emails`, and\n`profile`. See [`Meteor.users`](#meteor_users) for more on\nthe fields used in user documents.\n\n",["#",[[0,"with"],[0,"userId"]],[[">","api_box"]]],"\n\n",["#",[[0,"with"],[0,"users"]],[[">","api_box"]]],'\n\nThis collection contains one document per registered user. Here\'s an example\nuser document:\n\n    {\n      _id: "bbca5d6a-2156-41c4-89da-0329e8c99a4f",  // Meteor.userId()\n      username: "cool_kid_13", // unique name\n      emails: [\n        // each email address can only belong to one user.\n        { address: "cool@example.com", verified: true },\n        { address: "another@different.com", verified: false }\n      ],\n      createdAt: Wed Aug 21 2013 15:16:52 GMT-0700 (PDT),\n      profile: {\n        // The profile is writable by the user by default.\n        name: "Joe Schmoe"\n      },\n      services: {\n        facebook: {\n          id: "709050", // facebook id\n          accessToken: "AAACCgdX7G2...AbV9AZDZD"\n        },\n        resume: {\n          loginTokens: [\n            { token: "97e8c205-c7e4-47c9-9bea-8e2ccc0694cd",\n              when: 1349761684048 }\n          ]\n        }\n      }\n    }\n\nA user document can contain any data you want to store about a user. Meteor\ntreats the following fields specially:\n\n- `username`: a unique String identifying the user.\n- `emails`: an Array of Objects with keys `address` and `verified`;\n  an email address may belong to at most one user. `verified` is\n  a Boolean which is true if the user has [verified the\n  address](#accounts_verifyemail) with a token sent over email.\n- `createdAt`: the Date at which the user document was created.\n- `profile`: an Object which (by default) the user can create\n  and update with any data.\n- `services`: an Object containing data used by particular\n  login services. For example, its `reset` field contains\n  tokens used by [forgot password](#accounts_forgotpassword) links,\n  and its `resume` field contains tokens used to keep you\n  logged in between sessions.\n\nLike all [Meteor.Collection](#collections)s, you can access all\ndocuments on the server, but only those specifically published by the server are\navailable on the client.\n\nBy default, the current user\'s `username`, `emails` and `profile` are\npublished to the client. You can publish additional fields for the\ncurrent user with:\n\n    Meteor.publish("userData", function () {\n      return Meteor.users.find({_id: this.userId},\n                               {fields: {\'other\': 1, \'things\': 1}});\n    });\n\nIf the autopublish package is installed, information about all users\non the system is published to all clients. This includes `username`,\n`profile`, and any fields in `services` that are meant to be public\n(eg `services.facebook.id`,\n`services.twitter.screenName`). Additionally, when using autopublish\nmore information is published for the currently logged in user,\nincluding access tokens. This allows making API calls directly from\nthe client for services that allow this.\n\nUsers are by default allowed to specify their own `profile` field with\n[`Accounts.createUser`](#accounts_createuser) and modify it with\n`Meteor.users.update`. To allow users to edit additional fields, use\n[`Meteor.users.allow`](#allow). To forbid users from making any modifications to\ntheir user document:\n\n    Meteor.users.deny({update: function () { return true; }});\n\n\n',["#",[[0,"with"],[0,"loggingIn"]],[[">","api_box"]]],"\n\nFor example, [the `accounts-ui` package](#accountsui) uses this to display an\nanimation while the login request is being processed.\n\n",["#",[[0,"with"],[0,"logout"]],[[">","api_box"]]],"\n\n",["#",[[0,"with"],[0,"logoutOtherClients"]],[[">","api_box"]]],"\n\nFor example, when called in a user's browser, connections in that browser\nremain logged in, but any other browsers or DDP clients logged in as that user\nwill be logged out.\n\n",["#",[[0,"with"],[0,"loginWithPassword"]],[[">","api_box"]]],"\n\nThis function is provided by the `accounts-password` package. See the\n[Passwords](#accounts_passwords) section below.\n\n\n",["#",[[0,"with"],[0,"loginWithExternalService"]],[[">","api_box"]]],'\n\nAvailable functions are:\n\n* `Meteor.loginWithMeteorDeveloperAccount`\n* `Meteor.loginWithFacebook`\n* `Meteor.loginWithGithub`\n* `Meteor.loginWithGoogle`\n* `Meteor.loginWithMeetup`\n* `Meteor.loginWithTwitter`\n* `Meteor.loginWithWeibo`\n\nThese functions initiate the login process with an external\nservice (eg: Facebook, Google, etc), using OAuth. When called they open a new pop-up\nwindow that loads the provider\'s login page. Once the user has logged in\nwith the provider, the pop-up window is closed and the Meteor client\nlogs in to the Meteor server with the information provided by the external\nservice.\n\n<a id="requestpermissions" name="requestpermissions" />\n\nIn addition to identifying the user to your application, some services\nhave APIs that allow you to take action on behalf of the user. To\nrequest specific permissions from the user, pass the\n`requestPermissions` option the login function. This will cause the user\nto be presented with an additional page in the pop-up dialog to permit\naccess to their data. The user\'s `accessToken` &mdash; with permissions\nto access the service\'s API &mdash; is stored in the `services` field of\nthe user document. The supported values for `requestPermissions` differ\nfor each login service and are documented on their respective developer\nsites:\n\n- Facebook: <http://developers.facebook.com/docs/authentication/permissions/>\n- GitHub: <http://developer.github.com/v3/oauth/#scopes>\n- Google: <https://developers.google.com/accounts/docs/OAuth2Login#scopeparameter>\n- Meetup: <http://www.meetup.com/meetup_api/auth/#oauth2-scopes>\n- Twitter, Weibo, Meteor developer accounts: `requestPermissions` currently not supported\n\nExternal login services typically require registering and configuring\nyour application before use. The easiest way to do this is with the\n[`accounts-ui` package](#accountsui) which presents a step-by-step guide\nto configuring each service. However, the data can be also be entered\nmanually in the `ServiceConfiguration.configurations` collection, which\nis exported by the `service-configuration` package. For example, after\nrunning `meteor add service-configuration` in your app:\n\n    // first, remove configuration entry in case service is already configured\n    ServiceConfiguration.configurations.remove({\n      service: "weibo"\n    });\n    ServiceConfiguration.configurations.insert({\n      service: "weibo",\n      clientId: "1292962797",\n      secret: "75a730b58f5691de5522789070c319bc"\n    });\n\n\nEach external service has its own login provider package and login function. For\nexample, to support GitHub login, run `$ meteor add accounts-github` and use the\n`Meteor.loginWithGithub` function:\n\n    Meteor.loginWithGithub({\n      requestPermissions: [\'user\', \'public_repo\']\n    }, function (err) {\n      if (err)\n        Session.set(\'errorMessage\', err.reason || \'Unknown error\');\n    });\n\n\n\n',["#",[[0,"with"],[0,"currentUser"]],[[">","api_box"]]],"\n",["#",[[0,"with"],[0,"loggingInTemplate"]],[[">","api_box"]]],"\n",["#",[[0,"with"],[0,"accounts_config"]],[[">","api_box"]]],"\n",["#",[[0,"with"],[0,"accounts_ui_config"]],[[">","api_box"]]],"\n\nExample:\n\n    Accounts.ui.config({\n      requestPermissions: {\n        facebook: ['user_likes'],\n        github: ['user', 'repo']\n      },\n      requestOfflineToken: {\n        google: true\n      },\n      passwordSignupFields: 'USERNAME_AND_OPTIONAL_EMAIL'\n    });\n\n",["#",[[0,"with"],[0,"accounts_validateNewUser"]],[[">","api_box"]]],'\n\nThis can be called multiple times. If any of the functions return `false` or\nthrow an error, the new user creation is aborted. To set a specific error\nmessage (which will be displayed by [`accounts-ui`](#accountsui)), throw a new\n[`Meteor.Error`](#meteor_error).\n\nExample:\n\n    // Validate username, sending a specific error message on failure.\n    Accounts.validateNewUser(function (user) {\n      if (user.username && user.username.length >= 3)\n        return true;\n      throw new Meteor.Error(403, "Username must have at least 3 characters");\n    });\n    // Validate username, without a specific error message.\n    Accounts.validateNewUser(function (user) {\n      return user.username !== "root";\n    });\n\n',["#",[[0,"with"],[0,"accounts_onCreateUser"]],[[">","api_box"]]],"\n\nUse this when you need to do more than simply accept or reject new user\ncreation. With this function you can programatically control the\ncontents of new user documents.\n\nThe function you pass will be called with two arguments: `options` and\n`user`. The `options` argument comes\nfrom [`Accounts.createUser`](#accounts_createuser) for\npassword-based users or from an external service login flow. `options` may come\nfrom an untrusted client so make sure to validate any values you read from\nit. The `user` argument is created on the server and contains a\nproposed user object with all the automatically generated fields\nrequired for the user to log in.\n\nThe function should return the user document (either the one passed in or a\nnewly-created object) with whatever modifications are desired. The returned\ndocument is inserted directly into the [`Meteor.users`](#meteor_users) collection.\n\nThe default create user function simply copies `options.profile` into\nthe new user document. Calling `onCreateUser` overrides the default\nhook. This can only be called once.\n\nExample:\n\n<!-- XXX replace d6 with _.random once we have underscore 1.4.2 -->\n\n    // Support for playing D&D: Roll 3d6 for dexterity\n    Accounts.onCreateUser(function(options, user) {\n      var d6 = function () { return Math.floor(Random.fraction() * 6) + 1; };\n      user.dexterity = d6() + d6() + d6();\n      // We still want the default hook's 'profile' behavior.\n      if (options.profile)\n        user.profile = options.profile;\n      return user;\n    });\n\n\n<h2 id=\"accounts_passwords\"><span>Passwords</span></h2>\n\nThe `accounts-password` package contains a full system for password-based\nauthentication. In addition to the basic username and password-based\nsign-in process, it also supports email-based sign-in including\naddress verification and password recovery emails.\n\nUnlike most web applications, the Meteor client does not send the user's\npassword directly to the server. It uses the [Secure Remote Password\nprotocol](http://en.wikipedia.org/wiki/Secure_Remote_Password_protocol)\nto ensure the server never sees the user's plain-text password. This\nhelps protect against embarrassing password leaks if the server's\ndatabase is compromised.\n\nTo add password support to your application, run `$ meteor add\naccounts-password`. You can construct your own user interface using the\nfunctions below, or use the [`accounts-ui` package](#accountsui) to\ninclude a turn-key user interface for password-based sign-in.\n\n\n",["#",[[0,"with"],[0,"accounts_createUser"]],[[">","api_box"]]],"\n\nOn the client, this function logs in as the newly created user on\nsuccessful completion. On the server, it returns the newly created user\nid.\n\nOn the client, you must pass `password` and at least one of `username` or\n`email` &mdash; enough information for the user to be able to log in again\nlater. On the server, you do not need to specify `password`, but the user will\nnot be able to log in until it has a password (eg, set with\n[`Accounts.setPassword`](#accounts_setpassword)).\n\nTo create an account without a password on the server and still let the\nuser pick their own password, call `createUser` with the `email` option\nand then\ncall [`Accounts.sendEnrollmentEmail`](#accounts_sendenrollmentemail). This\nwill send the user an email with a link to set their initial password.\n\nBy default the `profile` option is added directly to the new user document. To\noverride this behavior, use [`Accounts.onCreateUser`](#accounts_oncreateuser).\n\nThis function is only used for creating users with passwords. The external\nservice login flows do not use this function.\n\n\n",["#",[[0,"with"],[0,"accounts_changePassword"]],[[">","api_box"]]],"\n\n",["#",[[0,"with"],[0,"accounts_forgotPassword"]],[[">","api_box"]]],"\n\nThis triggers a call\nto [`Accounts.sendResetPasswordEmail`](#accounts_sendresetpasswordemail)\non the server. Pass the token the user receives in this email\nto [`Accounts.resetPassword`](#accounts_resetpassword) to\ncomplete the password reset process.\n\nIf you are using the [`accounts-ui` package](#accountsui), this is handled\nautomatically. Otherwise, it is your responsiblity to prompt the user for the\nnew password and call `resetPassword`.\n\n",["#",[[0,"with"],[0,"accounts_resetPassword"]],[[">","api_box"]]],"\n\nThis function accepts tokens generated\nby [`Accounts.sendResetPasswordEmail`](#accounts_sendresetpasswordemail)\nand\n[`Accounts.sendEnrollmentEmail`](#accounts_sendenrollmentemail).\n\n",["#",[[0,"with"],[0,"accounts_setPassword"]],[[">","api_box"]]],"\n\n",["#",[[0,"with"],[0,"accounts_verifyEmail"]],[[">","api_box"]]],"\n\nThis function accepts tokens generated\nby [`Accounts.sendVerificationEmail`](#accounts_sendverificationemail). It\nsets the `emails.verified` field in the user record.\n\n",["#",[[0,"with"],[0,"accounts_sendResetPasswordEmail"]],[[">","api_box"]]],"\n\nThe token in this email should be passed\nto [`Accounts.resetPassword`](#accounts_resetpassword).\n\nTo customize the contents of the email, see\n[`Accounts.emailTemplates`](#accounts_emailtemplates).\n\n",["#",[[0,"with"],[0,"accounts_sendEnrollmentEmail"]],[[">","api_box"]]],"\n\nThe token in this email should be passed\nto [`Accounts.resetPassword`](#accounts_resetpassword).\n\nTo customize the contents of the email, see\n[`Accounts.emailTemplates`](#accounts_emailtemplates).\n\n",["#",[[0,"with"],[0,"accounts_sendVerificationEmail"]],[[">","api_box"]]],"\n\nThe token in this email should be passed\nto [`Accounts.verifyEmail`](#accounts_verifyemail).\n\nTo customize the contents of the email, see\n[`Accounts.emailTemplates`](#accounts_emailtemplates).\n\n",["#",[[0,"with"],[0,"accounts_emailTemplates"]],[[">","api_box"]]],'\n\nThis is an `Object` with several fields that are used to generate text\nfor the emails sent by `sendResetPasswordEmail`, `sendEnrollmentEmail`,\nand `sendVerificationEmail`.\n\nOverride fields of the object by assigning to them:\n\n- `from`: A `String` with an [RFC5322](http://tools.ietf.org/html/rfc5322) From\n   address. By default, the email is sent from `no-reply@meteor.com`. If you\n   wish to receive email from users asking for help with their account, be sure\n   to set this to an email address that you can receive email at.\n- `siteName`: The public name of your application. Defaults to the DNS name of\n   the application (eg: `awesome.meteor.com`).\n- `resetPassword`: An `Object` with two fields:\n - `resetPassword.subject`: A `Function` that takes a user object and returns\n   a `String` for the subject line of a reset password email.\n - `resetPassword.text`: A `Function` that takes a user object and a url, and\n   returns the body text for a reset password email.\n- `enrollAccount`: Same as `resetPassword`, but for initial password setup for\n   new accounts.\n- `verifyEmail`: Same as `resetPassword`, but for verifying the users email\n   address.\n\n\nExample:\n\n    Accounts.emailTemplates.siteName = "AwesomeSite";\n    Accounts.emailTemplates.from = "AwesomeSite Admin <accounts@example.com>";\n    Accounts.emailTemplates.enrollAccount.subject = function (user) {\n        return "Welcome to Awesome Town, " + user.profile.name;\n    };\n    Accounts.emailTemplates.enrollAccount.text = function (user, url) {\n       return "You have been selected to participate in building a better future!"\n         + " To activate your account, simply click the link below:\\n\\n"\n         + url;\n    };\n\n\n<h2 id="templates_api"><span>Templates</span></h2>\n\nA template that you declare as `<','template name="foo"> ... </',"template>` can be accessed as the function `Template.foo`, which\nreturns a string of HTML when called.\n\nThe same template may occur many times on the page, and these\noccurrences are called template instances.  Template instances have a\nlife cycle of being created, put into the document, and later taken\nout of the document and destroyed.  Meteor manages these stages for\nyou, including determining when a template instance has been removed\nor replaced and should be cleaned up.  You can associate data with a\ntemplate instance, and you can access its DOM nodes when it is in the\ndocument.\n\nAdditionally, Meteor will maintain a template instance and its state\neven if its surrounding HTML is re-rendered into new DOM nodes.  As\nlong as the structure of template invocations is the same, Meteor will\nnot consider any instances to have been created or destroyed.  You can\nrequest that the same DOM nodes be retained as well using `preserve`\nand `constant`.\n\nThere are a number of callbacks and directives that you can specify on\na named template and that apply to all instances of the template.\nThey are described below.\n\n",["#",[[0,"with"],[0,"template_call"]],[[">","api_box"]]],"\n\nWhen called inside a template helper, the body of `Meteor.render`, or\nother settings where reactive HTML is being generated, the resulting\nHTML is annotated so that it renders as reactive DOM elements.\nOtherwise, the HTML is unadorned and static.\n\n\n",["#",[[0,"with"],[0,"template_rendered"]],[[">","api_box"]]],"\n\nThis callback is called once when an instance of Template.*myTemplate* is\nrendered into DOM nodes and put into the document for the first time, and again\neach time any part of the template is re-rendered.\n\nIn the body of the callback, `this` is a [template\ninstance](#template_inst) object that is unique to this occurrence of\nthe template and persists across re-renderings.  Use the `created` and\n`destroyed` callbacks to perform initialization or clean-up on the\nobject.\n\n",["#",[[0,"with"],[0,"template_created"]],[[">","api_box"]]],"\n\nThis callback is called when an invocation of *myTemplate* represents\na new occurrence of the template and not a re-rendering of an existing\ntemplate instance.  Inside the callback, `this` is the new [template\ninstance](#template_inst) object.  Properties you set on this object\nwill be visible from the `rendered` and `destroyed` callbacks and from\nevent handlers.\n\nThis callback fires once and is the first callback to fire.  Every\n`created` has a corresponding `destroyed`; that is, if you get a\n`created` callback with a certain template instance object in `this`,\nyou will eventually get a `destroyed` callback for the same object.\n\n",["#",[[0,"with"],[0,"template_destroyed"]],[[">","api_box"]]],"\n\nThis callback is called when an occurrence of a template is taken off\nthe page for any reason and not replaced with a re-rendering.  Inside\nthe callback, `this` is the [template instance](#template_inst) object\nbeing destroyed.\n\nThis callback is most useful for cleaning up or undoing any external\neffects of `created`.  It fires once and is the last callback to fire.\n\n\n",["#",[[0,"with"],[0,"template_events"]],[[">","api_box"]]],"\n\nDeclare event handlers for instances of this template. Multiple calls add\nnew event handlers in addition to the existing ones.\n\nSee [Event Maps](#eventmaps) for a detailed description of the event\nmap format and how event handling works in Meteor.\n\n",["#",[[0,"with"],[0,"template_helpers"]],[[">","api_box"]]],'\n\nEach template has a local dictionary of helpers that are made available to it,\nand this call specifies helpers to add to the template\'s dictionary.\n\nExample:\n\n    Template.myTemplate.helpers({\n      foo: function () {\n        return Session.get("foo");\n      }\n    });\n\nIn Handlebars, this helper would then be invoked as `',["{",[[0,"dstache"]]],'foo}}`.\n\nThe following syntax is equivalent, but won\'t work for reserved property\nnames:\n\n    Template.myTemplate.foo = function () {\n      return Session.get("foo");\n    };\n\n',["#",[[0,"with"],[0,"template_preserve"]],[[">","api_box"]]],'\n\nYou can "preserve" a DOM element during re-rendering, leaving the\nexisting element in place in the document while replacing the\nsurrounding HTML.  This means that re-rendering a template need not\ndisturb text fields, iframes, and other sensitive elements it\ncontains.  The elements to preserve must be present both as nodes in\nthe old DOM and as tags in the new HTML.  Meteor will patch the DOM\naround the preserved elements.\n\n',["#",[[0,"note"]],["\nBy default, new Meteor apps automatically include the\n`preserve-inputs` package.  This preserves all elements of type\n`input`, `textarea`, `button`, `select`, and `option` that have unique\n`id` attributes or that have `name` attributes that are unique within\nan enclosing element with an `id` attribute.  To turn off this default\nbehavior, simply remove the `preserve-inputs` package.\n"]],"\n\nPreservation is useful in a variety of cases where replacing a DOM\nelement with an identical or modified element would not have the same\neffect as retaining the original element.  These include:\n\n* Input text fields and other form controls\n* Elements with CSS animations\n* Iframes\n* Nodes with references kept in JavaScript code\n\nIf you want to preserve a whole region of the DOM, an element and its\nchildren, or nodes not rendered by Meteor, use a [constant\nregion](#constant) instead.\n\nTo preserve nodes, pass a list of selectors, each of which should match\nat most one element in the template.  When the template is re-rendered,\nthe selector is run on the old DOM and the new DOM, and Meteor will\nreuse the old element in place while working in any HTML changes around\nit.\n\nA second form of `preserve` takes a labeling function for each selector\nand allows the selectors to match multiple nodes. The node-labeling\nfunction takes a node and returns a label string that is unique for each\nnode, or `false` to exclude the node from preservation.\n\nFor example, to preserve all `<input>` elements with ids in template 'foo', use:\n\n    Template.foo.preserve({\n      'input[id]': function (node) { return node.id; }\n    });\n\nSelectors are interpreted as rooted at the top level of the template.\nEach occurrence of the template operates independently, so the selectors\ndo not have to be unique on the entire page, only within one occurrence\nof the template.  Selectors will match nodes even if they are in\nsub-templates.\n\nPreserving a node does *not* preserve its attributes or contents. They\nwill be updated to reflect the new HTML. Text in input fields is not\npreserved unless the input field has focus, in which case the cursor and\nselection are left intact. Iframes retain their navigation state and\nanimations continue to run as long as their parameters haven't changed.\n\nThere are some cases where nodes can not be preserved because of\nconstraints inherent in the DOM API. For example, an element's tag name\ncan't be changed, and it can't be moved relative to its parent or other\npreserved nodes.  For this reason, nodes that are re-ordered or\nre-parented by an update will not be preserved.\n\n",["#",[[0,"note"]],['\nPrevious versions of Meteor had an implicit page-wide `preserve`\ndirective that labeled nodes by their "id" and "name" attributes.\nThis has been removed in favor of the explicit, opt-in mechanism.\n']],'\n\n\n<h2 id="template_inst"><span>Template instances</span></h2>\n\nA template instance object represents an occurrence of a template in\nthe document.  It can be used to access the DOM and it can be\nassigned properties that persist across page re-renderings.\n\nTemplate instance objects are found as the value of `this` in the\n`created`, `rendered`, and `destroyed` template callbacks and as an\nargument to event handlers.\n\nIn addition to the properties and functions described below, you can\nassign additional properties of your choice to the object.  Property names\nstarting with `_` are guaranteed to be available for your use.  Use\nthe `created` and `destroyed` callbacks to perform initialization or\nclean-up on the object.\n\nYou can only access `findAll`, `find`, `firstNode`, and `lastNode`\nfrom the `rendered` callback and event handlers, not from `created`\nand `destroyed`, because they require the template instance to be\nin the DOM.\n\n',["#",[[0,"with"],[0,"template_findAll"]],[[">","api_box"]]],"\n\nReturns an array of DOM elements matching `selector`.\n\nThe template instance serves as the document root for the selector. Only\nelements inside the template and its sub-templates can match parts of\nthe selector.\n\n",["#",[[0,"with"],[0,"template_find"]],[[">","api_box"]]],"\n\nReturns one DOM element matching `selector`, or `null` if there are no\nsuch elements.\n\nThe template instance serves as the document root for the selector. Only\nelements inside the template and its sub-templates can match parts of\nthe selector.\n\n",["#",[[0,"with"],[0,"template_firstNode"]],[[">","api_box"]]],"\n\nThe two nodes `firstNode` and `lastNode` indicate the extent of the\nrendered template in the DOM.  The rendered template includes these\nnodes, their intervening siblings, and their descendents.  These two\nnodes are siblings (they have the same parent), and `lastNode` comes\nafter `firstNode`, or else they are the same node.\n\n",["#",[[0,"with"],[0,"template_lastNode"]],[[">","api_box"]]],"\n\n",["#",[[0,"with"],[0,"template_data"]],[[">","api_box"]]],"\n\nThis property provides access to the data context at the top level of\nthe template.  It is updated each time the template is re-rendered.\nAccess is read-only and non-reactive.\n\n\n",["#",[[0,"with"],[0,"render"]],[[">","api_box"]]],'\n\n`Meteor.render` creates a `DocumentFragment` (a sequence of DOM nodes)\nthat automatically updates in realtime. Most Meteor apps don\'t need to\ncall this directly; they use templates and Meteor handles the rendering.\n\nPass in `htmlFunc`, a function that returns an HTML\nstring. `Meteor.render` calls the function and turns the output into\nDOM nodes. Meanwhile, it tracks the data that was used when `htmlFunc`\nran, and automatically wires up callbacks so that whenever any of the\ndata changes, `htmlFunc` is re-run and the DOM nodes are updated in\nplace.\n\nYou may insert the returned `DocumentFragment` directly into the DOM\nwherever you would like it to appear. The inserted nodes will continue\nto update until they are taken off the screen. Then they will be\nautomatically cleaned up. For more details about clean-up, see\n[`Deps.flush`](#deps_flush).\n\n`Meteor.render` tracks the data dependencies of `htmlFunc` by running\nit in a reactive computation, so it can respond to changes in any reactive\ndata sources used by that function. For more information, or to learn\nhow to make your own reactive data sources, see\n[Reactivity](#reactivity).\n\nExample:\n\n    // Client side: show the number of players online.\n    var frag = Meteor.render(function () {\n      return "<p>There are " + Players.find({online: true}).count() +\n        " players online.</p>";\n    });\n    document.body.appendChild(frag);\n\n    // Server side: find all players that have been idle for a while,\n    // and mark them as offline. The count on the screen will\n    // automatically update on all clients.\n    Players.update({idleTime: {$gt: 30}}, {$set: {online: false}});\n\n',["#",[[0,"with"],[0,"renderList"]],[[">","api_box"]]],"\n\nCreates a `DocumentFragment` that automatically updates as the results\nof a database query change. Most Meteor apps use `",["{",[[0,"dstache"]]],'#each}}` in\na template instead of calling this directly.\n\n`renderList` is more efficient than using `Meteor.render` to render HTML\nfor a list of documents.  For example, if a new document is created in\nthe database that matches the query, a new item will be rendered and\ninserted at the appropriate place in the DOM without re-rendering the\nother elements.  Similarly, if a document changes position in a sorted\nquery, the DOM nodes will simply be moved and not re-rendered.\n\n`docFunc` is called as needed to generate HTML for each document.  If\nyou provide `elseFunc`, then whenever the query returns no results, it\nwill be called to render alternate content. You might use this to show\na message like "No records match your query."\n\nEach call to `docFunc` or `elseFunc` is run in its own reactive\ncomputation so that if it has other external data dependencies, it will be\nindividually re-run when the data changes.\n\nExample:\n\n    // List the titles of all of the posts that have the tag\n    // "frontpage". Keep the list updated as new posts are made, as tags\n    // change, etc.  Display the selected post differently.\n    var frag = Meteor.renderList(\n      Posts.find({tags: "frontpage"}),\n      function(post) {\n        var style = Session.equals("selectedId", post._id) ? "selected" : "";\n        // A real app would need to quote/sanitize post.name\n        return \'<div class="\' + style + \'">\' + post.name + \'</div>\';\n      });\n    document.body.appendChild(frag);\n\n    // Select a post.  This will cause only the selected item and the\n    // previously selected item to update.\n    var somePost = Posts.findOne({tags: "frontpage"});\n    Session.set("selectedId", somePost._id);\n\n\n',["#",[[0,"api_box_inline"],[0,"eventmaps"]],["\n\nSeveral functions take event maps. An event map is an object where\nthe properties specify a set of events to handle, and the values are\nthe handlers for those events. The property can be in one of several\nforms:\n\n<dl>\n",["#",[[0,"dtdd"],"<em>eventtype</em>"],["\nMatches a particular type of event, such as 'click'.\n"]],"\n\n",["#",[[0,"dtdd"],"<em>eventtype selector</em>"],["\nMatches a particular type of event, but only when it appears on\nan element that matches a certain CSS selector.\n"]],"\n\n",["#",[[0,"dtdd"],"<em>event1, event2</em>"],["\nTo handle more than one type of event with the same function, use a\ncomma-separated list.\n"]],"\n</dl>\n\nThe handler function receives two arguments: `event`, an object with\ninformation about the event, and `template`, a [template\ninstance](#template_inst) for the template where the handler is\ndefined.  The handler also receives some additional context data in\n`this`, depending on the context of the current element handling the\nevent.  In a Handlebars template, an element's context is the\nHandlebars data context where that element occurs, which is set by\nblock helpers such as `#with` and `#each`.\n\nExample:\n\n    {\n      // Fires when any element is clicked\n      'click': function (event) { ... },\n\n      // Fires when any element with the 'accept' class is clicked\n      'click .accept': function (event) { ... },\n\n      // Fires when 'accept' is clicked, or a key is pressed\n      'keydown, click .accept': function (event) { ... }\n    }\n\nMost events bubble up the document tree from their originating\nelement.  For example, `'click p'` catches a click anywhere in a\nparagraph, even if the click originated on a link, span, or some other\nelement inside the paragraph.  The originating element of the event\nis available as the `target` property, while the element that matched\nthe selector and is currently handling it is called `currentTarget`.\n\n    {\n      'click p': function (event) {\n        var paragraph = event.currentTarget; // always a P\n        var clickedElement = event.target; // could be the P or a child element\n      }\n    }\n\nIf a selector matches multiple elements that an event bubbles to, it\nwill be called multiple times, for example in the case of `'click\ndiv'` or `'click *'`.  If no selector is given, the handler\nwill only be called once, on the original target element.\n\nThe following properties and methods are available on the event object\npassed to handlers:\n\n<dl class=\"objdesc\">\n",["#",[[0,"dtdd"],{name:"type",type:"String"}],['\nThe event\'s type, such as "click", "blur" or "keypress".\n']],"\n\n",["#",[[0,"dtdd"],{name:"target",type:"DOM Element"}],["\nThe element that originated the event.\n"]],"\n\n",["#",[[0,"dtdd"],{name:"currentTarget",type:"DOM Element"}],["\nThe element currently handling the event.  This is the element that\nmatched the selector in the event map.  For events that bubble, it may\nbe `target` or an ancestor of `target`, and its value changes as the\nevent bubbles.\n"]],"\n\n",["#",[[0,"dtdd"],{name:"which",type:"Number"}],["\nFor mouse events, the number of the mouse button (1=left, 2=middle, 3=right).\nFor key events, a character or key code.\n"]],"\n\n",["#",[[0,"dtdd"],"stopPropagation()"],["\nPrevent the event from propagating (bubbling) up to other elements.\nOther event handlers matching the same element are still fired, in\nthis and other event maps.\n"]],"\n\n",["#",[[0,"dtdd"],"stopImmediatePropagation()"],["\nPrevent all additional event handlers from being run on this event,\nincluding other handlers in this event map, handlers reached by\nbubbling, and handlers in other event maps.\n"]],"\n\n",["#",[[0,"dtdd"],"preventDefault()"],["\nPrevents the action the browser would normally take in response to this\nevent, such as following a link or submitting a form.  Further handlers\nare still called, but cannot reverse the effect.\n"]],"\n\n",["#",[[0,"dtdd"],"isPropagationStopped()"],["\nReturns whether `stopPropagation()` has been called for this event.\n"]],"\n\n",["#",[[0,"dtdd"],"isImmediatePropagationStopped()"],["\nReturns whether `stopImmediatePropagation()` has been called for this event.\n"]],"\n\n",["#",[[0,"dtdd"],"isDefaultPrevented()"],["\nReturns whether `preventDefault()` has been called for this event.\n"]],'\n</dl>\n\nReturning `false` from a handler is the same as calling\nboth `stopImmediatePropagation` and `preventDefault` on the event.\n\nEvent types and their uses include:\n\n<dl class="objdesc">\n',["#",[[0,"dtdd"],"<code>click</code>"],["\nMouse click on any element, including a link, button, form control, or div.\nUse `preventDefault()` to prevent a clicked link from being followed.\nSome ways of activating an element from the keyboard also fire `click`.\n"]],"\n\n",["#",[[0,"dtdd"],"<code>dblclick</code>"],["\nDouble-click.\n"]],"\n\n",["#",[[0,"dtdd"],"<code>focus, blur</code>"],["\nA text input field or other form control gains or loses focus.  You\ncan make any element focusable by giving it a `tabindex` property.\nBrowsers differ on whether links, checkboxes, and radio buttons are\nnatively focusable.  These events do not bubble.\n"]],"\n\n",["#",[[0,"dtdd"],"<code>change</code>"],["\nA checkbox or radio button changes state.  For text fields, use\n`blur` or key events to respond to changes.\n"]],"\n\n",["#",[[0,"dtdd"],"<code>mouseenter, mouseleave</code>"],[" The pointer enters or\nleaves the bounds of an element.  These events do not bubble.\n"]],"\n\n",["#",[[0,"dtdd"],"<code>mousedown, mouseup</code>"],["\nThe mouse button is newly down or up.\n"]],"\n\n",["#",[[0,"dtdd"],"<code>keydown, keypress, keyup</code>"],["\nThe user presses a keyboard key.  `keypress` is most useful for\ncatching typing in text fields, while `keydown` and `keyup` can be\nused for arrow keys or modifier keys.\n"]],"\n\n",["#",[[0,"dtdd"],"<code>tap</code>"],[" Tap on an element.  On touch-enabled\ndevices, this is a replacement to `click` that fires immediately.\nThese events are synthesized from `touchmove` and `touchend`.\n"]],"\n\n</dl>\n\nOther DOM events are available as well, but for the events above,\nMeteor has taken some care to ensure that they work uniformly in all\nbrowsers.\n\n"]],"\n\n\n\n",["#",[[0,"api_box_inline"],[0,"constant"]],['\n\nYou can mark a region of a template as "constant" and not subject to\nre-rendering using the\n`',["{",[[0,"dstache"]]],"#constant}}...",["{",[[0,"dstache"]]],"/constant}}` block helper.\nContent inside the `#constant` block helper is preserved exactly as-is\neven if the enclosing template is re-rendered.  Changes to other parts\nof the template are patched in around it in the same manner as\n`preserve`.  Unlike individual node preservation, a constant region\nretains not only the identities of its nodes but also their attributes\nand contents.  The contents of the block will only be evaluated once\nper occurrence of the enclosing template.\n\nConstant regions allow non-Meteor content to be embedded in a Meteor\ntemplate.  Many third-party widgets create and manage their own DOM\nnodes programmatically. Typically, you put an empty element in your\ntemplate, which the widget or library will then populate with\nchildren. Normally, when Meteor re-renders the enclosing template it\nwould remove the new children, since the template says it should be\nempty. If the container is wrapped in a `#constant` block, however, it\nis left alone; whatever content is currently in the DOM remains.\n\n",["#",[[0,"note"]],["\nConstant regions are intended for embedding non-Meteor content.\nEvent handlers and reactive dependencies don't currently work\ncorrectly inside constant regions.\n"]],"\n\n\n"]],"\n\n",["#",[[0,"api_box_inline"],[0,"isolate"]],["\n\nEach template runs as its own reactive computation.  When the template\naccesses a reactive data source, such as by calling `Session.get` or\nmaking a database query, this establishes a data dependency that will\ncause the whole template to be re-rendered when the data changes.\nThis means that the amount of re-rendering for a particular change\nis affected by how you've divided your HTML into templates.\n\nTypically, the exact extent of re-rendering is not crucial, but if you\nwant more control, such as for performance reasons, you can use the\n`",["{",[[0,"dstache"]]],"#isolate}}...",["{",[[0,"dstache"]]],"/isolate}}` helper.  Data\ndependencies established inside an `#isolate` block are localized to\nthe block and will not in themselves cause the parent template to be\nre-rendered.  This block helper essentially conveys the reactivity\nbenefits you would get by pulling the content out into a new\nsub-template.\n\n"]],'\n\n<h2 id="match"><span>Match</span></h2>\n\nMeteor methods and publish functions take arbitrary [EJSON](#ejson) types as\narguments, but most arguments are expected to be of a particular type. Meteor\'s\n`check` package is a lightweight library for checking that arguments and other\nvalues are of the expected type. For example:\n\n    Meteor.publish("chats-in-room", function (roomId) {\n      // Make sure roomId is a string, not an arbitrary mongo selector object.\n      check(roomId, String);\n      return Chats.find({room: roomId});\n    });\n\n    Meteor.methods({addChat: function (roomId, message) {\n      check(roomId, String);\n      check(message, {\n        text: String,\n        timestamp: Date,\n        // Optional, but if present must be an array of strings.\n        tags: Match.Optional([String])\n      });\n\n      // ... do something with the message ...\n    }});\n\n',["#",[[0,"with"],[0,"check"]],[[">","api_box"]]],'\n\nIf the match fails, `check` throws a `Match.Error` describing how it failed. If\nthis error gets sent over the wire to the client, it will appear only as\n`Meteor.Error(400, "Match Failed")`; the failure details will be written to the\nserver logs but not revealed to the client.\n\n',["#",[[0,"with"],[0,"match_test"]],[[">","api_box"]]],"\n\n",["#",[[0,"api_box_inline"],[0,"matchpatterns"]],["\n\nThe following patterns can be used as pattern arguments to `check` and `Match.test`:\n\n\n<dl>\n",["#",[[0,"dtdd"],"<code>Match.Any</code>"],["\nMatches any value.\n"]],"\n\n",["#",[[0,"dtdd"],"<code>String</code>, <code>Number</code>, <code>Boolean</code>, <code>undefined</code>, <code>null</code>"],["\nMatches a primitive of the given type.\n"]],"\n\n",["#",[[0,"dtdd"],"<code>Match.Integer</code>"],["\nMatches a signed 32-bit integer. Doesn't match `Infinity`, `-Infinity`, or `NaN`.\n"]],"\n\n",["#",[[0,"dtdd"],"<code>[<em>pattern</em>]</code>"],["\nA one-element array matches an array of elements, each of which match\n*pattern*. For example, `[Number]` matches a (possibly empty) array of numbers;\n`[Match.Any]` matches any array.\n"]],"\n\n",["#",[[0,"dtdd"],"<code>{<em>key1</em>: <em>pattern1</em>, <em>key2</em>: <em>pattern2</em>, ...}</code>"],["\nMatches an Object with the given keys, with values matching the given patterns.\nIf any *pattern* is a `Match.Optional`, that key does not need to exist\nin the object. The value may not contain any keys not listed in the pattern.\nThe value must be a plain Object with no special prototype.\n"]],"\n\n",["#",[[0,"dtdd"],"<code>Match.ObjectIncluding({<em>key1</em>: <em>pattern1</em>, <em>key2</em>: <em>pattern2</em>, ...})</code>"],["\nMatches an Object with the given keys; the value may also have other keys\nwith arbitrary values.\n"]],"\n\n",["#",[[0,"dtdd"],"<code>Object</code>"],["\nMatches any plain Object with any keys; equivalent to\n`Match.ObjectIncluding({})`.\n"]],"\n\n",["#",[[0,"dtdd"],"<code>Match.Optional(<em>pattern</em>)</code>"],[' Matches either\n`undefined` or something that matches pattern. If used in an object this matches\nonly if the key is not set as opposed to the value being set to `undefined`.\n\n    // In an object\n    var pat = { name: Match.Optional(String) };\n    check({ name: "something" }, pat) // OK\n    check({}, pat) // OK\n    check({ name: undefined }, pat) // Throws an exception\n\n    // Outside an object\n    check(undefined, Match.Optional(String)); // OK\n\n']],"\n\n",["#",[[0,"dtdd"],"<code>Match.OneOf(<em>pattern1</em>, <em>pattern2</em>, ...)</code>"],["\nMatches any value that matches at least one of the provided patterns.\n"]],"\n\n",["#",[[0,"dtdd"],"Any constructor function (eg, <code>Date</code>)"],["\nMatches any element that is an instance of that type.\n"]],"\n\n",["#",[[0,"dtdd"],"<code>Match.Where(<em>condition</em>)</code>"],["\nCalls the function *condition* with the value as the argument. If *condition*\nreturns true, this matches. If *condition* throws a `Match.Error` or returns\nfalse, this fails. If *condition* throws any other error, that error is thrown\nfrom the call to `check` or `Match.test`. Examples:\n\n    check(buffer, Match.Where(EJSON.isBinary));\n\n    NonEmptyString = Match.Where(function (x) {\n      check(x, String);\n      return x.length > 0;\n    });\n    check(arg, NonEmptyString);\n"]],"\n</dl>\n\n"]],"\n\n<h2 id=\"timers\"><span>Timers</span></h2>\n\nMeteor uses global environment variables\nto keep track of things like the current request's user.  To make sure\nthese variables have the right values, you need to use\n`Meteor.setTimeout` instead of `setTimeout` and `Meteor.setInterval`\ninstead of `setInterval`.\n\nThese functions work just like their native JavaScript equivalents.\nIf you call the native function, you'll get an error stating that Meteor\ncode must always run within a Fiber, and advising to use\n`Meteor.bindEnvironment`.\n\n",["#",[[0,"with"],[0,"setTimeout"]],[[">","api_box"]]],"\n\nReturns a handle that can be used by `Meteor.clearTimeout`.\n\n",["#",[[0,"with"],[0,"setInterval"]],[[">","api_box"]]],"\n\nReturns a handle that can be used by `Meteor.clearInterval`.\n\n",["#",[[0,"with"],[0,"clearTimeout"]],[[">","api_box"]]],"\n",["#",[[0,"with"],[0,"clearInterval"]],[[">","api_box"]]],'\n\n<h2 id="deps"><span>Deps</span></h2>\n\nMeteor has a simple dependency tracking system which allows it to\nautomatically rerun templates and other computations whenever\n[`Session`](#session) variables, database queries, and other data\nsources change.\n\nUnlike most other systems, you don\'t have to manually declare these\ndependencies &mdash; it "just works". The mechanism is simple and\nefficient. When you call a function that supports reactive updates\n(such as a database query), it automatically saves the current\nComputation object, if any (representing, for example, the current\ntemplate being rendered).  Later, when the data changes, the function\ncan "invalidate" the Computation, causing it to rerun (rerendering the\ntemplate).\n\nApplications will find [`Deps.autorun`](#deps_autorun) useful, while more\nadvanced facilities such as `Deps.Dependency` and `onInvalidate`\ncallbacks are intended primarily for package authors implementing new\nreactive data sources.\n\n',["#",[[0,"with"],[0,"deps_autorun"]],[[">","api_box"]]],'\n\n`Deps.autorun` allows you to run a function that depends on reactive data\nsources, in such a way that if there are changes to the data later,\nthe function will be rerun.\n\nFor example, you can monitor a cursor (which is a reactive data\nsource) and aggregate it into a session variable:\n\n    Deps.autorun(function () {\n      var oldest = _.max(Monkeys.find().fetch(), function (monkey) {\n        return monkey.age;\n      });\n      if (oldest)\n        Session.set("oldest", oldest.name);\n    });\n\nOr you can wait for a session variable to have a certain value, and do\nsomething the first time it does, calling `stop` on the computation to\nprevent further rerunning:\n\n    Deps.autorun(function (c) {\n      if (! Session.equals("shouldAlert", true))\n        return;\n\n      c.stop();\n      alert("Oh no!");\n    });\n\nThe function is invoked immediately, at which point it may alert and\nstop right away if `shouldAlert` is already true.  If not, the\nfunction is run again when `shouldAlert` becomes true.\n\nA change to a data dependency does not cause an immediate rerun, but\nrather "invalidates" the computation, causing it to rerun the next\ntime a flush occurs.  A flush will occur automatically as soon as\nthe system is idle if there are invalidated computations.  You can\nalso use [`Deps.flush`](#deps_flush) to cause an immediate flush of\nall pending reruns.\n\nIf you nest calls to `Deps.autorun`, then when the outer call stops or\nreruns, the inner call will stop automatically.  Subscriptions and\nobservers are also automatically stopped when used as part of a\ncomputation that is rerun, allowing new ones to be established.  See\n[`Meteor.subscribe`](#meteor_subscribe) for more information about\nsubscriptions and reactivity.\n\nIf the initial run of an autorun throws an exception, the computation\nis automatically stopped and won\'t be rerun.\n\n',["#",[[0,"with"],[0,"deps_flush"]],[[">","api_box"]]],"\n\nNormally, when you make changes (like writing to the database),\ntheir impact (like updating the DOM) is delayed until the system is\nidle. This keeps things predictable &mdash; you can know that the DOM\nwon't go changing out from under your code as it runs. It's also one\nof the things that makes Meteor fast.\n\n`Deps.flush` forces all of the pending reactive updates to complete.\nFor example, if an event handler changes a Session\nvariable that will cause part of the user interface to rerender, the\nhandler can call `flush` to perform the rerender immediately and then\naccess the resulting DOM.\n\nAn automatic flush occurs whenever the system is idle which performs\nexactly the same work as `Deps.flush`.  The flushing process consists\nof rerunning any invalidated computations.  If additional\ninvalidations happen while flushing, they are processed as part of the\nsame flush until there is no more work to be done.  Callbacks\nregistered with [`Deps.afterFlush`](#deps_afterflush) are called\nafter processing outstanding invalidations.\n\nAny auto-updating DOM elements that are found to not be in the\ndocument during a flush may be cleaned up by Meteor (meaning that\nMeteor will stop tracking and updating the elements, so that the\nbrowser's garbage collector can delete them).  So, if you manually\ncall `flush`, you need to make sure that any auto-updating elements\nthat you have created by calling [`Meteor.render`](#meteor_render)\nhave already been inserted in the main DOM tree.\n\nIt is illegal to call `flush` from inside a `flush` or from a running\ncomputation.\n\n",["#",[[0,"with"],[0,"deps_nonreactive"]],[[">","api_box"]]],"\n\nCalls `func` with `Deps.currentComputation` temporarily set to `null`\nand returns `func`'s own return value.  If `func` accesses reactive data\nsources, these data sources will never cause a rerun of the enclosing\ncomputation.\n\n",["#",[[0,"with"],[0,"deps_active"]],[[">","api_box"]]],"\n\nThis value is useful for data source implementations to determine\nwhether they are being accessed reactively or not.\n\n",["#",[[0,"with"],[0,"deps_currentcomputation"]],[[">","api_box"]]],"\n\nIt's very rare to need to access `currentComputation` directly.  The\ncurrent computation is used implicitly by\n[`Deps.active`](#deps_active) (which tests whether there is one),\n[`dependency.depend()`](#dependency_depend) (which registers that it depends on a\ndependency), and [`Deps.onInvalidate`](#deps_oninvalidate) (which\nregisters a callback with it).\n\n",["#",[[0,"with"],[0,"deps_oninvalidate"]],[[">","api_box"]]],"\n\nSee [*`computation`*`.onInvalidate`](#computation_oninvalidate) for more\ndetails.\n\n",["#",[[0,"with"],[0,"deps_afterflush"]],[[">","api_box"]]],"\n\nFunctions scheduled by multiple calls to `afterFlush` are guaranteed\nto run in the order that `afterFlush` was called.  Functions are\nguaranteed to be called at a time when there are no invalidated\ncomputations that need rerunning.  This means that if an `afterFlush`\nfunction invalidates a computation, that computation will be rerun\nbefore any other `afterFlush` functions are called.\n\n<h2 id=\"deps_computation\"><span>Deps.Computation</span></h2>\n\nA Computation object represents code that is repeatedly rerun in\nresponse to reactive data changes.  Computations don't have return\nvalues; they just perform actions, such as rerendering a template on\nthe screen.  Computations are created using [`Deps.autorun`](#deps_autorun).\nUse [`stop`](#computation_stop) to prevent further rerunning of a\ncomputation.\n\nEach time a computation runs, it may access various reactive data\nsources that serve as inputs to the computation, which are called its\ndependencies.  At some future time, one of these dependencies may\ntrigger the computation to be rerun by invalidating it.  When this\nhappens, the dependencies are cleared, and the computation is\nscheduled to be rerun at flush time.\n\nThe *current computation*\n([`Deps.currentComputation`](#deps_currentcomputation)) is the\ncomputation that is currently being run or rerun (computed), and the\none that gains a dependency when a reactive data source is accessed.\nData sources are responsible for tracking these dependencies using\n[`Deps.Dependency`](#deps_dependency) objects.\n\nInvalidating a computation sets its `invalidated` property to true\nand immediately calls all of the computation's `onInvalidate`\ncallbacks.  When a flush occurs, if the computation has been invalidated\nand not stopped, then the computation is rerun by setting the\n`invalidated` property to `false` and calling the original function\nthat was passed to `Deps.autorun`.  A flush will occur when the current\ncode finishes running, or sooner if `Deps.flush` is called.\n\nStopping a computation invalidates it (if it is valid) for the purpose\nof calling callbacks, but ensures that it will never be rerun.\n\nExample:\n\n    // if we're in a computation, then perform some clean-up\n    // when the current computation is invalidated (rerun or\n    // stopped)\n    if (Deps.active) {\n      Deps.onInvalidate(function () {\n        x.destroy();\n        y.finalize();\n      });\n    }\n\n",["#",[[0,"with"],[0,"computation_stop"]],[[">","api_box"]]],"\n\nStopping a computation is irreversible and guarantees that it will\nnever be rerun.  You can stop a computation at any time, including\nfrom the computation's own run function.  Stopping a computation that\nis already stopped has no effect.\n\nStopping a computation causes its `onInvalidate` callbacks to run\nimmediately if it is not currently invalidated.\n\nNested computations are stopped automatically when their enclosing\ncomputation is rerun.\n\n",["#",[[0,"with"],[0,"computation_invalidate"]],[[">","api_box"]]],"\n\nInvalidating a computation marks it to be rerun at\n[flush time](#deps_flush), at\nwhich point the computation becomes valid again.  It is rare to\ninvalidate a computation manually, because reactive data sources\ninvalidate their calling computations when they change.  Reactive data\nsources in turn perform this invalidation using one or more\n[`Deps.Dependency`](#deps_dependency) objects.\n\nInvalidating a computation immediately calls all `onInvalidate`\ncallbacks registered on it.  Invalidating a computation that is\ncurrently invalidated or is stopped has no effect.  A computation can\ninvalidate itself, but if it continues to do so indefinitely, the\nresult will be an infinite loop.\n\n",["#",[[0,"with"],[0,"computation_oninvalidate"]],[[">","api_box"]]],"\n\n`onInvalidate` registers a one-time callback that either fires\nimmediately or as soon as the computation is next invalidated or\nstopped.  It is used by reactive data sources to clean up resources or\nbreak dependencies when a computation is rerun or stopped.\n\nTo get a callback after a computation has been recomputed, you can\ncall [`Deps.afterFlush`](#deps_afterflush) from `onInvalidate`.\n\n",["#",[[0,"with"],[0,"computation_stopped"]],[[">","api_box"]]],"\n\n",["#",[[0,"with"],[0,"computation_invalidated"]],[[">","api_box"]]],"\n\nThis property is initially false.  It is set to true by `stop()` and\n`invalidate()`.  It is reset to false when the computation is\nrecomputed at flush time.\n\n",["#",[[0,"with"],[0,"computation_firstrun"]],[[">","api_box"]]],'\n\nThis property is a convenience to support the common pattern where a\ncomputation has logic specific to the first run.\n\n<h2 id="deps_dependency"><span>Deps.Dependency</span></h2>\n\nA Dependency represents an atomic unit of reactive data that a\ncomputation might depend on.  Reactive data sources such as Session or\nMinimongo internally create different Dependency objects for different\npieces of data, each of which may be depended on by multiple\ncomputations.  When the data changes, the computations are\ninvalidated.\n\nDependencies don\'t store data, they just track the set of computations to\ninvalidate if something changes.  Typically, a data value will be\naccompanied by a Dependency object that tracks the computations that depend\non it, as in this example:\n\n    var weather = "sunny";\n    var weatherDep = new Deps.Dependency;\n\n    var getWeather = function () {\n      weatherDep.depend()\n      return weather;\n    };\n\n    var setWeather = function (w) {\n      weather = w;\n      // (could add logic here to only call changed()\n      // if the new value is different from the old)\n      weatherDep.changed();\n    };\n\nThis example implements a weather data source with a simple getter and\nsetter.  The getter records that the current computation depends on\nthe `weatherDep` dependency using `depend()`, while the setter\nsignals the dependency to invalidate all dependent computations by\ncalling `changed()`.\n\nThe reason Dependencies do not store data themselves is that it can be\nuseful to associate multiple Dependencies with the same piece of data.\nFor example, one Dependency might represent the result of a database\nquery, while another might represent just the number of documents in\nthe result.  A Dependency could represent whether the weather is sunny\nor not, or whether the temperature is above freezing.\n[`Session.equals`](#session_equals) is implemented this way for\nefficiency.  When you call `Session.equals("weather", "sunny")`, the\ncurrent computation is made to depend on an internal Dependency that\ndoes not change if the weather goes from, say, "rainy" to "cloudy".\n\nConceptually, the only two things a Dependency can do are gain a\ndependent and change.\n\nA Dependency\'s dependent computations are always valid (they have\n`invalidated === false`).  If a dependent is invalidated at any time,\neither by the Dependency itself or some other way, it is immediately\nremoved.\n\n',["#",[[0,"with"],[0,"dependency_changed"]],[[">","api_box"]]],"\n\n",["#",[[0,"with"],[0,"dependency_depend"]],[[">","api_box"]]],"\n\n`dep.depend()` is used in reactive data source implementations to record\nthe fact that `dep` is being accessed from the current computation.\n\n",["#",[[0,"with"],[0,"dependency_hasdependents"]],[[">","api_box"]]],'\n\nFor reactive data sources that create many internal Dependencies,\nthis function is useful to determine whether a particular Dependency is\nstill tracking any dependency relationships or if it can be cleaned up\nto save memory.\n\n<h2 id="ejson"><span>EJSON</span></h2>\n\nEJSON is an extension of JSON to support more types. It supports all JSON-safe\ntypes, as well as:\n\n - **Date** (JavaScript `Date`)\n - **Binary** (JavaScript `Uint8Array` or the\n   result of [`EJSON.newBinary`](#ejson_new_binary))\n - **User-defined types** (see [`EJSON.addType`](#ejson_add_type).  For example,\n [`Meteor.Collection.ObjectID`](#collection_object_id) is implemented this way.)\n\nAll EJSON serializations are also valid JSON.  For example an object with a date\nand a binary buffer would be serialized in EJSON as:\n\n    {\n      "d": {"$date": 1358205756553},\n      "b": {"$binary": "c3VyZS4="}\n    }\n\nMeteor supports all built-in EJSON data types in publishers, method arguments\nand results, Mongo databases, and [`Session`](#session) variables.\n\n',["#",[[0,"with"],[0,"ejsonParse"]],[[">","api_box"]]],"\n\n",["#",[[0,"with"],[0,"ejsonStringify"]],[[">","api_box"]]],"\n\n",["#",[[0,"with"],[0,"ejsonFromJSONValue"]],[[">","api_box"]]],"\n\n",["#",[[0,"with"],[0,"ejsonToJSONValue"]],[[">","api_box"]]],"\n\n",["#",[[0,"with"],[0,"ejsonEquals"]],[[">","api_box"]]],"\n\n",["#",[[0,"with"],[0,"ejsonClone"]],[[">","api_box"]]],"\n\n",["#",[[0,"with"],[0,"ejsonNewBinary"]],[[">","api_box"]]],"\n\nBuffers of binary data are represented by `Uint8Array` instances on JavaScript\nplatforms that support them.  On implementations of JavaScript that do not\nsupport `Uint8Array`, binary data buffers are represented by standard arrays\ncontaining numbers ranging from 0 to 255, and the `$Uint8ArrayPolyfill` key\nset to `true`.\n\n",["#",[[0,"with"],[0,"ejsonIsBinary"]],[[">","api_box"]]],"\n\n",["#",[[0,"with"],[0,"ejsonAddType"]],[[">","api_box"]]],"\n\nWhen you add a type to EJSON, Meteor will be able to use that type in:\n\n - publishing objects of your type if you pass them to publish handlers.\n - allowing your type in the return values or arguments to\n   [methods](#methods_header).\n - storing your type client-side in Minimongo.\n - allowing your type in [`Session`](#session) variables.\n\n",["#",[[0,"note"]],["\n\n  MongoDB cannot store most user-defined types natively on the server.  Your\n  type will work in Minimongo, and you can send it to the client using a custom\n  publisher, but MongoDB can only store the types defined in\n  [BSON](http://bsonspec.org/).\n\n"]],"\n\nInstances of your type must implement [`typeName`](#ejson_type_typeName) and\n[`toJSONValue`](#ejson_type_toJSONValue) methods, and may implement\n[`clone`](#ejson_type_clone) and [`equals`](#ejson_type_equals) methods if the\ndefault implementations are not sufficient.\n\n",["#",[[0,"with"],[0,"ejsonTypeName"]],[[">","api_box"]]],"\n",["#",[[0,"with"],[0,"ejsonTypeToJSONValue"]],[[">","api_box"]]],"\n\nFor example, the `toJSONValue` method for\n[`Meteor.Collection.ObjectID`](#collection_object_id) could be:\n\n    function () {\n      return this.toHexString();\n    };\n\n",["#",[[0,"with"],[0,"ejsonTypeClone"]],[[">","api_box"]]],"\n\nIf your type does not have a `clone` method, `EJSON.clone` will use\n[`toJSONValue`](#ejson_type_toJSONValue) and the factory instead.\n\n",["#",[[0,"with"],[0,"ejsonTypeEquals"]],[[">","api_box"]]],'\n\nThe `equals` method should define an [equivalence\nrelation](http://en.wikipedia.org/wiki/Equivalence_relation).  It should have\nthe following properties:\n\n - *Reflexivity* - for any instance `a`: `a.equals(a)` must be true.\n - *Symmetry* - for any two instances `a` and `b`: `a.equals(b)` if and only if `b.equals(a)`.\n - *Transitivity* - for any three instances `a`, `b`, and `c`: `a.equals(b)` and `b.equals(c)` implies `a.equals(c)`.\n\nIf your type does not have an `equals` method, `EJSON.equals` will compare the\nresult of calling [`toJSONValue`](#ejson_type_toJSONValue) instead.\n\n\n<h2 id="http"><span>HTTP</span></h2>\n\n`HTTP` provides an HTTP request API on the client and server.  To use\nthese functions, add the HTTP package to your project with `$ meteor add http`.\n\n',["#",[[0,"with"],[0,"httpcall"]],[[">","api_box"]]],'\n\nThis function initiates an HTTP request to a remote server.\n\nOn the server, this function can be run either synchronously or\nasynchronously.  If the callback is omitted, it runs synchronously\nand the results are returned once the request completes successfully.\nIf the request was not successful, an error is thrown.\nThis is\nuseful when making server-to-server HTTP API calls from within Meteor\nmethods, as the method can succeed or fail based on the results of the\nsynchronous HTTP call.  In this case, consider using\n[`this.unblock()`](#method_unblock) to allow other methods on the same\nconnection to run in\nthe mean time.  On the client, this function must be used\nasynchronously by passing a callback.\n\nBoth HTTP and HTTPS protocols are supported.  The `url` argument must be\nan absolute URL including protocol and host name on the server, but may be\nrelative to the current host on the client.  The `query` option\nreplaces the query string of `url`.  Parameters specified in `params`\nthat are put in the URL are appended to any query string.\nFor example, with a `url` of `"/path?query"` and\n`params` of `{foo:"bar"}`, the final URL will be `"/path?query&foo=bar"`.\n\nThe `params` are put in the URL or the request body, depending on the\ntype of request.  In the case of request with no bodies, like GET and\nHEAD, the parameters will always go in the URL.  For a POST or other\ntype of request, the parameters will be encoded into the body with a\nstandard `x-www-form-urlencoded` content type, unless the `content`\nor `data` option is used to specify a body, in which case the\nparameters will be appended to the URL instead.\n\nWhen run in asynchronous mode, the callback receives two arguments,\n`error` and `result`.  The\n`error` argument will contain an Error if the request fails in any\nway, including a network error, time-out, or an HTTP status code in\nthe 400 or 500 range.  In case of a 4xx/5xx HTTP status code, the\n`response` property on `error` matches the contents of the result\nobject.  When run in synchronous mode, either `result` is returned\nfrom the function, or `error` is thrown.\n\nContents of the result object:\n\n<dl class="objdesc">\n\n<dt><span class="name">statusCode</span>\n  <span class="type">Number</span></dt>\n<dd>Numeric HTTP result status code, or <code>null</code> on error.</dd>\n\n<dt><span class="name">content</span>\n  <span class="type">String</span></dt>\n<dd>The body of the HTTP response as a string.</dd>\n\n<dt><span class="name">data</span>\n  <span class="type">Object or <code>null</code></span></dt>\n<dd>If the response headers indicate JSON content, this contains the body of the document parsed as a JSON object.</dd>\n\n<dt><span class="name">headers</span>\n  <span class="type">Object</span></dt>\n<dd>A dictionary of HTTP headers from the response.</dd>\n\n</dl>\n\nExample server method:\n\n    Meteor.methods({checkTwitter: function (userId) {\n      check(userId, String);\n      this.unblock();\n      try {\n        var result = HTTP.call("GET", "http://api.twitter.com/xyz",\n                               {params: {user: userId}});\n        return true;\n      } catch (e) {\n        // Got a network error, time-out or HTTP error in the 400 or 500 range.\n        return false;\n      }\n    }});\n\nExample asynchronous HTTP call:\n\n    HTTP.call("POST", "http://api.twitter.com/xyz",\n              {data: {some: "json", stuff: 1}},\n              function (error, result) {\n                if (!error) {\n                  Session.set("twizzled", true);\n                }\n              });\n\n\n',["#",[[0,"with"],[0,"http_get"]],[[">","api_box"]]],"\n",["#",[[0,"with"],[0,"http_post"]],[[">","api_box"]]],"\n",["#",[[0,"with"],[0,"http_put"]],[[">","api_box"]]],"\n",["#",[[0,"with"],[0,"http_del"]],[[">","api_box"]]],'\n\n\n<h2 id="email"><span>Email</span></h2>\n\nThe `email` package allows sending email from a Meteor app. To use it, add the\npackage to your project with `$ meteor add email`.\n\nThe server reads from the `MAIL_URL` environment variable to determine how to\nsend mail. Currently, Meteor supports sending mail over SMTP; the `MAIL_URL`\nenvironment variable should be of the form\n`smtp://USERNAME:PASSWORD@HOST:PORT/`. For apps deployed with `meteor deploy`,\n`MAIL_URL` defaults to an account (provided by\n[Mailgun](http://www.mailgun.com/)) which allows apps to send up to 200 emails\nper day; you may override this default by assigning to `process.env.MAIL_URL`\nbefore your first call to `Email.send`.\n\nIf `MAIL_URL` is not set (eg, when running your application locally),\n`Email.send` outputs the message to standard output instead.\n\n',["#",[[0,"with"],[0,"email_send"]],[[">","api_box"]]],"\n\nYou must provide the `from` option and at least one of `to`, `cc`, and `bcc`;\nall other options are optional.\n\n`Email.send` only works on the server. Here is an example of how a\nclient could use a server method call to send an email. (In an actual\napplication, you'd need to be careful to limit the emails that a\nclient could send, to prevent your server from being used as a relay\nby spammers.)\n\n    // In your server code: define a method that the client can call\n    Meteor.methods({\n      sendEmail: function (to, from, subject, text) {\n        check([to, from, subject, text], [String]);\n\n        // Let other method calls from the same client start running,\n        // without waiting for the email sending to complete.\n        this.unblock();\n\n        Email.send({\n          to: to,\n          from: from,\n          subject: subject,\n          text: text\n        });\n      }\n    });\n\n    // In your client code: asynchronously send an email\n    Meteor.call('sendEmail',\n                'alice@example.com',\n                'bob@example.com',\n                'Hello from Meteor!',\n                'This is a test of Email.send.');\n\n"]],'\n\n<h2 id="assets"><span>Assets</span></h2>\n\n',["#",[[0,"better_markdown"]],["\n`Assets` allows server code in a Meteor application to access static server\nassets, which are located in the `private` subdirectory of an application's\ntree.\n\n",["#",[[0,"with"],[0,"assets_getText"]],[[">","api_box"]]],"\n",["#",[[0,"with"],[0,"assets_getBinary"]],[[">","api_box"]]],"\n\nStatic server assets are included by placing them in the application's `private`\nsubdirectory. For example, if an application's `private` subdirectory includes a\ndirectory called `nested` with a file called `data.txt` inside it, then server\ncode can read `data.txt` by running:\n\n    var data = Assets.getText('nested/data.txt');\n"]]])),Template.__define__("api_box",Package.handlebars.Handlebars.json_ast_to_func(['<div class="api ',["{",[[0,"bare"]]],'">\n<h3 id="',["{",[[0,"id"]]],'">\n  <a class="name selflink" href="#',["{",[[0,"id"]]],'">',["!",[[0,"name"]]],"</a>\n",["#",[[0,"if"],[0,"locus"]],['\n  <span class="locus">',["{",[[0,"locus"]]],"</span>\n"]],'\n</h3>\n\n<div class="desc">\n',["#",[[0,"each"],[0,"descr"]],[["#",[[0,"better_markdown"]],[["!",[[0]]]]]]],"\n</div>\n\n",["#",[[0,"if"],[0,"args"]],["\n<h4>Arguments</h4>\n",["#",[[0,"with"],[0,"args"]],[[">","api_box_args"]]],"\n"]],"\n\n",["#",[[0,"if"],[0,"options"]],["\n<h4>Options</h4>\n",["#",[[0,"with"],[0,"options"]],[[">","api_box_args"]]],"\n"]],"\n\n",["#",[[0,"if"],[0,"body"]],["\n",["#",[[0,"better_markdown"]],[["!",[[0,"body"]]]]],"\n"]],"\n\n</div>"])),Template.__define__("api_box_args",Package.handlebars.Handlebars.json_ast_to_func(['<dl class="args">\n',["#",[[0,"each"],[0]],['\n<dt><span class="name">',["!",[[0,"name"]]],'</span>\n  <span class="type">\n    ',["#",[[0,"if"],[0,"type_link"]],['\n      <a href="#',["{",[[0,"type_link"]]],'">',["!",[[0,"type"]]],"</a>\n    "],["\n      ",["!",[[0,"type"]]],"\n    "]],"\n  </span></dt>\n<dd>",["#",[[0,"better_markdown"]],[["!",[[0,"descr"]]]]],"</dd>\n"]],"\n</dl>"])),Template.__define__("api_section_helper",Package.handlebars.Handlebars.json_ast_to_func(['<h2 id="',["{",[[0,"id"]]],'"><a href="#',["{",[[0,"id"]]],'" class="selflink"><span>',["{",[[0,"name"]]],"</span></a></h2>"]))
}(),function(){Template.__define__("commandline",Package.handlebars.Handlebars.json_ast_to_func(["<div>\n",["#",[[0,"better_markdown"]],["\n\n",["#",[[0,"api_section"],"commandline"],["Command line"]],'\n\n<!-- XXX some intro text? -->\n\n<h3 id="meteorhelp">meteor help</h3>\n\nGet help on meteor command line usage. Running `meteor help` by\nitself will list the common meteor\ncommands. Running <code>meteor help <i>command</i></code> will print\ndetailed help about the command.\n\n\n<h3 id="meteorrun">meteor run</h3>\n\nRun a meteor development server in the current project. Searches\nupward from the current directory for the root directory of a Meteor\nproject. Whenever you change any of the application\'s source files, the\nchanges are automatically detected and applied to the running\napplication.\n\nYou can use the application by pointing your web browser at\n<a href="http://localhost:3000">localhost:3000</a>. No internet connection is\nrequired.\n\nThis is the default command. Simply running `meteor` is the\nsame as `meteor run`.\n\nTo pass additional options to Node.js use the `NODE_OPTIONS` environment variable.\nFor example: `NODE_OPTIONS=\'--debug\'` or `NODE_OPTIONS=\'--debug-brk\'`\n\nRun `meteor help run` to see the full list of options.\n\n\n<h3 id="meteorcreate">meteor create <i>name</i></h3>\n\nCreate a new Meteor project. Makes a subdirectory named *name*\nand copies in the template app. You can pass an absolute or relative\npath.\n\n\n<h3 id="meteordeploy">meteor deploy <i>site</i></h3>\n\nDeploy the project in your current directory to Meteor\'s servers.\n\n\nYou can deploy to any available name\nunder `meteor.com` without any additional\nconfiguration, for example, `myapp.meteor.com`.  If\nyou deploy to a custom domain, such as `myapp.mydomain.com`,\nthen you\'ll need to make sure the DNS for that domain is configured to\npoint at `origin.meteor.com`.\n\n\n\nYou can deploy in debug mode by passing `--debug`. This\nwill leave your source code readable by your favorite in-browser\ndebugger, just like it is in local development mode.\n\n\n\nTo delete an application you\'ve deployed, specify\nthe `--delete` option along with the site.\n\n\n\nTo add an administrative password to your deployment, include\nthe `--password` option.  Meteor will prompt\nfor a password.  Once set, any future `meteor deploy` to\nthe same domain will require that you provide the password.  The same\npassword protects access to `meteor mongo`\nand `meteor logs`.  You can change the password by\nrunning `meteor deploy --password` again,\nwhich will first prompt for the current password, then for a new\npassword.\n\n\n',["#",[[0,"warning"]],["\nPassword protection only applies to administrative actions with the\nMeteor command.  It does not prevent access to your deployed\nwebsite.  Also, this all is a temporary hack until we have\nfull-featured Meteor accounts.\n"]],"\n\n",["#",[[0,"warning"]],["\nIf you use a domain name other than `meteor.com`\nyou must ensure that the name resolves\nto `origin.meteor.com`.  If you want a top-level\ndomain like myapp.com, you'll need a DNS A record, matching the IP\naddress of origin.meteor.com.\n"]],'\n\n\n\nYou can add information specific to a particular deployment of your application\nby using the `--settings` option.  The argument to `--settings` is a file\ncontaining any JSON string.  The object in your settings file will appear on the\nserver side of your application in [`Meteor.settings`](#meteor_settings).\n\nSettings are persistent.  When you redeploy your app, the old value will be\npreserved unless you explicitly pass new settings using the `--settings` option.\nTo unset `Meteor.settings`, pass an empty settings file.\n\n<h3 id="meteorlogs">meteor logs <i>site</i></h3>\n\nRetrieves the server logs for the named Meteor application.\n\n\nMeteor redirects the output of `console.log()` in your\nserver code into a logging server.  `meteor logs`\ndisplays those logs.  In client code, the output\nof `console.log()` is available in your web browser\'s\ninspector, just like any other client-side JavaScript.\n\n\n<h3 id="meteorupdate">meteor update</h3>\n\nSets the version of Meteor to use with the current project. If a\nrelease is specified with `--release`, set the project to use that\nversion. Otherwise download and use the latest release of Meteor.\n\nEvery project is pinned to a specific release of Meteor. You can temporarily try\nusing your package with another release by passing the `--release` option to any\ncommand; `meteor update` simply changes the pinned release.\n\n<h3 id="meteoradd">meteor add <i>package</i></h3>\n\nAdd packages to your Meteor project. You can add multiple packages\nwith one command. For a list of the available packages, run `meteor\nlist`.\n\n\n<h3 id="meteorremove">meteor remove <i>package</i></h3>\n\nRemoves a package previously added to your Meteor project. For a\nlist of the packages that your application is currently using, run\n`meteor list --using`.\n\n\n<h3 id="meteorlist">meteor list</h3>\n\nWithout arguments, lists all available Meteor packages. To add one of\nthese packages to your project, run <code>meteor add <i>package</i></code>.\n\nWith `--using`, list the packages that you have added to your project.\n\n\n<h3 id="meteormongo">meteor mongo</h3>\n\nOpen a MongoDB shell on your local development database, so that you\ncan view or manipulate it directly.\n\n',["#",[[0,"warning"]],["\nFor now, you must already have your application running locally\nwith `meteor run`. This will be easier in the future.\n"]],'\n\n\n<h3 id="meteorreset">meteor reset</h3>\n\nReset the current project to a fresh state. Removes the local\nmongo database.\n\n',["#",[[0,"warning"]],["\nThis deletes your data! Make sure you do not have any information you\ncare about in your local mongo database by running `meteor\nmongo`. From the mongo shell, use `show collections`\nand <code>db.<i>collection</i>.find()</code> to inspect your data.\n"]],"\n\n",["#",[[0,"warning"]],["\nFor now, you can not run this while a development server is\nrunning. Quit all running meteor applications before running this.\n"]],'\n\n\n<h3 id="meteorbundle">meteor bundle</h3>\n\nPackage the application up for deployment. The output is a tarball\nthat includes everything necessary to run the\napplication. See `README` in the tarball for details.\n\nYou can use this to host a Meteor application on your own server,\ninstead of deploying to Meteor\'s servers.  You will have to deal with\nlogging, monitoring, backups, load-balancing, etc, all of which we\nhandle for you if you use `meteor deploy`.\n\n']],"\n</div>"]))}(),function(){Template.__define__("concepts",Package.handlebars.Handlebars.json_ast_to_func(['<h1 id="concepts">Concepts</h1>\n\nWe\'ve written our fair share of single-page JavaScript applications by hand.\nWriting an entire application in one language (JavaScript) with one\ndata format (JSON) is a real joy.  Meteor is everything we wanted\nwhen writing those apps.\n\n',[">","whatismeteor"],"\n",[">","structure"],"\n",[">","data"],"\n",[">","reactivity"],"\n",[">","livehtml"],"\n",[">","templates"],"\n",[">","packages_concept"],"\n",[">","namespacing"],"\n",[">","deploying"],"\n",[">","packages_writing"]])),Template.__define__("whatismeteor",Package.handlebars.Handlebars.json_ast_to_func([["#",[[0,"better_markdown"]],["\n\n<h2 id=\"whatismeteor\">What is Meteor?</h2>\n\nMeteor is two things:\n\n* A _library of packages_: pre-written, self-contained modules that\nyou might need in your app.<br>\nThere are about a dozen core Meteor\npackages that most any app will use (for example `webapp`, which\nhandles incoming HTTP connections, and `templating`, which lets you\nmake HTML templates that automatically update live as data changes).\nThen there are optional packages like `email`, which lets your app\nsend emails, or the Meteor Accounts series (`account-password`,\n`accounts-facebook`, `accounts-ui`, and others) which provide a\nfull-featured user account system that you can drop right into your\napp. And beyond these \"official\" packages, there are hundreds of\ncommunity-written packages in [Atmosphere](https://atmosphere.meteor.com/),\none of which might do just what you need.\n\n* A _command-line tool_ called `meteor`.<br>\n`meteor` is a build tool analogous to `make`, `rake`, or the non-visual parts of\nVisual Studio. It gathers up all of the source files and assets in your\napplication, carries out any necessary build steps (such as compiling\n[CoffeeScript](http://coffeescript.org), minifying CSS, building\n[npm](https://npmjs.org/) modules, or generating source maps), fetches the\npackages used by your app, and outputs a standalone, ready-to-run application\nbundle. In development mode it can do all of this interactively, so that\nwhenever you change a file you immediately see the changes in your browser. It's\nsuper easy to use out of the box, but it's also extensible: you can add support\nfor new languages and compilers by adding build plugin packages to your app.\n\nThe key idea in the Meteor package system is that _everything should\nwork identically in the browser and on the server_ (wherever it makes\nsense, of course: browsers can't send email and servers can't capture\nmouse events). Our whole ecosystem has been built from the ground up\nto support this.\n\n",["#",[[0,"note"]],["\n`meteor` cannot yet fetch packages from Atmosphere. If you are using\nAtmosphere packages you should take a look at\n[Meteorite](http://oortcloud.github.io/meteorite/), a tool that will\nhelp you download and manage your Atmosphere packages.\n\nIn Meteor 1.0, the `meteor` build tool will have full support for\nAtmosphere.\n"]],"\n\n"]]])),Template.__define__("structure",Package.handlebars.Handlebars.json_ast_to_func([["#",[[0,"better_markdown"]],["\n\n<h2 id=\"structuringyourapp\">Structuring your application</h2>\n\nA Meteor application is a mix of JavaScript that runs inside a client web\nbrowser, JavaScript that runs on the Meteor server inside a\n[Node.js](http://nodejs.org/) container, and all the supporting HTML fragments,\nCSS rules, and static assets.  Meteor automates the packaging and transmission\nof these different components.  And, it is quite flexible about how you choose\nto structure those components in your file tree.\n\nThe only server assets are JavaScript and files in the `private` subdirectory.\nMeteor gathers all your JavaScript\nfiles, excluding anything under the `client`, `public`, and `private`\nsubdirectories, and loads them into a Node.js\nserver instance inside a fiber.  In Meteor, your server code runs in\na single thread per request, not in the asynchronous callback style\ntypical of Node.  We find the linear execution model a better fit for\nthe typical server code in a Meteor application.\n\nMeteor gathers any files under the `private` subdirectory and makes the contents\nof these files available to server code via the [`Assets`](#assets) API. The\n`private` subdirectory is the place for any files that should be accessible to\nserver code but not served to the client, like private data files.\n\nThere are more assets to consider on the client side.  Meteor\ngathers all JavaScript files in your tree, with the exception of\nthe `server`, `public`, and `private` subdirectories, for the\nclient.  It minifies this bundle and serves it to each new client.\nYou're free to use a single JavaScript file for your entire application, or\ncreate a nested tree of separate files, or anything in between.\n\nSome JavaScript libraries only work when placed in the\n`client/compatibility` subdirectory.  Files in this directory are\nexecuted without being wrapped in a new variable scope.  This means\nthat each top-level `var` defines a global variable. In addition,\nthese files are executed before other client-side JavaScript files.\n\nFiles outside the `client`, `server` and `tests` subdirectories are loaded on\nboth the client and the server!  That's the place for model definitions and\nother functions.  Meteor provides the variables [`isClient`](#meteor_isclient) and\n[`isServer`](#meteor_isserver) so that your code can alter its behavior depending\non whether it's running on the client or the server. (Files in directories named\n`tests` are not loaded anywhere.)\n\nAny sensitive code that you don't want served to the client, such as code\ncontaining passwords or authentication mechanisms, should be\nkept in the `server` directory.\n\nCSS files are gathered together as well: the client will get a bundle with all\nthe CSS in your tree (excluding the `server`,\n`public`, and `private` subdirectories).\n\nIn development mode, JavaScript and CSS files are sent individually to make\ndebugging easier.\n\nHTML files in a Meteor application are treated quite a bit differently\nfrom a server-side framework.  Meteor scans all the HTML files in your\ndirectory for three top-level elements: `<head>`, `<body>`, and\n`<template>`.  The head and body sections are separately concatenated\ninto a single head and body, which are transmitted to the client on\ninitial page load.\n\nTemplate sections, on the other hand, are converted into JavaScript\nfunctions, available under the `Template` namespace.  It's\na really convenient way to ship HTML templates to the client.\nSee the [templates](#templates) section for more.\n\nLastly, the Meteor server will serve any files under the `public`\ndirectory, just like in a Rails or Django project.  This is the place\nfor images, `favicon.ico`, `robots.txt`, and anything else.\n\nIt is best to write your application in such a way that it is\ninsensitive to the order in which files are loaded, for example by\nusing [Meteor.startup](#meteor_startup), or by moving load order\nsensitive code into [packages](#usingpackages), which can explicitly control both\nthe load order of their contents and their load order with respect to\nother packages. However sometimes load order dependencies in your\napplication are unavoidable. The JavaScript and CSS files in an\napplication are loaded according to these rules:\n\n* Files in subdirectories are loaded before files in parent directories, so that\n  files in the deepest subdirectory are loaded first, and files in the root\n  directory are loaded last.\n\n* Within a directory, files are loaded in alphabetical order by\n  filename.\n\n* After sorting as described above, all files under directories named `lib` are\n  moved before everything else (preserving their order).\n\n* Finally, all files that match `main.*` are moved after everything else\n  (preserving their order).\n\n"]]])),Template.__define__("data",Package.handlebars.Handlebars.json_ast_to_func([["#",[[0,"better_markdown"]],["\n\n<h2 id=\"dataandsecurity\">Data and security</h2>\n\nMeteor makes writing distributed client code as simple as talking to a\nlocal database.  It's a clean, simple, and secure approach that obviates\nthe need to implement individual RPC endpoints, manually cache data on\nthe client to avoid slow roundtrips to the server, and carefully\norchestrate invalidation messages to every client as data changes.\n\nIn Meteor, the client and server share the same database API.  The same\nexact application code &mdash; like validators and computed properties &mdash; can\noften run in both places.  But while code running on the server has\ndirect access to the database, code running on the client does *not*.\nThis distinction is the basis for Meteor's data security model.\n\n",["#",[[0,"note"]],["\nBy default, a new Meteor app includes the `autopublish` and `insecure`\npackages, which together mimic the effect of each client having full\nread/write access to the server's database.  These are useful\nprototyping tools, but typically not appropriate for production\napplications.  When you're ready, just remove the packages.\n"]],'\n\nEvery Meteor client includes an in-memory database cache.  To manage the\nclient cache, the server *publishes* sets of JSON documents, and the\nclient *subscribes* to those sets.  As documents in a set change, the\nserver patches each client\'s cache.\n\nToday most Meteor apps use MongoDB as their database because it is the\nbest supported, though support for other databases is coming in the\nfuture. The\n[`Meteor.Collection`](http://docs.meteor.com/#meteor_collection) class\nis used to declare Mongo collections and to manipulate them. Thanks to\n`minimongo`, Meteor\'s client-side Mongo emulator, `Meteor.Collection`\ncan be used from both client and server code.\n\n    // declare collections\n    // this code should be included in both the client and the server\n    Rooms = new Meteor.Collection("rooms");\n    Messages = new Meteor.Collection("messages");\n    Parties = new Meteor.Collection("parties");\n\n    // server: populate collections with some initial documents\n    Rooms.insert({name: "Conference Room A"});\n    var myRooms = Rooms.find({}).fetch();\n    Messages.insert({text: "Hello world", room: myRooms[0]._id});\n    Parties.insert({name: "Super Bowl Party"});\n\nEach document set is defined by a publish function on the server.  The\npublish function runs each time a new client subscribes to a document\nset.  The data in a document set can come from anywhere, but the common\ncase is to publish a database query.\n\n    // server: publish all room documents\n    Meteor.publish("all-rooms", function () {\n      return Rooms.find(); // everything\n    });\n\n    // server: publish all messages for a given room\n    Meteor.publish("messages", function (roomId) {\n      check(roomId, String);\n      return Messages.find({room: roomId});\n    });\n\n    // server: publish the set of parties the logged-in user can see.\n    Meteor.publish("parties", function () {\n      return Parties.find({$or: [{"public": true},\n                                 {invited: this.userId},\n                                 {owner: this.userId}]});\n    });\n\nPublish functions can provide different results to each client.  In the\nlast example, a logged in user can only see `Party` documents that\nare public, that the user owns, or that the user has been invited to.\n\nOnce subscribed, the client uses its cache as a fast local database,\ndramatically simplifying client code.  Reads never require a costly\nround trip to the server.  And they\'re limited to the contents of the\ncache: a query for every document in a collection on a client will only\nreturn documents the server is publishing to that client.\n\n    // client: start a parties subscription\n    Meteor.subscribe("parties");\n\n    // client: return array of Parties this client can read\n    return Parties.find().fetch(); // synchronous!\n\nSophisticated clients can turn subscriptions on and off to control how\nmuch data is kept in the cache and manage network traffic.  When a\nsubscription is turned off, all its documents are removed from the cache\nunless the same document is also provided by another active\nsubscription.\n\nWhen the client *changes* one or more documents, it sends a message to\nthe server requesting the change.  The server checks the proposed change\nagainst a set of allow/deny rules you write as JavaScript functions.\nThe server only accepts the change if all the rules pass.\n\n    // server: don\'t allow client to insert a party\n    Parties.allow({\n      insert: function (userId, party) {\n        return false;\n      }\n    });\n\n    // client: this will fail\n    var party = { ... };\n    Parties.insert(party);\n\nIf the server accepts the change, it applies the change to the database\nand automatically propagates the change to other clients subscribed to\nthe affected documents.  If not, the update fails, the server\'s database\nremains untouched, and no other client sees the update.\n\nMeteor has a cute trick, though.  When a client issues a write to the\nserver, it also updates its local cache immediately, without waiting for\nthe server\'s response.  This means the screen will redraw right away.\nIf the server accepted the update &mdash; what ought to happen most of the\ntime in a properly behaving client &mdash; then the client got a jump on the\nchange and didn\'t have to wait for the round trip to update its own\nscreen.  If the server rejects the change, Meteor patches up the\nclient\'s cache with the server\'s result.\n\nPutting it all together, these techniques accomplish latency\ncompensation.  Clients hold a fresh copy of the data they need, and\nnever need to wait for a roundtrip to the server. And when clients\nmodify data, those modifications can run locally without waiting for the\nconfirmation from the server, while still giving the server final say\nover the requested change.\n\n',["#",[[0,"note"]],["\nThe current release of Meteor supports MongoDB, the popular document\ndatabase, and the examples in this section use the\n        [MongoDB API](http://www.mongodb.org/display/DOCS/Manual).  Future\nreleases will include support for other databases.\n"]],"\n\n<h3 id=\"dataandsecurity-authentication\">Authentication and user accounts</h3>\n\nMeteor includes [Meteor Accounts](#accounts_api), a state-of-the-art\nauthentication system. It features secure password login using the\n[Secure Remote Password\nprotocol](http://en.wikipedia.org/wiki/Secure_Remote_Password_protocol),\nand integration with external services including Facebook, GitHub,\nGoogle, Meetup, Twitter, and Weibo. Meteor Accounts defines a\n[`Meteor.users`](#meteor_users) collection where developers can store\napplication-specific user data.\n\nMeteor also includes pre-built forms for common tasks like login, signup,\npassword change, and password reset emails. You can add [Accounts\nUI](#accountsui) to your app with just one line of code. The `accounts-ui` package even provides a configuration wizard that walks you through the steps to\nset up the external login services you're using in your app.\n\n<h3 id=\"dataandsecurity-validation\">Input validation</h3>\n\nMeteor allows your methods and publish functions to take arguments of any\n[JSON](http://json.org/) type. (In fact, Meteor's wire protocol supports\n[EJSON](#ejson), an extension of JSON which also supports other common types\nlike dates and binary buffers.) JavaScript's dynamic typing means you don't need\nto declare precise types of every variable in your app, but it's usually helpful\nto ensure that the arguments that clients are passing to your methods and\npublish functions are of the type that you expect.\n\nMeteor provides a [lightweight library](#match) for checking that arguments and\nother values are the type you expect them to be. Simply start your functions\nwith statements like `check(username, String)` or\n`check(office, {building: String, room: Number})`. The `check` call will\nthrow an error if its argument is of an unexpected type.\n\nMeteor also provides an easy way to make sure that all of your methods\nand publish functions validate all of their arguments. Just run\n<code>meteor add [audit-argument-checks](#auditargumentchecks)</code> and any\nmethod or publish function which skips `check`ing any of its arguments will fail\nwith an exception.\n\n"]]])),Template.__define__("reactivity",Package.handlebars.Handlebars.json_ast_to_func([["#",[[0,"better_markdown"]],['\n\n<h2 id="reactivity">Reactivity</h2>\n\nMeteor embraces the concept of [reactive\nprogramming](http://en.wikipedia.org/wiki/Reactive_programming). This means that\nyou can write your code in a simple imperative style, and the result will be\nautomatically recalculated whenever data changes that your code depends on.\n\n    Deps.autorun(function () {\n      Meteor.subscribe("messages", Session.get("currentRoomId"));\n    });\n\nThis example (taken from a chat room client) sets up a data\nsubscription based on the session variable `currentRoomId`.\nIf the value of `Session.get("currentRoomId")` changes for any reason, the\nfunction will be automatically re-run, setting up a new subscription that\nreplaces the old one.\n\nThis automatic recomputation is achieved by a cooperation between\n`Session` and `Deps.autorun`.  `Deps.autorun` performs an arbitrary "reactive\ncomputation" inside of which data dependencies are tracked, and it\nwill re-run its function argument as necessary.  Data providers like\n`Session`, on the other hand, make note of the computation they are\ncalled from and what data was requested, and they are prepared to send\nan invalidation signal to the computation when the data changes.\n\nThis simple pattern (reactive computation + reactive data source) has wide\napplicability.  Above, the programmer is saved from writing\nunsubscribe/resubscribe calls and making sure they are called at the\nright time.  In general, Meteor can eliminate whole classes of data\npropagation code which would otherwise clog up your application with\nerror-prone logic.\n\nThese Meteor functions run your code as a reactive computation:\n\n* [Templates](#templates)\n* [`Meteor.render`](#meteor_render) and [`Meteor.renderList`](#meteor_renderlist)\n* [`Deps.autorun`](#deps_autorun)\n\nAnd the reactive data sources that can trigger changes are:\n\n* [`Session`](#session) variables\n* Database queries on [Collections](#find)\n* [`Meteor.status`](#meteor_status)\n* The `ready()` method on a [subscription handle](#meteor_subscribe)\n* [`Meteor.user`](#meteor_user)\n* [`Meteor.userId`](#meteor_userid)\n* [`Meteor.loggingIn`](#meteor_loggingin)\n\nIn addition, the following functions which return an object with a\n`stop` method, if called from a reactive computation, are stopped when\nthe computation is rerun or stopped:\n\n* [`Deps.autorun`](#deps_autorun) (nested)\n* [`Meteor.subscribe`](#meteor_subscribe)\n* [`observe()`](#observe) and [`observeChanges()`](#observe_changes) on cursors\n\nMeteor\'s\n[implementation](https://github.com/meteor/meteor/blob/master/packages/deps/deps.js)\nis a package called [`Deps`](#deps) that is fairly short and straightforward.\nYou can use it yourself to implement new reactive data sources.\n\n']]])),Template.__define__("livehtml",Package.handlebars.Handlebars.json_ast_to_func([["#",[[0,"better_markdown"]],['\n\n<h2 id="livehtml">Live HTML</h2>\n\nHTML templating is central to web applications. With Meteor\'s live\npage update technology, you can render your HTML _reactively_, meaning\nthat it will update automatically to track changes in the data used to\ngenerate it.\n\nThis optional feature works with any HTML templating library, or even\nwith HTML you generate manually from JavaScript. Here\'s an example:\n\n    var fragment = Meteor.render(\n      function () {\n        var name = Session.get("name") || "Anonymous";\n        return "<div>Hello, " + name + "</div>";\n      });\n    document.body.appendChild(fragment);\n\n    Session.set("name", "Bob"); // page updates automatically!\n\n[`Meteor.render`](#meteor_render) takes a rendering function, that is, a\nfunction that returns some HTML as a string. It returns an auto-updating\n`DocumentFragment`. When there is a change to data used by the rendering\nfunction, it is re-run. The DOM nodes in the `DocumentFragment` then\nupdate themselves in-place, no matter where they were inserted on the\npage. It\'s completely automatic. [`Meteor.render`](#meteor_render) uses\na [reactive computation](#reactivity) to discover what data is used by the\nrendering function.\n\nMost of the time, though, you won\'t call these functions directly\n&mdash; you\'ll just use your favorite templating package, such as\nHandlebars or Jade. The `render` and `renderList` functions are intended\nfor people that are implementing new templating systems.\n\nMeteor normally batches up any needed updates and executes them only\nwhen your code isn\'t running. That way, you can be sure that the DOM\nwon\'t change out from underneath you. Sometimes you want the opposite\nbehavior. For example, if you\'ve just inserted a record in the\ndatabase, you might want to force the DOM to update so you can find\nthe new elements using a library like jQuery. In that case, call\n[`Deps.flush`](#deps_flush) to bring the DOM up to date\nimmediately.\n\nWhen live-updating DOM elements are taken off the screen, they are automatically\ncleaned up &mdash; their callbacks are torn down, any associated database\nqueries are stopped, and they stop updating. For this reason, you never have to\nworry about the [zombie\ntemplates](http://lostechies.com/derickbailey/2011/09/15/zombies-run-managing-page-transitions-in-backbone-apps/)\nthat plague hand-written update logic. To protect your elements from cleanup,\njust make sure that they are on-screen before your code returns to the event loop,\nor before any call you make to [`Deps.flush`](#deps_flush).\n\nAnother thorny problem in hand-written applications is element\npreservation. Suppose the user is typing text into an `<input>`\nelement, and then the area of the page that includes that element is\nredrawn. The user could be in for a bumpy ride, as the focus, the\ncursor position, the partially entered text, and the accented\ncharacter input state will be lost when the `<input>` is recreated.\n\nThis is another problem that Meteor solves for you. You can specify\nelements to preserve when templates are re-rendered with the\n[`preserve`](#template_preserve) directive on the template. Meteor will\npreserve these elements even when their enclosing template is\nrerendered, but will still update their children and copy over any\nattribute changes.\n\n']]])),Template.__define__("templates",Package.handlebars.Handlebars.json_ast_to_func([["#",[[0,"better_markdown"]],['\n\n<h2 id="templates">Templates</h2>\n\nMeteor makes it easy to use your favorite HTML templating language,\nsuch as Handlebars or Jade, along with Meteor\'s live page update\ntechnology. Just write your template as you normally would, and Meteor\nwill take care of making it update in realtime.\n\nTo use this feature, create a file in your project with the `.html`\nextension. In the file, make a `<template>` tag and give it a\n`name` attribute. Put the template contents inside the tag. Meteor\nwill precompile the template, ship it down to the client, and make it\navailable as a function on the global `Template` object.\n\n',["#",[[0,"note"]],["\nToday, the only templating system that has been packaged for Meteor is\nHandlebars. Let us know what templating systems you'd like to use with\nMeteor. Meanwhile, see the [Handlebars\ndocumentation](http://www.handlebarsjs.com/) and [Meteor Handlebars\nextensions](https://github.com/meteor/meteor/wiki/Handlebars).\n"]],'\n\nA template with a `name` of `hello` is rendered by calling the\nfunction `Template.hello`, passing any data for the template:\n\n    <!-- in myapp.html -->\n    <template name="hello">\n      <div class="greeting">Hello there, ',["{",[[0,"dstache"]]],"first}} ",["{",[[0,"dstache"]]],"last}}!</div>\n    </",'template>\n\n    // in the JavaScript console\n    > Template.hello({first: "Alyssa", last: "Hacker"});\n     => "<div class="greeting">Hello there, Alyssa Hacker!</div>"\n\nThis returns a string. To use the template along with the [`Live\nHTML`](#livehtml) system, and get DOM elements that update\nautomatically in place, use [`Meteor.render`](#meteor_render):\n\n    Meteor.render(function () {\n      return Template.hello({first: "Alyssa", last: "Hacker"});\n    })\n      => automatically updating DOM elements\n\nThe easiest way to get data into templates is by defining helper\nfunctions in JavaScript. Just add the helper functions directly on the\n`Template.[template name]` object. For example, in this template:\n\n    <template name="players">\n      ',["{",[[0,"dstache"]]],"#each topScorers}}\n        <div>",["{",[[0,"dstache"]]],"name}}</div>\n      ",["{",[[0,"dstache"]]],"/each}}\n    </",'template>\n\ninstead of passing in `topScorers` as data when we call the\ntemplate function, we could define a function on `Template.players`:\n\n    Template.players.topScorers = function () {\n      return Users.find({score: {$gt: 100}}, {sort: {score: -1}});\n    };\n\nIn this case, the data is coming from a database query. When the\ndatabase cursor is passed to `#each`, it will wire up all of the\nmachinery to efficiently add and move DOM nodes as new results enter\nthe query.\n\nHelpers can take arguments, and they receive the current template context data\nin `this`. Note that some block helpers change the current context (notably\n`each` and `with`):\n\n    // in a JavaScript file\n    Template.players.leagueIs = function (league) {\n      return this.league === league;\n    };\n\n    <!-- in a HTML file -->\n    <template name="players">\n      ',["{",[[0,"dstache"]]],"#each topScorers}}\n        ",["{",[[0,"dstache"]]],'#if leagueIs "junior"}}\n          <div>Junior: ',["{",[[0,"dstache"]]],"name}}</div>\n        ",["{",[[0,"dstache"]]],"/if}}\n        ",["{",[[0,"dstache"]]],'#if leagueIs "senior"}}\n          <div>Senior: ',["{",[[0,"dstache"]]],"name}}</div>\n        ",["{",[[0,"dstache"]]],"/if}}\n      ",["{",[[0,"dstache"]]],"/each}}\n    </","template>\n\n",["#",[[0,"note"]],["\nHandlebars note: `",["{",[[0,"dstache"]]],'#if leagueIs "junior"}}` is\nallowed because of a Meteor extension that allows nesting a helper\nin a block helper. (Both `if` and `leagueIs` are\ntechnically helpers, and stock Handlebars would not invoke\n`leagueIs` here.)\n']],"\n\nHelpers can also be used to pass in constant data.\n\n    // Works fine with ",["{",[[0,"dstache"]]],'#each sections}}\n    Template.report.sections = ["Situation", "Complication", "Resolution"];\n\nFinally, you can use an `events` declaration on a template function to set up a\ntable of event handlers. The format is documented at [Event\nMaps](#eventmaps). The `this` argument to the event handler will be\nthe data context of the element that triggered the event.\n\n    <!-- myapp.html -->\n    <template name="scores">\n      ',["{",[[0,"dstache"]]],"#each player}}\n        ",["{",[[0,"dstache"]]],"> playerScore}}\n      ",["{",[[0,"dstache"]]],"/each}}\n    </",'template>\n\n    <template name="playerScore">\n      <div>',["{",[[0,"dstache"]]],"name}}: ",["{",[[0,"dstache"]]],'score}}\n        <span class="givePoints">Give points</span>\n      </div>\n    </',"template>\n\n    <!-- myapp.js -->\n    Template.playerScore.events({\n      'click .givePoints': function () {\n        Users.update(this._id, {$inc: {score: 2}});\n      }\n    });\n\nPutting it all together, here's an example of how you can inject\narbitrary data into your templates, and have them update automatically\nwhenever that data changes. See [Live HTML](#livehtml) for further\ndiscussion.\n\n    <!-- in myapp.html -->\n    <template name=\"forecast\">\n      <div>It'll be ",["{",[[0,"dstache"]]],"prediction}} tonight</div>\n    </",'template>\n\n    <!-- in myapp.js -->\n    // JavaScript: reactive helper function\n    Template.forecast.prediction = function () {\n      return Session.get("weather");\n    };\n\n    <!-- in the console -->\n    > Session.set("weather", "cloudy");\n    > document.body.appendChild(Meteor.render(Template.forecast));\n    In DOM:  <div>It\'ll be cloudy tonight</div>\n\n    > Session.set("weather", "cool and dry");\n    In DOM:  <div>It\'ll be cool and dry tonight</div>\n\n']]])),Template.__define__("packages_concept",Package.handlebars.Handlebars.json_ast_to_func([["#",[[0,"better_markdown"]],["\n\n  <h2 id=\"usingpackages\">Using packages</h2>\n\nAll of the functionality you've read about so far is implemented as\nstandard Meteor packages. This is possible thanks to Meteor's\nunusually powerful package and build system. The same packages work in\nthe browser and on the server, and packages can contain plugins that\nextend the build process, such as `coffeescript` ([CoffeeScript](http://coffeescript.org)\ncompilation) or `templating` (compiling HTML templates).\n\nYou can see a list of available packages\nwith [`meteor list`](#meteorlist), add packages to your project\nwith [`meteor add`](#meteoradd), and remove them\nwith [`meteor remove`](#meteorremove).\n\nBy default all apps include the `standard-app-packages` package. This\nautomatically pulls in the packages that make up the core Meteor\nstack. To keep things simple, these core packages are also hidden in\nthe output for `meteor list`, but you can read the\n[source code of `standard-app-packages`](https://github.com/meteor/meteor/blob/master/packages/standard-app-packages/package.js)\nto see what they are (as Meteor is pre-1.0, they may change from release to\nrelease). If you want to build your own custom stack, just remove\n`standard-app-packages` from your app and add back in whichever of the standard\npackages you want to keep.\n\nIn addition to the packages in the official Meteor release being used\nby your app, `meteor list` and `meteor add` also search the `packages`\ndirectory at the top of your app. If you've downloaded an unofficial\npackage from Atmosphere you should unpack it into that directory (the\nunofficial [Meteorite](http://oortcloud.github.io/meteorite/) tool\nstreamlines this process). You can also use the `packages` directory\nto break your app into subpackages for your convenience &mdash; if you\nare willing to brave the fact that the Meteor package format is not\ndocumented yet and will change significantly before Meteor 1.0. See\n[Writing Packages](#writingpackages).\n\n"]]])),Template.__define__("namespacing",Package.handlebars.Handlebars.json_ast_to_func([["#",[[0,"better_markdown"]],["\n\n  <h2 id=\"namespacing\">Namespacing</h2>\n\nMeteor's namespacing support makes it easy to write large applications\nin JavaScript. Each package that you use in your app exists in its own\nseparate namespace, meaning that it sees only its own global variables\nand any variables provided by the packages that it specifically\nuses. Here's how it works.\n\nWhen you declare a top-level variable, you have a choice. You can make\nthe variable File Scope or Package Scope.\n\n    // File Scope. This variable will be visible only inside this\n    // one file. Other files in this app or package won't see it.\n    var alicePerson = {name: \"alice\"};\n\n    // Package Scope. This variable is visible to every file inside\n    // of this package or app. The difference is that 'var' is\n    // omitted.\n    bobPerson = {name: \"bob\"};\n\nNotice that this is just the normal JavaScript syntax for declaring a\nvariable that is local or global. Meteor scans your source code for\nglobal variable assignments and generates a wrapper that makes sure\nthat your globals don't escape their appropriate namespace.\n\nIn addition to File Scope and Package Scope, there are also\nExports. An export is a variable that a package makes available to you\nwhen you use it. For example, the `email` package exports the `Email`\nvariable. If your app uses the `email` package (and _only_ if it uses\nthe `email` package!) then your app can see `Email` and you can call\n`Email.send`. Most packages have only one export, but some packages\nmight have two or three (for example, a package that provides several\nclasses that work together).\n\nYou see only the exports of the packages that you use directly. If you\nuse package A, and package A uses package B, then you only see package\nA's exports. Package B's exports don't \"leak\" into your namespace just\nbecause you used package A. This keeps each namespace nice and\ntidy. Each app or package only sees their own globals plus the APIs of\nthe packages that they specifically asked for.\n\nWhen debugging your app, your browser's JavaScript console behaves as\nif it were attached to your app's namespace. You see your app's\nglobals and the exports of the packages that your app uses\ndirectly. You don't see the variables from inside those packages, and\nyou don't see the exports of your transitive dependencies (packages\nthat aren't used directly by your app, but that are used by packages\nthat are used by your app).\n\nIf you want to look inside packages from inside your in-browser\ndebugger, you've got two options:\n\n* Set a breakpoint inside package code. While stopped on that\n  breakpoint, the console will be in the package's namespace. You'll\n  see the package's package-scope variables, imports, and also any\n  file-scope variables for the file you're stopped in.\n\n* If a package `foo` is included in your app, regardless of whether\n  your app uses it directly, its exports are available in\n  `Package.foo`. For example, if the `email` package is loaded, then\n  you can access `Package.email.Email.send` even from namespaces that\n  don't use the `email` package directly.\n\nWhen declaring functions, keep in mind that `function x () {}` is just\nshorthard for `var x = function () {}` in JavaScript. Consider these\nexamples:\n\n    // This is the same as 'var x = function () ...'. So x() is\n    // file-scope and can be called only from within this one file.\n    function x () { ... }\n\n    // No 'var', so x() is package-scope and can be called from\n    // any file inside this app or package.\n    x = function () { ... }\n\n",["#",[[0,"note"]],["\nTechnically speaking, globals in an app (as opposed to in a package)\nare actually true globals. They can't be captured in a scope that is\nprivate to the app code, because that would mean that they wouldn't be\nvisible in the console during debugging! This means that app globals\nactually end up being visible in packages. That should never be a\nproblem for properly written package code (since the app globals will\nstill be properly shadowed by declarations in the packages). You\ncertainly shouldn't depend on this quirk, and in the future Meteor may\ncheck for it and throw an error if you do.\n"]],"\n\n"]]])),Template.__define__("deploying",Package.handlebars.Handlebars.json_ast_to_func([["#",[[0,"better_markdown"]],['\n\n<h2 id="deploying">Deploying</h2>\n\nMeteor is a full application server.  We include everything you need\nto deploy your application on the internet: you just provide the JavaScript,\nHTML, and CSS.\n\n<h3 class="nosection">Running on Meteor\'s infrastructure</h3>\n\nThe easiest way to deploy your application is to use `meteor\ndeploy`.  We provide it because it\'s what, personally, we\'ve always\nwanted: an easy way to take an app idea, flesh it out over a weekend,\nand put it out there for the world to use, with nothing getting in the\nway of creativity.\n\n    $ meteor deploy myapp.meteor.com\n\nYour application is now available at myapp.meteor.com.  If\nthis is the first time deploying to this hostname, Meteor creates a\nfresh empty database for your application.  If you want to deploy an\nupdate, Meteor will preserve the existing data and just refresh the\ncode.\n\nYou can also deploy to your own domain.  Just set up the hostname you\nwant to use as a CNAME to `origin.meteor.com`,\nthen deploy to that name.\n\n    $ meteor deploy www.myapp.com\n\nWe provide this as a free service so you can try Meteor.  It is also\nhelpful for quickly putting up internal betas, demos, and so on.\n\n<h3 class="nosection">Running on your own infrastructure</h3>\n\nYou can also run your application on your own infrastructure, or any\nother hosting provider like Heroku.\n\nTo get started, run\n\n    $ meteor bundle myapp.tgz\n\nThis command will generate a fully-contained Node.js application in the form of\na tarball.  To run this application, you need to provide Node.js 0.10 and a\nMongoDB server.  (The current release of Meteor has been tested with Node\n0.10.25; older versions contain a serious bug that can cause production servers\nto stall.) You can then run the application by invoking node, specifying the\nHTTP port for the application to listen on, and the MongoDB endpoint.  If\nyou don\'t already have a MongoDB server, we can recommend our friends at\n[MongoHQ](http://mongohq.com).\n\n    $ PORT=3000 MONGO_URL=mongodb://localhost:27017/myapp node bundle/main.js\n\nOther packages may require other environment variables (for example, the `email`\npackage requires a `MAIL_URL` environment variable).\n\n',["#",[[0,"warning"]],["\nFor now, bundles will only run on the platform that the bundle was\ncreated on.  To run on a different platform, you'll need to rebuild\nthe native packages included in the bundle.  To do that, make sure you\nhave `npm` available, and run the following:\n\n    $ cd bundle/programs/server/node_modules\n    $ rm -r fibers\n    $ npm install fibers@1.0.1\n"]],"\n\n"]]])),Template.__define__("packages_writing",Package.handlebars.Handlebars.json_ast_to_func([["#",[[0,"better_markdown"]],["\n\n  <h2 id=\"writingpackages\">Writing packages</h2>\n\nThe Meteor package format isn't officially documented and will change\nbefore Meteor 1.0. But that hasn't stopped people like you from\ncreating hundreds of packages by reading the source code of existing\npackages and following the model. If you do decide to create your own\npackages, you will have to do some detective work, but here are some\nquick tips:\n\n* A package is simply a directory with a `package.js` file in it. Look in the\n  [`packages` directory of the Meteor source\n  tree](https://github.com/meteor/meteor/tree/master/packages/) for example\n  `package.js` files. The format and name of the `package.js` file will change\n  significantly before Meteor 1.0, but the functionality will be basically the\n  same even though the syntax is different, so it will be easy to port your\n  code.\n\n* Packages explicitly list all of their source files using `api.add_files`, and\n  the files are loaded exactly in the order specified. (This is different from\n  apps, where Meteor scans a directory tree to find the source files.)  Don't\n  forget to include any build plugin packages (such as `coffeescript` or, if\n  using HTML templates, `templating`) that you require.\n\n* Exporting a symbol from your package (see\n  [Namespacing](#namespacing)) is accomplished with an `api.export` call\n  from inside your `on_use` handler.\n\n* An esoteric point about exports: they are not lvalues. You can't set\n  an exported variable to a new value after exporting it. If you\n  export `a = {name: 'alice'}` then you can change `a.name` anytime\n  you want, but if after startup you set `a` to a whole new object\n  then the packages that import `a` won't see the change. Since your\n  exports are most always objects or functions, this is hardly ever an\n  issue.\n\n* Packages can use [npm modules](https://npmjs.org/). Use `Npm.depends` in your\n  `package.js` to list the npm modules that you need and the specific\n  versions that you want to use. Then use `Npm.require` inside your\n  package to pull in the modules when you need them. Meteor strives to\n  have 100% repeatable builds so that everyone on your team is always\n  running the same code, and that's why you must explicitly lock your\n  npm dependencies to specific versions. Behind the scenes, Meteor\n  will use `npm shrinkwrap` to also lock down the versions of the\n  transitive dependencies of all of the npm modules that you use.\n\n* Whenever your package changes, Meteor will rebuild it (compiling\n  non-JavaScript source files, fetching npm dependencies, constructing\n  namespace wrappers, and so on). The built package will be cached and\n  rebuilt only when a source file changes (tracked by SHA1) or when\n  other dependencies such as build plugins change. To force a rebuild\n  you can use the undocumented command `meteor rebuild-all`, but this\n  should never be necessary (if it is, please send a\n  [bug report](https://github.com/meteor/meteor/blob/devel/Contributing.md#filing-bug-reports)!).\n\n* Build plugins are created with `_transitional_registerBuildPlugin`,\n  an API that is very much in flux. See the `coffeescript` package for\n  an example. Build plugins are fully-fledged Meteor programs in their\n  own right and have their own namespace, package dependencies, source\n  files and npm requirements. The old `register_extension` API is\n  removed.\n\n* It is possible to create weak dependencies between packages. If\n  package A has a weak dependency on package B, it means that\n  including A in an app does not force B to be included too &mdash;\n  but, if B _is_ included, say by the app developer or by another\n  package, then B will load before A. You can use this to make\n  packages that optionally integrate with or enhance other packages if\n  those packages are present. To create a weak dependency, pass\n  `{weak: true}` as the third argument to `api.use`. When you weakly\n  depend on a package you don't see its exports. You can detect if\n  the possibly-present weakly-depended-on package is there by seeing\n  if `Package.foo` exists, and get its exports from the same place.\n\n* It is also possible to create unordered dependencies by passing\n  `{unordered: true}`. An unordered dependency is the exact opposite\n  of a weak dependency. If A has an unordered dependency on B, then\n  including A forces B to be included as well, but doesn't require B\n  to load before A. This is occasionally useful for resolving circular\n  dependencies.\n\n* The build system also supports package implication. If package A\n  implies package B, then it means that when someone depends on\n  package A, it's as if they also depended on package B as well. In\n  particular, they get B's exports. This is done with `api.imply` and\n  can be used to create umbrella packages such as\n  `standard-app-packages` that are a shortcut for pulling in a set of\n  packages, or it can be helpful in factoring common code out of a set\n  of packages as with `accounts-base`.\n\n* The build system understands the idea of native code and has a\n  system of architecture names to ensure that packages that are\n  specific to one architecture aren't run on the wrong\n  architecture. For example, if you include an npm module that has a\n  native extension, your built Meteor package will be specific to your\n  machine architecture, but if not your built Meteor package will be\n  portable.\n\n"]]]))
}(),function(){Meteor.startup(function(){document.body.appendChild(Spark.render(Template.__define__(null,Package.handlebars.Handlebars.json_ast_to_func(['<div id="nav">\n    ',[">","nav"],'\n  </div>\n  <div id="main">\n    <div id="top"></div>\n    ',[">","headline"],"\n    ",[">","introduction"],"\n    ",[">","concepts"],"\n    ",[">","api"],"\n    ",[">","packages"],"\n    ",[">","commandline"],"\n  </div>"]))))}),Template.__define__("nav",Package.handlebars.Handlebars.json_ast_to_func(['<div id="nav-inner">\n  ',["#",[[0,"each"],[0,"sections"]],["\n  ",["#",[[0,"if"],[0,"type"],"spacer"],['\n    <div class="spacer"> </div>\n  ']],"\n  ",["#",[[0,"if"],[0,"type"],"section"],["\n    <h",["{",[[0,"depth"]]],'><a href="#',["{",[[0,"id"]]],'" class="',["{",[[0,"maybe_current"]]]," ",["{",[[0,"style"]]],'">\n        ',["#",[[0,"if"],[0,"prefix"]],[["{",[[0,"prefix"]]],"."]],["#",[[0,"if"],[0,"instance"]],["<i>",["{",[[0,"instance"]]],"</i>."]],["{",[[0,"name"]]],"\n    </a></h",["{",[[0,"depth"]]],">\n  "]],"\n  "]],"\n</div>"])),Template.__define__("headline",Package.handlebars.Handlebars.json_ast_to_func(['<h1 class="main-headline">Meteor ',["{",[[0,"release"]]],"</h1>"])),Template.__define__("dtdd_helper",Package.handlebars.Handlebars.json_ast_to_func(['<dt><span class="name">',["!",[[0,"name"]]],"</span>\n  ",["#",[[0,"if"],[0,"type"]],['<span class="type">',["{",[[0,"type"]]],"</span>"]],"\n</dt>\n<dd>",["#",[[0,"better_markdown"]],[["!",[[0,"descr"]]]]],"</dd>"])),Template.__define__("warning_helper",Package.handlebars.Handlebars.json_ast_to_func(['<div class="warning">\n    ',["#",[[0,"better_markdown"]],[["!",[[0]]]]],"\n  </div>"])),Template.__define__("note_helper",Package.handlebars.Handlebars.json_ast_to_func(['<div class="note">\n    ',["#",[[0,"better_markdown"]],[["!",[[0]]]]],"\n  </div>"]))}(),function(){Template.__define__("introduction",Package.handlebars.Handlebars.json_ast_to_func(['<div id="introduction">\n<!-- clicking this anchor in the left bar should scroll to top of doc,\nnot here -->\n<!-- XXX by: (three headshot thumbnails w names) -->\n\n',["#",[[0,"markdown"]],['\n\n<b>_Meteor is an ultra-simple environment for building modern websites.\nWhat once took weeks, even with the best tools, now takes hours with\nMeteor._</b>\n\nThe web was originally designed to work in the same way that mainframes\nworked in the 70s.  The application server rendered a screen and sent it\nover the network to a dumb terminal. Whenever the user did anything,\nthat server rerendered a whole new screen. This model served the Web\nwell for over a decade. It gave rise to LAMP, Rails, Django, PHP.\n\nBut the best teams, with the biggest budgets and the longest schedules,\nnow build applications in JavaScript that run on the client.  These apps\nhave stellar interfaces.  They don\'t reload pages.  They are reactive:\nchanges from any client immediately appear on everyone\'s screen.\n\nThey\'ve built them the hard way.  Meteor makes it an order of\nmagnitude simpler, and a lot more fun.  You can build a complete\napplication in a weekend, or a sufficiently caffeinated hackathon.  No\nlonger do you need to provision server resources, or deploy API\nendpoints in the cloud, or manage a database, or wrangle an ORM layer,\nor swap back and forth between JavaScript and Ruby, or broadcast data\ninvalidations to clients.\n\nMeteor is a work in progress, but we hope it shows the direction of\nour thinking.  We\'d love to hear your feedback.\n\n\n## Quick start!\n\n<!-- change colors on these. $ and command output in grey, rest in\nwhite -->\n\nThe following works on all [supported\nplatforms](https://github.com/meteor/meteor/wiki/Supported-Platforms).\n\nInstall Meteor:\n\n<pre>\n$ curl https://install.meteor.com | /bin/sh\n</pre>\n\nCreate a project:\n\n<pre>\n$ meteor create myapp\n</pre>\n\nRun it locally:\n\n<pre>\n$ cd myapp\n$ meteor\n=&gt; Meteor server running on: http://localhost:3000/\n</pre>\n\nUnleash it on the world (on a free server we provide):\n\n<pre>\n$ meteor deploy myapp.meteor.com\n</pre>\n\n<h2 id="sevenprinciples">Seven Principles of Meteor</h2>\n\n<!-- wire with [1,2,3] on it -->\n- _Data on the Wire_. Don\'t send HTML over the network. Send data and\nlet the client decide how to render it.\n\n<!-- two people, one speech bubble coming out of both of their mouths,\ncontaining \'{}\' -->\n- _One Language._ Write both the client and the server parts of your\ninterface in JavaScript.\n\n<!-- globe, with the same database icon in US and Russia -->\n- _Database Everywhere_. Use the same transparent API to access your\ndatabase from the client or the server.\n\n<!-- clock with zero time elapsed. or clock on left with zero time\nelapsed, horizontal bold line to a clock with zero time elapsed, but a\nline at a 45 degree angle to a a clock in grey with 100 ms\nelapsed. like shades of relativity -->\n- _Latency Compensation_. On the client, use prefetching and model\nsimulation to make it look like you have a zero-latency connection to\nthe database.\n\n<!-- knee getting hit with hammer like in reflex test -->\n- _Full Stack Reactivity_. Make realtime the default. All layers, from\ndatabase to template, should make an event-driven interface available.\n\n- _Embrace the Ecosystem_. Meteor is open source and integrates,\nrather than replaces, existing open source tools and frameworks.\n\n<!-- zen circle -->\n- _Simplicity Equals Productivity_. The best way to make something\nseem simple is to have it actually _be_ simple. Accomplish this through\nclean, classically beautiful APIs.\n\n\n<h2 id="resources">Developer Resources</h2>\n\n<!-- https://github.com/blog/273-github-ribbons -->\n<a href="http://github.com/meteor/meteor"><img class="github-ribbon visible-desktop" style="position: absolute; top: 0; right: 0; border: 0;" src="/forkme_right_red_aa0000.png" alt="Fork me on GitHub"></a>\n\nIf anything in Meteor catches your interest, we hope you\'ll get involved\nwith the project!\n\n<dl class="involved">\n<dt><span>Stack Overflow</span></dt>\n<dd>The best place to ask (and answer!) technical questions is on <a href="http://stackoverflow.com/questions/tagged/meteor">Stack\n  Overflow</a>.  Be sure to add\n  the <code>meteor</code> tag to your question.\n</dd>\n\n<dt><span>Mailing lists</span></dt>\n<dd>\n  We have two mailing lists for Meteor.  <nobr><a href="http://groups.google.com/group/meteor-talk"><code>meteor-talk@googlegroups.com</code></a></nobr>\n  is for general questions, requests for help, and new project\n  announcements.\n  <nobr><a href="http://groups.google.com/group/meteor-core"><code>meteor-core@googlegroups.com</code></a></nobr>\n  is for coordinating changes to Meteor core packages and the build\n  tools.\n</dd>\n\n<dt><span>GitHub</span></dt>\n<dd>The core code is on <a href="http://github.com/meteor/meteor">GitHub</a>.  If you\'re able to write code or file issues, we\'d love to have your help.  Please read <a href="https://github.com/meteor/meteor/wiki/Contributing-to-Meteor">Contributing to Meteor</a> for how to get started.\n</dl>\n\n']],"\n</div>"]))}(),function(){Template.__define__("packages",Package.handlebars.Handlebars.json_ast_to_func([["#",[[0,"better_markdown"]],['\n\n<h1 id="packages">Packages</h1>\n\nMeteor supports a variety of add-on packages and third party\nlibraries. While you can build great applications using only the Meteor\ncore functionality, optional packages can make development even faster\nand better.\n\nPackages can be added and removed from a Meteor project with:\n\n    $ meteor add <package_name>\n\nand removed with:\n\n    $ meteor remove <package_name>\n\n',[">","pkg_accounts_ui"],"\n",[">","pkg_amplify"],"\n",[">","pkg_appcache"],"\n",[">","pkg_audit_argument_checks"],"\n",[">","pkg_backbone"],"\n",[">","pkg_bootstrap"],"\n",[">","pkg_browser_policy"],"\n",[">","pkg_coffeescript"],"\n",[">","pkg_d3"],"\n",[">","pkg_force_ssl"],"\n",[">","pkg_jquery"],"\n",[">","pkg_less"],"\n",[">","pkg_random"],"\n",[">","pkg_spiderable"],"\n",[">","pkg_stylus"],"\n",[">","pkg_showdown"],"\n",[">","pkg_underscore"],"\n\n"]]]))}(),function(){Meteor.isClient&&(Meteor.release=Meteor.release?"0.7.1.2":void 0)}(),function(){Template.api.isClient={id:"meteor_isclient",name:"Meteor.isClient",locus:"Anywhere",descr:["Boolean variable.  True if running in client environment."]},Template.api.isServer={id:"meteor_isserver",name:"Meteor.isServer",locus:"Anywhere",descr:["Boolean variable.  True if running in server environment."]},Template.api.startup={id:"meteor_startup",name:"Meteor.startup(func)",locus:"Anywhere",descr:["Run code when a client or a server starts."],args:[{name:"func",type:"Function",descr:"A function to run on startup."}]},Template.api.absoluteUrl={id:"meteor_absoluteurl",name:"Meteor.absoluteUrl([path], [options])",locus:"Anywhere",descr:["Generate an absolute URL pointing to the application. The server reads from the `ROOT_URL` environment variable to determine where it is running. This is taken care of automatically for apps deployed with `meteor deploy`, but must be provided when using `meteor bundle`."],args:[{name:"path",type:"String",descr:'A path to append to the root URL. Do not include a leading "`/`".'}],options:[{name:"secure",type:"Boolean",descr:"Create an HTTPS URL."},{name:"replaceLocalhost",type:"Boolean",descr:"Replace localhost with 127.0.0.1. Useful for services that don't recognize localhost as a domain name."},{name:"rootUrl",type:"String",descr:'Override the default ROOT_URL from the server environment. For example: "`http://foo.example.com`"'}]},Template.api.settings={id:"meteor_settings",name:"Meteor.settings",locus:"Anywhere",descr:["`Meteor.settings` contains deployment-specific configuration options. You can initialize settings by passing the `--settings` option (which takes a file containing JSON data) to `meteor run` or `meteor deploy`, or by setting your server process's `METEOR_SETTINGS` environment variable to a JSON string. If you don't provide any settings, `Meteor.settings` will be an empty object.  If the settings object contains a key named `public`, then `Meteor.settings.public` will be available on the client as well as the server.  All other properties of `Meteor.settings` are only defined on the server."]},Template.api.release={id:"meteor_release",name:"Meteor.release",locus:"Anywhere",descr:['`Meteor.release` is a string containing the name of the [release](#meteorupdate) with which the project was built (for example, `"'+Meteor.release+'"`). It is `undefined` if the project was built using a git checkout of Meteor.']},Template.api.ejsonParse={id:"ejson_parse",name:"EJSON.parse(str)",locus:"Anywhere",args:[{name:"str",type:"String",descr:"A string to parse into an EJSON value."}],descr:["Parse a string into an EJSON value. Throws an error if the string is not valid EJSON."]},Template.api.ejsonStringify={id:"ejson_stringify",name:"EJSON.stringify(val, [options])",locus:"Anywhere",args:[{name:"val",type:"EJSON-compatible value",descr:"A value to stringify."}],options:[{name:"indent",type:"Boolean, Integer, or String",descr:"Indents objects and arrays for easy readability.  When `true`, indents by 2 spaces; when an integer, indents by that number of spaces; and when a string, uses the string as the indentation pattern."},{name:"canonical",type:"Boolean",descr:"When `true`, stringifies keys in an object in sorted order."}],descr:["Serialize a value to a string.\n\nFor EJSON values, the serialization fully represents the value. For non-EJSON values, serializes the same way as `JSON.stringify`."]},Template.api.ejsonFromJSONValue={id:"ejson_from_json_value",name:"EJSON.fromJSONValue(val)",locus:"Anywhere",args:[{name:"val",type:"JSON-compatible value",descr:"A value to deserialize into EJSON."}],descr:["Deserialize an EJSON value from its  plain JSON representation."]},Template.api.ejsonToJSONValue={id:"ejson_to_json_value",name:"EJSON.toJSONValue(val)",locus:"Anywhere",args:[{name:"val",type:"EJSON-compatible value",descr:"A value to serialize to plain JSON."}],descr:["Serialize an EJSON-compatible value into its plain JSON representation."]},Template.api.ejsonEquals={id:"ejson_equals",name:"EJSON.equals(a, b, [options])",locus:"Anywhere",args:[{name:"a",type:"EJSON-compatible object"},{name:"b",type:"EJSON-compatible object"}],options:[{name:"keyOrderSensitive",type:"Boolean",descr:"Compare in key sensitive order, if supported by the JavaScript implementation.  For example, `{a: 1, b: 2}` is equal to `{b: 2, a: 1}` only when `keyOrderSensitive` is `false`.  The default is `false`."}],descr:["Return true if `a` and `b` are equal to each other.  Return false otherwise.  Uses the `equals` method on `a` if present, otherwise performs a deep comparison."]},Template.api.ejsonClone={id:"ejson_clone",name:"EJSON.clone(val)",locus:"Anywhere",args:[{name:"val",type:"EJSON-compatible value",descr:"A value to copy."}],descr:["Return a deep copy of `val`."]},Template.api.ejsonNewBinary={id:"ejson_new_binary",name:"EJSON.newBinary(size)",locus:"Anywhere",args:[{name:"size",type:"Number",descr:"The number of bytes of binary data to allocate."}],descr:["Allocate a new buffer of binary data that EJSON can serialize."]},Template.api.ejsonIsBinary={id:"ejson_is_binary",name:"EJSON.isBinary(x)",locus:"Anywhere",descr:["Returns true if `x` is a buffer of binary data, as returned from [`EJSON.newBinary`](#ejson_new_binary)."]},Template.api.ejsonAddType={id:"ejson_add_type",name:"EJSON.addType(name, factory)",locus:"Anywhere",args:[{name:"name",type:"String",descr:"A tag for your custom type; must be unique among custom data types defined in your project, and must match the result of your type's `typeName` method."},{name:"factory",type:"Function",descr:"A function that deserializes a JSON-compatible value into an instance of your type.  This should match the serialization performed by your type's `toJSONValue` method."}],descr:["Add a custom datatype to EJSON."]},Template.api.ejsonTypeClone={id:"ejson_type_clone",name:"<i>instance</i>.clone()",descr:["Return a value `r` such that `this.equals(r)` is true, and modifications to `r` do not affect `this` and vice versa."]},Template.api.ejsonTypeEquals={id:"ejson_type_equals",name:"<i>instance</i>.equals(other)",args:[{name:"other",type:"object",descr:"Another object to compare this to."}],descr:["Return `true` if `other` has a value equal to `this`; `false` otherwise."]},Template.api.ejsonTypeName={id:"ejson_type_typeName",name:"<i>instance</i>.typeName()",descr:["Return the tag used to identify this type.  This must match the tag used to register this type with [`EJSON.addType`](#ejson_add_type)."]},Template.api.ejsonTypeToJSONValue={id:"ejson_type_toJSONValue",name:"<i>instance</i>.toJSONValue()",descr:["Serialize this instance into a JSON-compatible value."]},Template.api.publish={id:"meteor_publish",name:"Meteor.publish(name, func)",locus:"Server",descr:["Publish a record set."],args:[{name:"name",type:"String",descr:"Name of the attribute set.  If `null`, the set has no name, and the record set is automatically sent to all connected clients."},{name:"func",type:"Function",descr:"Function called on the server each time a client subscribes.  Inside the function, `this` is the publish handler object, described below.  If the client passed arguments to `subscribe`, the function is called with the same arguments."}]},Template.api.subscription_added={id:"publish_added",name:"<i>this</i>.added(collection, id, fields)",locus:"Server",descr:["Call inside the publish function.  Informs the subscriber that a document has been added to the record set."],args:[{name:"collection",type:"String",descr:"The name of the collection that contains the new document."},{name:"id",type:"String",descr:"The new document's ID."},{name:"fields",type:"Object",descr:"The fields in the new document.  If `_id` is present it is ignored."}]},Template.api.subscription_changed={id:"publish_changed",name:"<i>this</i>.changed(collection, id, fields)",locus:"Server",descr:["Call inside the publish function.  Informs the subscriber that a document in the record set has been modified."],args:[{name:"collection",type:"String",descr:"The name of the collection that contains the changed document."},{name:"id",type:"String",descr:"The changed document's ID."},{name:"fields",type:"Object",descr:"The fields in the document that have changed, together with their new values.  If a field is not present in `fields` it was left unchanged; if it is present in `fields` and has a value of `undefined` it was removed from the document.  If `_id` is present it is ignored."}]},Template.api.subscription_removed={id:"publish_removed",name:"<i>this</i>.removed(collection, id)",locus:"Server",descr:["Call inside the publish function.  Informs the subscriber that a document has been removed from the record set."],args:[{name:"collection",type:"String",descr:"The name of the collection that the document has been removed from."},{name:"id",type:"String",descr:"The ID of the document that has been removed."}]},Template.api.subscription_ready={id:"publish_ready",name:"<i>this</i>.ready()",locus:"Server",descr:["Call inside the publish function.  Informs the subscriber that an initial, complete snapshot of the record set has been sent.  This will trigger a call on the client to the `onReady` callback passed to  [`Meteor.subscribe`](#meteor_subscribe), if any."]},Template.api.subscription_error={id:"publish_error",name:"<i>this</i>.error(error)",locus:"Server",descr:["Call inside the publish function.  Stops this client's subscription, triggering a call on the client to the `onError` callback passed to [`Meteor.subscribe`](#meteor_subscribe), if any. If `error` is not a [`Meteor.Error`](#meteor_error), it will be [sanitized](#meteor_error)."]},Template.api.subscription_stop={id:"publish_stop",name:"<i>this</i>.stop()",locus:"Server",descr:["Call inside the publish function.  Stops this client's subscription; the `onError` callback is *not* invoked on the client."]},Template.api.subscription_onStop={id:"publish_onstop",name:"<i>this</i>.onStop(func)",locus:"Server",descr:["Call inside the publish function.  Registers a callback function to run when the subscription is stopped."],args:[{name:"func",type:"Function",descr:"The callback function"}]},Template.api.subscription_userId={id:"publish_userId",name:"<i>this</i>.userId",locus:"Server",descr:["Access inside the publish function. The id of the logged-in user, or `null` if no user is logged in."]},Template.api.subscription_connection={id:"publish_connection",name:"<i>this</i>.connection",locus:"Server",descr:["Access inside the publish function. The incoming [connection](#meteor_onconnection) for this subscription."]},Template.api.subscribe={id:"meteor_subscribe",name:"Meteor.subscribe(name [, arg1, arg2, ... ] [, callbacks])",locus:"Client",descr:["Subscribe to a record set.  Returns a handle that provides `stop()` and `ready()` methods."],args:[{name:"name",type:"String",descr:"Name of the subscription.  Matches name of server's publish() call."},{name:"arg1, arg2, ...",type:"Any",descr:"Optional arguments passed to publisher function on server."},{name:"callbacks",type:"Function or Object",descr:"Optional. May include `onError` and `onReady` callbacks. If a function is passed instead of an object, it is interpreted as an `onReady` callback."}]},Template.api.methods={id:"meteor_methods",name:"Meteor.methods(methods)",locus:"Anywhere",descr:["Defines functions that can be invoked over the network by clients."],args:[{name:"methods",type:"Object",descr:"Dictionary whose keys are method names and values are functions."}]},Template.api.method_invocation_userId={id:"method_userId",name:"<i>this</i>.userId",locus:"Anywhere",descr:["The id of the user that made this method call, or `null` if no user was logged in."]},Template.api.method_invocation_setUserId={id:"method_setUserId",name:"<i>this</i>.setUserId(userId)",locus:"Server",descr:["Set the logged in user."],args:[{name:"userId",type:"String or null",descr:"The value that should be returned by `userId` on this connection."}]},Template.api.method_invocation_unblock={id:"method_unblock",name:"<i>this</i>.unblock()",locus:"Server",descr:["Call inside a method invocation.  Allow subsequent method from this client to begin running in a new fiber."]},Template.api.method_invocation_isSimulation={id:"method_issimulation",name:"<i>this</i>.isSimulation",locus:"Anywhere",descr:["Access inside a method invocation.  Boolean value, true if this invocation is a stub."]},Template.api.method_invocation_connection={id:"method_connection",name:"<i>this</i>.connection",locus:"Server",descr:["Access inside a method invocation. The [connection](#meteor_onconnection) this method was received on. `null` if the method is not associated with a connection, eg. a server initiated method call."]},Template.api.error={id:"meteor_error",name:"new Meteor.Error(error, reason, details)",locus:"Anywhere",descr:["This class represents a symbolic error thrown by a method."],args:[{name:"error",type:"Number",descr:"A numeric error code, likely similar to an HTTP code (eg, 404, 500)."},{name:"reason",type:"String",descr:"Optional.  A short human-readable summary of the error, like 'Not Found'."},{name:"details",type:"String",descr:"Optional.  Additional information about the error, like a textual stack trace."}]},Template.api.meteor_call={id:"meteor_call",name:"Meteor.call(name, param1, param2, ... [, asyncCallback])",locus:"Anywhere",descr:["Invokes a method passing any number of arguments."],args:[{name:"name",type:"String",descr:"Name of method to invoke"},{name:"param1, param2, ...",type:"EJSON",descr:"Optional method arguments"},{name:"asyncCallback",type:"Function",descr:"Optional callback, which is called asynchronously with the error or result after the method is complete. If not provided, the method runs synchronously if possible (see below)."}]},Template.api.meteor_apply={id:"meteor_apply",name:"Meteor.apply(name, params [, options] [, asyncCallback])",locus:"Anywhere",descr:["Invoke a method passing an array of arguments."],args:[{name:"name",type:"String",descr:"Name of method to invoke"},{name:"params",type:"Array",descr:"Method arguments"},{name:"asyncCallback",type:"Function",descr:"Optional callback; same semantics as in [`Meteor.call`](#meteor_call)."}],options:[{name:"wait",type:"Boolean",descr:"(Client only) If true, don't send this method until all previous method calls have completed, and don't send any subsequent method calls until this one is completed."},{name:"onResultReceived",type:"Function",descr:"(Client only) This callback is invoked with the error or result of the method (just like `asyncCallback`) as soon as the error or result is available. The local cache may not yet reflect the writes performed by the method."}]},Template.api.status={id:"meteor_status",name:"Meteor.status()",locus:"Client",descr:["Get the current connection status. A reactive data source."]},Template.api.reconnect={id:"meteor_reconnect",name:"Meteor.reconnect()",locus:"Client",descr:["Force an immediate reconnection attempt if the client is not connected to the server.","This method does nothing if the client is already connected."]},Template.api.disconnect={id:"meteor_disconnect",name:"Meteor.disconnect()",locus:"Client",descr:["Disconnect the client from the server."]},Template.api.connect={id:"ddp_connect",name:"DDP.connect(url)",locus:"Anywhere",descr:["Connect to the server of a different Meteor application to subscribe to its document sets and invoke its remote methods."],args:[{name:"url",type:"String",descr:"The URL of another Meteor application."}]},Template.api.onConnection={id:"meteor_onconnection",name:"Meteor.onConnection(callback)",locus:"Server",descr:["Register a callback to be called when a new DDP connection is made to the server."],args:[{name:"callback",type:"function",descr:"The function to call when a new DDP connection is established."}]},Template.api.meteor_collection={id:"meteor_collection",name:"new Meteor.Collection(name, [options])",locus:"Anywhere",descr:["Constructor for a Collection"],args:[{name:"name",type:"String",descr:"The name of the collection.  If null, creates an unmanaged (unsynchronized) local collection."}],options:[{name:"connection",type:"Object",descr:"The server connection that will manage this collection. Uses the default connection if not specified.  Pass the return value of calling [`DDP.connect`](#ddp_connect) to specify a different server. Pass `null` to specify no connection. Unmanaged (`name` is null) collections cannot specify a connection."},{name:"idGeneration",type:"String",descr:"The method of generating the `_id` fields of new documents in this collection.  Possible values:\n\n - **`'STRING'`**: random strings\n - **`'MONGO'`**:  random [`Meteor.Collection.ObjectID`](#collection_object_id) values\n\nThe default id generation technique is `'STRING'`."},{name:"transform",type:"Function",descr:"An optional transformation function. Documents will be passed through this function before being returned from `fetch` or `findOne`, and before being passed to callbacks of `observe`, `map`, `forEach`, `allow`, and `deny`. Transforms are *not* applied for the callbacks of `observeChanges` or to cursors returned from publish functions."}]},Template.api.find={id:"find",name:"<em>collection</em>.find(selector, [options])",locus:"Anywhere",descr:["Find the documents in a collection that match the selector."],args:[{name:"selector",type:"Mongo selector (Object or String)",type_link:"selectors",descr:"The query"}],options:[{name:"sort",type:"Sort specifier",type_link:"sortspecifiers",descr:"Sort order (default: natural order)"},{name:"skip",type:"Number",descr:"Number of results to skip at the beginning"},{name:"limit",type:"Number",descr:"Maximum number of results to return"},{name:"fields",type:"Field specifier",type_link:"fieldspecifiers",descr:"Dictionary of fields to return or exclude."},{name:"reactive",type:"Boolean",descr:"(Client only) Default `true`; pass `false` to disable reactivity"},{name:"transform",type:"Function",descr:"Overrides `transform` on the  [`Collection`](#collections) for this cursor.  Pass `null` to disable transformation."}]},Template.api.findone={id:"findone",name:"<em>collection</em>.findOne(selector, [options])",locus:"Anywhere",descr:["Finds the first document that matches the selector, as ordered by sort and skip options."],args:[{name:"selector",type:"Mongo selector (Object or String)",type_link:"selectors",descr:"The query"}],options:[{name:"sort",type:"Sort specifier",type_link:"sortspecifiers",descr:"Sort order (default: natural order)"},{name:"skip",type:"Number",descr:"Number of results to skip at the beginning"},{name:"fields",type:"Field specifier",type_link:"fieldspecifiers",descr:"Dictionary of fields to return or exclude."},{name:"reactive",type:"Boolean",descr:"(Client only) Default true; pass false to disable reactivity"},{name:"transform",type:"Function",descr:"Overrides `transform` on the [`Collection`](#collections) for this cursor.  Pass `null` to disable transformation."}]},Template.api.insert={id:"insert",name:"<em>collection</em>.insert(doc, [callback])",locus:"Anywhere",descr:["Insert a document in the collection.  Returns its unique _id."],args:[{name:"doc",type:"Object",descr:"The document to insert. May not yet have an _id attribute, in which case Meteor will generate one for you."},{name:"callback",type:"Function",descr:"Optional.  If present, called with an error object as the first argument and, if no error, the _id as the second."}]},Template.api.update={id:"update",name:"<em>collection</em>.update(selector, modifier, [options], [callback])",locus:"Anywhere",descr:["Modify one or more documents in the collection. Returns the number of affected documents."],args:[{name:"selector",type:"Mongo selector, or object id",type_link:"selectors",descr:"Specifies which documents to modify"},{name:"modifier",type:"Mongo modifier",type_link:"modifiers",descr:"Specifies how to modify the documents"},{name:"callback",type:"Function",descr:"Optional.  If present, called with an error object as the first argument and, if no error, the number of affected documents as the second."}],options:[{name:"multi",type:"Boolean",descr:"True to modify all matching documents; false to only modify one of the matching documents (the default)."},{name:"upsert",type:"Boolean",descr:"True to insert a document if no matching documents are found."}]},Template.api.upsert={id:"upsert",name:"<em>collection</em>.upsert(selector, modifier, [options], [callback])",locus:"Anywhere",descr:["Modify one or more documents in the collection, or insert one if no matching documents were found. Returns an object with keys `numberAffected` (the number of documents modified)  and `insertedId` (the unique _id of the document that was inserted, if any)."],args:[{name:"selector",type:"Mongo selector, or object id",type_link:"selectors",descr:"Specifies which documents to modify"},{name:"modifier",type:"Mongo modifier",type_link:"modifiers",descr:"Specifies how to modify the documents"},{name:"callback",type:"Function",descr:"Optional.  If present, called with an error object as the first argument and, if no error, the number of affected documents as the second."}],options:[{name:"multi",type:"Boolean",descr:"True to modify all matching documents; false to only modify one of the matching documents (the default)."}]},Template.api.remove={id:"remove",name:"<em>collection</em>.remove(selector, [callback])",locus:"Anywhere",descr:["Remove documents from the collection"],args:[{name:"selector",type:"Mongo selector, or object id",type_link:"selectors",descr:"Specifies which documents to remove"},{name:"callback",type:"Function",descr:"Optional.  If present, called with an error object as its argument."}]},Template.api.allow={id:"allow",name:"<em>collection</em>.allow(options)",locus:"Server",descr:["Allow users to write directly to this collection from client code, subject to limitations you define."],options:[{name:"insert, update, remove",type:"Function",descr:"Functions that look at a proposed modification to the database and return true if it should be allowed."},{name:"fetch",type:"Array of String",descr:"Optional performance enhancement. Limits the fields that will be fetched from the database for inspection by your `update` and `remove` functions."},{name:"transform",type:"Function",descr:"Overrides `transform` on the  [`Collection`](#collections).  Pass `null` to disable transformation."}]},Template.api.deny={id:"deny",name:"<em>collection</em>.deny(options)",locus:"Server",descr:["Override `allow` rules."],options:[{name:"insert, update, remove",type:"Function",descr:"Functions that look at a proposed modification to the database and return true if it should be denied, even if an `allow` rule says otherwise."},{name:"fetch",type:"Array of Strings",descr:"Optional performance enhancement. Limits the fields that will be fetched from the database for inspection by your `update` and `remove` functions."},{name:"transform",type:"Function",descr:"Overrides `transform` on the  [`Collection`](#collections).  Pass `null` to disable transformation."}]},Template.api.cursor_count={id:"count",name:"<em>cursor</em>.count()",locus:"Anywhere",descr:["Returns the number of documents that match a query."]},Template.api.cursor_fetch={id:"fetch",name:"<em>cursor</em>.fetch()",locus:"Anywhere",descr:["Return all matching documents as an Array."]},Template.api.cursor_foreach={id:"foreach",name:"<em>cursor</em>.forEach(callback, [thisArg])",locus:"Anywhere",descr:["Call `callback` once for each matching document, sequentially and synchronously."],args:[{name:"callback",type:"Function",descr:"Function to call. It will be called with three arguments: the document, a 0-based index, and <em>cursor</em> itself."},{name:"thisArg",type:"Any",descr:"An object which will be the value of `this` inside `callback`."}]},Template.api.cursor_map={id:"map",name:"<em>cursor</em>.map(callback, [thisArg])",locus:"Anywhere",descr:["Map callback over all matching documents.  Returns an Array."],args:[{name:"callback",type:"Function",descr:"Function to call. It will be called with three arguments: the document, a 0-based index, and <em>cursor</em> itself."},{name:"thisArg",type:"Any",descr:"An object which will be the value of `this` inside `callback`."}]},Template.api.cursor_rewind={id:"rewind",name:"<em>cursor</em>.rewind()",locus:"Anywhere",descr:["Resets the query cursor."],args:[]},Template.api.cursor_observe={id:"observe",name:"<em>cursor</em>.observe(callbacks)",locus:"Anywhere",descr:["Watch a query.  Receive callbacks as the result set changes."],args:[{name:"callbacks",type:"Object",descr:"Functions to call to deliver the result set as it changes"}]},Template.api.cursor_observe_changes={id:"observe_changes",name:"<em>cursor</em>.observeChanges(callbacks)",locus:"Anywhere",descr:["Watch a query.  Receive callbacks as the result set changes.  Only the differences between the old and new documents are passed to the callbacks."],args:[{name:"callbacks",type:"Object",descr:"Functions to call to deliver the result set as it changes"}]},Template.api.id={id:"meteor_id",name:"Random.id()",locus:"Anywhere",descr:["Return a unique identifier."],args:[]},Template.api.collection_object_id={id:"collection_object_id",name:"new Meteor.Collection.ObjectID(hexString)",locus:"Anywhere",descr:["Create a Mongo-style `ObjectID`.  If you don't specify a `hexString`, the `ObjectID` will generated randomly (not using MongoDB's ID construction rules)."],args:[{name:"hexString",type:"String",descr:["Optional.  The 24-character hexadecimal contents of the ObjectID to create"]}]},Template.api.selectors={id:"selectors",name:"Mongo-style Selectors"},Template.api.modifiers={id:"modifiers",name:"Mongo-style Modifiers"},Template.api.sortspecifiers={id:"sortspecifiers",name:"Sort Specifiers"},Template.api.fieldspecifiers={id:"fieldspecifiers",name:"Field Specifiers"},Template.api.deps_autorun={id:"deps_autorun",name:"Deps.autorun(runFunc)",locus:"Client",descr:["Run a function now and rerun it later whenever its dependencies change. Returns a Computation object that can be used to stop or observe the rerunning."],args:[{name:"runFunc",type:"Function",descr:"The function to run. It receives one argument: the Computation object that will be returned."}]},Template.api.deps_flush={id:"deps_flush",name:"Deps.flush()",locus:"Client",descr:["Process all reactive updates immediately and ensure that all invalidated computations are rerun."]},Template.api.deps_nonreactive={id:"deps_nonreactive",name:"Deps.nonreactive(func)",locus:"Client",descr:["Run a function without tracking dependencies."],args:[{name:"func",type:"Function",descr:"A function to call immediately."}]},Template.api.deps_active={id:"deps_active",name:"Deps.active",locus:"Client",descr:["True if there is a current computation, meaning that dependencies on reactive data sources will be tracked and potentially cause the current computation to be rerun."]},Template.api.deps_currentcomputation={id:"deps_currentcomputation",name:"Deps.currentComputation",locus:"Client",descr:["The current computation, or `null` if there isn't one.  The current computation is the [`Deps.Computation`](#deps_computation) object created by the innermost active call to `Deps.autorun`, and it's the computation that gains dependencies when reactive data sources are accessed."]},Template.api.deps_oninvalidate={id:"deps_oninvalidate",name:"Deps.onInvalidate(callback)",locus:"Client",descr:["Registers a new [`onInvalidate`](#computation_oninvalidate) callback on the current computation (which must exist), to be called immediately when the current computation is invalidated or stopped."],args:[{name:"callback",type:"Function",descr:"A callback function that will be invoked as `func(c)`, where `c` is the computation on which the callback is registered."}]},Template.api.deps_afterflush={id:"deps_afterflush",name:"Deps.afterFlush(callback)",locus:"Client",descr:["Schedules a function to be called during the next flush, or later in the current flush if one is in progress, after all invalidated computations have been rerun.  The function will be run once and not on subsequent flushes unless `afterFlush` is called again."],args:[{name:"callback",type:"Function",descr:"A function to call at flush time."}]},Template.api.computation_stop={id:"computation_stop",name:"<em>computation</em>.stop()",locus:"Client",descr:["Prevents this computation from rerunning."]},Template.api.computation_invalidate={id:"computation_invalidate",name:"<em>computation</em>.invalidate()",locus:"Client",descr:["Invalidates this computation so that it will be rerun."]},Template.api.computation_oninvalidate={id:"computation_oninvalidate",name:"<em>computation</em>.onInvalidate(callback)",locus:"Client",descr:["Registers `callback` to run when this computation is next invalidated, or runs it immediately if the computation is already invalidated.  The callback is run exactly once and not upon future invalidations unless `onInvalidate` is called again after the computation becomes valid again."],args:[{name:"callback",type:"Function",descr:"Function to be called on invalidation. Receives one argument, the computation that was invalidated."}]},Template.api.computation_stopped={id:"computation_stopped",name:"<em>computation</em>.stopped",locus:"Client",descr:["True if this computation has been stopped."]},Template.api.computation_invalidated={id:"computation_invalidated",name:"<em>computation</em>.invalidated",locus:"Client",descr:["True if this computation has been invalidated (and not yet rerun), or if it has been stopped."]},Template.api.computation_firstrun={id:"computation_firstrun",name:"<em>computation</em>.firstRun",locus:"Client",descr:["True during the initial run of the computation at the time `Deps.autorun` is called, and false on subsequent reruns and at other times."]},Template.api.dependency_changed={id:"dependency_changed",name:"<em>dependency</em>.changed()",locus:"Client",descr:["Invalidate all dependent computations immediately and remove them as dependents."]},Template.api.dependency_depend={id:"dependency_depend",name:"<em>dependency</em>.depend([fromComputation])",locus:"Client",descr:["Declares that the current computation (or `fromComputation` if given) depends on `dependency`.  The computation will be invalidated the next time `dependency` changes.","If there is no current computation and `depend()` is called with no arguments, it does nothing and returns false.","Returns true if the computation is a new dependent of `dependency` rather than an existing one."],args:[{name:"fromComputation",type:"Deps.Computation",descr:"An optional computation declared to depend on `dependency` instead of the current computation."}]},Template.api.dependency_hasdependents={id:"dependency_hasdependents",name:"<em>dependency</em>.hasDependents()",locus:"Client",descr:["True if this Dependency has one or more dependent Computations, which would be invalidated if this Dependency were to change."]},Template.api.render={id:"meteor_render",name:"Meteor.render(htmlFunc)",locus:"Client",descr:["Create DOM nodes that automatically update themselves as data changes."],args:[{name:"htmlFunc",type:"Function returning a string of HTML",descr:"Function that generates HTML to be rendered.  Called immediately and re-run whenever data changes.  May also be a string of HTML instead of a function."}]},Template.api.renderList={id:"meteor_renderlist",name:"Meteor.renderList(observable, docFunc, [elseFunc])",locus:"Client",descr:["Create DOM nodes that automatically update themselves based on the results of a database query."],args:[{name:"observable",type:"Cursor",type_link:"meteor_collection_cursor",descr:"Query cursor to observe as a reactive source of ordered documents."},{name:"docFunc",type:"Function taking a document and returning HTML",descr:"Render function to be called for each document."},{name:"elseFunc",type:"Function returning HTML",descr:"Optional.  Render function to be called when query is empty."}]},Template.api.eventmaps={id:"eventmaps",name:"Event Maps"},Template.api.constant={id:"constant",name:"Constant regions"},Template.api.isolate={id:"isolate",name:"Reactivity isolation"},Template.api.user={id:"meteor_user",name:"Meteor.user()",locus:"Anywhere but publish functions",descr:["Get the current user record, or `null` if no user is logged in. A reactive data source."]},Template.api.currentUser={id:"template_currentuser",name:"{{currentUser}}",locus:"Handlebars templates",descr:["Calls [Meteor.user()](#meteor_user). Use `{{#if currentUser}}` to check whether the user is logged in."]},Template.api.userId={id:"meteor_userid",name:"Meteor.userId()",locus:"Anywhere but publish functions",descr:["Get the current user id, or `null` if no user is logged in. A reactive data source."]},Template.api.users={id:"meteor_users",name:"Meteor.users",locus:"Anywhere",descr:["A [Meteor.Collection](#collections) containing user documents."]},Template.api.loggingIn={id:"meteor_loggingin",name:"Meteor.loggingIn()",locus:"Client",descr:["True if a login method (such as `Meteor.loginWithPassword`, `Meteor.loginWithFacebook`, or `Accounts.createUser`) is currently in progress. A reactive data source."]},Template.api.loggingInTemplate={id:"template_loggingin",name:"{{loggingIn}}",locus:"Handlebars templates",descr:["Calls [Meteor.loggingIn()](#meteor_loggingin)."]},Template.api.logout={id:"meteor_logout",name:"Meteor.logout([callback])",locus:"Client",descr:["Log the user out."],args:[{name:"callback",type:"Function",descr:"Optional callback. Called with no arguments on success, or with a single `Error` argument on failure."}]},Template.api.logoutOtherClients={id:"meteor_logoutotherclients",name:"Meteor.logoutOtherClients([callback])",locus:"Client",descr:["Log out other clients logged in as the current user, but does not log out the client that calls this function."],args:[{name:"callback",type:"Function",descr:"Optional callback. Called with no arguments on success, or with a single `Error` argument on failure."}]},Template.api.loginWithPassword={id:"meteor_loginwithpassword",name:"Meteor.loginWithPassword(user, password, [callback])",locus:"Client",descr:["Log the user in with a password."],args:[{name:"user",type:"Object or String",descr:"Either a string interpreted as a username or an email; or an object with a single key: `email`, `username` or `id`."},{name:"password",type:"String",descr:"The user's password. This is __not__ sent in plain text over the wire &mdash; it is secured with [SRP](http://en.wikipedia.org/wiki/Secure_Remote_Password_protocol)."},{name:"callback",type:"Function",descr:"Optional callback. Called with no arguments on success, or with a single `Error` argument on failure."}]},Template.api.loginWithExternalService={id:"meteor_loginwithexternalservice",name:"Meteor.loginWith<i>ExternalService</i>([options], [callback])",locus:"Client",descr:["Log the user in using an external service."],args:[{name:"callback",type:"Function",descr:"Optional callback. Called with no arguments on success, or with a single `Error` argument on failure."}],options:[{name:"requestPermissions",type:"Array of Strings",descr:"A list of permissions to request from the user."},{name:"requestOfflineToken",type:"Boolean",descr:"If true, asks the user for permission to act on their behalf when offline. This stores an additional offline token in the `services` field of the user document. Currently only supported with Google."},{name:"forceApprovalPrompt",type:"Boolean",descr:"If true, forces the user to approve the app's permissions, even if previously approved. Currently only supported with Google."}]},Template.api.accounts_config={id:"accounts_config",name:"Accounts.config(options)",locus:"Anywhere",descr:["Set global accounts options."],options:[{name:"sendVerificationEmail",type:"Boolean",descr:"New users with an email address will receive an address verification email."},{name:"forbidClientAccountCreation",type:"Boolean",descr:'Calls to [`createUser`](#accounts_createuser) from the client will be rejected. In addition, if you are using [accounts-ui](#accountsui), the "Create account" link will not be available.'},{name:"restrictCreationByEmailDomain",type:"String or Function",descr:"If set to a string, only allows new users if the domain part of their email address matches the string. If set to a function, only allows new users if the function returns true.  The function is passed the full email address of the proposed new user.  Works with password-based sign-in and external services that expose email addresses (Google, Facebook, GitHub). All existing users still can log in after enabling this option. Example: `Accounts.config({ restrictCreationByEmailDomain: 'school.edu' })`."},{name:"loginExpirationInDays",type:"Number",descr:"The number of days from when a user logs in until their token expires and they are logged out. Defaults to 90. Set to `null` to disable login expiration."}]},Template.api.accounts_ui_config={id:"accounts_ui_config",name:"Accounts.ui.config(options)",locus:"Client",descr:["Configure the behavior of [`{{loginButtons}}`](#accountsui)."],options:[{name:"requestPermissions",type:"Object",descr:"Which [permissions](#requestpermissions) to request from the user for each external service."},{name:"requestOfflineToken",type:"Object",descr:"To ask the user for permission to act on their behalf when offline, map the relevant external service to `true`. Currently only supported with Google. See [Meteor.loginWithExternalService](#meteor_loginwithexternalservice) for more details."},{name:"passwordSignupFields",type:"String",descr:"Which fields to display in the user creation form. One of '`USERNAME_AND_EMAIL`', '`USERNAME_AND_OPTIONAL_EMAIL`', '`USERNAME_ONLY`', or '`EMAIL_ONLY`' (default)."}]},Template.api.accounts_validateNewUser={id:"accounts_validatenewuser",name:"Accounts.validateNewUser(func)",locus:"Server",descr:["Set restrictions on new user creation."],args:[{name:"func",type:"Function",descr:"Called whenever a new user is created. Takes the new user object, and returns true to allow the creation or false to abort."}]},Template.api.accounts_onCreateUser={id:"accounts_oncreateuser",name:"Accounts.onCreateUser(func)",locus:"Server",descr:["Customize new user creation."],args:[{name:"func",type:"Function",descr:"Called whenever a new user is created. Return the new user object, or throw an `Error` to abort the creation."}]},Template.api.accounts_createUser={id:"accounts_createuser",name:"Accounts.createUser(options, [callback])",locus:"Anywhere",descr:["Create a new user."],args:[{name:"callback",type:"Function",descr:"Client only, optional callback. Called with no arguments on success, or with a single `Error` argument on failure."}],options:[{name:"username",type:"String",descr:"A unique name for this user."},{name:"email",type:"String",descr:"The user's email address."},{name:"password",type:"String",descr:"The user's password. This is __not__ sent in plain text over the wire."},{name:"profile",type:"Object",descr:"The user's profile, typically including the `name` field."}]},Template.api.accounts_changePassword={id:"accounts_changepassword",name:"Accounts.changePassword(oldPassword, newPassword, [callback])",locus:"Client",descr:["Change the current user's password. Must be logged in."],args:[{name:"oldPassword",type:"String",descr:"The user's current password. This is __not__ sent in plain text over the wire."},{name:"newPassword",type:"String",descr:"A new password for the user. This is __not__ sent in plain text over the wire."},{name:"callback",type:"Function",descr:"Optional callback. Called with no arguments on success, or with a single `Error` argument on failure."}]},Template.api.accounts_forgotPassword={id:"accounts_forgotpassword",name:"Accounts.forgotPassword(options, [callback])",locus:"Client",descr:["Request a forgot password email."],args:[{name:"callback",type:"Function",descr:"Optional callback. Called with no arguments on success, or with a single `Error` argument on failure."}],options:[{name:"email",type:"String",descr:"The email address to send a password reset link."}]},Template.api.accounts_resetPassword={id:"accounts_resetpassword",name:"Accounts.resetPassword(token, newPassword, [callback])",locus:"Client",descr:["Reset the password for a user using a token received in email. Logs the user in afterwards."],args:[{name:"token",type:"String",descr:"The token retrieved from the reset password URL."},{name:"newPassword",type:"String",descr:"A new password for the user. This is __not__ sent in plain text over the wire."},{name:"callback",type:"Function",descr:"Optional callback. Called with no arguments on success, or with a single `Error` argument on failure."}]},Template.api.accounts_setPassword={id:"accounts_setpassword",name:"Accounts.setPassword(userId, newPassword)",locus:"Server",descr:["Forcibly change the password for a user."],args:[{name:"userId",type:"String",descr:"The id of the user to update."},{name:"newPassword",type:"String",descr:"A new password for the user."}]},Template.api.accounts_verifyEmail={id:"accounts_verifyemail",name:"Accounts.verifyEmail(token, [callback])",locus:"Client",descr:["Marks the user's email address as verified. Logs the user in afterwards."],args:[{name:"token",type:"String",descr:"The token retrieved from the verification URL."},{name:"callback",type:"Function",descr:"Optional callback. Called with no arguments on success, or with a single `Error` argument on failure."}]},Template.api.accounts_sendResetPasswordEmail={id:"accounts_sendresetpasswordemail",name:"Accounts.sendResetPasswordEmail(userId, [email])",locus:"Server",descr:["Send an email with a link the user can use to reset their password."],args:[{name:"userId",type:"String",descr:"The id of the user to send email to."},{name:"email",type:"String",descr:"Optional. Which address of the user's to send the email to. This address must be in the user's `emails` list. Defaults to the first email in the list."}]},Template.api.accounts_sendEnrollmentEmail={id:"accounts_sendenrollmentemail",name:"Accounts.sendEnrollmentEmail(userId, [email])",locus:"Server",descr:["Send an email with a link the user can use to set their initial password."],args:[{name:"userId",type:"String",descr:"The id of the user to send email to."},{name:"email",type:"String",descr:"Optional. Which address of the user's to send the email to. This address must be in the user's `emails` list. Defaults to the first email in the list."}]},Template.api.accounts_sendVerificationEmail={id:"accounts_sendverificationemail",name:"Accounts.sendVerificationEmail(userId, [email])",locus:"Server",descr:["Send an email with a link the user can use verify their email address."],args:[{name:"userId",type:"String",descr:"The id of the user to send email to."},{name:"email",type:"String",descr:"Optional. Which address of the user's to send the email to. This address must be in the user's `emails` list. Defaults to the first unverified email in the list."}]},Template.api.accounts_emailTemplates={id:"accounts_emailtemplates",name:"Accounts.emailTemplates",locus:"Anywhere",descr:["Options to customize emails sent from the Accounts system."]},Template.api.check={id:"check",name:"check(value, pattern)",locus:"Anywhere",descr:["Checks that a value matches a [pattern](#matchpatterns). If the value does not match the pattern, throws a `Match.Error`."],args:[{name:"value",type:"Any",descr:"The value to check"},{name:"pattern",type:"Match pattern",descr:"The [pattern](#matchpatterns) to match `value` against"}]},Template.api.match_test={id:"match_test",name:"Match.test(value, pattern)",locus:"Anywhere",descr:["Returns true if the value matches the [pattern](#matchpatterns)."],args:[{name:"value",type:"Any",descr:"The value to check"},{name:"pattern",type:"Match pattern",descr:"The [pattern](#matchpatterns) to match `value` against"}]},Template.api.matchpatterns={id:"matchpatterns",name:"Match patterns"},Template.api.setTimeout={id:"meteor_settimeout",name:"Meteor.setTimeout(func, delay)",locus:"Anywhere",descr:["Call a function in the future after waiting for a specified delay."],args:[{name:"func",type:"Function",descr:"The function to run"},{name:"delay",type:"Number",descr:"Number of milliseconds to wait before calling function"}]},Template.api.setInterval={id:"meteor_setinterval",name:"Meteor.setInterval(func, delay)",locus:"Anywhere",descr:["Call a function repeatedly, with a time delay between calls."],args:[{name:"func",type:"Function",descr:"The function to run"},{name:"delay",type:"Number",descr:"Number of milliseconds to wait between each function call."}]},Template.api.clearTimeout={id:"meteor_cleartimeout",name:"Meteor.clearTimeout(id)",locus:"Anywhere",descr:["Cancel a function call scheduled by `Meteor.setTimeout`."],args:[{name:"id",type:"Number",descr:"The handle returned by `Meteor.setTimeout`"}]},Template.api.clearInterval={id:"meteor_clearinterval",name:"Meteor.clearInterval(id)",locus:"Anywhere",descr:["Cancel a repeating function call scheduled by `Meteor.setInterval`."],args:[{name:"id",type:"Number",descr:"The handle returned by `Meteor.setInterval`"}]},Template.api.EnvironmentVariable={id:"meteor_environmentvariable",name:"new Meteor.EnvironmentVariable()",locus:"Anywhere",descr:["Construct a Meteor environment variable."]},Template.api.environmentVariable_get={id:"env_var_get",name:"<i>env_var</i>.get()",locus:"Anywhere",descr:["Return the current value of an EnvironmentVariable."]},Template.api.environmentVariable_withValue={id:"env_var_withvalue",name:"<i>env_var</i>.withValue(value, func)",locus:"Anywhere",descr:["Run `func` with the `env_var`'s value set to `value`."],args:[{name:"value",type:"Anything",descr:"Desired value of the environment variable."},{name:"func",type:"Function",descr:"Function to call"}]},Template.api.bindEnvironment={id:"env_var_bindenvironment",name:"<i>env_var</i>.bindEnvironment(func, onException, _this)",locus:"Anywhere",descr:["Return a new function that calls `func` with `this` set to `_this`, and with environment variables set to their current values."],args:[{name:"func",type:"Function",descr:"Function to wrap"},{name:"onException",type:"Function",descr:"Function to call if `func` throws an exception.  It expects the thrown exception as its single argument."},{name:"_this",type:"Object",descr:"Value of `this` inside `func`."}]},Template.api.set={id:"session_set",name:"Session.set(key, value)",locus:"Client",descr:["Set a variable in the session. Notify any listeners that the value has changed (eg: redraw templates, and rerun any [`Deps.autorun`](#deps_autorun) computations, that called [`Session.get`](#session_get) on this `key`.)"],args:[{name:"key",type:"String",descr:"The key to set, eg, `selectedItem`"},{name:"value",type:"EJSON-able object or undefined",descr:"The new value for `key`"}]},Template.api.setDefault={id:"session_set_default",name:"Session.setDefault(key, value)",locus:"Client",descr:["Set a variable in the session if it is undefined. Otherwise works exactly the same as [`Session.set`](#session_set)."],args:[{name:"key",type:"String",descr:"The key to set, eg, `selectedItem`"},{name:"value",type:"EJSON-able object or undefined",descr:"The new value for `key`"}]},Template.api.get={id:"session_get",name:"Session.get(key)",locus:"Client",descr:["Get the value of a session variable. If inside a [reactive computation](#reactivity), invalidate the computation the next time the value of the variable is changed by [`Session.set`](#session_set). This returns a clone of the session value, so if it's an object or an array, mutating the returned value has no effect on the value stored in the session."],args:[{name:"key",type:"String",descr:"The name of the session variable to return"}]},Template.api.equals={id:"session_equals",name:"Session.equals(key, value)",locus:"Client",descr:["Test if a session variable is equal to a value. If inside a [reactive computation](#reactivity), invalidate the computation the next time the variable changes to or from the value."],args:[{name:"key",type:"String",descr:"The name of the session variable to test"},{name:"value",type:"String, Number, Boolean, null, or undefined",descr:"The value to test against"}]},Template.api.httpcall={id:"http_call",name:"HTTP.call(method, url [, options] [, asyncCallback])",locus:"Anywhere",descr:["Perform an outbound HTTP request."],args:[{name:"method",type:"String",descr:'The HTTP method to use: "`GET`", "`POST`", "`PUT`", or "`DELETE`".'},{name:"url",type:"String",descr:"The URL to retrieve."},{name:"asyncCallback",type:"Function",descr:"Optional callback.  If passed, the method runs asynchronously, instead of synchronously, and calls asyncCallback.  On the client, this callback is required."}],options:[{name:"content",type:"String",descr:"String to use as the HTTP request body."},{name:"data",type:"Object",descr:"JSON-able object to stringify and use as the HTTP request body. Overwrites `content`."},{name:"query",type:"String",descr:"Query string to go in the URL. Overwrites any query string in `url`."},{name:"params",type:"Object",descr:"Dictionary of request parameters to be encoded and placed in the URL (for GETs) or request body (for POSTs).  If `content` or `data` is specified, `params` will always be placed in the URL."},{name:"auth",type:"String",descr:'HTTP basic authentication string of the form `"username:password"`'},{name:"headers",type:"Object",descr:"Dictionary of strings, headers to add to the HTTP request."},{name:"timeout",type:"Number",descr:"Maximum time in milliseconds to wait for the request before failing.  There is no timeout by default."},{name:"followRedirects",type:"Boolean",descr:"If true, transparently follow HTTP redirects.  Cannot be set to false on the client."}]},Template.api.http_get={id:"http_get",name:"HTTP.get(url, [options], [asyncCallback])",locus:"Anywhere",descr:['Send an HTTP GET request.  Equivalent to `HTTP.call("GET", ...)`.']},Template.api.http_post={id:"http_post",name:"HTTP.post(url, [options], [asyncCallback])",locus:"Anywhere",descr:['Send an HTTP POST request.  Equivalent to `HTTP.call("POST", ...)`.']},Template.api.http_put={id:"http_put",name:"HTTP.put(url, [options], [asyncCallback])",locus:"Anywhere",descr:['Send an HTTP PUT request.  Equivalent to `HTTP.call("PUT", ...)`.']},Template.api.http_del={id:"http_del",name:"HTTP.del(url, [options], [asyncCallback])",locus:"Anywhere",descr:['Send an HTTP DELETE request.  Equivalent to `HTTP.call("DELETE", ...)`.  (Named `del` to avoid conflict with JavaScript\'s `delete`.)']},Template.api.template_call={id:"template_call",name:"Template.<em>myTemplate</em>([data])",locus:"Client",descr:["Call a template function by name to produce HTML."],args:[{name:"data",type:"Object",descr:"Optional. The data context object with which to call the template."}]},Template.api.template_rendered={id:"template_rendered",name:"Template.<em>myTemplate</em>.rendered = function ( ) { ... }",locus:"Client",descr:["Provide a callback when an instance of a template is rendered."]},Template.api.template_created={id:"template_created",name:"Template.<em>myTemplate</em>.created = function ( ) { ... }",locus:"Client",descr:["Provide a callback when an instance of a template is created."]},Template.api.template_destroyed={id:"template_destroyed",name:"Template.<em>myTemplate</em>.destroyed = function ( ) { ... }",locus:"Client",descr:["Provide a callback when an instance of a template is destroyed."]},Template.api.template_events={id:"template_events",name:"Template.<em>myTemplate</em>.events(eventMap)",locus:"Client",descr:["Specify event handlers for this template."],args:[{name:"eventMap",type:"Event map",type_link:"eventmaps",descr:"Event handlers to associate with this template."}]},Template.api.template_helpers={id:"template_helpers",name:"Template.<em>myTemplate</em>.helpers(helpers)",locus:"Client",descr:["Specify template helpers available to this template."],args:[{name:"helpers",type:"Object",descr:"Dictionary of helper functions by name."}]},Template.api.template_preserve={id:"template_preserve",name:"Template.<em>myTemplate</em>.preserve(selectors)",locus:"Client",descr:["Specify rules for preserving individual DOM elements on re-render."],args:[{name:"selectors",type:"Array or Object",descr:"Array of CSS selectors that each match at most one element, such as `['.thing1', '.thing2']`, or, alternatively, a dictionary of selectors and node-labeling functions (see below)."}]},Template.api.template_findAll={id:"template_findAll",name:"<em>this</em>.findAll(selector)",locus:"Client",descr:["Find all elements matching `selector` in this template instance."],args:[{name:"selector",type:"String",descr:"The CSS selector to match, scoped to the template contents."}]},Template.api.template_find={id:"template_find",name:"<em>this</em>.find(selector)",locus:"Client",descr:["Find one element matching `selector` in this template instance."],args:[{name:"selector",type:"String",descr:"The CSS selector to match, scoped to the template contents."}]},Template.api.template_firstNode={id:"template_firstNode",name:"<em>this</em>.firstNode",locus:"Client",descr:["The first top-level DOM node in this template instance."]},Template.api.template_lastNode={id:"template_lastNode",name:"<em>this</em>.lastNode",locus:"Client",descr:["The last top-level DOM node in this template instance."]},Template.api.template_data={id:"template_data",name:"<em>this</em>.data",locus:"Client",descr:["The data context of this instance's latest invocation."]};
var e=function(e){return"[RFC5322](http://tools.ietf.org/html/rfc5322) "+e};Template.api.email_send={id:"email_send",name:"Email.send(options)",locus:"Server",descr:["Send an email. Throws an `Error` on failure to contact mail server or if mail server returns an error."],options:[{name:"from",type:"String",descr:e('"From:" address (required)')},{name:"to",type:"String or Array of strings",descr:e('"To:" address[es]')},{name:"cc",type:"String or Array of strings",descr:e('"Cc:" address[es]')},{name:"bcc",type:"String or Array of strings",descr:e('"Bcc:" address[es]')},{name:"replyTo",type:"String or Array of strings",descr:e('"Reply-To:" address[es]')},{name:"subject",type:"String",descr:e('"Subject:" line')},{name:"text",type:"String",descr:e("mail body (plain text)")},{name:"html",type:"String",descr:e("mail body (HTML)")},{name:"headers",type:"Object",descr:e("custom headers (dictionary)")}]},Template.api.assets_getText={id:"assets_getText",name:"Assets.getText(assetPath, [asyncCallback])",locus:"Server",descr:["Retrieve the contents of the static server asset as a UTF8-encoded string."],args:[{name:"assetPath",type:"String",descr:"The path of the asset, relative to the application's `private` subdirectory."},{name:"asyncCallback",type:"Function",descr:"Optional callback, which is called asynchronously with the error or result after the function is complete. If not provided, the function runs synchronously."}]},Template.api.assets_getBinary={id:"assets_getBinary",name:"Assets.getBinary(assetPath, [asyncCallback])",locus:"Server",descr:["Retrieve the contents of the static server asset as an [EJSON Binary](#ejson_new_binary)."],args:[{name:"assetPath",type:"String",descr:"The path of the asset, relative to the application's `private` subdirectory."},{name:"asyncCallback",type:"Function",descr:"Optional callback, which is called asynchronously with the error or result after the function is complete. If not provided, the function runs synchronously."}]}}(),function(){Template.headline.release=function(){return Meteor.release||"(checkout)"},Meteor.startup(function(){mixpanel.track("docs");var e=function(){return $("html, body").stop()},t=[];_.each($("#main h1, #main h2, #main h3"),function(e){var n=(e.getAttribute("class")||"").split(/\s+/);-1===_.indexOf(n,"nosection")&&t.push(e)});for(var n=0;n<t.length;n++){var r=(t[n].getAttribute("class")||"").split(/\s+/);-1===_.indexOf(r,"nosection")&&(t[n].prev=t[n-1]||t[n],t[n].next=t[n+1]||t[n],$(t[n]).waypoint({offset:30}))}var o=document.location.hash.substr(1)||t[0].id;Session.set("section",o),o&&Meteor.setTimeout(function(){var t=$("#"+o);t.length&&e().scrollTop(t.offset().top)},0);var a=!1,i=null;$("h1, h2, h3").waypoint(function(e,t){if(!a){var n="up"===t?this.prev:this;n.id&&(i&&Meteor.clearTimeout(i),i=Meteor.setTimeout(function(){Session.set("section",n.id)},200))}}),window.onhashchange=function(){s(location.hash)};var s=function(t){$(t).length&&(a=!0,Session.set("section",t.substr(1)),e().animate({scrollTop:$(t).offset().top},500,"swing",function(){window.location.hash=t,a=!1}))};$("#main, #nav").delegate("a[href^='#']","click",function(e){e.preventDefault();var t=$(this).attr("href");s(t),mixpanel.track("docs_navigate_"+t)}),$('a:not([href^="#"])').attr("target","_blank")});var e=[{name:"Meteor "+Template.headline.release(),id:"top"},["Quick start","Seven principles","Resources"],"Concepts",["What is Meteor?","Structuring your app","Data and security","Reactivity","Live HTML","Templates","Using packages","Namespacing","Deploying","Writing packages"],"API",["Core",["Meteor.isClient","Meteor.isServer","Meteor.startup","Meteor.absoluteUrl","Meteor.settings","Meteor.release"],"Publish and subscribe",["Meteor.publish",[{instance:"this",name:"userId",id:"publish_userId"},{instance:"this",name:"added",id:"publish_added"},{instance:"this",name:"changed",id:"publish_changed"},{instance:"this",name:"removed",id:"publish_removed"},{instance:"this",name:"ready",id:"publish_ready"},{instance:"this",name:"onStop",id:"publish_onstop"},{instance:"this",name:"error",id:"publish_error"},{instance:"this",name:"stop",id:"publish_stop"},{instance:"this",name:"connection",id:"publish_connection"}],"Meteor.subscribe"],{name:"Methods",id:"methods_header"},["Meteor.methods",[{instance:"this",name:"userId",id:"method_userId"},{instance:"this",name:"setUserId",id:"method_setUserId"},{instance:"this",name:"isSimulation",id:"method_issimulation"},{instance:"this",name:"unblock",id:"method_unblock"},{instance:"this",name:"connection",id:"method_connection"}],"Meteor.Error","Meteor.call","Meteor.apply"],{name:"Server connections",id:"connections"},["Meteor.status","Meteor.reconnect","Meteor.disconnect","Meteor.onConnection","DDP.connect"],{name:"Collections",id:"collections"},["Meteor.Collection",[{instance:"collection",name:"find"},{instance:"collection",name:"findOne"},{instance:"collection",name:"insert"},{instance:"collection",name:"update"},{instance:"collection",name:"upsert"},{instance:"collection",name:"remove"},{instance:"collection",name:"allow"},{instance:"collection",name:"deny"}],"Meteor.Collection.Cursor",[{instance:"cursor",name:"forEach"},{instance:"cursor",name:"map"},{instance:"cursor",name:"fetch"},{instance:"cursor",name:"count"},{instance:"cursor",name:"rewind"},{instance:"cursor",name:"observe"},{instance:"cursor",name:"observeChanges",id:"observe_changes"}],{type:"spacer"},{name:"Meteor.Collection.ObjectID",id:"collection_object_id"},{type:"spacer"},{name:"Selectors",style:"noncode"},{name:"Modifiers",style:"noncode"},{name:"Sort specifiers",style:"noncode"},{name:"Field specifiers",style:"noncode"}],"Session",["Session.set",{name:"Session.setDefault",id:"session_set_default"},"Session.get","Session.equals"],{name:"Accounts",id:"accounts_api"},["Meteor.user","Meteor.userId","Meteor.users","Meteor.loggingIn","Meteor.logout","Meteor.logoutOtherClients","Meteor.loginWithPassword",{name:"Meteor.loginWith<Service>",id:"meteor_loginwithexternalservice"},{type:"spacer"},{name:"{{currentUser}}",id:"template_currentuser"},{name:"{{loggingIn}}",id:"template_loggingin"},{type:"spacer"},"Accounts.config","Accounts.ui.config","Accounts.validateNewUser","Accounts.onCreateUser"],{name:"Passwords",id:"accounts_passwords"},["Accounts.createUser","Accounts.changePassword","Accounts.forgotPassword","Accounts.resetPassword","Accounts.setPassword","Accounts.verifyEmail",{type:"spacer"},"Accounts.sendResetPasswordEmail","Accounts.sendEnrollmentEmail","Accounts.sendVerificationEmail","Accounts.emailTemplates"],{name:"Templates",id:"templates_api"},[{prefix:"Template",instance:"myTemplate",id:"template_call"},[{name:"rendered",id:"template_rendered"},{name:"created",id:"template_created"},{name:"destroyed",id:"template_destroyed"},{name:"events",id:"template_events"},{name:"helpers",id:"template_helpers"},{name:"preserve",id:"template_preserve"}],{name:"Template instances",id:"template_inst"},[{instance:"this",name:"findAll",id:"template_findAll"},{instance:"this",name:"find",id:"template_find"},{instance:"this",name:"firstNode",id:"template_firstNode"},{instance:"this",name:"lastNode",id:"template_lastNode"},{instance:"this",name:"data",id:"template_data"}],"Meteor.render","Meteor.renderList",{type:"spacer"},{name:"Event maps",style:"noncode"},{name:"Constant regions",style:"noncode",id:"constant"},{name:"Reactivity isolation",style:"noncode",id:"isolate"}],"Match",["check","Match.test",{name:"Match patterns",style:"noncode"}],"Timers",["Meteor.setTimeout","Meteor.setInterval","Meteor.clearTimeout","Meteor.clearInterval"],"Deps",["Deps.autorun","Deps.flush","Deps.nonreactive","Deps.active","Deps.currentComputation","Deps.onInvalidate","Deps.afterFlush","Deps.Computation",[{instance:"computation",name:"stop",id:"computation_stop"},{instance:"computation",name:"invalidate",id:"computation_invalidate"},{instance:"computation",name:"onInvalidate",id:"computation_oninvalidate"},{instance:"computation",name:"stopped",id:"computation_stopped"},{instance:"computation",name:"invalidated",id:"computation_invalidated"},{instance:"computation",name:"firstRun",id:"computation_firstrun"}],"Deps.Dependency",[{instance:"dependency",name:"changed",id:"dependency_changed"},{instance:"dependency",name:"depend",id:"dependency_depend"},{instance:"dependency",name:"hasDependents",id:"dependency_hasdependents"}]],{name:"EJSON",id:"ejson"},[{name:"EJSON.parse",id:"ejson_parse"},{name:"EJSON.stringify",id:"ejson_stringify"},{name:"EJSON.fromJSONValue",id:"ejson_from_json_value"},{name:"EJSON.toJSONValue",id:"ejson_to_json_value"},{name:"EJSON.equals",id:"ejson_equals"},{name:"EJSON.clone",id:"ejson_clone"},{name:"EJSON.newBinary",id:"ejson_new_binary"},{name:"EJSON.isBinary",id:"ejson_is_binary"},{name:"EJSON.addType",id:"ejson_add_type"},[{instance:"instance",id:"ejson_type_typeName",name:"typeName"},{instance:"instance",id:"ejson_type_toJSONValue",name:"toJSONValue"},{instance:"instance",id:"ejson_type_clone",name:"clone"},{instance:"instance",id:"ejson_type_equals",name:"equals"}]],"HTTP",["HTTP.call",{name:"HTTP.get"},{name:"HTTP.post"},{name:"HTTP.put"},{name:"HTTP.del"}],"Email",["Email.send"],{name:"Assets",id:"assets"},[{name:"Assets.getText",id:"assets_getText"},{name:"Assets.getBinary",id:"assets_getBinary"}]],"Packages",[["accounts-ui","amplify","appcache","audit-argument-checks","backbone","bootstrap","browser-policy","coffeescript","d3","force-ssl","jquery","less","random","spiderable","stylus","showdown","underscore"]],"Command line",[["meteor help","meteor run","meteor create","meteor deploy","meteor logs","meteor update","meteor add","meteor remove","meteor list","meteor mongo","meteor reset","meteor bundle"]]],t=function(e){var t=e.toLowerCase().replace(/[^a-z0-9_,.]/g,"").replace(/[,.]/g,"_");return t};Template.nav.sections=function(){var n=[],r=function(e,o){_.each(e,function(e){e instanceof Array?r(e,o+1):("string"==typeof e&&(e={name:e}),n.push(_.extend({type:"section",id:e.name&&t(e.name)||void 0,depth:o,style:""},e)))})};return r(e,1),n},Template.nav.type=function(e){return this.type===e},Template.nav.maybe_current=function(){return Session.equals("section",this.id)?"current":""},Handlebars.registerHelper("warning",function(e){return Template.warning_helper(e(this))}),Handlebars.registerHelper("note",function(e){return Template.note_helper(e(this))}),Handlebars.registerHelper("dtdd",function(e,t){return t&&t.hash?t.hash.name=e:t=e,Template.dtdd_helper({descr:t.fn(this),name:t.hash.name,type:t.hash.type})}),Handlebars.registerHelper("better_markdown",function(e){var t=new Showdown.converter,n=e(this),r=/^\s{0,2}<(p|div|h[1-6]|blockquote|pre|table|dl|ol|ul|script|noscript|form|fieldset|iframe|math|ins|del)(?=\W)/gm,o=/<(\/?\w+)/g,a=0,i=[],s=[],c=function(e,t){var r=a;e.lastIndex=r;var o=e.exec(n),c=null;return o?(a=e.lastIndex,c=o[1]):a=n.length,(t?s:i).push(n.substring(r,a)),c};n=n.replace(/<(\/?\$.*?)>/g,"<!--$1-->"),n=n.replace(/<!--.*?-->/g,"\n\n$&\n\n");for(var l={},u=0,d=[];a<n.length;){var h=c(r,!1);if(h){for(d.push(h);d.length;){var p=c(o,!0);if(!p)throw new Error("Expected </"+d[d.length-1]+"> but found end of string");if("/"===p.charAt(0)){var f=p.substring(1),m=d.pop();if(m!==f)throw new Error(("Mismatched close tag, expected </"+m+"> but found </"+f+">: "+n.substr(a-50,50)+"{HERE}"+n.substr(a,50)).replace(/\n/g,"\\n"))}else d.push(p)}var g=s.join(""),y=g.indexOf(">")+1,v=g.lastIndexOf("<"),b=++u;l[b]=g.slice(y,v),i.push(g.slice(0,y),"!!!!HTML:"+b+"!!!!",g.slice(v)),s.length=0}}var w=i.join(""),_=t.makeHtml(w);return _=_.replace(/!!!!HTML:(.*?)!!!!/g,function(e,t){return l[t]}),_=_.replace(/<!--(\/?\$.*?)-->/g,"<$1>")}),Handlebars.registerHelper("dstache",function(){return"{{"}),Handlebars.registerHelper("tstache",function(){return"{{{"}),Handlebars.registerHelper("api_section",function(e,t){return Template.api_section_helper({name:t(this),id:e},!0)}),Handlebars.registerHelper("api_box_inline",function(e,t){return Template.api_box(_.extend(e,{body:t(this)}),!0)}),Template.api_box.bare=function(){return this.descr&&this.descr.length||this.args&&this.args.length||this.options&&this.options.length?"":"bareapi"}}();